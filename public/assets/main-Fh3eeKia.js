const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JsonSchemaForm-BHzkvUIy.js","assets/TextareaWidget-DHpUdi8y.js","assets/index-G1GiVdkg.js"])))=>i.map(i=>d[i]);
var _K=Object.defineProperty;var Ek=e=>{throw TypeError(e)};var CK=(e,t,n)=>t in e?_K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>CK(e,typeof t!="symbol"?t+"":t,n),Y2=(e,t,n)=>t.has(e)||Ek("Cannot "+n);var Y=(e,t,n)=>(Y2(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?Ek("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Be=(e,t,n,r)=>(Y2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),it=(e,t,n)=>(Y2(e,t,"access private method"),n);var Nk=(e,t,n,r)=>({set _(s){Be(e,t,s,n)},get _(){return Y(e,t,r)}});function OK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var C9e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var J2={exports:{}},Ep={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _k;function jK(){if(_k)return Ep;_k=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var a in s)a!=="key"&&(i[a]=s[a])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Ep.Fragment=t,Ep.jsx=n,Ep.jsxs=n,Ep}var Ck;function AK(){return Ck||(Ck=1,J2.exports=jK()),J2.exports}var m=AK(),X2={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function TK(){if(Ok)return gt;Ok=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(M){return M===null||typeof M!="object"?null:(M=h&&M[h]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function S(M,W,X){this.props=M,this.context=W,this.refs=x,this.updater=X||y}S.prototype.isReactComponent={},S.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=S.prototype;function _(M,W,X){this.props=M,this.context=W,this.refs=x,this.updater=X||y}var C=_.prototype=new N;C.constructor=_,v(C,S.prototype),C.isPureReactComponent=!0;var j=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function k(M,W,X,Q,oe,ae){return X=ae.ref,{$$typeof:e,type:M,key:W,ref:X!==void 0?X:null,props:ae}}function R(M,W){return k(M.type,W,void 0,void 0,void 0,M.props)}function F(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function z(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return W[X]})}var L=/\/+/g;function B(M,W){return typeof M=="object"&&M!==null&&M.key!=null?z(""+M.key):W.toString(36)}function H(){}function I(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,W,X,Q,oe){var ae=typeof M;(ae==="undefined"||ae==="boolean")&&(M=null);var fe=!1;if(M===null)fe=!0;else switch(ae){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(M.$$typeof){case e:case t:fe=!0;break;case f:return fe=M._init,V(fe(M._payload),W,X,Q,oe)}}if(fe)return oe=oe(M),fe=Q===""?"."+B(M,0):Q,j(oe)?(X="",fe!=null&&(X=fe.replace(L,"$&/")+"/"),V(oe,W,X,"",function(ve){return ve})):oe!=null&&(F(oe)&&(oe=R(oe,X+(oe.key==null||M&&M.key===oe.key?"":(""+oe.key).replace(L,"$&/")+"/")+fe)),W.push(oe)),1;fe=0;var le=Q===""?".":Q+":";if(j(M))for(var ue=0;ue<M.length;ue++)Q=M[ue],ae=le+B(Q,ue),fe+=V(Q,W,X,ae,oe);else if(ue=p(M),typeof ue=="function")for(M=ue.call(M),ue=0;!(Q=M.next()).done;)Q=Q.value,ae=le+B(Q,ue++),fe+=V(Q,W,X,ae,oe);else if(ae==="object"){if(typeof M.then=="function")return V(I(M),W,X,Q,oe);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return fe}function T(M,W,X){if(M==null)return M;var Q=[],oe=0;return V(M,Q,"","",function(ae){return W.call(X,ae,oe++)}),Q}function D(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var P=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function q(){}return gt.Children={map:T,forEach:function(M,W,X){T(M,function(){W.apply(this,arguments)},X)},count:function(M){var W=0;return T(M,function(){W++}),W},toArray:function(M){return T(M,function(W){return W})||[]},only:function(M){if(!F(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},gt.Component=S,gt.Fragment=n,gt.Profiler=s,gt.PureComponent=_,gt.StrictMode=r,gt.Suspense=c,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,gt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return A.H.useMemoCache(M)}},gt.cache=function(M){return function(){return M.apply(null,arguments)}},gt.cloneElement=function(M,W,X){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Q=v({},M.props),oe=M.key,ae=void 0;if(W!=null)for(fe in W.ref!==void 0&&(ae=void 0),W.key!==void 0&&(oe=""+W.key),W)!$.call(W,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&W.ref===void 0||(Q[fe]=W[fe]);var fe=arguments.length-2;if(fe===1)Q.children=X;else if(1<fe){for(var le=Array(fe),ue=0;ue<fe;ue++)le[ue]=arguments[ue+2];Q.children=le}return k(M.type,oe,void 0,void 0,ae,Q)},gt.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:i,_context:M},M},gt.createElement=function(M,W,X){var Q,oe={},ae=null;if(W!=null)for(Q in W.key!==void 0&&(ae=""+W.key),W)$.call(W,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(oe[Q]=W[Q]);var fe=arguments.length-2;if(fe===1)oe.children=X;else if(1<fe){for(var le=Array(fe),ue=0;ue<fe;ue++)le[ue]=arguments[ue+2];oe.children=le}if(M&&M.defaultProps)for(Q in fe=M.defaultProps,fe)oe[Q]===void 0&&(oe[Q]=fe[Q]);return k(M,ae,void 0,void 0,null,oe)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(M){return{$$typeof:a,render:M}},gt.isValidElement=F,gt.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:D}},gt.memo=function(M,W){return{$$typeof:u,type:M,compare:W===void 0?null:W}},gt.startTransition=function(M){var W=A.T,X={};A.T=X;try{var Q=M(),oe=A.S;oe!==null&&oe(X,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(q,P)}catch(ae){P(ae)}finally{A.T=W}},gt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},gt.use=function(M){return A.H.use(M)},gt.useActionState=function(M,W,X){return A.H.useActionState(M,W,X)},gt.useCallback=function(M,W){return A.H.useCallback(M,W)},gt.useContext=function(M){return A.H.useContext(M)},gt.useDebugValue=function(){},gt.useDeferredValue=function(M,W){return A.H.useDeferredValue(M,W)},gt.useEffect=function(M,W,X){var Q=A.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(M,W)},gt.useId=function(){return A.H.useId()},gt.useImperativeHandle=function(M,W,X){return A.H.useImperativeHandle(M,W,X)},gt.useInsertionEffect=function(M,W){return A.H.useInsertionEffect(M,W)},gt.useLayoutEffect=function(M,W){return A.H.useLayoutEffect(M,W)},gt.useMemo=function(M,W){return A.H.useMemo(M,W)},gt.useOptimistic=function(M,W){return A.H.useOptimistic(M,W)},gt.useReducer=function(M,W,X){return A.H.useReducer(M,W,X)},gt.useRef=function(M){return A.H.useRef(M)},gt.useState=function(M){return A.H.useState(M)},gt.useSyncExternalStore=function(M,W,X){return A.H.useSyncExternalStore(M,W,X)},gt.useTransition=function(){return A.H.useTransition()},gt.version="19.1.0",gt}var jk;function Xh(){return jk||(jk=1,X2.exports=TK()),X2.exports}var w=Xh();const je=Zi(w),D8=OK({__proto__:null,default:je},[w]);var K2={exports:{}},Np={},Q2={exports:{}},Z2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function $K(){return Ak||(Ak=1,function(e){function t(T,D){var P=T.length;T.push(D);e:for(;0<P;){var q=P-1>>>1,M=T[q];if(0<s(M,D))T[q]=D,T[P]=M,P=q;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],P=T.pop();if(P!==D){T[0]=P;e:for(var q=0,M=T.length,W=M>>>1;q<W;){var X=2*(q+1)-1,Q=T[X],oe=X+1,ae=T[oe];if(0>s(Q,P))oe<M&&0>s(ae,Q)?(T[q]=ae,T[oe]=P,q=oe):(T[q]=Q,T[X]=P,q=X);else if(oe<M&&0>s(ae,P))T[q]=ae,T[oe]=P,q=oe;else break e}}return D}function s(T,D){var P=T.sortIndex-D.sortIndex;return P!==0?P:T.id-D.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,h=null,p=3,y=!1,v=!1,x=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function j(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function A(T){if(x=!1,j(T),!v)if(n(c)!==null)v=!0,$||($=!0,B());else{var D=n(u);D!==null&&V(A,D.startTime-T)}}var $=!1,k=-1,R=5,F=-1;function z(){return S?!0:!(e.unstable_now()-F<R)}function L(){if(S=!1,$){var T=e.unstable_now();F=T;var D=!0;try{e:{v=!1,x&&(x=!1,_(k),k=-1),y=!0;var P=p;try{t:{for(j(T),h=n(c);h!==null&&!(h.expirationTime>T&&z());){var q=h.callback;if(typeof q=="function"){h.callback=null,p=h.priorityLevel;var M=q(h.expirationTime<=T);if(T=e.unstable_now(),typeof M=="function"){h.callback=M,j(T),D=!0;break t}h===n(c)&&r(c),j(T)}else r(c);h=n(c)}if(h!==null)D=!0;else{var W=n(u);W!==null&&V(A,W.startTime-T),D=!1}}break e}finally{h=null,p=P,y=!1}D=void 0}}finally{D?B():$=!1}}}var B;if(typeof C=="function")B=function(){C(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,I=H.port2;H.port1.onmessage=L,B=function(){I.postMessage(null)}}else B=function(){N(L,0)};function V(T,D){k=N(function(){T(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var P=p;p=D;try{return T()}finally{p=P}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var P=p;p=T;try{return D()}finally{p=P}},e.unstable_scheduleCallback=function(T,D,P){var q=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?q+P:q):P=q,T){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=P+M,T={id:f++,callback:D,priorityLevel:T,startTime:P,expirationTime:M,sortIndex:-1},P>q?(T.sortIndex=P,t(u,T),n(c)===null&&T===n(u)&&(x?(_(k),k=-1):x=!0,V(A,P-q))):(T.sortIndex=M,t(c,T),v||y||(v=!0,$||($=!0,B()))),T},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(T){var D=p;return function(){var P=p;p=D;try{return T.apply(this,arguments)}finally{p=P}}}}(Z2)),Z2}var Tk;function RK(){return Tk||(Tk=1,Q2.exports=$K()),Q2.exports}var eN={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k;function kK(){if($k)return xr;$k=1;var e=Xh();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(c,u,null,f)},xr.flushSync=function(c){var u=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=u,r.p=f,r.d.f()}},xr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},xr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},xr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},xr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=a(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},xr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},xr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=a(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},xr.requestFormReset=function(c){r.d.r(c)},xr.unstable_batchedUpdates=function(c,u){return c(u)},xr.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},xr.useFormStatus=function(){return o.H.useHostTransitionStatus()},xr.version="19.1.0",xr}var Rk;function L8(){if(Rk)return eN.exports;Rk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eN.exports=kK(),eN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function MK(){if(kk)return Np;kk=1;var e=RK(),t=Xh(),n=L8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,g=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(g=d.return),l=d.return;while(l)}return d.tag===3?g:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function a(l){if(i(l)!==l)throw Error(r(188))}function c(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var g=l,b=d;;){var E=g.return;if(E===null)break;var O=E.alternate;if(O===null){if(b=E.return,b!==null){g=b;continue}break}if(E.child===O.child){for(O=E.child;O;){if(O===g)return a(E),l;if(O===b)return a(E),d;O=O.sibling}throw Error(r(188))}if(g.return!==b.return)g=E,b=O;else{for(var U=!1,J=E.child;J;){if(J===g){U=!0,g=E,b=O;break}if(J===b){U=!0,b=E,g=O;break}J=J.sibling}if(!U){for(J=O.child;J;){if(J===g){U=!0,g=O,b=E;break}if(J===b){U=!0,b=O,g=E;break}J=J.sibling}if(!U)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?l:d}function u(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=u(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var H=Symbol.for("react.client.reference");function I(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===H?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case $:return"SuspenseList";case F:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case C:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case j:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:I(l.type)||"Memo";case R:d=l._payload,l=l._init;try{return I(l(d))}catch{}}return null}var V=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},q=[],M=-1;function W(l){return{current:l}}function X(l){0>M||(l.current=q[M],q[M]=null,M--)}function Q(l,d){M++,q[M]=l.current,l.current=d}var oe=W(null),ae=W(null),fe=W(null),le=W(null);function ue(l,d){switch(Q(fe,d),Q(ae,l),Q(oe,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?K5(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=K5(d),l=Q5(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(oe),Q(oe,l)}function ve(){X(oe),X(ae),X(fe)}function _e(l){l.memoizedState!==null&&Q(le,l);var d=oe.current,g=Q5(d,l.type);d!==g&&(Q(ae,l),Q(oe,g))}function ke(l){ae.current===l&&(X(oe),X(ae)),le.current===l&&(X(le),bp._currentValue=P)}var Oe=Object.prototype.hasOwnProperty,$e=e.unstable_scheduleCallback,Re=e.unstable_cancelCallback,qe=e.unstable_shouldYield,et=e.unstable_requestPaint,Ce=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,Ie=e.unstable_ImmediatePriority,G=e.unstable_UserBlockingPriority,re=e.unstable_NormalPriority,te=e.unstable_LowPriority,he=e.unstable_IdlePriority,se=e.log,ne=e.unstable_setDisableYieldValue,ce=null,xe=null;function Ee(l){if(typeof se=="function"&&ne(l),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(ce,l)}catch{}}var We=Math.clz32?Math.clz32:io,Vt=Math.log,wt=Math.LN2;function io(l){return l>>>=0,l===0?32:31-(Vt(l)/wt|0)|0}var Ut=256,hn=4194304;function ur(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function xi(l,d,g){var b=l.pendingLanes;if(b===0)return 0;var E=0,O=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var J=b&134217727;return J!==0?(b=J&~O,b!==0?E=ur(b):(U&=J,U!==0?E=ur(U):g||(g=J&~l,g!==0&&(E=ur(g))))):(J=b&~O,J!==0?E=ur(J):U!==0?E=ur(U):g||(g=b&~l,g!==0&&(E=ur(g)))),E===0?0:d!==0&&d!==E&&(d&O)===0&&(O=E&-E,g=d&-d,O>=g||O===32&&(g&4194048)!==0)?d:E}function Bs(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function oo(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var l=Ut;return Ut<<=1,(Ut&4194048)===0&&(Ut=256),l}function Ad(){var l=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),l}function ol(l){for(var d=[],g=0;31>g;g++)d.push(l);return d}function zo(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function zs(l,d,g,b,E,O){var U=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var J=l.entanglements,ee=l.expirationTimes,pe=l.hiddenUpdates;for(g=U&~g;0<g;){var we=31-We(g),Ne=1<<we;J[we]=0,ee[we]=-1;var ye=pe[we];if(ye!==null)for(pe[we]=null,we=0;we<ye.length;we++){var be=ye[we];be!==null&&(be.lane&=-536870913)}g&=~Ne}b!==0&&Hc(l,b,0),O!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=O&~(U&~d))}function Hc(l,d,g){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-We(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|g&4194090}function _m(l,d){var g=l.entangledLanes|=d;for(l=l.entanglements;g;){var b=31-We(g),E=1<<b;E&d|l[b]&d&&(l[b]|=d),g&=~E}}function Wc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Gc(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function mn(){var l=D.p;return l!==0?l:(l=window.event,l===void 0?32:yk(l.type))}function wi(l,d){var g=D.p;try{return D.p=l,d()}finally{D.p=g}}var er=Math.random().toString(36).slice(2),an="__reactFiber$"+er,Ln="__reactProps$"+er,Si="__reactContainer$"+er,al="__reactEvents$"+er,Td="__reactListeners$"+er,Cm="__reactHandles$"+er,$d="__reactResources$"+er,Vo="__reactMarker$"+er;function Yc(l){delete l[an],delete l[Ln],delete l[al],delete l[Td],delete l[Cm]}function ht(l){var d=l[an];if(d)return d;for(var g=l.parentNode;g;){if(d=g[Si]||g[an]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(l=nk(l);l!==null;){if(g=l[an])return g;l=nk(l)}return d}l=g,g=l.parentNode}return null}function Tn(l){if(l=l[an]||l[Si]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function br(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Uo(l){var d=l[$d];return d||(d=l[$d]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Fn(l){l[Vo]=!0}var w0=new Set,S0={};function qo(l,d){ll(l,d),ll(l+"Capture",d)}function ll(l,d){for(S0[l]=d,l=0;l<d.length;l++)w0.add(d[l])}var E0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N0={},_0={};function US(l){return Oe.call(_0,l)?!0:Oe.call(N0,l)?!1:E0.test(l)?_0[l]=!0:(N0[l]=!0,!1)}function Rd(l,d,g){if(US(d))if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+g)}}function kd(l,d,g){if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+g)}}function Ei(l,d,g,b){if(b===null)l.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(d,g,""+b)}}var Om,jm;function cl(l){if(Om===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);Om=d&&d[1]||"",jm=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Om+l+jm}var Am=!1;function Tm(l,d){if(!l||Am)return"";Am=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(be){var ye=be}Reflect.construct(l,[],Ne)}else{try{Ne.call()}catch(be){ye=be}l.call(Ne.prototype)}}else{try{throw Error()}catch(be){ye=be}(Ne=l())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(be){if(be&&ye&&typeof be.stack=="string")return[be.stack,ye.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=b.DetermineComponentFrameRoot(),U=O[0],J=O[1];if(U&&J){var ee=U.split(`
`),pe=J.split(`
`);for(E=b=0;b<ee.length&&!ee[b].includes("DetermineComponentFrameRoot");)b++;for(;E<pe.length&&!pe[E].includes("DetermineComponentFrameRoot");)E++;if(b===ee.length||E===pe.length)for(b=ee.length-1,E=pe.length-1;1<=b&&0<=E&&ee[b]!==pe[E];)E--;for(;1<=b&&0<=E;b--,E--)if(ee[b]!==pe[E]){if(b!==1||E!==1)do if(b--,E--,0>E||ee[b]!==pe[E]){var we=`
`+ee[b].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=b&&0<=E);break}}}finally{Am=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?cl(g):""}function qS(l){switch(l.tag){case 26:case 27:case 5:return cl(l.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 15:return Tm(l.type,!1);case 11:return Tm(l.type.render,!1);case 1:return Tm(l.type,!0);case 31:return cl("Activity");default:return""}}function C0(l){try{var d="";do d+=qS(l),l=l.return;while(l);return d}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Gr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function O0(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Md(l){var d=O0(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,O=g.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(U){b=""+U,O.call(this,U)}}),Object.defineProperty(l,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(U){b=""+U},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Id(l){l._valueTracker||(l._valueTracker=Md(l))}function j0(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return l&&(b=O0(l)?l.checked?"true":"false":l.value),l=b,l!==g?(d.setValue(l),!0):!1}function ul(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var HS=/[\n"\\]/g;function Yr(l){return l.replace(HS,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Pd(l,d,g,b,E,O,U,J){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),d!=null?U==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Gr(d)):l.value!==""+Gr(d)&&(l.value=""+Gr(d)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),d!=null?WS(l,U,Gr(d)):g!=null?WS(l,U,Gr(g)):b!=null&&l.removeAttribute("value"),E==null&&O!=null&&(l.defaultChecked=!!O),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?l.name=""+Gr(J):l.removeAttribute("name")}function Y3(l,d,g,b,E,O,U,J){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),d!=null||g!=null){if(!(O!=="submit"&&O!=="reset"||d!=null))return;g=g!=null?""+Gr(g):"",d=d!=null?""+Gr(d):g,J||d===l.value||(l.value=d),l.defaultValue=d}b=b??E,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=J?l.checked:!!b,l.defaultChecked=!!b,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function WS(l,d,g){d==="number"&&ul(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Dd(l,d,g,b){if(l=l.options,d){d={};for(var E=0;E<g.length;E++)d["$"+g[E]]=!0;for(g=0;g<l.length;g++)E=d.hasOwnProperty("$"+l[g].value),l[g].selected!==E&&(l[g].selected=E),E&&b&&(l[g].defaultSelected=!0)}else{for(g=""+Gr(g),d=null,E=0;E<l.length;E++){if(l[E].value===g){l[E].selected=!0,b&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function J3(l,d,g){if(d!=null&&(d=""+Gr(d),d!==l.value&&(l.value=d),g==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=g!=null?""+Gr(g):""}function X3(l,d,g,b){if(d==null){if(b!=null){if(g!=null)throw Error(r(92));if(V(b)){if(1<b.length)throw Error(r(93));b=b[0]}g=b}g==null&&(g=""),d=g}g=Gr(d),l.defaultValue=g,b=l.textContent,b===g&&b!==""&&b!==null&&(l.value=b)}function Ld(l,d){if(d){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=d;return}}l.textContent=d}var SJ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function K3(l,d,g){var b=d.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,g):typeof g!="number"||g===0||SJ.has(d)?d==="float"?l.cssFloat=g:l[d]=(""+g).trim():l[d]=g+"px"}function Q3(l,d,g){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var E in d)b=d[E],d.hasOwnProperty(E)&&g[E]!==b&&K3(l,E,b)}else for(var O in d)d.hasOwnProperty(O)&&K3(l,O,d[O])}function GS(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EJ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NJ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function A0(l){return NJ.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var YS=null;function JS(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Fd=null,Bd=null;function Z3(l){var d=Tn(l);if(d&&(l=d.stateNode)){var g=l[Ln]||null;e:switch(l=d.stateNode,d.type){case"input":if(Pd(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),d=g.name,g.type==="radio"&&d!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Yr(""+d)+'"][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==l&&b.form===l.form){var E=b[Ln]||null;if(!E)throw Error(r(90));Pd(b,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<g.length;d++)b=g[d],b.form===l.form&&j0(b)}break e;case"textarea":J3(l,g.value,g.defaultValue);break e;case"select":d=g.value,d!=null&&Dd(l,!!g.multiple,d,!1)}}}var XS=!1;function e4(l,d,g){if(XS)return l(d,g);XS=!0;try{var b=l(d);return b}finally{if(XS=!1,(Fd!==null||Bd!==null)&&(mb(),Fd&&(d=Fd,l=Bd,Bd=Fd=null,Z3(d),l)))for(d=0;d<l.length;d++)Z3(l[d])}}function $m(l,d){var g=l.stateNode;if(g===null)return null;var b=g[Ln]||null;if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(r(231,d,typeof g));return g}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KS=!1;if(Ho)try{var Rm={};Object.defineProperty(Rm,"passive",{get:function(){KS=!0}}),window.addEventListener("test",Rm,Rm),window.removeEventListener("test",Rm,Rm)}catch{KS=!1}var dl=null,QS=null,T0=null;function t4(){if(T0)return T0;var l,d=QS,g=d.length,b,E="value"in dl?dl.value:dl.textContent,O=E.length;for(l=0;l<g&&d[l]===E[l];l++);var U=g-l;for(b=1;b<=U&&d[g-b]===E[O-b];b++);return T0=E.slice(l,1<b?1-b:void 0)}function $0(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function R0(){return!0}function n4(){return!1}function Jr(l){function d(g,b,E,O,U){this._reactName=g,this._targetInst=E,this.type=b,this.nativeEvent=O,this.target=U,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(g=l[J],this[J]=g?g(O):O[J]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?R0:n4,this.isPropagationStopped=n4,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=R0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=R0)},persist:function(){},isPersistent:R0}),d}var Jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k0=Jr(Jc),km=f({},Jc,{view:0,detail:0}),_J=Jr(km),ZS,eE,Mm,M0=f({},km,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nE,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Mm&&(Mm&&l.type==="mousemove"?(ZS=l.screenX-Mm.screenX,eE=l.screenY-Mm.screenY):eE=ZS=0,Mm=l),ZS)},movementY:function(l){return"movementY"in l?l.movementY:eE}}),r4=Jr(M0),CJ=f({},M0,{dataTransfer:0}),OJ=Jr(CJ),jJ=f({},km,{relatedTarget:0}),tE=Jr(jJ),AJ=f({},Jc,{animationName:0,elapsedTime:0,pseudoElement:0}),TJ=Jr(AJ),$J=f({},Jc,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),RJ=Jr($J),kJ=f({},Jc,{data:0}),s4=Jr(kJ),MJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DJ(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=PJ[l])?!!d[l]:!1}function nE(){return DJ}var LJ=f({},km,{key:function(l){if(l.key){var d=MJ[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=$0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?IJ[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nE,charCode:function(l){return l.type==="keypress"?$0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?$0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),FJ=Jr(LJ),BJ=f({},M0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i4=Jr(BJ),zJ=f({},km,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nE}),VJ=Jr(zJ),UJ=f({},Jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),qJ=Jr(UJ),HJ=f({},M0,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),WJ=Jr(HJ),GJ=f({},Jc,{newState:0,oldState:0}),YJ=Jr(GJ),JJ=[9,13,27,32],rE=Ho&&"CompositionEvent"in window,Im=null;Ho&&"documentMode"in document&&(Im=document.documentMode);var XJ=Ho&&"TextEvent"in window&&!Im,o4=Ho&&(!rE||Im&&8<Im&&11>=Im),a4=" ",l4=!1;function c4(l,d){switch(l){case"keyup":return JJ.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u4(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var zd=!1;function KJ(l,d){switch(l){case"compositionend":return u4(d);case"keypress":return d.which!==32?null:(l4=!0,a4);case"textInput":return l=d.data,l===a4&&l4?null:l;default:return null}}function QJ(l,d){if(zd)return l==="compositionend"||!rE&&c4(l,d)?(l=t4(),T0=QS=dl=null,zd=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return o4&&d.locale!=="ko"?null:d.data;default:return null}}var ZJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d4(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ZJ[l.type]:d==="textarea"}function f4(l,d,g,b){Fd?Bd?Bd.push(b):Bd=[b]:Fd=b,d=xb(d,"onChange"),0<d.length&&(g=new k0("onChange","change",null,g,b),l.push({event:g,listeners:d}))}var Pm=null,Dm=null;function eX(l){W5(l,0)}function I0(l){var d=br(l);if(j0(d))return l}function h4(l,d){if(l==="change")return d}var m4=!1;if(Ho){var sE;if(Ho){var iE="oninput"in document;if(!iE){var p4=document.createElement("div");p4.setAttribute("oninput","return;"),iE=typeof p4.oninput=="function"}sE=iE}else sE=!1;m4=sE&&(!document.documentMode||9<document.documentMode)}function g4(){Pm&&(Pm.detachEvent("onpropertychange",y4),Dm=Pm=null)}function y4(l){if(l.propertyName==="value"&&I0(Dm)){var d=[];f4(d,Dm,l,JS(l)),e4(eX,d)}}function tX(l,d,g){l==="focusin"?(g4(),Pm=d,Dm=g,Pm.attachEvent("onpropertychange",y4)):l==="focusout"&&g4()}function nX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return I0(Dm)}function rX(l,d){if(l==="click")return I0(d)}function sX(l,d){if(l==="input"||l==="change")return I0(d)}function iX(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var ms=typeof Object.is=="function"?Object.is:iX;function Lm(l,d){if(ms(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var g=Object.keys(l),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var E=g[b];if(!Oe.call(d,E)||!ms(l[E],d[E]))return!1}return!0}function b4(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function v4(l,d){var g=b4(l);l=0;for(var b;g;){if(g.nodeType===3){if(b=l+g.textContent.length,l<=d&&b>=d)return{node:g,offset:d-l};l=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=b4(g)}}function x4(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?x4(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function w4(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=ul(l.document);d instanceof l.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)l=d.contentWindow;else break;d=ul(l.document)}return d}function oE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var oX=Ho&&"documentMode"in document&&11>=document.documentMode,Vd=null,aE=null,Fm=null,lE=!1;function S4(l,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;lE||Vd==null||Vd!==ul(b)||(b=Vd,"selectionStart"in b&&oE(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Fm&&Lm(Fm,b)||(Fm=b,b=xb(aE,"onSelect"),0<b.length&&(d=new k0("onSelect","select",null,d,g),l.push({event:d,listeners:b}),d.target=Vd)))}function Xc(l,d){var g={};return g[l.toLowerCase()]=d.toLowerCase(),g["Webkit"+l]="webkit"+d,g["Moz"+l]="moz"+d,g}var Ud={animationend:Xc("Animation","AnimationEnd"),animationiteration:Xc("Animation","AnimationIteration"),animationstart:Xc("Animation","AnimationStart"),transitionrun:Xc("Transition","TransitionRun"),transitionstart:Xc("Transition","TransitionStart"),transitioncancel:Xc("Transition","TransitionCancel"),transitionend:Xc("Transition","TransitionEnd")},cE={},E4={};Ho&&(E4=document.createElement("div").style,"AnimationEvent"in window||(delete Ud.animationend.animation,delete Ud.animationiteration.animation,delete Ud.animationstart.animation),"TransitionEvent"in window||delete Ud.transitionend.transition);function Kc(l){if(cE[l])return cE[l];if(!Ud[l])return l;var d=Ud[l],g;for(g in d)if(d.hasOwnProperty(g)&&g in E4)return cE[l]=d[g];return l}var N4=Kc("animationend"),_4=Kc("animationiteration"),C4=Kc("animationstart"),aX=Kc("transitionrun"),lX=Kc("transitionstart"),cX=Kc("transitioncancel"),O4=Kc("transitionend"),j4=new Map,uE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uE.push("scrollEnd");function Ni(l,d){j4.set(l,d),qo(d,[l])}var A4=new WeakMap;function Vs(l,d){if(typeof l=="object"&&l!==null){var g=A4.get(l);return g!==void 0?g:(d={value:l,source:d,stack:C0(d)},A4.set(l,d),d)}return{value:l,source:d,stack:C0(d)}}var Us=[],qd=0,dE=0;function P0(){for(var l=qd,d=dE=qd=0;d<l;){var g=Us[d];Us[d++]=null;var b=Us[d];Us[d++]=null;var E=Us[d];Us[d++]=null;var O=Us[d];if(Us[d++]=null,b!==null&&E!==null){var U=b.pending;U===null?E.next=E:(E.next=U.next,U.next=E),b.pending=E}O!==0&&T4(g,E,O)}}function D0(l,d,g,b){Us[qd++]=l,Us[qd++]=d,Us[qd++]=g,Us[qd++]=b,dE|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function fE(l,d,g,b){return D0(l,d,g,b),L0(l)}function Hd(l,d){return D0(l,null,null,d),L0(l)}function T4(l,d,g){l.lanes|=g;var b=l.alternate;b!==null&&(b.lanes|=g);for(var E=!1,O=l.return;O!==null;)O.childLanes|=g,b=O.alternate,b!==null&&(b.childLanes|=g),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(E=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,E&&d!==null&&(E=31-We(g),l=O.hiddenUpdates,b=l[E],b===null?l[E]=[d]:b.push(d),d.lane=g|536870912),O):null}function L0(l){if(50<up)throw up=0,b2=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Wd={};function uX(l,d,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(l,d,g,b){return new uX(l,d,g,b)}function hE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Wo(l,d){var g=l.alternate;return g===null?(g=ps(l.tag,d,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=d,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,d=l.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function $4(l,d){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,d=g.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function F0(l,d,g,b,E,O){var U=0;if(b=l,typeof l=="function")hE(l)&&(U=1);else if(typeof l=="string")U=fK(l,g,oe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case F:return l=ps(31,g,d,E),l.elementType=F,l.lanes=O,l;case v:return Qc(g.children,E,O,d);case x:U=8,E|=24;break;case S:return l=ps(12,g,d,E|2),l.elementType=S,l.lanes=O,l;case A:return l=ps(13,g,d,E),l.elementType=A,l.lanes=O,l;case $:return l=ps(19,g,d,E),l.elementType=$,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:case C:U=10;break e;case _:U=9;break e;case j:U=11;break e;case k:U=14;break e;case R:U=16,b=null;break e}U=29,g=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ps(U,g,d,E),d.elementType=l,d.type=b,d.lanes=O,d}function Qc(l,d,g,b){return l=ps(7,l,b,d),l.lanes=g,l}function mE(l,d,g){return l=ps(6,l,null,d),l.lanes=g,l}function pE(l,d,g){return d=ps(4,l.children!==null?l.children:[],l.key,d),d.lanes=g,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Gd=[],Yd=0,B0=null,z0=0,qs=[],Hs=0,Zc=null,Go=1,Yo="";function eu(l,d){Gd[Yd++]=z0,Gd[Yd++]=B0,B0=l,z0=d}function R4(l,d,g){qs[Hs++]=Go,qs[Hs++]=Yo,qs[Hs++]=Zc,Zc=l;var b=Go;l=Yo;var E=32-We(b)-1;b&=~(1<<E),g+=1;var O=32-We(d)+E;if(30<O){var U=E-E%5;O=(b&(1<<U)-1).toString(32),b>>=U,E-=U,Go=1<<32-We(d)+E|g<<E|b,Yo=O+l}else Go=1<<O|g<<E|b,Yo=l}function gE(l){l.return!==null&&(eu(l,1),R4(l,1,0))}function yE(l){for(;l===B0;)B0=Gd[--Yd],Gd[Yd]=null,z0=Gd[--Yd],Gd[Yd]=null;for(;l===Zc;)Zc=qs[--Hs],qs[Hs]=null,Yo=qs[--Hs],qs[Hs]=null,Go=qs[--Hs],qs[Hs]=null}var jr=null,Nn=null,Ft=!1,tu=null,ao=!1,bE=Error(r(519));function nu(l){var d=Error(r(418,""));throw Vm(Vs(d,l)),bE}function k4(l){var d=l.stateNode,g=l.type,b=l.memoizedProps;switch(d[an]=l,d[Ln]=b,g){case"dialog":Ot("cancel",d),Ot("close",d);break;case"iframe":case"object":case"embed":Ot("load",d);break;case"video":case"audio":for(g=0;g<fp.length;g++)Ot(fp[g],d);break;case"source":Ot("error",d);break;case"img":case"image":case"link":Ot("error",d),Ot("load",d);break;case"details":Ot("toggle",d);break;case"input":Ot("invalid",d),Y3(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Id(d);break;case"select":Ot("invalid",d);break;case"textarea":Ot("invalid",d),X3(d,b.value,b.defaultValue,b.children),Id(d)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||d.textContent===""+g||b.suppressHydrationWarning===!0||X5(d.textContent,g)?(b.popover!=null&&(Ot("beforetoggle",d),Ot("toggle",d)),b.onScroll!=null&&Ot("scroll",d),b.onScrollEnd!=null&&Ot("scrollend",d),b.onClick!=null&&(d.onclick=wb),d=!0):d=!1,d||nu(l)}function M4(l){for(jr=l.return;jr;)switch(jr.tag){case 5:case 13:ao=!1;return;case 27:case 3:ao=!0;return;default:jr=jr.return}}function Bm(l){if(l!==jr)return!1;if(!Ft)return M4(l),Ft=!0,!1;var d=l.tag,g;if((g=d!==3&&d!==27)&&((g=d===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||M2(l.type,l.memoizedProps)),g=!g),g&&Nn&&nu(l),M4(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(d===0){Nn=Ci(l.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++;l=l.nextSibling}Nn=null}}else d===27?(d=Nn,Ol(l.type)?(l=L2,L2=null,Nn=l):Nn=d):Nn=jr?Ci(l.stateNode.nextSibling):null;return!0}function zm(){Nn=jr=null,Ft=!1}function I4(){var l=tu;return l!==null&&(Qr===null?Qr=l:Qr.push.apply(Qr,l),tu=null),l}function Vm(l){tu===null?tu=[l]:tu.push(l)}var vE=W(null),ru=null,Jo=null;function fl(l,d,g){Q(vE,d._currentValue),d._currentValue=g}function Xo(l){l._currentValue=vE.current,X(vE)}function xE(l,d,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===g)break;l=l.return}}function wE(l,d,g,b){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var O=E.dependencies;if(O!==null){var U=E.child;O=O.firstContext;e:for(;O!==null;){var J=O;O=E;for(var ee=0;ee<d.length;ee++)if(J.context===d[ee]){O.lanes|=g,J=O.alternate,J!==null&&(J.lanes|=g),xE(O.return,g,l),b||(U=null);break e}O=J.next}}else if(E.tag===18){if(U=E.return,U===null)throw Error(r(341));U.lanes|=g,O=U.alternate,O!==null&&(O.lanes|=g),xE(U,g,l),U=null}else U=E.child;if(U!==null)U.return=E;else for(U=E;U!==null;){if(U===l){U=null;break}if(E=U.sibling,E!==null){E.return=U.return,U=E;break}U=U.return}E=U}}function Um(l,d,g,b){l=null;for(var E=d,O=!1;E!==null;){if(!O){if((E.flags&524288)!==0)O=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var U=E.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var J=E.type;ms(E.pendingProps.value,U.value)||(l!==null?l.push(J):l=[J])}}else if(E===le.current){if(U=E.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(bp):l=[bp])}E=E.return}l!==null&&wE(d,l,g,b),d.flags|=262144}function V0(l){for(l=l.firstContext;l!==null;){if(!ms(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function su(l){ru=l,Jo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function vr(l){return P4(ru,l)}function U0(l,d){return ru===null&&su(l),P4(l,d)}function P4(l,d){var g=d._currentValue;if(d={context:d,memoizedValue:g,next:null},Jo===null){if(l===null)throw Error(r(308));Jo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Jo=Jo.next=d;return g}var dX=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(g,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(g){return g()})}},fX=e.unstable_scheduleCallback,hX=e.unstable_NormalPriority,Hn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function SE(){return{controller:new dX,data:new Map,refCount:0}}function qm(l){l.refCount--,l.refCount===0&&fX(hX,function(){l.controller.abort()})}var Hm=null,EE=0,Jd=0,Xd=null;function mX(l,d){if(Hm===null){var g=Hm=[];EE=0,Jd=_2(),Xd={status:"pending",value:void 0,then:function(b){g.push(b)}}}return EE++,d.then(D4,D4),d}function D4(){if(--EE===0&&Hm!==null){Xd!==null&&(Xd.status="fulfilled");var l=Hm;Hm=null,Jd=0,Xd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function pX(l,d){var g=[],b={status:"pending",value:null,reason:null,then:function(E){g.push(E)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var E=0;E<g.length;E++)(0,g[E])(d)},function(E){for(b.status="rejected",b.reason=E,E=0;E<g.length;E++)(0,g[E])(void 0)}),b}var L4=T.S;T.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&mX(l,d),L4!==null&&L4(l,d)};var iu=W(null);function NE(){var l=iu.current;return l!==null?l:rn.pooledCache}function q0(l,d){d===null?Q(iu,iu.current):Q(iu,d.pool)}function F4(){var l=NE();return l===null?null:{parent:Hn._currentValue,pool:l}}var Wm=Error(r(460)),B4=Error(r(474)),H0=Error(r(542)),_E={then:function(){}};function z4(l){return l=l.status,l==="fulfilled"||l==="rejected"}function W0(){}function V4(l,d,g){switch(g=l[g],g===void 0?l.push(d):g!==d&&(d.then(W0,W0),d=g),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,q4(l),l;default:if(typeof d.status=="string")d.then(W0,W0);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=b}},function(b){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,q4(l),l}throw Gm=d,Wm}}var Gm=null;function U4(){if(Gm===null)throw Error(r(459));var l=Gm;return Gm=null,l}function q4(l){if(l===Wm||l===H0)throw Error(r(483))}var hl=!1;function CE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function OE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ml(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function pl(l,d,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Wt&2)!==0){var E=b.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),b.pending=d,d=L0(l),T4(l,null,g),d}return D0(l,b,d,g),L0(l)}function Ym(l,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,g|=b,d.lanes=g,_m(l,g)}}function jE(l,d){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var E=null,O=null;if(g=g.firstBaseUpdate,g!==null){do{var U={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};O===null?E=O=U:O=O.next=U,g=g.next}while(g!==null);O===null?E=O=d:O=O.next=d}else E=O=d;g={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:O,shared:b.shared,callbacks:b.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=d:l.next=d,g.lastBaseUpdate=d}var AE=!1;function Jm(){if(AE){var l=Xd;if(l!==null)throw l}}function Xm(l,d,g,b){AE=!1;var E=l.updateQueue;hl=!1;var O=E.firstBaseUpdate,U=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var ee=J,pe=ee.next;ee.next=null,U===null?O=pe:U.next=pe,U=ee;var we=l.alternate;we!==null&&(we=we.updateQueue,J=we.lastBaseUpdate,J!==U&&(J===null?we.firstBaseUpdate=pe:J.next=pe,we.lastBaseUpdate=ee))}if(O!==null){var Ne=E.baseState;U=0,we=pe=ee=null,J=O;do{var ye=J.lane&-536870913,be=ye!==J.lane;if(be?(At&ye)===ye:(b&ye)===ye){ye!==0&&ye===Jd&&(AE=!0),we!==null&&(we=we.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var ut=l,lt=J;ye=d;var Xt=g;switch(lt.tag){case 1:if(ut=lt.payload,typeof ut=="function"){Ne=ut.call(Xt,Ne,ye);break e}Ne=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=lt.payload,ye=typeof ut=="function"?ut.call(Xt,Ne,ye):ut,ye==null)break e;Ne=f({},Ne,ye);break e;case 2:hl=!0}}ye=J.callback,ye!==null&&(l.flags|=64,be&&(l.flags|=8192),be=E.callbacks,be===null?E.callbacks=[ye]:be.push(ye))}else be={lane:ye,tag:J.tag,payload:J.payload,callback:J.callback,next:null},we===null?(pe=we=be,ee=Ne):we=we.next=be,U|=ye;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;be=J,J=be.next,be.next=null,E.lastBaseUpdate=be,E.shared.pending=null}}while(!0);we===null&&(ee=Ne),E.baseState=ee,E.firstBaseUpdate=pe,E.lastBaseUpdate=we,O===null&&(E.shared.lanes=0),El|=U,l.lanes=U,l.memoizedState=Ne}}function H4(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function W4(l,d){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)H4(g[l],d)}var Kd=W(null),G0=W(0);function G4(l,d){l=ra,Q(G0,l),Q(Kd,d),ra=l|d.baseLanes}function TE(){Q(G0,ra),Q(Kd,Kd.current)}function $E(){ra=G0.current,X(Kd),X(G0)}var gl=0,St=null,Yt=null,Bn=null,Y0=!1,Qd=!1,ou=!1,J0=0,Km=0,Zd=null,gX=0;function $n(){throw Error(r(321))}function RE(l,d){if(d===null)return!1;for(var g=0;g<d.length&&g<l.length;g++)if(!ms(l[g],d[g]))return!1;return!0}function kE(l,d,g,b,E,O){return gl=O,St=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,T.H=l===null||l.memoizedState===null?TR:$R,ou=!1,O=g(b,E),ou=!1,Qd&&(O=J4(d,g,b,E)),Y4(l),O}function Y4(l){T.H=tb;var d=Yt!==null&&Yt.next!==null;if(gl=0,Bn=Yt=St=null,Y0=!1,Km=0,Zd=null,d)throw Error(r(300));l===null||tr||(l=l.dependencies,l!==null&&V0(l)&&(tr=!0))}function J4(l,d,g,b){St=l;var E=0;do{if(Qd&&(Zd=null),Km=0,Qd=!1,25<=E)throw Error(r(301));if(E+=1,Bn=Yt=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}T.H=EX,O=d(g,b)}while(Qd);return O}function yX(){var l=T.H,d=l.useState()[0];return d=typeof d.then=="function"?Qm(d):d,l=l.useState()[0],(Yt!==null?Yt.memoizedState:null)!==l&&(St.flags|=1024),d}function ME(){var l=J0!==0;return J0=0,l}function IE(l,d,g){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~g}function PE(l){if(Y0){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Y0=!1}gl=0,Bn=Yt=St=null,Qd=!1,Km=J0=0,Zd=null}function Xr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?St.memoizedState=Bn=l:Bn=Bn.next=l,Bn}function zn(){if(Yt===null){var l=St.alternate;l=l!==null?l.memoizedState:null}else l=Yt.next;var d=Bn===null?St.memoizedState:Bn.next;if(d!==null)Bn=d,Yt=l;else{if(l===null)throw St.alternate===null?Error(r(467)):Error(r(310));Yt=l,l={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Bn===null?St.memoizedState=Bn=l:Bn=Bn.next=l}return Bn}function DE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qm(l){var d=Km;return Km+=1,Zd===null&&(Zd=[]),l=V4(Zd,l,d),d=St,(Bn===null?d.memoizedState:Bn.next)===null&&(d=d.alternate,T.H=d===null||d.memoizedState===null?TR:$R),l}function X0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Qm(l);if(l.$$typeof===C)return vr(l)}throw Error(r(438,String(l)))}function LE(l){var d=null,g=St.updateQueue;if(g!==null&&(d=g.memoCache),d==null){var b=St.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),g===null&&(g=DE(),St.updateQueue=g),g.memoCache=d,g=d.data[d.index],g===void 0)for(g=d.data[d.index]=Array(l),b=0;b<l;b++)g[b]=z;return d.index++,g}function Ko(l,d){return typeof d=="function"?d(l):d}function K0(l){var d=zn();return FE(d,Yt,l)}function FE(l,d,g){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=g;var E=l.baseQueue,O=b.pending;if(O!==null){if(E!==null){var U=E.next;E.next=O.next,O.next=U}d.baseQueue=E=O,b.pending=null}if(O=l.baseState,E===null)l.memoizedState=O;else{d=E.next;var J=U=null,ee=null,pe=d,we=!1;do{var Ne=pe.lane&-536870913;if(Ne!==pe.lane?(At&Ne)===Ne:(gl&Ne)===Ne){var ye=pe.revertLane;if(ye===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ne===Jd&&(we=!0);else if((gl&ye)===ye){pe=pe.next,ye===Jd&&(we=!0);continue}else Ne={lane:0,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ee===null?(J=ee=Ne,U=O):ee=ee.next=Ne,St.lanes|=ye,El|=ye;Ne=pe.action,ou&&g(O,Ne),O=pe.hasEagerState?pe.eagerState:g(O,Ne)}else ye={lane:Ne,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ee===null?(J=ee=ye,U=O):ee=ee.next=ye,St.lanes|=Ne,El|=Ne;pe=pe.next}while(pe!==null&&pe!==d);if(ee===null?U=O:ee.next=J,!ms(O,l.memoizedState)&&(tr=!0,we&&(g=Xd,g!==null)))throw g;l.memoizedState=O,l.baseState=U,l.baseQueue=ee,b.lastRenderedState=O}return E===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function BE(l){var d=zn(),g=d.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=l;var b=g.dispatch,E=g.pending,O=d.memoizedState;if(E!==null){g.pending=null;var U=E=E.next;do O=l(O,U.action),U=U.next;while(U!==E);ms(O,d.memoizedState)||(tr=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),g.lastRenderedState=O}return[O,b]}function X4(l,d,g){var b=St,E=zn(),O=Ft;if(O){if(g===void 0)throw Error(r(407));g=g()}else g=d();var U=!ms((Yt||E).memoizedState,g);U&&(E.memoizedState=g,tr=!0),E=E.queue;var J=Z4.bind(null,b,E,l);if(Zm(2048,8,J,[l]),E.getSnapshot!==d||U||Bn!==null&&Bn.memoizedState.tag&1){if(b.flags|=2048,ef(9,Q0(),Q4.bind(null,b,E,g,d),null),rn===null)throw Error(r(349));O||(gl&124)!==0||K4(b,d,g)}return g}function K4(l,d,g){l.flags|=16384,l={getSnapshot:d,value:g},d=St.updateQueue,d===null?(d=DE(),St.updateQueue=d,d.stores=[l]):(g=d.stores,g===null?d.stores=[l]:g.push(l))}function Q4(l,d,g,b){d.value=g,d.getSnapshot=b,eR(d)&&tR(l)}function Z4(l,d,g){return g(function(){eR(d)&&tR(l)})}function eR(l){var d=l.getSnapshot;l=l.value;try{var g=d();return!ms(l,g)}catch{return!0}}function tR(l){var d=Hd(l,2);d!==null&&xs(d,l,2)}function zE(l){var d=Xr();if(typeof l=="function"){var g=l;if(l=g(),ou){Ee(!0);try{g()}finally{Ee(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:l},d}function nR(l,d,g,b){return l.baseState=g,FE(l,Yt,typeof b=="function"?b:Ko)}function bX(l,d,g,b,E){if(eb(l))throw Error(r(485));if(l=d.action,l!==null){var O={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){O.listeners.push(U)}};T.T!==null?g(!0):O.isTransition=!1,b(O),g=d.pending,g===null?(O.next=d.pending=O,rR(d,O)):(O.next=g.next,d.pending=g.next=O)}}function rR(l,d){var g=d.action,b=d.payload,E=l.state;if(d.isTransition){var O=T.T,U={};T.T=U;try{var J=g(E,b),ee=T.S;ee!==null&&ee(U,J),sR(l,d,J)}catch(pe){VE(l,d,pe)}finally{T.T=O}}else try{O=g(E,b),sR(l,d,O)}catch(pe){VE(l,d,pe)}}function sR(l,d,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){iR(l,d,b)},function(b){return VE(l,d,b)}):iR(l,d,g)}function iR(l,d,g){d.status="fulfilled",d.value=g,oR(d),l.state=g,d=l.pending,d!==null&&(g=d.next,g===d?l.pending=null:(g=g.next,d.next=g,rR(l,g)))}function VE(l,d,g){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=g,oR(d),d=d.next;while(d!==b)}l.action=null}function oR(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function aR(l,d){return d}function lR(l,d){if(Ft){var g=rn.formState;if(g!==null){e:{var b=St;if(Ft){if(Nn){t:{for(var E=Nn,O=ao;E.nodeType!==8;){if(!O){E=null;break t}if(E=Ci(E.nextSibling),E===null){E=null;break t}}O=E.data,E=O==="F!"||O==="F"?E:null}if(E){Nn=Ci(E.nextSibling),b=E.data==="F!";break e}}nu(b)}b=!1}b&&(d=g[0])}}return g=Xr(),g.memoizedState=g.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aR,lastRenderedState:d},g.queue=b,g=OR.bind(null,St,b),b.dispatch=g,b=zE(!1),O=GE.bind(null,St,!1,b.queue),b=Xr(),E={state:d,dispatch:null,action:l,pending:null},b.queue=E,g=bX.bind(null,St,E,O,g),E.dispatch=g,b.memoizedState=l,[d,g,!1]}function cR(l){var d=zn();return uR(d,Yt,l)}function uR(l,d,g){if(d=FE(l,d,aR)[0],l=K0(Ko)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=Qm(d)}catch(U){throw U===Wm?H0:U}else b=d;d=zn();var E=d.queue,O=E.dispatch;return g!==d.memoizedState&&(St.flags|=2048,ef(9,Q0(),vX.bind(null,E,g),null)),[b,O,l]}function vX(l,d){l.action=d}function dR(l){var d=zn(),g=Yt;if(g!==null)return uR(d,g,l);zn(),d=d.memoizedState,g=zn();var b=g.queue.dispatch;return g.memoizedState=l,[d,b,!1]}function ef(l,d,g,b){return l={tag:l,create:g,deps:b,inst:d,next:null},d=St.updateQueue,d===null&&(d=DE(),St.updateQueue=d),g=d.lastEffect,g===null?d.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,d.lastEffect=l),l}function Q0(){return{destroy:void 0,resource:void 0}}function fR(){return zn().memoizedState}function Z0(l,d,g,b){var E=Xr();b=b===void 0?null:b,St.flags|=l,E.memoizedState=ef(1|d,Q0(),g,b)}function Zm(l,d,g,b){var E=zn();b=b===void 0?null:b;var O=E.memoizedState.inst;Yt!==null&&b!==null&&RE(b,Yt.memoizedState.deps)?E.memoizedState=ef(d,O,g,b):(St.flags|=l,E.memoizedState=ef(1|d,O,g,b))}function hR(l,d){Z0(8390656,8,l,d)}function mR(l,d){Zm(2048,8,l,d)}function pR(l,d){return Zm(4,2,l,d)}function gR(l,d){return Zm(4,4,l,d)}function yR(l,d){if(typeof d=="function"){l=l();var g=d(l);return function(){typeof g=="function"?g():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function bR(l,d,g){g=g!=null?g.concat([l]):null,Zm(4,4,yR.bind(null,d,l),g)}function UE(){}function vR(l,d){var g=zn();d=d===void 0?null:d;var b=g.memoizedState;return d!==null&&RE(d,b[1])?b[0]:(g.memoizedState=[l,d],l)}function xR(l,d){var g=zn();d=d===void 0?null:d;var b=g.memoizedState;if(d!==null&&RE(d,b[1]))return b[0];if(b=l(),ou){Ee(!0);try{l()}finally{Ee(!1)}}return g.memoizedState=[b,d],b}function qE(l,d,g){return g===void 0||(gl&1073741824)!==0?l.memoizedState=d:(l.memoizedState=g,l=E5(),St.lanes|=l,El|=l,g)}function wR(l,d,g,b){return ms(g,d)?g:Kd.current!==null?(l=qE(l,g,b),ms(l,d)||(tr=!0),l):(gl&42)===0?(tr=!0,l.memoizedState=g):(l=E5(),St.lanes|=l,El|=l,d)}function SR(l,d,g,b,E){var O=D.p;D.p=O!==0&&8>O?O:8;var U=T.T,J={};T.T=J,GE(l,!1,d,g);try{var ee=E(),pe=T.S;if(pe!==null&&pe(J,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var we=pX(ee,b);ep(l,d,we,vs(l))}else ep(l,d,b,vs(l))}catch(Ne){ep(l,d,{then:function(){},status:"rejected",reason:Ne},vs())}finally{D.p=O,T.T=U}}function xX(){}function HE(l,d,g,b){if(l.tag!==5)throw Error(r(476));var E=ER(l).queue;SR(l,E,d,P,g===null?xX:function(){return NR(l),g(b)})}function ER(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:P},next:null};var g={};return d.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:g},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function NR(l){var d=ER(l).next.queue;ep(l,d,{},vs())}function WE(){return vr(bp)}function _R(){return zn().memoizedState}function CR(){return zn().memoizedState}function wX(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var g=vs();l=ml(g);var b=pl(d,l,g);b!==null&&(xs(b,d,g),Ym(b,d,g)),d={cache:SE()},l.payload=d;return}d=d.return}}function SX(l,d,g){var b=vs();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},eb(l)?jR(d,g):(g=fE(l,d,g,b),g!==null&&(xs(g,l,b),AR(g,d,b)))}function OR(l,d,g){var b=vs();ep(l,d,g,b)}function ep(l,d,g,b){var E={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(eb(l))jR(d,E);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var U=d.lastRenderedState,J=O(U,g);if(E.hasEagerState=!0,E.eagerState=J,ms(J,U))return D0(l,d,E,0),rn===null&&P0(),!1}catch{}finally{}if(g=fE(l,d,E,b),g!==null)return xs(g,l,b),AR(g,d,b),!0}return!1}function GE(l,d,g,b){if(b={lane:2,revertLane:_2(),action:b,hasEagerState:!1,eagerState:null,next:null},eb(l)){if(d)throw Error(r(479))}else d=fE(l,g,b,2),d!==null&&xs(d,l,2)}function eb(l){var d=l.alternate;return l===St||d!==null&&d===St}function jR(l,d){Qd=Y0=!0;var g=l.pending;g===null?d.next=d:(d.next=g.next,g.next=d),l.pending=d}function AR(l,d,g){if((g&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,g|=b,d.lanes=g,_m(l,g)}}var tb={readContext:vr,use:X0,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n},TR={readContext:vr,use:X0,useCallback:function(l,d){return Xr().memoizedState=[l,d===void 0?null:d],l},useContext:vr,useEffect:hR,useImperativeHandle:function(l,d,g){g=g!=null?g.concat([l]):null,Z0(4194308,4,yR.bind(null,d,l),g)},useLayoutEffect:function(l,d){return Z0(4194308,4,l,d)},useInsertionEffect:function(l,d){Z0(4,2,l,d)},useMemo:function(l,d){var g=Xr();d=d===void 0?null:d;var b=l();if(ou){Ee(!0);try{l()}finally{Ee(!1)}}return g.memoizedState=[b,d],b},useReducer:function(l,d,g){var b=Xr();if(g!==void 0){var E=g(d);if(ou){Ee(!0);try{g(d)}finally{Ee(!1)}}}else E=d;return b.memoizedState=b.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},b.queue=l,l=l.dispatch=SX.bind(null,St,l),[b.memoizedState,l]},useRef:function(l){var d=Xr();return l={current:l},d.memoizedState=l},useState:function(l){l=zE(l);var d=l.queue,g=OR.bind(null,St,d);return d.dispatch=g,[l.memoizedState,g]},useDebugValue:UE,useDeferredValue:function(l,d){var g=Xr();return qE(g,l,d)},useTransition:function(){var l=zE(!1);return l=SR.bind(null,St,l.queue,!0,!1),Xr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,g){var b=St,E=Xr();if(Ft){if(g===void 0)throw Error(r(407));g=g()}else{if(g=d(),rn===null)throw Error(r(349));(At&124)!==0||K4(b,d,g)}E.memoizedState=g;var O={value:g,getSnapshot:d};return E.queue=O,hR(Z4.bind(null,b,O,l),[l]),b.flags|=2048,ef(9,Q0(),Q4.bind(null,b,O,g,d),null),g},useId:function(){var l=Xr(),d=rn.identifierPrefix;if(Ft){var g=Yo,b=Go;g=(b&~(1<<32-We(b)-1)).toString(32)+g,d="«"+d+"R"+g,g=J0++,0<g&&(d+="H"+g.toString(32)),d+="»"}else g=gX++,d="«"+d+"r"+g.toString(32)+"»";return l.memoizedState=d},useHostTransitionStatus:WE,useFormState:lR,useActionState:lR,useOptimistic:function(l){var d=Xr();d.memoizedState=d.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=g,d=GE.bind(null,St,!0,g),g.dispatch=d,[l,d]},useMemoCache:LE,useCacheRefresh:function(){return Xr().memoizedState=wX.bind(null,St)}},$R={readContext:vr,use:X0,useCallback:vR,useContext:vr,useEffect:mR,useImperativeHandle:bR,useInsertionEffect:pR,useLayoutEffect:gR,useMemo:xR,useReducer:K0,useRef:fR,useState:function(){return K0(Ko)},useDebugValue:UE,useDeferredValue:function(l,d){var g=zn();return wR(g,Yt.memoizedState,l,d)},useTransition:function(){var l=K0(Ko)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Qm(l),d]},useSyncExternalStore:X4,useId:_R,useHostTransitionStatus:WE,useFormState:cR,useActionState:cR,useOptimistic:function(l,d){var g=zn();return nR(g,Yt,l,d)},useMemoCache:LE,useCacheRefresh:CR},EX={readContext:vr,use:X0,useCallback:vR,useContext:vr,useEffect:mR,useImperativeHandle:bR,useInsertionEffect:pR,useLayoutEffect:gR,useMemo:xR,useReducer:BE,useRef:fR,useState:function(){return BE(Ko)},useDebugValue:UE,useDeferredValue:function(l,d){var g=zn();return Yt===null?qE(g,l,d):wR(g,Yt.memoizedState,l,d)},useTransition:function(){var l=BE(Ko)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Qm(l),d]},useSyncExternalStore:X4,useId:_R,useHostTransitionStatus:WE,useFormState:dR,useActionState:dR,useOptimistic:function(l,d){var g=zn();return Yt!==null?nR(g,Yt,l,d):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:LE,useCacheRefresh:CR},tf=null,tp=0;function nb(l){var d=tp;return tp+=1,tf===null&&(tf=[]),V4(tf,l,d)}function np(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function rb(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function RR(l){var d=l._init;return d(l._payload)}function kR(l){function d(de,ie){if(l){var me=de.deletions;me===null?(de.deletions=[ie],de.flags|=16):me.push(ie)}}function g(de,ie){if(!l)return null;for(;ie!==null;)d(de,ie),ie=ie.sibling;return null}function b(de){for(var ie=new Map;de!==null;)de.key!==null?ie.set(de.key,de):ie.set(de.index,de),de=de.sibling;return ie}function E(de,ie){return de=Wo(de,ie),de.index=0,de.sibling=null,de}function O(de,ie,me){return de.index=me,l?(me=de.alternate,me!==null?(me=me.index,me<ie?(de.flags|=67108866,ie):me):(de.flags|=67108866,ie)):(de.flags|=1048576,ie)}function U(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function J(de,ie,me,Se){return ie===null||ie.tag!==6?(ie=mE(me,de.mode,Se),ie.return=de,ie):(ie=E(ie,me),ie.return=de,ie)}function ee(de,ie,me,Se){var Je=me.type;return Je===v?we(de,ie,me.props.children,Se,me.key):ie!==null&&(ie.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===R&&RR(Je)===ie.type)?(ie=E(ie,me.props),np(ie,me),ie.return=de,ie):(ie=F0(me.type,me.key,me.props,null,de.mode,Se),np(ie,me),ie.return=de,ie)}function pe(de,ie,me,Se){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==me.containerInfo||ie.stateNode.implementation!==me.implementation?(ie=pE(me,de.mode,Se),ie.return=de,ie):(ie=E(ie,me.children||[]),ie.return=de,ie)}function we(de,ie,me,Se,Je){return ie===null||ie.tag!==7?(ie=Qc(me,de.mode,Se,Je),ie.return=de,ie):(ie=E(ie,me),ie.return=de,ie)}function Ne(de,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=mE(""+ie,de.mode,me),ie.return=de,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case p:return me=F0(ie.type,ie.key,ie.props,null,de.mode,me),np(me,ie),me.return=de,me;case y:return ie=pE(ie,de.mode,me),ie.return=de,ie;case R:var Se=ie._init;return ie=Se(ie._payload),Ne(de,ie,me)}if(V(ie)||B(ie))return ie=Qc(ie,de.mode,me,null),ie.return=de,ie;if(typeof ie.then=="function")return Ne(de,nb(ie),me);if(ie.$$typeof===C)return Ne(de,U0(de,ie),me);rb(de,ie)}return null}function ye(de,ie,me,Se){var Je=ie!==null?ie.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Je!==null?null:J(de,ie,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case p:return me.key===Je?ee(de,ie,me,Se):null;case y:return me.key===Je?pe(de,ie,me,Se):null;case R:return Je=me._init,me=Je(me._payload),ye(de,ie,me,Se)}if(V(me)||B(me))return Je!==null?null:we(de,ie,me,Se,null);if(typeof me.then=="function")return ye(de,ie,nb(me),Se);if(me.$$typeof===C)return ye(de,ie,U0(de,me),Se);rb(de,me)}return null}function be(de,ie,me,Se,Je){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return de=de.get(me)||null,J(ie,de,""+Se,Je);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case p:return de=de.get(Se.key===null?me:Se.key)||null,ee(ie,de,Se,Je);case y:return de=de.get(Se.key===null?me:Se.key)||null,pe(ie,de,Se,Je);case R:var _t=Se._init;return Se=_t(Se._payload),be(de,ie,me,Se,Je)}if(V(Se)||B(Se))return de=de.get(me)||null,we(ie,de,Se,Je,null);if(typeof Se.then=="function")return be(de,ie,me,nb(Se),Je);if(Se.$$typeof===C)return be(de,ie,me,U0(ie,Se),Je);rb(ie,Se)}return null}function ut(de,ie,me,Se){for(var Je=null,_t=null,nt=ie,ct=ie=0,rr=null;nt!==null&&ct<me.length;ct++){nt.index>ct?(rr=nt,nt=null):rr=nt.sibling;var Pt=ye(de,nt,me[ct],Se);if(Pt===null){nt===null&&(nt=rr);break}l&&nt&&Pt.alternate===null&&d(de,nt),ie=O(Pt,ie,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt,nt=rr}if(ct===me.length)return g(de,nt),Ft&&eu(de,ct),Je;if(nt===null){for(;ct<me.length;ct++)nt=Ne(de,me[ct],Se),nt!==null&&(ie=O(nt,ie,ct),_t===null?Je=nt:_t.sibling=nt,_t=nt);return Ft&&eu(de,ct),Je}for(nt=b(nt);ct<me.length;ct++)rr=be(nt,de,ct,me[ct],Se),rr!==null&&(l&&rr.alternate!==null&&nt.delete(rr.key===null?ct:rr.key),ie=O(rr,ie,ct),_t===null?Je=rr:_t.sibling=rr,_t=rr);return l&&nt.forEach(function(Rl){return d(de,Rl)}),Ft&&eu(de,ct),Je}function lt(de,ie,me,Se){if(me==null)throw Error(r(151));for(var Je=null,_t=null,nt=ie,ct=ie=0,rr=null,Pt=me.next();nt!==null&&!Pt.done;ct++,Pt=me.next()){nt.index>ct?(rr=nt,nt=null):rr=nt.sibling;var Rl=ye(de,nt,Pt.value,Se);if(Rl===null){nt===null&&(nt=rr);break}l&&nt&&Rl.alternate===null&&d(de,nt),ie=O(Rl,ie,ct),_t===null?Je=Rl:_t.sibling=Rl,_t=Rl,nt=rr}if(Pt.done)return g(de,nt),Ft&&eu(de,ct),Je;if(nt===null){for(;!Pt.done;ct++,Pt=me.next())Pt=Ne(de,Pt.value,Se),Pt!==null&&(ie=O(Pt,ie,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt);return Ft&&eu(de,ct),Je}for(nt=b(nt);!Pt.done;ct++,Pt=me.next())Pt=be(nt,de,ct,Pt.value,Se),Pt!==null&&(l&&Pt.alternate!==null&&nt.delete(Pt.key===null?ct:Pt.key),ie=O(Pt,ie,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt);return l&&nt.forEach(function(NK){return d(de,NK)}),Ft&&eu(de,ct),Je}function Xt(de,ie,me,Se){if(typeof me=="object"&&me!==null&&me.type===v&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case p:e:{for(var Je=me.key;ie!==null;){if(ie.key===Je){if(Je=me.type,Je===v){if(ie.tag===7){g(de,ie.sibling),Se=E(ie,me.props.children),Se.return=de,de=Se;break e}}else if(ie.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===R&&RR(Je)===ie.type){g(de,ie.sibling),Se=E(ie,me.props),np(Se,me),Se.return=de,de=Se;break e}g(de,ie);break}else d(de,ie);ie=ie.sibling}me.type===v?(Se=Qc(me.props.children,de.mode,Se,me.key),Se.return=de,de=Se):(Se=F0(me.type,me.key,me.props,null,de.mode,Se),np(Se,me),Se.return=de,de=Se)}return U(de);case y:e:{for(Je=me.key;ie!==null;){if(ie.key===Je)if(ie.tag===4&&ie.stateNode.containerInfo===me.containerInfo&&ie.stateNode.implementation===me.implementation){g(de,ie.sibling),Se=E(ie,me.children||[]),Se.return=de,de=Se;break e}else{g(de,ie);break}else d(de,ie);ie=ie.sibling}Se=pE(me,de.mode,Se),Se.return=de,de=Se}return U(de);case R:return Je=me._init,me=Je(me._payload),Xt(de,ie,me,Se)}if(V(me))return ut(de,ie,me,Se);if(B(me)){if(Je=B(me),typeof Je!="function")throw Error(r(150));return me=Je.call(me),lt(de,ie,me,Se)}if(typeof me.then=="function")return Xt(de,ie,nb(me),Se);if(me.$$typeof===C)return Xt(de,ie,U0(de,me),Se);rb(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ie!==null&&ie.tag===6?(g(de,ie.sibling),Se=E(ie,me),Se.return=de,de=Se):(g(de,ie),Se=mE(me,de.mode,Se),Se.return=de,de=Se),U(de)):g(de,ie)}return function(de,ie,me,Se){try{tp=0;var Je=Xt(de,ie,me,Se);return tf=null,Je}catch(nt){if(nt===Wm||nt===H0)throw nt;var _t=ps(29,nt,null,de.mode);return _t.lanes=Se,_t.return=de,_t}finally{}}}var nf=kR(!0),MR=kR(!1),Ws=W(null),lo=null;function yl(l){var d=l.alternate;Q(Wn,Wn.current&1),Q(Ws,l),lo===null&&(d===null||Kd.current!==null||d.memoizedState!==null)&&(lo=l)}function IR(l){if(l.tag===22){if(Q(Wn,Wn.current),Q(Ws,l),lo===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(lo=l)}}else bl()}function bl(){Q(Wn,Wn.current),Q(Ws,Ws.current)}function Qo(l){X(Ws),lo===l&&(lo=null),X(Wn)}var Wn=W(0);function sb(l){for(var d=l;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||D2(g)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function YE(l,d,g,b){d=l.memoizedState,g=g(b,d),g=g==null?d:f({},d,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var JE={enqueueSetState:function(l,d,g){l=l._reactInternals;var b=vs(),E=ml(b);E.payload=d,g!=null&&(E.callback=g),d=pl(l,E,b),d!==null&&(xs(d,l,b),Ym(d,l,b))},enqueueReplaceState:function(l,d,g){l=l._reactInternals;var b=vs(),E=ml(b);E.tag=1,E.payload=d,g!=null&&(E.callback=g),d=pl(l,E,b),d!==null&&(xs(d,l,b),Ym(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var g=vs(),b=ml(g);b.tag=2,d!=null&&(b.callback=d),d=pl(l,b,g),d!==null&&(xs(d,l,g),Ym(d,l,g))}};function PR(l,d,g,b,E,O,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,O,U):d.prototype&&d.prototype.isPureReactComponent?!Lm(g,b)||!Lm(E,O):!0}function DR(l,d,g,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==l&&JE.enqueueReplaceState(d,d.state,null)}function au(l,d){var g=d;if("ref"in d){g={};for(var b in d)b!=="ref"&&(g[b]=d[b])}if(l=l.defaultProps){g===d&&(g=f({},g));for(var E in l)g[E]===void 0&&(g[E]=l[E])}return g}var ib=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function LR(l){ib(l)}function FR(l){console.error(l)}function BR(l){ib(l)}function ob(l,d){try{var g=l.onUncaughtError;g(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function zR(l,d,g){try{var b=l.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function XE(l,d,g){return g=ml(g),g.tag=3,g.payload={element:null},g.callback=function(){ob(l,d)},g}function VR(l){return l=ml(l),l.tag=3,l}function UR(l,d,g,b){var E=g.type.getDerivedStateFromError;if(typeof E=="function"){var O=b.value;l.payload=function(){return E(O)},l.callback=function(){zR(d,g,b)}}var U=g.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){zR(d,g,b),typeof E!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var J=b.stack;this.componentDidCatch(b.value,{componentStack:J!==null?J:""})})}function NX(l,d,g,b,E){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=g.alternate,d!==null&&Um(d,g,E,!0),g=Ws.current,g!==null){switch(g.tag){case 13:return lo===null?x2():g.alternate===null&&_n===0&&(_n=3),g.flags&=-257,g.flags|=65536,g.lanes=E,b===_E?g.flags|=16384:(d=g.updateQueue,d===null?g.updateQueue=new Set([b]):d.add(b),S2(l,b,E)),!1;case 22:return g.flags|=65536,b===_E?g.flags|=16384:(d=g.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=d):(g=d.retryQueue,g===null?d.retryQueue=new Set([b]):g.add(b)),S2(l,b,E)),!1}throw Error(r(435,g.tag))}return S2(l,b,E),x2(),!1}if(Ft)return d=Ws.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,b!==bE&&(l=Error(r(422),{cause:b}),Vm(Vs(l,g)))):(b!==bE&&(d=Error(r(423),{cause:b}),Vm(Vs(d,g))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,b=Vs(b,g),E=XE(l.stateNode,b,E),jE(l,E),_n!==4&&(_n=2)),!1;var O=Error(r(520),{cause:b});if(O=Vs(O,g),cp===null?cp=[O]:cp.push(O),_n!==4&&(_n=2),d===null)return!0;b=Vs(b,g),g=d;do{switch(g.tag){case 3:return g.flags|=65536,l=E&-E,g.lanes|=l,l=XE(g.stateNode,b,l),jE(g,l),!1;case 1:if(d=g.type,O=g.stateNode,(g.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Nl===null||!Nl.has(O))))return g.flags|=65536,E&=-E,g.lanes|=E,E=VR(E),UR(E,l,g,b),jE(g,E),!1}g=g.return}while(g!==null);return!1}var qR=Error(r(461)),tr=!1;function dr(l,d,g,b){d.child=l===null?MR(d,null,g,b):nf(d,l.child,g,b)}function HR(l,d,g,b,E){g=g.render;var O=d.ref;if("ref"in b){var U={};for(var J in b)J!=="ref"&&(U[J]=b[J])}else U=b;return su(d),b=kE(l,d,g,U,O,E),J=ME(),l!==null&&!tr?(IE(l,d,E),Zo(l,d,E)):(Ft&&J&&gE(d),d.flags|=1,dr(l,d,b,E),d.child)}function WR(l,d,g,b,E){if(l===null){var O=g.type;return typeof O=="function"&&!hE(O)&&O.defaultProps===void 0&&g.compare===null?(d.tag=15,d.type=O,GR(l,d,O,b,E)):(l=F0(g.type,null,b,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(O=l.child,!s2(l,E)){var U=O.memoizedProps;if(g=g.compare,g=g!==null?g:Lm,g(U,b)&&l.ref===d.ref)return Zo(l,d,E)}return d.flags|=1,l=Wo(O,b),l.ref=d.ref,l.return=d,d.child=l}function GR(l,d,g,b,E){if(l!==null){var O=l.memoizedProps;if(Lm(O,b)&&l.ref===d.ref)if(tr=!1,d.pendingProps=b=O,s2(l,E))(l.flags&131072)!==0&&(tr=!0);else return d.lanes=l.lanes,Zo(l,d,E)}return KE(l,d,g,b,E)}function YR(l,d,g){var b=d.pendingProps,E=b.children,O=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=O!==null?O.baseLanes|g:g,l!==null){for(E=d.child=l.child,O=0;E!==null;)O=O|E.lanes|E.childLanes,E=E.sibling;d.childLanes=O&~b}else d.childLanes=0,d.child=null;return JR(l,d,b,g)}if((g&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&q0(d,O!==null?O.cachePool:null),O!==null?G4(d,O):TE(),IR(d);else return d.lanes=d.childLanes=536870912,JR(l,d,O!==null?O.baseLanes|g:g,g)}else O!==null?(q0(d,O.cachePool),G4(d,O),bl(),d.memoizedState=null):(l!==null&&q0(d,null),TE(),bl());return dr(l,d,E,g),d.child}function JR(l,d,g,b){var E=NE();return E=E===null?null:{parent:Hn._currentValue,pool:E},d.memoizedState={baseLanes:g,cachePool:E},l!==null&&q0(d,null),TE(),IR(d),l!==null&&Um(l,d,b,!0),null}function ab(l,d){var g=d.ref;if(g===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(l===null||l.ref!==g)&&(d.flags|=4194816)}}function KE(l,d,g,b,E){return su(d),g=kE(l,d,g,b,void 0,E),b=ME(),l!==null&&!tr?(IE(l,d,E),Zo(l,d,E)):(Ft&&b&&gE(d),d.flags|=1,dr(l,d,g,E),d.child)}function XR(l,d,g,b,E,O){return su(d),d.updateQueue=null,g=J4(d,b,g,E),Y4(l),b=ME(),l!==null&&!tr?(IE(l,d,O),Zo(l,d,O)):(Ft&&b&&gE(d),d.flags|=1,dr(l,d,g,O),d.child)}function KR(l,d,g,b,E){if(su(d),d.stateNode===null){var O=Wd,U=g.contextType;typeof U=="object"&&U!==null&&(O=vr(U)),O=new g(b,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=JE,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=b,O.state=d.memoizedState,O.refs={},CE(d),U=g.contextType,O.context=typeof U=="object"&&U!==null?vr(U):Wd,O.state=d.memoizedState,U=g.getDerivedStateFromProps,typeof U=="function"&&(YE(d,g,U,b),O.state=d.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(U=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),U!==O.state&&JE.enqueueReplaceState(O,O.state,null),Xm(d,b,O,E),Jm(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){O=d.stateNode;var J=d.memoizedProps,ee=au(g,J);O.props=ee;var pe=O.context,we=g.contextType;U=Wd,typeof we=="object"&&we!==null&&(U=vr(we));var Ne=g.getDerivedStateFromProps;we=typeof Ne=="function"||typeof O.getSnapshotBeforeUpdate=="function",J=d.pendingProps!==J,we||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(J||pe!==U)&&DR(d,O,b,U),hl=!1;var ye=d.memoizedState;O.state=ye,Xm(d,b,O,E),Jm(),pe=d.memoizedState,J||ye!==pe||hl?(typeof Ne=="function"&&(YE(d,g,Ne,b),pe=d.memoizedState),(ee=hl||PR(d,g,ee,b,ye,pe,U))?(we||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=pe),O.props=b,O.state=pe,O.context=U,b=ee):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{O=d.stateNode,OE(l,d),U=d.memoizedProps,we=au(g,U),O.props=we,Ne=d.pendingProps,ye=O.context,pe=g.contextType,ee=Wd,typeof pe=="object"&&pe!==null&&(ee=vr(pe)),J=g.getDerivedStateFromProps,(pe=typeof J=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(U!==Ne||ye!==ee)&&DR(d,O,b,ee),hl=!1,ye=d.memoizedState,O.state=ye,Xm(d,b,O,E),Jm();var be=d.memoizedState;U!==Ne||ye!==be||hl||l!==null&&l.dependencies!==null&&V0(l.dependencies)?(typeof J=="function"&&(YE(d,g,J,b),be=d.memoizedState),(we=hl||PR(d,g,we,b,ye,be,ee)||l!==null&&l.dependencies!==null&&V0(l.dependencies))?(pe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(b,be,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(b,be,ee)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=be),O.props=b,O.state=be,O.context=ee,b=we):(typeof O.componentDidUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),b=!1)}return O=b,ab(l,d),b=(d.flags&128)!==0,O||b?(O=d.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,l!==null&&b?(d.child=nf(d,l.child,null,E),d.child=nf(d,null,g,E)):dr(l,d,g,E),d.memoizedState=O.state,l=d.child):l=Zo(l,d,E),l}function QR(l,d,g,b){return zm(),d.flags|=256,dr(l,d,g,b),d.child}var QE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ZE(l){return{baseLanes:l,cachePool:F4()}}function e2(l,d,g){return l=l!==null?l.childLanes&~g:0,d&&(l|=Gs),l}function ZR(l,d,g){var b=d.pendingProps,E=!1,O=(d.flags&128)!==0,U;if((U=O)||(U=l!==null&&l.memoizedState===null?!1:(Wn.current&2)!==0),U&&(E=!0,d.flags&=-129),U=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ft){if(E?yl(d):bl(),Ft){var J=Nn,ee;if(ee=J){e:{for(ee=J,J=ao;ee.nodeType!==8;){if(!J){J=null;break e}if(ee=Ci(ee.nextSibling),ee===null){J=null;break e}}J=ee}J!==null?(d.memoizedState={dehydrated:J,treeContext:Zc!==null?{id:Go,overflow:Yo}:null,retryLane:536870912,hydrationErrors:null},ee=ps(18,null,null,0),ee.stateNode=J,ee.return=d,d.child=ee,jr=d,Nn=null,ee=!0):ee=!1}ee||nu(d)}if(J=d.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return D2(J)?d.lanes=32:d.lanes=536870912,null;Qo(d)}return J=b.children,b=b.fallback,E?(bl(),E=d.mode,J=lb({mode:"hidden",children:J},E),b=Qc(b,E,g,null),J.return=d,b.return=d,J.sibling=b,d.child=J,E=d.child,E.memoizedState=ZE(g),E.childLanes=e2(l,U,g),d.memoizedState=QE,b):(yl(d),t2(d,J))}if(ee=l.memoizedState,ee!==null&&(J=ee.dehydrated,J!==null)){if(O)d.flags&256?(yl(d),d.flags&=-257,d=n2(l,d,g)):d.memoizedState!==null?(bl(),d.child=l.child,d.flags|=128,d=null):(bl(),E=b.fallback,J=d.mode,b=lb({mode:"visible",children:b.children},J),E=Qc(E,J,g,null),E.flags|=2,b.return=d,E.return=d,b.sibling=E,d.child=b,nf(d,l.child,null,g),b=d.child,b.memoizedState=ZE(g),b.childLanes=e2(l,U,g),d.memoizedState=QE,d=E);else if(yl(d),D2(J)){if(U=J.nextSibling&&J.nextSibling.dataset,U)var pe=U.dgst;U=pe,b=Error(r(419)),b.stack="",b.digest=U,Vm({value:b,source:null,stack:null}),d=n2(l,d,g)}else if(tr||Um(l,d,g,!1),U=(g&l.childLanes)!==0,tr||U){if(U=rn,U!==null&&(b=g&-g,b=(b&42)!==0?1:Wc(b),b=(b&(U.suspendedLanes|g))!==0?0:b,b!==0&&b!==ee.retryLane))throw ee.retryLane=b,Hd(l,b),xs(U,l,b),qR;J.data==="$?"||x2(),d=n2(l,d,g)}else J.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ee.treeContext,Nn=Ci(J.nextSibling),jr=d,Ft=!0,tu=null,ao=!1,l!==null&&(qs[Hs++]=Go,qs[Hs++]=Yo,qs[Hs++]=Zc,Go=l.id,Yo=l.overflow,Zc=d),d=t2(d,b.children),d.flags|=4096);return d}return E?(bl(),E=b.fallback,J=d.mode,ee=l.child,pe=ee.sibling,b=Wo(ee,{mode:"hidden",children:b.children}),b.subtreeFlags=ee.subtreeFlags&65011712,pe!==null?E=Wo(pe,E):(E=Qc(E,J,g,null),E.flags|=2),E.return=d,b.return=d,b.sibling=E,d.child=b,b=E,E=d.child,J=l.child.memoizedState,J===null?J=ZE(g):(ee=J.cachePool,ee!==null?(pe=Hn._currentValue,ee=ee.parent!==pe?{parent:pe,pool:pe}:ee):ee=F4(),J={baseLanes:J.baseLanes|g,cachePool:ee}),E.memoizedState=J,E.childLanes=e2(l,U,g),d.memoizedState=QE,b):(yl(d),g=l.child,l=g.sibling,g=Wo(g,{mode:"visible",children:b.children}),g.return=d,g.sibling=null,l!==null&&(U=d.deletions,U===null?(d.deletions=[l],d.flags|=16):U.push(l)),d.child=g,d.memoizedState=null,g)}function t2(l,d){return d=lb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function lb(l,d){return l=ps(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function n2(l,d,g){return nf(d,l.child,null,g),l=t2(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function e5(l,d,g){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),xE(l.return,d,g)}function r2(l,d,g,b,E){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:E}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=b,O.tail=g,O.tailMode=E)}function t5(l,d,g){var b=d.pendingProps,E=b.revealOrder,O=b.tail;if(dr(l,d,b.children,g),b=Wn.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&e5(l,g,d);else if(l.tag===19)e5(l,g,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(Q(Wn,b),E){case"forwards":for(g=d.child,E=null;g!==null;)l=g.alternate,l!==null&&sb(l)===null&&(E=g),g=g.sibling;g=E,g===null?(E=d.child,d.child=null):(E=g.sibling,g.sibling=null),r2(d,!1,E,g,O);break;case"backwards":for(g=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&sb(l)===null){d.child=E;break}l=E.sibling,E.sibling=g,g=E,E=l}r2(d,!0,g,null,O);break;case"together":r2(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Zo(l,d,g){if(l!==null&&(d.dependencies=l.dependencies),El|=d.lanes,(g&d.childLanes)===0)if(l!==null){if(Um(l,d,g,!1),(g&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,g=Wo(l,l.pendingProps),d.child=g,g.return=d;l.sibling!==null;)l=l.sibling,g=g.sibling=Wo(l,l.pendingProps),g.return=d;g.sibling=null}return d.child}function s2(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&V0(l)))}function _X(l,d,g){switch(d.tag){case 3:ue(d,d.stateNode.containerInfo),fl(d,Hn,l.memoizedState.cache),zm();break;case 27:case 5:_e(d);break;case 4:ue(d,d.stateNode.containerInfo);break;case 10:fl(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(yl(d),d.flags|=128,null):(g&d.child.childLanes)!==0?ZR(l,d,g):(yl(d),l=Zo(l,d,g),l!==null?l.sibling:null);yl(d);break;case 19:var E=(l.flags&128)!==0;if(b=(g&d.childLanes)!==0,b||(Um(l,d,g,!1),b=(g&d.childLanes)!==0),E){if(b)return t5(l,d,g);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Q(Wn,Wn.current),b)break;return null;case 22:case 23:return d.lanes=0,YR(l,d,g);case 24:fl(d,Hn,l.memoizedState.cache)}return Zo(l,d,g)}function n5(l,d,g){if(l!==null)if(l.memoizedProps!==d.pendingProps)tr=!0;else{if(!s2(l,g)&&(d.flags&128)===0)return tr=!1,_X(l,d,g);tr=(l.flags&131072)!==0}else tr=!1,Ft&&(d.flags&1048576)!==0&&R4(d,z0,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,E=b._init;if(b=E(b._payload),d.type=b,typeof b=="function")hE(b)?(l=au(b,l),d.tag=1,d=KR(null,d,b,l,g)):(d.tag=0,d=KE(null,d,b,l,g));else{if(b!=null){if(E=b.$$typeof,E===j){d.tag=11,d=HR(null,d,b,l,g);break e}else if(E===k){d.tag=14,d=WR(null,d,b,l,g);break e}}throw d=I(b)||b,Error(r(306,d,""))}}return d;case 0:return KE(l,d,d.type,d.pendingProps,g);case 1:return b=d.type,E=au(b,d.pendingProps),KR(l,d,b,E,g);case 3:e:{if(ue(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var O=d.memoizedState;E=O.element,OE(l,d),Xm(d,b,null,g);var U=d.memoizedState;if(b=U.cache,fl(d,Hn,b),b!==O.cache&&wE(d,[Hn],g,!0),Jm(),b=U.element,O.isDehydrated)if(O={element:b,isDehydrated:!1,cache:U.cache},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){d=QR(l,d,b,g);break e}else if(b!==E){E=Vs(Error(r(424)),d),Vm(E),d=QR(l,d,b,g);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Nn=Ci(l.firstChild),jr=d,Ft=!0,tu=null,ao=!0,g=MR(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(zm(),b===E){d=Zo(l,d,g);break e}dr(l,d,b,g)}d=d.child}return d;case 26:return ab(l,d),l===null?(g=ok(d.type,null,d.pendingProps,null))?d.memoizedState=g:Ft||(g=d.type,l=d.pendingProps,b=Sb(fe.current).createElement(g),b[an]=d,b[Ln]=l,hr(b,g,l),Fn(b),d.stateNode=b):d.memoizedState=ok(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return _e(d),l===null&&Ft&&(b=d.stateNode=rk(d.type,d.pendingProps,fe.current),jr=d,ao=!0,E=Nn,Ol(d.type)?(L2=E,Nn=Ci(b.firstChild)):Nn=E),dr(l,d,d.pendingProps.children,g),ab(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ft&&((E=b=Nn)&&(b=ZX(b,d.type,d.pendingProps,ao),b!==null?(d.stateNode=b,jr=d,Nn=Ci(b.firstChild),ao=!1,E=!0):E=!1),E||nu(d)),_e(d),E=d.type,O=d.pendingProps,U=l!==null?l.memoizedProps:null,b=O.children,M2(E,O)?b=null:U!==null&&M2(E,U)&&(d.flags|=32),d.memoizedState!==null&&(E=kE(l,d,yX,null,null,g),bp._currentValue=E),ab(l,d),dr(l,d,b,g),d.child;case 6:return l===null&&Ft&&((l=g=Nn)&&(g=eK(g,d.pendingProps,ao),g!==null?(d.stateNode=g,jr=d,Nn=null,l=!0):l=!1),l||nu(d)),null;case 13:return ZR(l,d,g);case 4:return ue(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=nf(d,null,b,g):dr(l,d,b,g),d.child;case 11:return HR(l,d,d.type,d.pendingProps,g);case 7:return dr(l,d,d.pendingProps,g),d.child;case 8:return dr(l,d,d.pendingProps.children,g),d.child;case 12:return dr(l,d,d.pendingProps.children,g),d.child;case 10:return b=d.pendingProps,fl(d,d.type,b.value),dr(l,d,b.children,g),d.child;case 9:return E=d.type._context,b=d.pendingProps.children,su(d),E=vr(E),b=b(E),d.flags|=1,dr(l,d,b,g),d.child;case 14:return WR(l,d,d.type,d.pendingProps,g);case 15:return GR(l,d,d.type,d.pendingProps,g);case 19:return t5(l,d,g);case 31:return b=d.pendingProps,g=d.mode,b={mode:b.mode,children:b.children},l===null?(g=lb(b,g),g.ref=d.ref,d.child=g,g.return=d,d=g):(g=Wo(l.child,b),g.ref=d.ref,d.child=g,g.return=d,d=g),d;case 22:return YR(l,d,g);case 24:return su(d),b=vr(Hn),l===null?(E=NE(),E===null&&(E=rn,O=SE(),E.pooledCache=O,O.refCount++,O!==null&&(E.pooledCacheLanes|=g),E=O),d.memoizedState={parent:b,cache:E},CE(d),fl(d,Hn,E)):((l.lanes&g)!==0&&(OE(l,d),Xm(d,null,null,g),Jm()),E=l.memoizedState,O=d.memoizedState,E.parent!==b?(E={parent:b,cache:b},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),fl(d,Hn,b)):(b=O.cache,fl(d,Hn,b),b!==E.cache&&wE(d,[Hn],g,!0))),dr(l,d,d.pendingProps.children,g),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ea(l){l.flags|=4}function r5(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!dk(d)){if(d=Ws.current,d!==null&&((At&4194048)===At?lo!==null:(At&62914560)!==At&&(At&536870912)===0||d!==lo))throw Gm=_E,B4;l.flags|=8192}}function cb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ad():536870912,l.lanes|=d,af|=d)}function rp(l,d){if(!Ft)switch(l.tailMode){case"hidden":d=l.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function vn(l){var d=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(d)for(var E=l.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags&65011712,b|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=b,l.childLanes=g,d}function CX(l,d,g){var b=d.pendingProps;switch(yE(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(d),null;case 1:return vn(d),null;case 3:return g=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Xo(Hn),ve(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Bm(d)?ea(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,I4())),vn(d),null;case 26:return g=d.memoizedState,l===null?(ea(d),g!==null?(vn(d),r5(d,g)):(vn(d),d.flags&=-16777217)):g?g!==l.memoizedState?(ea(d),vn(d),r5(d,g)):(vn(d),d.flags&=-16777217):(l.memoizedProps!==b&&ea(d),vn(d),d.flags&=-16777217),null;case 27:ke(d),g=fe.current;var E=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ea(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return vn(d),null}l=oe.current,Bm(d)?k4(d):(l=rk(E,b,g),d.stateNode=l,ea(d))}return vn(d),null;case 5:if(ke(d),g=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ea(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return vn(d),null}if(l=oe.current,Bm(d))k4(d);else{switch(E=Sb(fe.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?E.createElement("select",{is:b.is}):E.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?E.createElement(g,{is:b.is}):E.createElement(g)}}l[an]=d,l[Ln]=b;e:for(E=d.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break e;for(;E.sibling===null;){if(E.return===null||E.return===d)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}d.stateNode=l;e:switch(hr(l,g,b),g){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ea(d)}}return vn(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&ea(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=fe.current,Bm(d)){if(l=d.stateNode,g=d.memoizedProps,b=null,E=jr,E!==null)switch(E.tag){case 27:case 5:b=E.memoizedProps}l[an]=d,l=!!(l.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||X5(l.nodeValue,g)),l||nu(d)}else l=Sb(l).createTextNode(b),l[an]=d,d.stateNode=l}return vn(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Bm(d),b!==null&&b.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[an]=d}else zm(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;vn(d),E=!1}else E=I4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Qo(d),d):(Qo(d),null)}if(Qo(d),(d.flags&128)!==0)return d.lanes=g,d;if(g=b!==null,l=l!==null&&l.memoizedState!==null,g){b=d.child,E=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(E=b.alternate.memoizedState.cachePool.pool);var O=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(O=b.memoizedState.cachePool.pool),O!==E&&(b.flags|=2048)}return g!==l&&g&&(d.child.flags|=8192),cb(d,d.updateQueue),vn(d),null;case 4:return ve(),l===null&&A2(d.stateNode.containerInfo),vn(d),null;case 10:return Xo(d.type),vn(d),null;case 19:if(X(Wn),E=d.memoizedState,E===null)return vn(d),null;if(b=(d.flags&128)!==0,O=E.rendering,O===null)if(b)rp(E,!1);else{if(_n!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(O=sb(l),O!==null){for(d.flags|=128,rp(E,!1),l=O.updateQueue,d.updateQueue=l,cb(d,l),d.subtreeFlags=0,l=g,g=d.child;g!==null;)$4(g,l),g=g.sibling;return Q(Wn,Wn.current&1|2),d.child}l=l.sibling}E.tail!==null&&Ce()>fb&&(d.flags|=128,b=!0,rp(E,!1),d.lanes=4194304)}else{if(!b)if(l=sb(O),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,cb(d,l),rp(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!Ft)return vn(d),null}else 2*Ce()-E.renderingStartTime>fb&&g!==536870912&&(d.flags|=128,b=!0,rp(E,!1),d.lanes=4194304);E.isBackwards?(O.sibling=d.child,d.child=O):(l=E.last,l!==null?l.sibling=O:d.child=O,E.last=O)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Ce(),d.sibling=null,l=Wn.current,Q(Wn,b?l&1|2:l&1),d):(vn(d),null);case 22:case 23:return Qo(d),$E(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(g&536870912)!==0&&(d.flags&128)===0&&(vn(d),d.subtreeFlags&6&&(d.flags|=8192)):vn(d),g=d.updateQueue,g!==null&&cb(d,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048),l!==null&&X(iu),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),Xo(Hn),vn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function OX(l,d){switch(yE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Xo(Hn),ve(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return ke(d),null;case 13:if(Qo(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));zm()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Wn),null;case 4:return ve(),null;case 10:return Xo(d.type),null;case 22:case 23:return Qo(d),$E(),l!==null&&X(iu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Xo(Hn),null;case 25:return null;default:return null}}function s5(l,d){switch(yE(d),d.tag){case 3:Xo(Hn),ve();break;case 26:case 27:case 5:ke(d);break;case 4:ve();break;case 13:Qo(d);break;case 19:X(Wn);break;case 10:Xo(d.type);break;case 22:case 23:Qo(d),$E(),l!==null&&X(iu);break;case 24:Xo(Hn)}}function sp(l,d){try{var g=d.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var E=b.next;g=E;do{if((g.tag&l)===l){b=void 0;var O=g.create,U=g.inst;b=O(),U.destroy=b}g=g.next}while(g!==E)}}catch(J){Qt(d,d.return,J)}}function vl(l,d,g){try{var b=d.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var O=E.next;b=O;do{if((b.tag&l)===l){var U=b.inst,J=U.destroy;if(J!==void 0){U.destroy=void 0,E=d;var ee=g,pe=J;try{pe()}catch(we){Qt(E,ee,we)}}}b=b.next}while(b!==O)}}catch(we){Qt(d,d.return,we)}}function i5(l){var d=l.updateQueue;if(d!==null){var g=l.stateNode;try{W4(d,g)}catch(b){Qt(l,l.return,b)}}}function o5(l,d,g){g.props=au(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(b){Qt(l,d,b)}}function ip(l,d){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof g=="function"?l.refCleanup=g(b):g.current=b}}catch(E){Qt(l,d,E)}}function co(l,d){var g=l.ref,b=l.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(E){Qt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(E){Qt(l,d,E)}else g.current=null}function a5(l){var d=l.type,g=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(E){Qt(l,l.return,E)}}function i2(l,d,g){try{var b=l.stateNode;YX(b,l.type,g,d),b[Ln]=d}catch(E){Qt(l,l.return,E)}}function l5(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ol(l.type)||l.tag===4}function o2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||l5(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ol(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function a2(l,d,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,d):(d=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,d.appendChild(l),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=wb));else if(b!==4&&(b===27&&Ol(l.type)&&(g=l.stateNode,d=null),l=l.child,l!==null))for(a2(l,d,g),l=l.sibling;l!==null;)a2(l,d,g),l=l.sibling}function ub(l,d,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?g.insertBefore(l,d):g.appendChild(l);else if(b!==4&&(b===27&&Ol(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(ub(l,d,g),l=l.sibling;l!==null;)ub(l,d,g),l=l.sibling}function c5(l){var d=l.stateNode,g=l.memoizedProps;try{for(var b=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);hr(d,b,g),d[an]=l,d[Ln]=g}catch(O){Qt(l,l.return,O)}}var ta=!1,Rn=!1,l2=!1,u5=typeof WeakSet=="function"?WeakSet:Set,nr=null;function jX(l,d){if(l=l.containerInfo,R2=jb,l=w4(l),oE(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var E=b.anchorOffset,O=b.focusNode;b=b.focusOffset;try{g.nodeType,O.nodeType}catch{g=null;break e}var U=0,J=-1,ee=-1,pe=0,we=0,Ne=l,ye=null;t:for(;;){for(var be;Ne!==g||E!==0&&Ne.nodeType!==3||(J=U+E),Ne!==O||b!==0&&Ne.nodeType!==3||(ee=U+b),Ne.nodeType===3&&(U+=Ne.nodeValue.length),(be=Ne.firstChild)!==null;)ye=Ne,Ne=be;for(;;){if(Ne===l)break t;if(ye===g&&++pe===E&&(J=U),ye===O&&++we===b&&(ee=U),(be=Ne.nextSibling)!==null)break;Ne=ye,ye=Ne.parentNode}Ne=be}g=J===-1||ee===-1?null:{start:J,end:ee}}else g=null}g=g||{start:0,end:0}}else g=null;for(k2={focusedElem:l,selectionRange:g},jb=!1,nr=d;nr!==null;)if(d=nr,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,nr=l;else for(;nr!==null;){switch(d=nr,O=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,g=d,E=O.memoizedProps,O=O.memoizedState,b=g.stateNode;try{var ut=au(g.type,E,g.elementType===g.type);l=b.getSnapshotBeforeUpdate(ut,O),b.__reactInternalSnapshotBeforeUpdate=l}catch(lt){Qt(g,g.return,lt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,g=l.nodeType,g===9)P2(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":P2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,nr=l;break}nr=d.return}}function d5(l,d,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:xl(l,g),b&4&&sp(5,g);break;case 1:if(xl(l,g),b&4)if(l=g.stateNode,d===null)try{l.componentDidMount()}catch(U){Qt(g,g.return,U)}else{var E=au(g.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(U){Qt(g,g.return,U)}}b&64&&i5(g),b&512&&ip(g,g.return);break;case 3:if(xl(l,g),b&64&&(l=g.updateQueue,l!==null)){if(d=null,g.child!==null)switch(g.child.tag){case 27:case 5:d=g.child.stateNode;break;case 1:d=g.child.stateNode}try{W4(l,d)}catch(U){Qt(g,g.return,U)}}break;case 27:d===null&&b&4&&c5(g);case 26:case 5:xl(l,g),d===null&&b&4&&a5(g),b&512&&ip(g,g.return);break;case 12:xl(l,g);break;case 13:xl(l,g),b&4&&m5(l,g),b&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=DX.bind(null,g),tK(l,g))));break;case 22:if(b=g.memoizedState!==null||ta,!b){d=d!==null&&d.memoizedState!==null||Rn,E=ta;var O=Rn;ta=b,(Rn=d)&&!O?wl(l,g,(g.subtreeFlags&8772)!==0):xl(l,g),ta=E,Rn=O}break;case 30:break;default:xl(l,g)}}function f5(l){var d=l.alternate;d!==null&&(l.alternate=null,f5(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Yc(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var pn=null,Kr=!1;function na(l,d,g){for(g=g.child;g!==null;)h5(l,d,g),g=g.sibling}function h5(l,d,g){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(ce,g)}catch{}switch(g.tag){case 26:Rn||co(g,d),na(l,d,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Rn||co(g,d);var b=pn,E=Kr;Ol(g.type)&&(pn=g.stateNode,Kr=!1),na(l,d,g),mp(g.stateNode),pn=b,Kr=E;break;case 5:Rn||co(g,d);case 6:if(b=pn,E=Kr,pn=null,na(l,d,g),pn=b,Kr=E,pn!==null)if(Kr)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(g.stateNode)}catch(O){Qt(g,d,O)}else try{pn.removeChild(g.stateNode)}catch(O){Qt(g,d,O)}break;case 18:pn!==null&&(Kr?(l=pn,tk(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Sp(l)):tk(pn,g.stateNode));break;case 4:b=pn,E=Kr,pn=g.stateNode.containerInfo,Kr=!0,na(l,d,g),pn=b,Kr=E;break;case 0:case 11:case 14:case 15:Rn||vl(2,g,d),Rn||vl(4,g,d),na(l,d,g);break;case 1:Rn||(co(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"&&o5(g,d,b)),na(l,d,g);break;case 21:na(l,d,g);break;case 22:Rn=(b=Rn)||g.memoizedState!==null,na(l,d,g),Rn=b;break;default:na(l,d,g)}}function m5(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Sp(l)}catch(g){Qt(d,d.return,g)}}function AX(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new u5),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new u5),d;default:throw Error(r(435,l.tag))}}function c2(l,d){var g=AX(l);d.forEach(function(b){var E=LX.bind(null,l,b);g.has(b)||(g.add(b),b.then(E,E))})}function gs(l,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var E=g[b],O=l,U=d,J=U;e:for(;J!==null;){switch(J.tag){case 27:if(Ol(J.type)){pn=J.stateNode,Kr=!1;break e}break;case 5:pn=J.stateNode,Kr=!1;break e;case 3:case 4:pn=J.stateNode.containerInfo,Kr=!0;break e}J=J.return}if(pn===null)throw Error(r(160));h5(O,U,E),pn=null,Kr=!1,O=E.alternate,O!==null&&(O.return=null),E.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)p5(d,l),d=d.sibling}var _i=null;function p5(l,d){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:gs(d,l),ys(l),b&4&&(vl(3,l,l.return),sp(3,l),vl(5,l,l.return));break;case 1:gs(d,l),ys(l),b&512&&(Rn||g===null||co(g,g.return)),b&64&&ta&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var E=_i;if(gs(d,l),ys(l),b&512&&(Rn||g===null||co(g,g.return)),b&4){var O=g!==null?g.memoizedState:null;if(b=l.memoizedState,g===null)if(b===null)if(l.stateNode===null){e:{b=l.type,g=l.memoizedProps,E=E.ownerDocument||E;t:switch(b){case"title":O=E.getElementsByTagName("title")[0],(!O||O[Vo]||O[an]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=E.createElement(b),E.head.insertBefore(O,E.querySelector("head > title"))),hr(O,b,g),O[an]=l,Fn(O),b=O;break e;case"link":var U=ck("link","href",E).get(b+(g.href||""));if(U){for(var J=0;J<U.length;J++)if(O=U[J],O.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&O.getAttribute("rel")===(g.rel==null?null:g.rel)&&O.getAttribute("title")===(g.title==null?null:g.title)&&O.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){U.splice(J,1);break t}}O=E.createElement(b),hr(O,b,g),E.head.appendChild(O);break;case"meta":if(U=ck("meta","content",E).get(b+(g.content||""))){for(J=0;J<U.length;J++)if(O=U[J],O.getAttribute("content")===(g.content==null?null:""+g.content)&&O.getAttribute("name")===(g.name==null?null:g.name)&&O.getAttribute("property")===(g.property==null?null:g.property)&&O.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&O.getAttribute("charset")===(g.charSet==null?null:g.charSet)){U.splice(J,1);break t}}O=E.createElement(b),hr(O,b,g),E.head.appendChild(O);break;default:throw Error(r(468,b))}O[an]=l,Fn(O),b=O}l.stateNode=b}else uk(E,l.type,l.stateNode);else l.stateNode=lk(E,b,l.memoizedProps);else O!==b?(O===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):O.count--,b===null?uk(E,l.type,l.stateNode):lk(E,b,l.memoizedProps)):b===null&&l.stateNode!==null&&i2(l,l.memoizedProps,g.memoizedProps)}break;case 27:gs(d,l),ys(l),b&512&&(Rn||g===null||co(g,g.return)),g!==null&&b&4&&i2(l,l.memoizedProps,g.memoizedProps);break;case 5:if(gs(d,l),ys(l),b&512&&(Rn||g===null||co(g,g.return)),l.flags&32){E=l.stateNode;try{Ld(E,"")}catch(be){Qt(l,l.return,be)}}b&4&&l.stateNode!=null&&(E=l.memoizedProps,i2(l,E,g!==null?g.memoizedProps:E)),b&1024&&(l2=!0);break;case 6:if(gs(d,l),ys(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,g=l.stateNode;try{g.nodeValue=b}catch(be){Qt(l,l.return,be)}}break;case 3:if(_b=null,E=_i,_i=Eb(d.containerInfo),gs(d,l),_i=E,ys(l),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Sp(d.containerInfo)}catch(be){Qt(l,l.return,be)}l2&&(l2=!1,g5(l));break;case 4:b=_i,_i=Eb(l.stateNode.containerInfo),gs(d,l),ys(l),_i=b;break;case 12:gs(d,l),ys(l);break;case 13:gs(d,l),ys(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(p2=Ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,c2(l,b)));break;case 22:E=l.memoizedState!==null;var ee=g!==null&&g.memoizedState!==null,pe=ta,we=Rn;if(ta=pe||E,Rn=we||ee,gs(d,l),Rn=we,ta=pe,ys(l),b&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(g===null||ee||ta||Rn||lu(l)),g=null,d=l;;){if(d.tag===5||d.tag===26){if(g===null){ee=g=d;try{if(O=ee.stateNode,E)U=O.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{J=ee.stateNode;var Ne=ee.memoizedProps.style,ye=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;J.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(be){Qt(ee,ee.return,be)}}}else if(d.tag===6){if(g===null){ee=d;try{ee.stateNode.nodeValue=E?"":ee.memoizedProps}catch(be){Qt(ee,ee.return,be)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;g===d&&(g=null),d=d.return}g===d&&(g=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,c2(l,g))));break;case 19:gs(d,l),ys(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,c2(l,b)));break;case 30:break;case 21:break;default:gs(d,l),ys(l)}}function ys(l){var d=l.flags;if(d&2){try{for(var g,b=l.return;b!==null;){if(l5(b)){g=b;break}b=b.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var E=g.stateNode,O=o2(l);ub(l,O,E);break;case 5:var U=g.stateNode;g.flags&32&&(Ld(U,""),g.flags&=-33);var J=o2(l);ub(l,J,U);break;case 3:case 4:var ee=g.stateNode.containerInfo,pe=o2(l);a2(l,pe,ee);break;default:throw Error(r(161))}}catch(we){Qt(l,l.return,we)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function g5(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;g5(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function xl(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)d5(l,d.alternate,d),d=d.sibling}function lu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:vl(4,d,d.return),lu(d);break;case 1:co(d,d.return);var g=d.stateNode;typeof g.componentWillUnmount=="function"&&o5(d,d.return,g),lu(d);break;case 27:mp(d.stateNode);case 26:case 5:co(d,d.return),lu(d);break;case 22:d.memoizedState===null&&lu(d);break;case 30:lu(d);break;default:lu(d)}l=l.sibling}}function wl(l,d,g){for(g=g&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,E=l,O=d,U=O.flags;switch(O.tag){case 0:case 11:case 15:wl(E,O,g),sp(4,O);break;case 1:if(wl(E,O,g),b=O,E=b.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(pe){Qt(b,b.return,pe)}if(b=O,E=b.updateQueue,E!==null){var J=b.stateNode;try{var ee=E.shared.hiddenCallbacks;if(ee!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ee.length;E++)H4(ee[E],J)}catch(pe){Qt(b,b.return,pe)}}g&&U&64&&i5(O),ip(O,O.return);break;case 27:c5(O);case 26:case 5:wl(E,O,g),g&&b===null&&U&4&&a5(O),ip(O,O.return);break;case 12:wl(E,O,g);break;case 13:wl(E,O,g),g&&U&4&&m5(E,O);break;case 22:O.memoizedState===null&&wl(E,O,g),ip(O,O.return);break;case 30:break;default:wl(E,O,g)}d=d.sibling}}function u2(l,d){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&qm(g))}function d2(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&qm(l))}function uo(l,d,g,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)y5(l,d,g,b),d=d.sibling}function y5(l,d,g,b){var E=d.flags;switch(d.tag){case 0:case 11:case 15:uo(l,d,g,b),E&2048&&sp(9,d);break;case 1:uo(l,d,g,b);break;case 3:uo(l,d,g,b),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&qm(l)));break;case 12:if(E&2048){uo(l,d,g,b),l=d.stateNode;try{var O=d.memoizedProps,U=O.id,J=O.onPostCommit;typeof J=="function"&&J(U,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ee){Qt(d,d.return,ee)}}else uo(l,d,g,b);break;case 13:uo(l,d,g,b);break;case 23:break;case 22:O=d.stateNode,U=d.alternate,d.memoizedState!==null?O._visibility&2?uo(l,d,g,b):op(l,d):O._visibility&2?uo(l,d,g,b):(O._visibility|=2,rf(l,d,g,b,(d.subtreeFlags&10256)!==0)),E&2048&&u2(U,d);break;case 24:uo(l,d,g,b),E&2048&&d2(d.alternate,d);break;default:uo(l,d,g,b)}}function rf(l,d,g,b,E){for(E=E&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=l,U=d,J=g,ee=b,pe=U.flags;switch(U.tag){case 0:case 11:case 15:rf(O,U,J,ee,E),sp(8,U);break;case 23:break;case 22:var we=U.stateNode;U.memoizedState!==null?we._visibility&2?rf(O,U,J,ee,E):op(O,U):(we._visibility|=2,rf(O,U,J,ee,E)),E&&pe&2048&&u2(U.alternate,U);break;case 24:rf(O,U,J,ee,E),E&&pe&2048&&d2(U.alternate,U);break;default:rf(O,U,J,ee,E)}d=d.sibling}}function op(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var g=l,b=d,E=b.flags;switch(b.tag){case 22:op(g,b),E&2048&&u2(b.alternate,b);break;case 24:op(g,b),E&2048&&d2(b.alternate,b);break;default:op(g,b)}d=d.sibling}}var ap=8192;function sf(l){if(l.subtreeFlags&ap)for(l=l.child;l!==null;)b5(l),l=l.sibling}function b5(l){switch(l.tag){case 26:sf(l),l.flags&ap&&l.memoizedState!==null&&mK(_i,l.memoizedState,l.memoizedProps);break;case 5:sf(l);break;case 3:case 4:var d=_i;_i=Eb(l.stateNode.containerInfo),sf(l),_i=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=ap,ap=16777216,sf(l),ap=d):sf(l));break;default:sf(l)}}function v5(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function lp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];nr=b,w5(b,l)}v5(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)x5(l),l=l.sibling}function x5(l){switch(l.tag){case 0:case 11:case 15:lp(l),l.flags&2048&&vl(9,l,l.return);break;case 3:lp(l);break;case 12:lp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,db(l)):lp(l);break;default:lp(l)}}function db(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];nr=b,w5(b,l)}v5(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:vl(8,d,d.return),db(d);break;case 22:g=d.stateNode,g._visibility&2&&(g._visibility&=-3,db(d));break;default:db(d)}l=l.sibling}}function w5(l,d){for(;nr!==null;){var g=nr;switch(g.tag){case 0:case 11:case 15:vl(8,g,d);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:qm(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,nr=b;else e:for(g=l;nr!==null;){b=nr;var E=b.sibling,O=b.return;if(f5(b),b===g){nr=null;break e}if(E!==null){E.return=O,nr=E;break e}nr=O}}}var TX={getCacheForType:function(l){var d=vr(Hn),g=d.data.get(l);return g===void 0&&(g=l(),d.data.set(l,g)),g}},$X=typeof WeakMap=="function"?WeakMap:Map,Wt=0,rn=null,Ct=null,At=0,Gt=0,bs=null,Sl=!1,of=!1,f2=!1,ra=0,_n=0,El=0,cu=0,h2=0,Gs=0,af=0,cp=null,Qr=null,m2=!1,p2=0,fb=1/0,hb=null,Nl=null,fr=0,_l=null,lf=null,cf=0,g2=0,y2=null,S5=null,up=0,b2=null;function vs(){if((Wt&2)!==0&&At!==0)return At&-At;if(T.T!==null){var l=Jd;return l!==0?l:_2()}return mn()}function E5(){Gs===0&&(Gs=(At&536870912)===0||Ft?qc():536870912);var l=Ws.current;return l!==null&&(l.flags|=32),Gs}function xs(l,d,g){(l===rn&&(Gt===2||Gt===9)||l.cancelPendingCommit!==null)&&(uf(l,0),Cl(l,At,Gs,!1)),zo(l,g),((Wt&2)===0||l!==rn)&&(l===rn&&((Wt&2)===0&&(cu|=g),_n===4&&Cl(l,At,Gs,!1)),fo(l))}function N5(l,d,g){if((Wt&6)!==0)throw Error(r(327));var b=!g&&(d&124)===0&&(d&l.expiredLanes)===0||Bs(l,d),E=b?MX(l,d):w2(l,d,!0),O=b;do{if(E===0){of&&!b&&Cl(l,d,0,!1);break}else{if(g=l.current.alternate,O&&!RX(g)){E=w2(l,d,!1),O=!1;continue}if(E===2){if(O=d,l.errorRecoveryDisabledLanes&O)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){d=U;e:{var J=l;E=cp;var ee=J.current.memoizedState.isDehydrated;if(ee&&(uf(J,U).flags|=256),U=w2(J,U,!1),U!==2){if(f2&&!ee){J.errorRecoveryDisabledLanes|=O,cu|=O,E=4;break e}O=Qr,Qr=E,O!==null&&(Qr===null?Qr=O:Qr.push.apply(Qr,O))}E=U}if(O=!1,E!==2)continue}}if(E===1){uf(l,0),Cl(l,d,0,!0);break}e:{switch(b=l,O=E,O){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Cl(b,d,Gs,!Sl);break e;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=p2+300-Ce(),10<E)){if(Cl(b,d,Gs,!Sl),xi(b,0,!0)!==0)break e;b.timeoutHandle=Z5(_5.bind(null,b,g,Qr,hb,m2,d,Gs,cu,af,Sl,O,2,-0,0),E);break e}_5(b,g,Qr,hb,m2,d,Gs,cu,af,Sl,O,0,-0,0)}}break}while(!0);fo(l)}function _5(l,d,g,b,E,O,U,J,ee,pe,we,Ne,ye,be){if(l.timeoutHandle=-1,Ne=d.subtreeFlags,(Ne&8192||(Ne&16785408)===16785408)&&(yp={stylesheets:null,count:0,unsuspend:hK},b5(d),Ne=pK(),Ne!==null)){l.cancelPendingCommit=Ne(R5.bind(null,l,d,O,g,b,E,U,J,ee,we,1,ye,be)),Cl(l,O,U,!pe);return}R5(l,d,O,g,b,E,U,J,ee)}function RX(l){for(var d=l;;){var g=d.tag;if((g===0||g===11||g===15)&&d.flags&16384&&(g=d.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var E=g[b],O=E.getSnapshot;E=E.value;try{if(!ms(O(),E))return!1}catch{return!1}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Cl(l,d,g,b){d&=~h2,d&=~cu,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var E=d;0<E;){var O=31-We(E),U=1<<O;b[O]=-1,E&=~U}g!==0&&Hc(l,g,d)}function mb(){return(Wt&6)===0?(dp(0),!1):!0}function v2(){if(Ct!==null){if(Gt===0)var l=Ct.return;else l=Ct,Jo=ru=null,PE(l),tf=null,tp=0,l=Ct;for(;l!==null;)s5(l.alternate,l),l=l.return;Ct=null}}function uf(l,d){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,XX(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),v2(),rn=l,Ct=g=Wo(l.current,null),At=d,Gt=0,bs=null,Sl=!1,of=Bs(l,d),f2=!1,af=Gs=h2=cu=El=_n=0,Qr=cp=null,m2=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var E=31-We(b),O=1<<E;d|=l[E],b&=~O}return ra=d,P0(),g}function C5(l,d){St=null,T.H=tb,d===Wm||d===H0?(d=U4(),Gt=3):d===B4?(d=U4(),Gt=4):Gt=d===qR?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,bs=d,Ct===null&&(_n=1,ob(l,Vs(d,l.current)))}function O5(){var l=T.H;return T.H=tb,l===null?tb:l}function j5(){var l=T.A;return T.A=TX,l}function x2(){_n=4,Sl||(At&4194048)!==At&&Ws.current!==null||(of=!0),(El&134217727)===0&&(cu&134217727)===0||rn===null||Cl(rn,At,Gs,!1)}function w2(l,d,g){var b=Wt;Wt|=2;var E=O5(),O=j5();(rn!==l||At!==d)&&(hb=null,uf(l,d)),d=!1;var U=_n;e:do try{if(Gt!==0&&Ct!==null){var J=Ct,ee=bs;switch(Gt){case 8:v2(),U=6;break e;case 3:case 2:case 9:case 6:Ws.current===null&&(d=!0);var pe=Gt;if(Gt=0,bs=null,df(l,J,ee,pe),g&&of){U=0;break e}break;default:pe=Gt,Gt=0,bs=null,df(l,J,ee,pe)}}kX(),U=_n;break}catch(we){C5(l,we)}while(!0);return d&&l.shellSuspendCounter++,Jo=ru=null,Wt=b,T.H=E,T.A=O,Ct===null&&(rn=null,At=0,P0()),U}function kX(){for(;Ct!==null;)A5(Ct)}function MX(l,d){var g=Wt;Wt|=2;var b=O5(),E=j5();rn!==l||At!==d?(hb=null,fb=Ce()+500,uf(l,d)):of=Bs(l,d);e:do try{if(Gt!==0&&Ct!==null){d=Ct;var O=bs;t:switch(Gt){case 1:Gt=0,bs=null,df(l,d,O,1);break;case 2:case 9:if(z4(O)){Gt=0,bs=null,T5(d);break}d=function(){Gt!==2&&Gt!==9||rn!==l||(Gt=7),fo(l)},O.then(d,d);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:z4(O)?(Gt=0,bs=null,T5(d)):(Gt=0,bs=null,df(l,d,O,7));break;case 5:var U=null;switch(Ct.tag){case 26:U=Ct.memoizedState;case 5:case 27:var J=Ct;if(!U||dk(U)){Gt=0,bs=null;var ee=J.sibling;if(ee!==null)Ct=ee;else{var pe=J.return;pe!==null?(Ct=pe,pb(pe)):Ct=null}break t}}Gt=0,bs=null,df(l,d,O,5);break;case 6:Gt=0,bs=null,df(l,d,O,6);break;case 8:v2(),_n=6;break e;default:throw Error(r(462))}}IX();break}catch(we){C5(l,we)}while(!0);return Jo=ru=null,T.H=b,T.A=E,Wt=g,Ct!==null?0:(rn=null,At=0,P0(),_n)}function IX(){for(;Ct!==null&&!qe();)A5(Ct)}function A5(l){var d=n5(l.alternate,l,ra);l.memoizedProps=l.pendingProps,d===null?pb(l):Ct=d}function T5(l){var d=l,g=d.alternate;switch(d.tag){case 15:case 0:d=XR(g,d,d.pendingProps,d.type,void 0,At);break;case 11:d=XR(g,d,d.pendingProps,d.type.render,d.ref,At);break;case 5:PE(d);default:s5(g,d),d=Ct=$4(d,ra),d=n5(g,d,ra)}l.memoizedProps=l.pendingProps,d===null?pb(l):Ct=d}function df(l,d,g,b){Jo=ru=null,PE(d),tf=null,tp=0;var E=d.return;try{if(NX(l,E,d,g,At)){_n=1,ob(l,Vs(g,l.current)),Ct=null;return}}catch(O){if(E!==null)throw Ct=E,O;_n=1,ob(l,Vs(g,l.current)),Ct=null;return}d.flags&32768?(Ft||b===1?l=!0:of||(At&536870912)!==0?l=!1:(Sl=l=!0,(b===2||b===9||b===3||b===6)&&(b=Ws.current,b!==null&&b.tag===13&&(b.flags|=16384))),$5(d,l)):pb(d)}function pb(l){var d=l;do{if((d.flags&32768)!==0){$5(d,Sl);return}l=d.return;var g=CX(d.alternate,d,ra);if(g!==null){Ct=g;return}if(d=d.sibling,d!==null){Ct=d;return}Ct=d=l}while(d!==null);_n===0&&(_n=5)}function $5(l,d){do{var g=OX(l.alternate,l);if(g!==null){g.flags&=32767,Ct=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!d&&(l=l.sibling,l!==null)){Ct=l;return}Ct=l=g}while(l!==null);_n=6,Ct=null}function R5(l,d,g,b,E,O,U,J,ee){l.cancelPendingCommit=null;do gb();while(fr!==0);if((Wt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(O=d.lanes|d.childLanes,O|=dE,zs(l,g,O,U,J,ee),l===rn&&(Ct=rn=null,At=0),lf=d,_l=l,cf=g,g2=O,y2=E,S5=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,FX(re,function(){return D5(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=T.T,T.T=null,E=D.p,D.p=2,U=Wt,Wt|=4;try{jX(l,d,g)}finally{Wt=U,D.p=E,T.T=b}}fr=1,k5(),M5(),I5()}}function k5(){if(fr===1){fr=0;var l=_l,d=lf,g=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||g){g=T.T,T.T=null;var b=D.p;D.p=2;var E=Wt;Wt|=4;try{p5(d,l);var O=k2,U=w4(l.containerInfo),J=O.focusedElem,ee=O.selectionRange;if(U!==J&&J&&J.ownerDocument&&x4(J.ownerDocument.documentElement,J)){if(ee!==null&&oE(J)){var pe=ee.start,we=ee.end;if(we===void 0&&(we=pe),"selectionStart"in J)J.selectionStart=pe,J.selectionEnd=Math.min(we,J.value.length);else{var Ne=J.ownerDocument||document,ye=Ne&&Ne.defaultView||window;if(ye.getSelection){var be=ye.getSelection(),ut=J.textContent.length,lt=Math.min(ee.start,ut),Xt=ee.end===void 0?lt:Math.min(ee.end,ut);!be.extend&&lt>Xt&&(U=Xt,Xt=lt,lt=U);var de=v4(J,lt),ie=v4(J,Xt);if(de&&ie&&(be.rangeCount!==1||be.anchorNode!==de.node||be.anchorOffset!==de.offset||be.focusNode!==ie.node||be.focusOffset!==ie.offset)){var me=Ne.createRange();me.setStart(de.node,de.offset),be.removeAllRanges(),lt>Xt?(be.addRange(me),be.extend(ie.node,ie.offset)):(me.setEnd(ie.node,ie.offset),be.addRange(me))}}}}for(Ne=[],be=J;be=be.parentNode;)be.nodeType===1&&Ne.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<Ne.length;J++){var Se=Ne[J];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}jb=!!R2,k2=R2=null}finally{Wt=E,D.p=b,T.T=g}}l.current=d,fr=2}}function M5(){if(fr===2){fr=0;var l=_l,d=lf,g=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||g){g=T.T,T.T=null;var b=D.p;D.p=2;var E=Wt;Wt|=4;try{d5(l,d.alternate,d)}finally{Wt=E,D.p=b,T.T=g}}fr=3}}function I5(){if(fr===4||fr===3){fr=0,et();var l=_l,d=lf,g=cf,b=S5;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?fr=5:(fr=0,lf=_l=null,P5(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Nl=null),Gc(g),d=d.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(ce,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=T.T,E=D.p,D.p=2,T.T=null;try{for(var O=l.onRecoverableError,U=0;U<b.length;U++){var J=b[U];O(J.value,{componentStack:J.stack})}}finally{T.T=d,D.p=E}}(cf&3)!==0&&gb(),fo(l),E=l.pendingLanes,(g&4194090)!==0&&(E&42)!==0?l===b2?up++:(up=0,b2=l):up=0,dp(0)}}function P5(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,qm(d)))}function gb(l){return k5(),M5(),I5(),D5()}function D5(){if(fr!==5)return!1;var l=_l,d=g2;g2=0;var g=Gc(cf),b=T.T,E=D.p;try{D.p=32>g?32:g,T.T=null,g=y2,y2=null;var O=_l,U=cf;if(fr=0,lf=_l=null,cf=0,(Wt&6)!==0)throw Error(r(331));var J=Wt;if(Wt|=4,x5(O.current),y5(O,O.current,U,g),Wt=J,dp(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(ce,O)}catch{}return!0}finally{D.p=E,T.T=b,P5(l,d)}}function L5(l,d,g){d=Vs(g,d),d=XE(l.stateNode,d,2),l=pl(l,d,2),l!==null&&(zo(l,2),fo(l))}function Qt(l,d,g){if(l.tag===3)L5(l,l,g);else for(;d!==null;){if(d.tag===3){L5(d,l,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Nl===null||!Nl.has(b))){l=Vs(g,l),g=VR(2),b=pl(d,g,2),b!==null&&(UR(g,b,d,l),zo(b,2),fo(b));break}}d=d.return}}function S2(l,d,g){var b=l.pingCache;if(b===null){b=l.pingCache=new $X;var E=new Set;b.set(d,E)}else E=b.get(d),E===void 0&&(E=new Set,b.set(d,E));E.has(g)||(f2=!0,E.add(g),l=PX.bind(null,l,d,g),d.then(l,l))}function PX(l,d,g){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,rn===l&&(At&g)===g&&(_n===4||_n===3&&(At&62914560)===At&&300>Ce()-p2?(Wt&2)===0&&uf(l,0):h2|=g,af===At&&(af=0)),fo(l)}function F5(l,d){d===0&&(d=Ad()),l=Hd(l,d),l!==null&&(zo(l,d),fo(l))}function DX(l){var d=l.memoizedState,g=0;d!==null&&(g=d.retryLane),F5(l,g)}function LX(l,d){var g=0;switch(l.tag){case 13:var b=l.stateNode,E=l.memoizedState;E!==null&&(g=E.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),F5(l,g)}function FX(l,d){return $e(l,d)}var yb=null,ff=null,E2=!1,bb=!1,N2=!1,uu=0;function fo(l){l!==ff&&l.next===null&&(ff===null?yb=ff=l:ff=ff.next=l),bb=!0,E2||(E2=!0,zX())}function dp(l,d){if(!N2&&bb){N2=!0;do for(var g=!1,b=yb;b!==null;){if(l!==0){var E=b.pendingLanes;if(E===0)var O=0;else{var U=b.suspendedLanes,J=b.pingedLanes;O=(1<<31-We(42|l)+1)-1,O&=E&~(U&~J),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(g=!0,U5(b,O))}else O=At,O=xi(b,b===rn?O:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(O&3)===0||Bs(b,O)||(g=!0,U5(b,O));b=b.next}while(g);N2=!1}}function BX(){B5()}function B5(){bb=E2=!1;var l=0;uu!==0&&(JX()&&(l=uu),uu=0);for(var d=Ce(),g=null,b=yb;b!==null;){var E=b.next,O=z5(b,d);O===0?(b.next=null,g===null?yb=E:g.next=E,E===null&&(ff=g)):(g=b,(l!==0||(O&3)!==0)&&(bb=!0)),b=E}dp(l)}function z5(l,d){for(var g=l.suspendedLanes,b=l.pingedLanes,E=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var U=31-We(O),J=1<<U,ee=E[U];ee===-1?((J&g)===0||(J&b)!==0)&&(E[U]=oo(J,d)):ee<=d&&(l.expiredLanes|=J),O&=~J}if(d=rn,g=At,g=xi(l,l===d?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,g===0||l===d&&(Gt===2||Gt===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&Re(b),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Bs(l,g)){if(d=g&-g,d===l.callbackPriority)return d;switch(b!==null&&Re(b),Gc(g)){case 2:case 8:g=G;break;case 32:g=re;break;case 268435456:g=he;break;default:g=re}return b=V5.bind(null,l),g=$e(g,b),l.callbackPriority=d,l.callbackNode=g,d}return b!==null&&b!==null&&Re(b),l.callbackPriority=2,l.callbackNode=null,2}function V5(l,d){if(fr!==0&&fr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(gb()&&l.callbackNode!==g)return null;var b=At;return b=xi(l,l===rn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(N5(l,b,d),z5(l,Ce()),l.callbackNode!=null&&l.callbackNode===g?V5.bind(null,l):null)}function U5(l,d){if(gb())return null;N5(l,d,!0)}function zX(){KX(function(){(Wt&6)!==0?$e(Ie,BX):B5()})}function _2(){return uu===0&&(uu=qc()),uu}function q5(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:A0(""+l)}function H5(l,d){var g=d.ownerDocument.createElement("input");return g.name=d.name,g.value=d.value,l.id&&g.setAttribute("form",l.id),d.parentNode.insertBefore(g,d),l=new FormData(l),g.parentNode.removeChild(g),l}function VX(l,d,g,b,E){if(d==="submit"&&g&&g.stateNode===E){var O=q5((E[Ln]||null).action),U=b.submitter;U&&(d=(d=U[Ln]||null)?q5(d.formAction):U.getAttribute("formAction"),d!==null&&(O=d,U=null));var J=new k0("action","action",null,b,E);l.push({event:J,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(uu!==0){var ee=U?H5(E,U):new FormData(E);HE(g,{pending:!0,data:ee,method:E.method,action:O},null,ee)}}else typeof O=="function"&&(J.preventDefault(),ee=U?H5(E,U):new FormData(E),HE(g,{pending:!0,data:ee,method:E.method,action:O},O,ee))},currentTarget:E}]})}}for(var C2=0;C2<uE.length;C2++){var O2=uE[C2],UX=O2.toLowerCase(),qX=O2[0].toUpperCase()+O2.slice(1);Ni(UX,"on"+qX)}Ni(N4,"onAnimationEnd"),Ni(_4,"onAnimationIteration"),Ni(C4,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(aX,"onTransitionRun"),Ni(lX,"onTransitionStart"),Ni(cX,"onTransitionCancel"),Ni(O4,"onTransitionEnd"),ll("onMouseEnter",["mouseout","mouseover"]),ll("onMouseLeave",["mouseout","mouseover"]),ll("onPointerEnter",["pointerout","pointerover"]),ll("onPointerLeave",["pointerout","pointerover"]),qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qo("onBeforeInput",["compositionend","keypress","textInput","paste"]),qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fp));function W5(l,d){d=(d&4)!==0;for(var g=0;g<l.length;g++){var b=l[g],E=b.event;b=b.listeners;e:{var O=void 0;if(d)for(var U=b.length-1;0<=U;U--){var J=b[U],ee=J.instance,pe=J.currentTarget;if(J=J.listener,ee!==O&&E.isPropagationStopped())break e;O=J,E.currentTarget=pe;try{O(E)}catch(we){ib(we)}E.currentTarget=null,O=ee}else for(U=0;U<b.length;U++){if(J=b[U],ee=J.instance,pe=J.currentTarget,J=J.listener,ee!==O&&E.isPropagationStopped())break e;O=J,E.currentTarget=pe;try{O(E)}catch(we){ib(we)}E.currentTarget=null,O=ee}}}}function Ot(l,d){var g=d[al];g===void 0&&(g=d[al]=new Set);var b=l+"__bubble";g.has(b)||(G5(d,l,2,!1),g.add(b))}function j2(l,d,g){var b=0;d&&(b|=4),G5(g,l,b,d)}var vb="_reactListening"+Math.random().toString(36).slice(2);function A2(l){if(!l[vb]){l[vb]=!0,w0.forEach(function(g){g!=="selectionchange"&&(HX.has(g)||j2(g,!1,l),j2(g,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[vb]||(d[vb]=!0,j2("selectionchange",!1,d))}}function G5(l,d,g,b){switch(yk(d)){case 2:var E=bK;break;case 8:E=vK;break;default:E=U2}g=E.bind(null,d,g,l),E=void 0,!KS||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),b?E!==void 0?l.addEventListener(d,g,{capture:!0,passive:E}):l.addEventListener(d,g,!0):E!==void 0?l.addEventListener(d,g,{passive:E}):l.addEventListener(d,g,!1)}function T2(l,d,g,b,E){var O=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var U=b.tag;if(U===3||U===4){var J=b.stateNode.containerInfo;if(J===E)break;if(U===4)for(U=b.return;U!==null;){var ee=U.tag;if((ee===3||ee===4)&&U.stateNode.containerInfo===E)return;U=U.return}for(;J!==null;){if(U=ht(J),U===null)return;if(ee=U.tag,ee===5||ee===6||ee===26||ee===27){b=O=U;continue e}J=J.parentNode}}b=b.return}e4(function(){var pe=O,we=JS(g),Ne=[];e:{var ye=j4.get(l);if(ye!==void 0){var be=k0,ut=l;switch(l){case"keypress":if($0(g)===0)break e;case"keydown":case"keyup":be=FJ;break;case"focusin":ut="focus",be=tE;break;case"focusout":ut="blur",be=tE;break;case"beforeblur":case"afterblur":be=tE;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=r4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=OJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=VJ;break;case N4:case _4:case C4:be=TJ;break;case O4:be=qJ;break;case"scroll":case"scrollend":be=_J;break;case"wheel":be=WJ;break;case"copy":case"cut":case"paste":be=RJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=i4;break;case"toggle":case"beforetoggle":be=YJ}var lt=(d&4)!==0,Xt=!lt&&(l==="scroll"||l==="scrollend"),de=lt?ye!==null?ye+"Capture":null:ye;lt=[];for(var ie=pe,me;ie!==null;){var Se=ie;if(me=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||me===null||de===null||(Se=$m(ie,de),Se!=null&&lt.push(hp(ie,Se,me))),Xt)break;ie=ie.return}0<lt.length&&(ye=new be(ye,ut,null,g,we),Ne.push({event:ye,listeners:lt}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",be=l==="mouseout"||l==="pointerout",ye&&g!==YS&&(ut=g.relatedTarget||g.fromElement)&&(ht(ut)||ut[Si]))break e;if((be||ye)&&(ye=we.window===we?we:(ye=we.ownerDocument)?ye.defaultView||ye.parentWindow:window,be?(ut=g.relatedTarget||g.toElement,be=pe,ut=ut?ht(ut):null,ut!==null&&(Xt=i(ut),lt=ut.tag,ut!==Xt||lt!==5&&lt!==27&&lt!==6)&&(ut=null)):(be=null,ut=pe),be!==ut)){if(lt=r4,Se="onMouseLeave",de="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(lt=i4,Se="onPointerLeave",de="onPointerEnter",ie="pointer"),Xt=be==null?ye:br(be),me=ut==null?ye:br(ut),ye=new lt(Se,ie+"leave",be,g,we),ye.target=Xt,ye.relatedTarget=me,Se=null,ht(we)===pe&&(lt=new lt(de,ie+"enter",ut,g,we),lt.target=me,lt.relatedTarget=Xt,Se=lt),Xt=Se,be&&ut)t:{for(lt=be,de=ut,ie=0,me=lt;me;me=hf(me))ie++;for(me=0,Se=de;Se;Se=hf(Se))me++;for(;0<ie-me;)lt=hf(lt),ie--;for(;0<me-ie;)de=hf(de),me--;for(;ie--;){if(lt===de||de!==null&&lt===de.alternate)break t;lt=hf(lt),de=hf(de)}lt=null}else lt=null;be!==null&&Y5(Ne,ye,be,lt,!1),ut!==null&&Xt!==null&&Y5(Ne,Xt,ut,lt,!0)}}e:{if(ye=pe?br(pe):window,be=ye.nodeName&&ye.nodeName.toLowerCase(),be==="select"||be==="input"&&ye.type==="file")var Je=h4;else if(d4(ye))if(m4)Je=sX;else{Je=nX;var _t=tX}else be=ye.nodeName,!be||be.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?pe&&GS(pe.elementType)&&(Je=h4):Je=rX;if(Je&&(Je=Je(l,pe))){f4(Ne,Je,g,we);break e}_t&&_t(l,ye,pe),l==="focusout"&&pe&&ye.type==="number"&&pe.memoizedProps.value!=null&&WS(ye,"number",ye.value)}switch(_t=pe?br(pe):window,l){case"focusin":(d4(_t)||_t.contentEditable==="true")&&(Vd=_t,aE=pe,Fm=null);break;case"focusout":Fm=aE=Vd=null;break;case"mousedown":lE=!0;break;case"contextmenu":case"mouseup":case"dragend":lE=!1,S4(Ne,g,we);break;case"selectionchange":if(oX)break;case"keydown":case"keyup":S4(Ne,g,we)}var nt;if(rE)e:{switch(l){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else zd?c4(l,g)&&(ct="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(ct="onCompositionStart");ct&&(o4&&g.locale!=="ko"&&(zd||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&zd&&(nt=t4()):(dl=we,QS="value"in dl?dl.value:dl.textContent,zd=!0)),_t=xb(pe,ct),0<_t.length&&(ct=new s4(ct,l,null,g,we),Ne.push({event:ct,listeners:_t}),nt?ct.data=nt:(nt=u4(g),nt!==null&&(ct.data=nt)))),(nt=XJ?KJ(l,g):QJ(l,g))&&(ct=xb(pe,"onBeforeInput"),0<ct.length&&(_t=new s4("onBeforeInput","beforeinput",null,g,we),Ne.push({event:_t,listeners:ct}),_t.data=nt)),VX(Ne,l,pe,g,we)}W5(Ne,d)})}function hp(l,d,g){return{instance:l,listener:d,currentTarget:g}}function xb(l,d){for(var g=d+"Capture",b=[];l!==null;){var E=l,O=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||O===null||(E=$m(l,g),E!=null&&b.unshift(hp(l,E,O)),E=$m(l,d),E!=null&&b.push(hp(l,E,O))),l.tag===3)return b;l=l.return}return[]}function hf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Y5(l,d,g,b,E){for(var O=d._reactName,U=[];g!==null&&g!==b;){var J=g,ee=J.alternate,pe=J.stateNode;if(J=J.tag,ee!==null&&ee===b)break;J!==5&&J!==26&&J!==27||pe===null||(ee=pe,E?(pe=$m(g,O),pe!=null&&U.unshift(hp(g,pe,ee))):E||(pe=$m(g,O),pe!=null&&U.push(hp(g,pe,ee)))),g=g.return}U.length!==0&&l.push({event:d,listeners:U})}var WX=/\r\n?/g,GX=/\u0000|\uFFFD/g;function J5(l){return(typeof l=="string"?l:""+l).replace(WX,`
`).replace(GX,"")}function X5(l,d){return d=J5(d),J5(l)===d}function wb(){}function Jt(l,d,g,b,E,O){switch(g){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Ld(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Ld(l,""+b);break;case"className":kd(l,"class",b);break;case"tabIndex":kd(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":kd(l,g,b);break;case"style":Q3(l,b,O);break;case"data":if(d!=="object"){kd(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||g!=="href")){l.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=A0(""+b),l.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(g==="formAction"?(d!=="input"&&Jt(l,d,"name",E.name,E,null),Jt(l,d,"formEncType",E.formEncType,E,null),Jt(l,d,"formMethod",E.formMethod,E,null),Jt(l,d,"formTarget",E.formTarget,E,null)):(Jt(l,d,"encType",E.encType,E,null),Jt(l,d,"method",E.method,E,null),Jt(l,d,"target",E.target,E,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=A0(""+b),l.setAttribute(g,b);break;case"onClick":b!=null&&(l.onclick=wb);break;case"onScroll":b!=null&&Ot("scroll",l);break;case"onScrollEnd":b!=null&&Ot("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}g=A0(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""+b):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":b===!0?l.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,b):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(g,b):l.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(g):l.setAttribute(g,b);break;case"popover":Ot("beforetoggle",l),Ot("toggle",l),Rd(l,"popover",b);break;case"xlinkActuate":Ei(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ei(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ei(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ei(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ei(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ei(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ei(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ei(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ei(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Rd(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=EJ.get(g)||g,Rd(l,g,b))}}function $2(l,d,g,b,E,O){switch(g){case"style":Q3(l,b,O);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"children":typeof b=="string"?Ld(l,b):(typeof b=="number"||typeof b=="bigint")&&Ld(l,""+b);break;case"onScroll":b!=null&&Ot("scroll",l);break;case"onScrollEnd":b!=null&&Ot("scrollend",l);break;case"onClick":b!=null&&(l.onclick=wb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!S0.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(E=g.endsWith("Capture"),d=g.slice(2,E?g.length-7:void 0),O=l[Ln]||null,O=O!=null?O[g]:null,typeof O=="function"&&l.removeEventListener(d,O,E),typeof b=="function")){typeof O!="function"&&O!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(d,b,E);break e}g in l?l[g]=b:b===!0?l.setAttribute(g,""):Rd(l,g,b)}}}function hr(l,d,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",l),Ot("load",l);var b=!1,E=!1,O;for(O in g)if(g.hasOwnProperty(O)){var U=g[O];if(U!=null)switch(O){case"src":b=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Jt(l,d,O,U,g,null)}}E&&Jt(l,d,"srcSet",g.srcSet,g,null),b&&Jt(l,d,"src",g.src,g,null);return;case"input":Ot("invalid",l);var J=O=U=E=null,ee=null,pe=null;for(b in g)if(g.hasOwnProperty(b)){var we=g[b];if(we!=null)switch(b){case"name":E=we;break;case"type":U=we;break;case"checked":ee=we;break;case"defaultChecked":pe=we;break;case"value":O=we;break;case"defaultValue":J=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:Jt(l,d,b,we,g,null)}}Y3(l,O,J,ee,pe,U,E,!1),Id(l);return;case"select":Ot("invalid",l),b=U=O=null;for(E in g)if(g.hasOwnProperty(E)&&(J=g[E],J!=null))switch(E){case"value":O=J;break;case"defaultValue":U=J;break;case"multiple":b=J;default:Jt(l,d,E,J,g,null)}d=O,g=U,l.multiple=!!b,d!=null?Dd(l,!!b,d,!1):g!=null&&Dd(l,!!b,g,!0);return;case"textarea":Ot("invalid",l),O=E=b=null;for(U in g)if(g.hasOwnProperty(U)&&(J=g[U],J!=null))switch(U){case"value":b=J;break;case"defaultValue":E=J;break;case"children":O=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(91));break;default:Jt(l,d,U,J,g,null)}X3(l,b,E,O),Id(l);return;case"option":for(ee in g)if(g.hasOwnProperty(ee)&&(b=g[ee],b!=null))switch(ee){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Jt(l,d,ee,b,g,null)}return;case"dialog":Ot("beforetoggle",l),Ot("toggle",l),Ot("cancel",l),Ot("close",l);break;case"iframe":case"object":Ot("load",l);break;case"video":case"audio":for(b=0;b<fp.length;b++)Ot(fp[b],l);break;case"image":Ot("error",l),Ot("load",l);break;case"details":Ot("toggle",l);break;case"embed":case"source":case"link":Ot("error",l),Ot("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in g)if(g.hasOwnProperty(pe)&&(b=g[pe],b!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Jt(l,d,pe,b,g,null)}return;default:if(GS(d)){for(we in g)g.hasOwnProperty(we)&&(b=g[we],b!==void 0&&$2(l,d,we,b,g,void 0));return}}for(J in g)g.hasOwnProperty(J)&&(b=g[J],b!=null&&Jt(l,d,J,b,g,null))}function YX(l,d,g,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,O=null,U=null,J=null,ee=null,pe=null,we=null;for(be in g){var Ne=g[be];if(g.hasOwnProperty(be)&&Ne!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":ee=Ne;default:b.hasOwnProperty(be)||Jt(l,d,be,null,b,Ne)}}for(var ye in b){var be=b[ye];if(Ne=g[ye],b.hasOwnProperty(ye)&&(be!=null||Ne!=null))switch(ye){case"type":O=be;break;case"name":E=be;break;case"checked":pe=be;break;case"defaultChecked":we=be;break;case"value":U=be;break;case"defaultValue":J=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:be!==Ne&&Jt(l,d,ye,be,b,Ne)}}Pd(l,U,J,ee,pe,we,O,E);return;case"select":be=U=J=ye=null;for(O in g)if(ee=g[O],g.hasOwnProperty(O)&&ee!=null)switch(O){case"value":break;case"multiple":be=ee;default:b.hasOwnProperty(O)||Jt(l,d,O,null,b,ee)}for(E in b)if(O=b[E],ee=g[E],b.hasOwnProperty(E)&&(O!=null||ee!=null))switch(E){case"value":ye=O;break;case"defaultValue":J=O;break;case"multiple":U=O;default:O!==ee&&Jt(l,d,E,O,b,ee)}d=J,g=U,b=be,ye!=null?Dd(l,!!g,ye,!1):!!b!=!!g&&(d!=null?Dd(l,!!g,d,!0):Dd(l,!!g,g?[]:"",!1));return;case"textarea":be=ye=null;for(J in g)if(E=g[J],g.hasOwnProperty(J)&&E!=null&&!b.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:Jt(l,d,J,null,b,E)}for(U in b)if(E=b[U],O=g[U],b.hasOwnProperty(U)&&(E!=null||O!=null))switch(U){case"value":ye=E;break;case"defaultValue":be=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==O&&Jt(l,d,U,E,b,O)}J3(l,ye,be);return;case"option":for(var ut in g)if(ye=g[ut],g.hasOwnProperty(ut)&&ye!=null&&!b.hasOwnProperty(ut))switch(ut){case"selected":l.selected=!1;break;default:Jt(l,d,ut,null,b,ye)}for(ee in b)if(ye=b[ee],be=g[ee],b.hasOwnProperty(ee)&&ye!==be&&(ye!=null||be!=null))switch(ee){case"selected":l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Jt(l,d,ee,ye,b,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in g)ye=g[lt],g.hasOwnProperty(lt)&&ye!=null&&!b.hasOwnProperty(lt)&&Jt(l,d,lt,null,b,ye);for(pe in b)if(ye=b[pe],be=g[pe],b.hasOwnProperty(pe)&&ye!==be&&(ye!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Jt(l,d,pe,ye,b,be)}return;default:if(GS(d)){for(var Xt in g)ye=g[Xt],g.hasOwnProperty(Xt)&&ye!==void 0&&!b.hasOwnProperty(Xt)&&$2(l,d,Xt,void 0,b,ye);for(we in b)ye=b[we],be=g[we],!b.hasOwnProperty(we)||ye===be||ye===void 0&&be===void 0||$2(l,d,we,ye,b,be);return}}for(var de in g)ye=g[de],g.hasOwnProperty(de)&&ye!=null&&!b.hasOwnProperty(de)&&Jt(l,d,de,null,b,ye);for(Ne in b)ye=b[Ne],be=g[Ne],!b.hasOwnProperty(Ne)||ye===be||ye==null&&be==null||Jt(l,d,Ne,ye,b,be)}var R2=null,k2=null;function Sb(l){return l.nodeType===9?l:l.ownerDocument}function K5(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q5(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function M2(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var I2=null;function JX(){var l=window.event;return l&&l.type==="popstate"?l===I2?!1:(I2=l,!0):(I2=null,!1)}var Z5=typeof setTimeout=="function"?setTimeout:void 0,XX=typeof clearTimeout=="function"?clearTimeout:void 0,ek=typeof Promise=="function"?Promise:void 0,KX=typeof queueMicrotask=="function"?queueMicrotask:typeof ek<"u"?function(l){return ek.resolve(null).then(l).catch(QX)}:Z5;function QX(l){setTimeout(function(){throw l})}function Ol(l){return l==="head"}function tk(l,d){var g=d,b=0,E=0;do{var O=g.nextSibling;if(l.removeChild(g),O&&O.nodeType===8)if(g=O.data,g==="/$"){if(0<b&&8>b){g=b;var U=l.ownerDocument;if(g&1&&mp(U.documentElement),g&2&&mp(U.body),g&4)for(g=U.head,mp(g),U=g.firstChild;U;){var J=U.nextSibling,ee=U.nodeName;U[Vo]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&U.rel.toLowerCase()==="stylesheet"||g.removeChild(U),U=J}}if(E===0){l.removeChild(O),Sp(d);return}E--}else g==="$"||g==="$?"||g==="$!"?E++:b=g.charCodeAt(0)-48;else b=0;g=O}while(g);Sp(d)}function P2(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var g=d;switch(d=d.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":P2(g),Yc(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function ZX(l,d,g,b){for(;l.nodeType===1;){var E=g;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Vo])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var O=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Ci(l.nextSibling),l===null)break}return null}function eK(l,d,g){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Ci(l.nextSibling),l===null))return null;return l}function D2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function tK(l,d){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")d();else{var b=function(){d(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Ci(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var L2=null;function nk(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return l;d--}else g==="/$"&&d++}l=l.previousSibling}return null}function rk(l,d,g){switch(d=Sb(g),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function mp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Yc(l)}var Ys=new Map,sk=new Set;function Eb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var sa=D.d;D.d={f:nK,r:rK,D:sK,C:iK,L:oK,m:aK,X:cK,S:lK,M:uK};function nK(){var l=sa.f(),d=mb();return l||d}function rK(l){var d=Tn(l);d!==null&&d.tag===5&&d.type==="form"?NR(d):sa.r(l)}var mf=typeof document>"u"?null:document;function ik(l,d,g){var b=mf;if(b&&typeof d=="string"&&d){var E=Yr(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof g=="string"&&(E+='[crossorigin="'+g+'"]'),sk.has(E)||(sk.add(E),l={rel:l,crossOrigin:g,href:d},b.querySelector(E)===null&&(d=b.createElement("link"),hr(d,"link",l),Fn(d),b.head.appendChild(d)))}}function sK(l){sa.D(l),ik("dns-prefetch",l,null)}function iK(l,d){sa.C(l,d),ik("preconnect",l,d)}function oK(l,d,g){sa.L(l,d,g);var b=mf;if(b&&l&&d){var E='link[rel="preload"][as="'+Yr(d)+'"]';d==="image"&&g&&g.imageSrcSet?(E+='[imagesrcset="'+Yr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(E+='[imagesizes="'+Yr(g.imageSizes)+'"]')):E+='[href="'+Yr(l)+'"]';var O=E;switch(d){case"style":O=pf(l);break;case"script":O=gf(l)}Ys.has(O)||(l=f({rel:"preload",href:d==="image"&&g&&g.imageSrcSet?void 0:l,as:d},g),Ys.set(O,l),b.querySelector(E)!==null||d==="style"&&b.querySelector(pp(O))||d==="script"&&b.querySelector(gp(O))||(d=b.createElement("link"),hr(d,"link",l),Fn(d),b.head.appendChild(d)))}}function aK(l,d){sa.m(l,d);var g=mf;if(g&&l){var b=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Yr(b)+'"][href="'+Yr(l)+'"]',O=E;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=gf(l)}if(!Ys.has(O)&&(l=f({rel:"modulepreload",href:l},d),Ys.set(O,l),g.querySelector(E)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(gp(O)))return}b=g.createElement("link"),hr(b,"link",l),Fn(b),g.head.appendChild(b)}}}function lK(l,d,g){sa.S(l,d,g);var b=mf;if(b&&l){var E=Uo(b).hoistableStyles,O=pf(l);d=d||"default";var U=E.get(O);if(!U){var J={loading:0,preload:null};if(U=b.querySelector(pp(O)))J.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},g),(g=Ys.get(O))&&F2(l,g);var ee=U=b.createElement("link");Fn(ee),hr(ee,"link",l),ee._p=new Promise(function(pe,we){ee.onload=pe,ee.onerror=we}),ee.addEventListener("load",function(){J.loading|=1}),ee.addEventListener("error",function(){J.loading|=2}),J.loading|=4,Nb(U,d,b)}U={type:"stylesheet",instance:U,count:1,state:J},E.set(O,U)}}}function cK(l,d){sa.X(l,d);var g=mf;if(g&&l){var b=Uo(g).hoistableScripts,E=gf(l),O=b.get(E);O||(O=g.querySelector(gp(E)),O||(l=f({src:l,async:!0},d),(d=Ys.get(E))&&B2(l,d),O=g.createElement("script"),Fn(O),hr(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(E,O))}}function uK(l,d){sa.M(l,d);var g=mf;if(g&&l){var b=Uo(g).hoistableScripts,E=gf(l),O=b.get(E);O||(O=g.querySelector(gp(E)),O||(l=f({src:l,async:!0,type:"module"},d),(d=Ys.get(E))&&B2(l,d),O=g.createElement("script"),Fn(O),hr(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(E,O))}}function ok(l,d,g,b){var E=(E=fe.current)?Eb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(d=pf(g.href),g=Uo(E).hoistableStyles,b=g.get(d),b||(b={type:"style",instance:null,count:0,state:null},g.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=pf(g.href);var O=Uo(E).hoistableStyles,U=O.get(l);if(U||(E=E.ownerDocument||E,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,U),(O=E.querySelector(pp(l)))&&!O._p&&(U.instance=O,U.state.loading=5),Ys.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ys.set(l,g),O||dK(E,l,g,U.state))),d&&b===null)throw Error(r(528,""));return U}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=g.async,g=g.src,typeof g=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=gf(g),g=Uo(E).hoistableScripts,b=g.get(d),b||(b={type:"script",instance:null,count:0,state:null},g.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function pf(l){return'href="'+Yr(l)+'"'}function pp(l){return'link[rel="stylesheet"]['+l+"]"}function ak(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function dK(l,d,g,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),hr(d,"link",g),Fn(d),l.head.appendChild(d))}function gf(l){return'[src="'+Yr(l)+'"]'}function gp(l){return"script[async]"+l}function lk(l,d,g){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+Yr(g.href)+'"]');if(b)return d.instance=b,Fn(b),b;var E=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Fn(b),hr(b,"style",E),Nb(b,g.precedence,l),d.instance=b;case"stylesheet":E=pf(g.href);var O=l.querySelector(pp(E));if(O)return d.state.loading|=4,d.instance=O,Fn(O),O;b=ak(g),(E=Ys.get(E))&&F2(b,E),O=(l.ownerDocument||l).createElement("link"),Fn(O);var U=O;return U._p=new Promise(function(J,ee){U.onload=J,U.onerror=ee}),hr(O,"link",b),d.state.loading|=4,Nb(O,g.precedence,l),d.instance=O;case"script":return O=gf(g.src),(E=l.querySelector(gp(O)))?(d.instance=E,Fn(E),E):(b=g,(E=Ys.get(O))&&(b=f({},g),B2(b,E)),l=l.ownerDocument||l,E=l.createElement("script"),Fn(E),hr(E,"link",b),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,Nb(b,g.precedence,l));return d.instance}function Nb(l,d,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=b.length?b[b.length-1]:null,O=E,U=0;U<b.length;U++){var J=b[U];if(J.dataset.precedence===d)O=J;else if(O!==E)break}O?O.parentNode.insertBefore(l,O.nextSibling):(d=g.nodeType===9?g.head:g,d.insertBefore(l,d.firstChild))}function F2(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function B2(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var _b=null;function ck(l,d,g){if(_b===null){var b=new Map,E=_b=new Map;E.set(g,b)}else E=_b,b=E.get(g),b||(b=new Map,E.set(g,b));if(b.has(l))return b;for(b.set(l,null),g=g.getElementsByTagName(l),E=0;E<g.length;E++){var O=g[E];if(!(O[Vo]||O[an]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var U=O.getAttribute(d)||"";U=l+U;var J=b.get(U);J?J.push(O):b.set(U,[O])}}return b}function uk(l,d,g){l=l.ownerDocument||l,l.head.insertBefore(g,d==="title"?l.querySelector("head > title"):null)}function fK(l,d,g){if(g===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function dk(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var yp=null;function hK(){}function mK(l,d,g){if(yp===null)throw Error(r(475));var b=yp;if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var E=pf(g.href),O=l.querySelector(pp(E));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=Cb.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=O,Fn(O);return}O=l.ownerDocument||l,g=ak(g),(E=Ys.get(E))&&F2(g,E),O=O.createElement("link"),Fn(O);var U=O;U._p=new Promise(function(J,ee){U.onload=J,U.onerror=ee}),hr(O,"link",g),d.instance=O}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=Cb.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function pK(){if(yp===null)throw Error(r(475));var l=yp;return l.stylesheets&&l.count===0&&z2(l,l.stylesheets),0<l.count?function(d){var g=setTimeout(function(){if(l.stylesheets&&z2(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Cb(){if(this.count--,this.count===0){if(this.stylesheets)z2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ob=null;function z2(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ob=new Map,d.forEach(gK,l),Ob=null,Cb.call(l))}function gK(l,d){if(!(d.state.loading&4)){var g=Ob.get(l);if(g)var b=g.get(null);else{g=new Map,Ob.set(l,g);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<E.length;O++){var U=E[O];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(g.set(U.dataset.precedence,U),b=U)}b&&g.set(null,b)}E=d.instance,U=E.getAttribute("data-precedence"),O=g.get(U)||b,O===b&&g.set(null,E),g.set(U,E),this.count++,b=Cb.bind(this),E.addEventListener("load",b),E.addEventListener("error",b),O?O.parentNode.insertBefore(E,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var bp={$$typeof:C,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function yK(l,d,g,b,E,O,U,J){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.hiddenUpdates=ol(null),this.identifierPrefix=b,this.onUncaughtError=E,this.onCaughtError=O,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function fk(l,d,g,b,E,O,U,J,ee,pe,we,Ne){return l=new yK(l,d,g,U,J,ee,pe,Ne),d=1,O===!0&&(d|=24),O=ps(3,null,null,d),l.current=O,O.stateNode=l,d=SE(),d.refCount++,l.pooledCache=d,d.refCount++,O.memoizedState={element:b,isDehydrated:g,cache:d},CE(O),l}function hk(l){return l?(l=Wd,l):Wd}function mk(l,d,g,b,E,O){E=hk(E),b.context===null?b.context=E:b.pendingContext=E,b=ml(d),b.payload={element:g},O=O===void 0?null:O,O!==null&&(b.callback=O),g=pl(l,b,d),g!==null&&(xs(g,l,d),Ym(g,l,d))}function pk(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<d?g:d}}function V2(l,d){pk(l,d),(l=l.alternate)&&pk(l,d)}function gk(l){if(l.tag===13){var d=Hd(l,67108864);d!==null&&xs(d,l,67108864),V2(l,67108864)}}var jb=!0;function bK(l,d,g,b){var E=T.T;T.T=null;var O=D.p;try{D.p=2,U2(l,d,g,b)}finally{D.p=O,T.T=E}}function vK(l,d,g,b){var E=T.T;T.T=null;var O=D.p;try{D.p=8,U2(l,d,g,b)}finally{D.p=O,T.T=E}}function U2(l,d,g,b){if(jb){var E=q2(b);if(E===null)T2(l,d,b,Ab,g),bk(l,b);else if(wK(E,l,d,g,b))b.stopPropagation();else if(bk(l,b),d&4&&-1<xK.indexOf(l)){for(;E!==null;){var O=Tn(E);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var U=ur(O.pendingLanes);if(U!==0){var J=O;for(J.pendingLanes|=2,J.entangledLanes|=2;U;){var ee=1<<31-We(U);J.entanglements[1]|=ee,U&=~ee}fo(O),(Wt&6)===0&&(fb=Ce()+500,dp(0))}}break;case 13:J=Hd(O,2),J!==null&&xs(J,O,2),mb(),V2(O,2)}if(O=q2(b),O===null&&T2(l,d,b,Ab,g),O===E)break;E=O}E!==null&&b.stopPropagation()}else T2(l,d,b,null,g)}}function q2(l){return l=JS(l),H2(l)}var Ab=null;function H2(l){if(Ab=null,l=ht(l),l!==null){var d=i(l);if(d===null)l=null;else{var g=d.tag;if(g===13){if(l=o(d),l!==null)return l;l=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Ab=l,null}function yk(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Ie:return 2;case G:return 8;case re:case te:return 32;case he:return 268435456;default:return 32}default:return 32}}var W2=!1,jl=null,Al=null,Tl=null,vp=new Map,xp=new Map,$l=[],xK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bk(l,d){switch(l){case"focusin":case"focusout":jl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":vp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":xp.delete(d.pointerId)}}function wp(l,d,g,b,E,O){return l===null||l.nativeEvent!==O?(l={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:O,targetContainers:[E]},d!==null&&(d=Tn(d),d!==null&&gk(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function wK(l,d,g,b,E){switch(d){case"focusin":return jl=wp(jl,l,d,g,b,E),!0;case"dragenter":return Al=wp(Al,l,d,g,b,E),!0;case"mouseover":return Tl=wp(Tl,l,d,g,b,E),!0;case"pointerover":var O=E.pointerId;return vp.set(O,wp(vp.get(O)||null,l,d,g,b,E)),!0;case"gotpointercapture":return O=E.pointerId,xp.set(O,wp(xp.get(O)||null,l,d,g,b,E)),!0}return!1}function vk(l){var d=ht(l.target);if(d!==null){var g=i(d);if(g!==null){if(d=g.tag,d===13){if(d=o(g),d!==null){l.blockedOn=d,wi(l.priority,function(){if(g.tag===13){var b=vs();b=Wc(b);var E=Hd(g,b);E!==null&&xs(E,g,b),V2(g,b)}});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var g=q2(l.nativeEvent);if(g===null){g=l.nativeEvent;var b=new g.constructor(g.type,g);YS=b,g.target.dispatchEvent(b),YS=null}else return d=Tn(g),d!==null&&gk(d),l.blockedOn=g,!1;d.shift()}return!0}function xk(l,d,g){Tb(l)&&g.delete(d)}function SK(){W2=!1,jl!==null&&Tb(jl)&&(jl=null),Al!==null&&Tb(Al)&&(Al=null),Tl!==null&&Tb(Tl)&&(Tl=null),vp.forEach(xk),xp.forEach(xk)}function $b(l,d){l.blockedOn===d&&(l.blockedOn=null,W2||(W2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,SK)))}var Rb=null;function wk(l){Rb!==l&&(Rb=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rb===l&&(Rb=null);for(var d=0;d<l.length;d+=3){var g=l[d],b=l[d+1],E=l[d+2];if(typeof b!="function"){if(H2(b||g)===null)continue;break}var O=Tn(g);O!==null&&(l.splice(d,3),d-=3,HE(O,{pending:!0,data:E,method:g.method,action:b},b,E))}}))}function Sp(l){function d(ee){return $b(ee,l)}jl!==null&&$b(jl,l),Al!==null&&$b(Al,l),Tl!==null&&$b(Tl,l),vp.forEach(d),xp.forEach(d);for(var g=0;g<$l.length;g++){var b=$l[g];b.blockedOn===l&&(b.blockedOn=null)}for(;0<$l.length&&(g=$l[0],g.blockedOn===null);)vk(g),g.blockedOn===null&&$l.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var E=g[b],O=g[b+1],U=E[Ln]||null;if(typeof O=="function")U||wk(g);else if(U){var J=null;if(O&&O.hasAttribute("formAction")){if(E=O,U=O[Ln]||null)J=U.formAction;else if(H2(E)!==null)continue}else J=U.action;typeof J=="function"?g[b+1]=J:(g.splice(b,3),b-=3),wk(g)}}}function G2(l){this._internalRoot=l}kb.prototype.render=G2.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var g=d.current,b=vs();mk(g,b,l,d,null,null)},kb.prototype.unmount=G2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;mk(l.current,2,null,l,null,null),mb(),d[Si]=null}};function kb(l){this._internalRoot=l}kb.prototype.unstable_scheduleHydration=function(l){if(l){var d=mn();l={blockedOn:null,target:l,priority:d};for(var g=0;g<$l.length&&d!==0&&d<$l[g].priority;g++);$l.splice(g,0,l),g===0&&vk(l)}};var Sk=t.version;if(Sk!=="19.1.0")throw Error(r(527,Sk,"19.1.0"));D.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(d),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var EK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mb.isDisabled&&Mb.supportsFiber)try{ce=Mb.inject(EK),xe=Mb}catch{}}return Np.createRoot=function(l,d){if(!s(l))throw Error(r(299));var g=!1,b="",E=LR,O=FR,U=BR,J=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(J=d.unstable_transitionCallbacks)),d=fk(l,1,!1,null,null,g,b,E,O,U,J,null),l[Si]=d.current,A2(l),new G2(d)},Np.hydrateRoot=function(l,d,g){if(!s(l))throw Error(r(299));var b=!1,E="",O=LR,U=FR,J=BR,ee=null,pe=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(O=g.onUncaughtError),g.onCaughtError!==void 0&&(U=g.onCaughtError),g.onRecoverableError!==void 0&&(J=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(ee=g.unstable_transitionCallbacks),g.formState!==void 0&&(pe=g.formState)),d=fk(l,1,!0,d,g??null,b,E,O,U,J,ee,pe),d.context=hk(null),g=d.current,b=vs(),b=Wc(b),E=ml(b),E.callback=null,pl(g,E,b),g=b,d.current.lanes=g,zo(d,g),fo(d),l[Si]=d.current,A2(l),new kb(d)},Np.version="19.1.0",Np}var Mk;function IK(){if(Mk)return K2.exports;Mk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K2.exports=MK(),K2.exports}var PK=IK(),Yl=function(){return Yl=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yl.apply(this,arguments)};function DK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function LK(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Cv="right-scroll-bar-position",Ov="width-before-scroll-bar",FK="with-scroll-bars-hidden",BK="--removed-body-scroll-bar-size";function tN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function zK(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var VK=typeof window<"u"?w.useLayoutEffect:w.useEffect,Ik=new WeakMap;function UK(e,t){var n=zK(null,function(r){return e.forEach(function(s){return tN(s,r)})});return VK(function(){var r=Ik.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(a){i.has(a)||tN(a,null)}),i.forEach(function(a){s.has(a)||tN(a,o)})}Ik.set(n,e)},[e]),n}var tx=function(){return tx=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tx.apply(this,arguments)};function qK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function HK(e){return e}function WK(e,t){t===void 0&&(t=HK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var f=o;o=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return s}function GK(e){e===void 0&&(e={});var t=WK(null);return t.options=tx({async:!0,ssr:!1},e),t}var F8=function(e){var t=e.sideCar,n=qK(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,tx({},n))};F8.isSideCarExport=!0;function YK(e,t){return e.useMedium(t),F8}var B8=GK(),nN=function(){},Fw=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:nN,onWheelCapture:nN,onTouchMoveCapture:nN}),s=r[0],i=r[1],o=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,y=e.noIsolation,v=e.inert,x=e.allowPinchZoom,S=e.as,N=S===void 0?"div":S,_=e.gapMode,C=DK(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,A=UK([n,t]),$=Yl(Yl({},C),s);return w.createElement(w.Fragment,null,f&&w.createElement(j,{sideCar:B8,removeScrollBar:u,shards:h,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:_}),o?w.cloneElement(w.Children.only(a),Yl(Yl({},$),{ref:A})):w.createElement(N,Yl({},$,{className:c,ref:A}),a))});Fw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fw.classNames={fullWidth:Ov,zeroRight:Cv};var JK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XK(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=JK();return t&&e.setAttribute("nonce",t),e}function KK(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function QK(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ZK=function(){var e=0,t=null;return{add:function(n){e==0&&(t=XK())&&(KK(t,n),QK(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eQ=function(){var e=ZK();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},z8=function(){var e=eQ(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},tQ={left:0,top:0,right:0,gap:0},rN=function(e){return parseInt(e||"",10)||0},nQ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[rN(n),rN(r),rN(s)]},rQ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tQ;var t=nQ(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sQ=z8(),Hf="data-scroll-locked",iQ=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(FK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Hf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ov,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Cv," .").concat(Cv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hf,`] {
    `).concat(BK,": ").concat(a,`px;
  }
`)},Pk=function(){var e=parseInt(document.body.getAttribute(Hf)||"0",10);return isFinite(e)?e:0},oQ=function(){w.useEffect(function(){return document.body.setAttribute(Hf,(Pk()+1).toString()),function(){var e=Pk()-1;e<=0?document.body.removeAttribute(Hf):document.body.setAttribute(Hf,e.toString())}},[])},aQ=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;oQ();var i=w.useMemo(function(){return rQ(s)},[s]);return w.createElement(sQ,{styles:iQ(i,!t,s,n?"":"!important")})},lC=!1;if(typeof window<"u")try{var Ib=Object.defineProperty({},"passive",{get:function(){return lC=!0,!0}});window.addEventListener("test",Ib,Ib),window.removeEventListener("test",Ib,Ib)}catch{lC=!1}var yf=lC?{passive:!1}:!1,lQ=function(e){return e.tagName==="TEXTAREA"},V8=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lQ(e)&&n[t]==="visible")},cQ=function(e){return V8(e,"overflowY")},uQ=function(e){return V8(e,"overflowX")},Dk=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=U8(e,r);if(s){var i=q8(e,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dQ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},fQ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},U8=function(e,t){return e==="v"?cQ(t):uQ(t)},q8=function(e,t){return e==="v"?dQ(t):fQ(t)},hQ=function(e,t){return e==="h"&&t==="rtl"?-1:1},mQ=function(e,t,n,r,s){var i=hQ(e,window.getComputedStyle(t).direction),o=i*r,a=n.target,c=t.contains(a),u=!1,f=o>0,h=0,p=0;do{var y=q8(e,a),v=y[0],x=y[1],S=y[2],N=x-S-i*v;(v||N)&&U8(e,a)&&(h+=N,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(u=!0),u},Pb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Lk=function(e){return[e.deltaX,e.deltaY]},Fk=function(e){return e&&"current"in e?e.current:e},pQ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gQ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yQ=0,bf=[];function bQ(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(yQ++)[0],i=w.useState(z8)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var x=LK([e.lockRef.current],(e.shards||[]).map(Fk),!0).filter(Boolean);return x.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=w.useCallback(function(x,S){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var N=Pb(x),_=n.current,C="deltaX"in x?x.deltaX:_[0]-N[0],j="deltaY"in x?x.deltaY:_[1]-N[1],A,$=x.target,k=Math.abs(C)>Math.abs(j)?"h":"v";if("touches"in x&&k==="h"&&$.type==="range")return!1;var R=Dk(k,$);if(!R)return!0;if(R?A=k:(A=k==="v"?"h":"v",R=Dk(k,$)),!R)return!1;if(!r.current&&"changedTouches"in x&&(C||j)&&(r.current=A),!A)return!0;var F=r.current||A;return mQ(F,S,x,F==="h"?C:j)},[]),c=w.useCallback(function(x){var S=x;if(!(!bf.length||bf[bf.length-1]!==i)){var N="deltaY"in S?Lk(S):Pb(S),_=t.current.filter(function(A){return A.name===S.type&&(A.target===S.target||S.target===A.shadowParent)&&pQ(A.delta,N)})[0];if(_&&_.should){S.cancelable&&S.preventDefault();return}if(!_){var C=(o.current.shards||[]).map(Fk).filter(Boolean).filter(function(A){return A.contains(S.target)}),j=C.length>0?a(S,C[0]):!o.current.noIsolation;j&&S.cancelable&&S.preventDefault()}}},[]),u=w.useCallback(function(x,S,N,_){var C={name:x,delta:S,target:N,should:_,shadowParent:vQ(N)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(j){return j!==C})},1)},[]),f=w.useCallback(function(x){n.current=Pb(x),r.current=void 0},[]),h=w.useCallback(function(x){u(x.type,Lk(x),x.target,a(x,e.lockRef.current))},[]),p=w.useCallback(function(x){u(x.type,Pb(x),x.target,a(x,e.lockRef.current))},[]);w.useEffect(function(){return bf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,yf),document.addEventListener("touchmove",c,yf),document.addEventListener("touchstart",f,yf),function(){bf=bf.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,yf),document.removeEventListener("touchmove",c,yf),document.removeEventListener("touchstart",f,yf)}},[]);var y=e.removeScrollBar,v=e.inert;return w.createElement(w.Fragment,null,v?w.createElement(i,{styles:gQ(s)}):null,y?w.createElement(aQ,{gapMode:e.gapMode}):null)}function vQ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xQ=YK(B8,bQ);var nx=w.forwardRef(function(e,t){return w.createElement(Fw,Yl({},e,{ref:t,sideCar:xQ}))});nx.classNames=Fw.classNames;function No(e){return Object.keys(e)}function sN(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Lj(e,t){const n={...e},r=t;return sN(e)&&sN(t)&&Object.keys(t).forEach(s=>{sN(r[s])&&s in e?n[s]=Lj(n[s],r[s]):n[s]=r[s]}),n}function wQ(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function SQ(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function EQ(e){const t=SQ(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function iN(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function H8(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const s=`${r/16}${e}`;return t?iN(s):s}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(e))return t?iN(r):r;const s=r.replace("px","");if(!Number.isNaN(Number(s))){const i=`${Number(s)/16}${e}`;return t?iN(i):i}}return r}return n}const Ae=H8("rem",{shouldScale:!0}),Bk=H8("em");function Fj(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function W8(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function Tc(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==w.Fragment:!1}function Ya(e){const t=w.createContext(null);return[({children:s,value:i})=>m.jsx(t.Provider,{value:i,children:s}),()=>{const s=w.useContext(t);if(s===null)throw new Error(e);return s}]}function dd(e=null){const t=w.createContext(e);return[({children:s,value:i})=>m.jsx(t.Provider,{value:i,children:s}),()=>w.useContext(t)]}function zk(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function rx(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function NQ(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function _Q(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function CQ(e,t,n){return rx(e,n)===rx(t,n)}function G8({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:s=!1,dir:i="rtl",orientation:o}){return a=>{var v;n==null||n(a);const c=Array.from(((v=rx(a.currentTarget,e))==null?void 0:v.querySelectorAll(t))||[]).filter(x=>CQ(a.currentTarget,x,e)),u=c.findIndex(x=>a.currentTarget===x),f=_Q(u,c,r),h=NQ(u,c,r),p=i==="rtl"?h:f,y=i==="rtl"?f:h;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[p].focus(),s&&c[p].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[y].focus(),s&&c[y].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[h].focus(),s&&c[h].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[f].focus(),s&&c[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!c[0].disabled&&c[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const x=c.length-1;!c[x].disabled&&c[x].focus();break}}}}const OQ={app:100,modal:200,popover:300,overlay:400,max:9999};function eo(e){return OQ[e]}const cC=()=>{};function jQ(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||cC:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Mt(e,t="size",n=!0){if(e!==void 0)return W8(e)?n?Ae(e):e:`var(--${t}-${e})`}function Bj(e){return Mt(e,"mantine-spacing")}function Qn(e){return e===void 0?"var(--mantine-radius-default)":Mt(e,"mantine-radius")}function Vr(e){return Mt(e,"mantine-font-size")}function zj(e){if(e)return Mt(e,"mantine-shadow",!1)}function wo(e,t){return n=>{e==null||e(n),t==null||t(n)}}function AQ(e,t,n){var r;return n?Array.from(((r=rx(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(s=>s===n):null}function TQ(){const[e,t]=w.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Ca(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Wf(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Su(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const $Q=()=>{};function Bw(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,s=Su(e),i=w.useRef(0),o=Object.assign(w.useCallback((...a)=>{window.clearTimeout(i.current);const c=()=>{i.current!==0&&(i.current=0,s(...a))};o.flush=c,i.current=window.setTimeout(c,n)},[s,n]),{flush:$Q});return w.useEffect(()=>()=>{window.clearTimeout(i.current),r&&o.flush()},[o,r]),o}const Vk=["mousedown","touchstart"];function jy(e,t,n){const r=w.useRef(null);return w.useEffect(()=>{const s=i=>{const{target:o}=i??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!i.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Vk).forEach(i=>document.addEventListener(i,s)),()=>{(t||Vk).forEach(i=>document.removeEventListener(i,s))}},[r,e,n]),r}function RQ({timeout:e=2e3}={}){const[t,n]=w.useState(null),[r,s]=w.useState(!1),[i,o]=w.useState(null),a=f=>{window.clearTimeout(i),o(window.setTimeout(()=>s(!1),e)),s(f)};return{copy:f=>{"clipboard"in navigator?navigator.clipboard.writeText(f).then(()=>a(!0)).catch(h=>n(h)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{s(!1),n(null),window.clearTimeout(i)},error:t,copied:r}}function kQ(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function MQ(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function IQ(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,s]=w.useState(n?t:MQ(e)),i=w.useRef(null);return w.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),s(i.current.matches),kQ(i.current,o=>s(o.matches))},[e]),r}const Kh=typeof document<"u"?w.useLayoutEffect:w.useEffect;function Da(e,t){const n=w.useRef(!1);w.useEffect(()=>()=>{n.current=!1},[]),w.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Y8({opened:e,shouldReturnFocus:t=!0}){const n=w.useRef(null),r=()=>{var s;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((s=n.current)==null||s.focus({preventScroll:!0}))};return Da(()=>{let s=-1;const i=o=>{o.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",i)}},[e,t]),r}const PQ=/input|select|textarea|button|object/,J8="a, input, select, textarea, button, object, [tabindex]";function DQ(e){return e.style.display==="none"}function LQ(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(DQ(n))return!1;n=n.parentNode}return!0}function X8(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function uC(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(X8(e));return(PQ.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&LQ(e)}function K8(e){const t=X8(e);return(Number.isNaN(t)||t>=0)&&uC(e)}function FQ(e){return Array.from(e.querySelectorAll(J8)).filter(K8)}function BQ(e,t){const n=FQ(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],s=e.getRootNode();let i=r===s.activeElement||e===s.activeElement;const o=s.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(i=n.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===o.getAttribute("name")).includes(r)),!i)return;t.preventDefault();const c=n[t.shiftKey?n.length-1:0];c&&c.focus()}function zw(e=!0){const t=w.useRef(null),n=s=>{let i=s.querySelector("[data-autofocus]");if(!i){const o=Array.from(s.querySelectorAll(J8));i=o.find(K8)||o.find(uC)||null,!i&&uC(s)&&(i=s)}i&&i.focus({preventScroll:!0})},r=w.useCallback(s=>{e&&s!==null&&t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)},[e]);return w.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=i=>{i.key==="Tab"&&t.current&&BQ(t.current,i)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e]),r}const zQ=e=>(e+1)%1e6;function VQ(){const[,e]=w.useReducer(zQ,0);return e}const UQ=je.useId||(()=>{});function qQ(){const e=UQ();return e?`mantine-${e.replace(/:/g,"")}`:""}function fi(e){const t=qQ(),[n,r]=w.useState(t);return Kh(()=>{r(Wf())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function dC(e,t,n){w.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function sx(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function HQ(...e){const t=new Map;return n=>{if(e.forEach(r=>{const s=sx(r,n);s&&t.set(r,s)}),t.size>0)return()=>{e.forEach(r=>{const s=t.get(r);s?s():sx(r,null)}),t.clear()}}}function jn(...e){return w.useCallback(HQ(...e),e)}function WQ(e,t,n="ltr"){const r=w.useRef(null),s=w.useRef(!1),i=w.useRef(!1),o=w.useRef(0),[a,c]=w.useState(!1);return w.useEffect(()=>{s.current=!0},[]),w.useEffect(()=>{const u=r.current,f=({x:C,y:j})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(s.current&&u){u.style.userSelect="none";const A=u.getBoundingClientRect();if(A.width&&A.height){const $=Ca((C-A.left)/A.width,0,1);e({x:n==="ltr"?$:1-$,y:Ca((j-A.top)/A.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",S),document.addEventListener("mouseup",v),document.addEventListener("touchmove",_),document.addEventListener("touchend",v)},p=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",v)},y=()=>{!i.current&&s.current&&(i.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),c(!0),h())},v=()=>{i.current&&s.current&&(i.current=!1,c(!1),p(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},x=C=>{y(),C.preventDefault(),S(C)},S=C=>f({x:C.clientX,y:C.clientY}),N=C=>{C.cancelable&&C.preventDefault(),y(),_(C)},_=C=>{C.cancelable&&C.preventDefault(),f({x:C.changedTouches[0].clientX,y:C.changedTouches[0].clientY})};return u==null||u.addEventListener("mousedown",x),u==null||u.addEventListener("touchstart",N,{passive:!1}),()=>{u&&(u.removeEventListener("mousedown",x),u.removeEventListener("touchstart",N))}},[n,e]),{ref:r,active:a}}function cs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[s,i]=w.useState(t!==void 0?t:n),o=(a,...c)=>{i(a),r==null||r(a,...c)};return e!==void 0?[e,r,!0]:[s,o,!1]}function Vj(e,t){return IQ("(prefers-reduced-motion: reduce)",e,t)}function Q8(e=[!1,!0]){const[[t],n]=w.useReducer((r,s)=>{const i=s instanceof Function?s(r[0]):s,o=Math.abs(r.indexOf(i));return r.slice(o).concat(r.slice(0,o))},e);return[t,n]}const Uk={passive:!0};function GQ(){const[e,t]=w.useState({width:0,height:0}),n=w.useCallback(()=>{t({width:window.innerWidth||0,height:window.innerHeight||0})},[]);return dC("resize",n,Uk),dC("orientationchange",n,Uk),w.useEffect(n,[]),e}function YQ(e){const t=e.toLowerCase().split("+").map(i=>i.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},r=["alt","ctrl","meta","shift","mod"],s=t.find(i=>!r.includes(i));return{...n,key:s==="[plus]"?"+":s}}function JQ(e,t,n){const{alt:r,ctrl:s,meta:i,mod:o,shift:a,key:c}=e,{altKey:u,ctrlKey:f,metaKey:h,shiftKey:p,key:y,code:v}=t;if(r!==u)return!1;if(o){if(!f&&!h)return!1}else if(s!==f||i!==h)return!1;return a!==p?!1:!!(c&&(!n&&y.toLowerCase()===c.toLowerCase()||v.replace("Key","").toLowerCase()===c.toLowerCase()))}function Z8(e,t){return n=>JQ(YQ(e),n,t)}function XQ(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,s,i={preventDefault:!0,usePhysicalKeys:!1}])=>{Z8(r,i.usePhysicalKeys)(n)&&(i.preventDefault&&t.preventDefault(),s(n))})}}function KQ(e,t,n=!1){return e.target instanceof HTMLElement?(n||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function Uj(e,t=["INPUT","TEXTAREA","SELECT"],n=!1){w.useEffect(()=>{const r=s=>{e.forEach(([i,o,a={preventDefault:!0,usePhysicalKeys:!1}])=>{Z8(i,a.usePhysicalKeys)(s)&&KQ(s,t,n)&&(a.preventDefault&&s.preventDefault(),o(s))})};return document.documentElement.addEventListener("keydown",r),()=>document.documentElement.removeEventListener("keydown",r)},[e])}function Qh(e=!1,t){const{onOpen:n,onClose:r}={},[s,i]=w.useState(e),o=w.useCallback(()=>{i(u=>u||(n==null||n(),!0))},[n]),a=w.useCallback(()=>{i(u=>u&&(r==null||r(),!1))},[r]),c=w.useCallback(()=>{s?a():o()},[a,o,s]);return[s,{open:o,close:a,toggle:c}]}function QQ(e,t,n={autoInvoke:!1}){const r=w.useRef(null),s=w.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),i=w.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return w.useEffect(()=>(n.autoInvoke&&s(),i),[i,s]),{start:s,clear:i}}function ZQ(e){const t=w.useRef(void 0);return w.useEffect(()=>{t.current=e},[e]),t.current}function eZ(){const e=w.useRef(null),[t,n]=w.useState(!1);return{ref:w.useCallback(s=>{var i,o;typeof IntersectionObserver<"u"&&(s&&!e.current?e.current=new IntersectionObserver(a=>n(a.some(c=>c.isIntersecting))):(i=e.current)==null||i.disconnect(),s?(o=e.current)==null||o.observe(s):n(!1))},[]),inViewport:t}}function tZ(e,t,n){const r=w.useRef(null),s=w.useRef(null);return w.useEffect(()=>{const i=typeof n=="function"?n():n;return(i||s.current)&&(r.current=new MutationObserver(e),r.current.observe(i||s.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),s}function nZ(){const[e,t]=w.useState(!1);return w.useEffect(()=>t(!0),[]),e}function rZ(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function sZ(e){function t(r){const s=Object.keys(r).reduce((i,o)=>(i[`${e}:${o}`]=a=>r[o](a.detail),i),{});Kh(()=>(Object.keys(s).forEach(i=>{window.removeEventListener(i,s[i]),window.addEventListener(i,s[i])}),()=>Object.keys(s).forEach(i=>{window.removeEventListener(i,s[i])})),[s])}function n(r){return(...s)=>rZ(`${e}:${String(r)}`,s[0])}return[t,n]}var iZ={};function e7(){return typeof process<"u"&&iZ?"production":"development"}function qk(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function Vw(e){var n;const t=je.version;return typeof je.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function t7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=t7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=t7(e))&&(r&&(r+=" "),r+=t);return r}const oZ={};function aZ(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,s])=>{t[r]?t[r]=yn(t[r],s):t[r]=s})}),t}function Uw({theme:e,classNames:t,props:n,stylesCtx:r}){const i=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||oZ);return aZ(i)}function ix({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((i,o)=>typeof o=="function"?{...i,...o(e,n,r)}:{...i,...o},{})}const n7=w.createContext(null);function $c(){const e=w.useContext(n7);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function lZ(){return $c().cssVariablesResolver}function cZ(){return $c().classNamesPrefix}function qj(){return $c().getStyleNonce}function uZ(){return $c().withStaticClasses}function dZ(){return $c().headless}function fZ(){var e;return(e=$c().stylesTransform)==null?void 0:e.sx}function hZ(){var e;return(e=$c().stylesTransform)==null?void 0:e.styles}function r7(){return $c().env||"default"}function mZ(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function pZ(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,s=n>>8&255,i=n&255;return{r,g:s,b:i,a:1}}function gZ(e){const[t,n,r,s]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:s||1}}function yZ(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),s=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*s,c=r/60,u=a*(1-Math.abs(c%2-1)),f=i-a/2;let h,p,y;return c>=0&&c<1?(h=a,p=u,y=0):c>=1&&c<2?(h=u,p=a,y=0):c>=2&&c<3?(h=0,p=a,y=u):c>=3&&c<4?(h=0,p=u,y=a):c>=4&&c<5?(h=u,p=0,y=a):(h=a,p=0,y=u),{r:Math.round((h+f)*255),g:Math.round((p+f)*255),b:Math.round((y+f)*255),a:o||1}}function Hj(e){return mZ(e)?pZ(e):e.startsWith("rgb")?gZ(e):e.startsWith("hsl")?yZ(e):{r:0,g:0,b:0,a:1}}function Db(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:s,a:i}=Hj(e),o=1-t,a=c=>Math.round(c*o);return`rgba(${a(n)}, ${a(r)}, ${a(s)}, ${i})`}function _g(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function oN(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function bZ(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function vZ(e){if(e.startsWith("oklch("))return(bZ(e)||0)/100;const{r:t,g:n,b:r}=Hj(e),s=t/255,i=n/255,o=r/255,a=oN(s),c=oN(i),u=oN(o);return .2126*a+.7152*c+.0722*u}function _p(e,t=.179){return e.startsWith("var(")?!1:vZ(e)>t}function Rc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_p(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:_p(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_p(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,s]=e.split("."),i=s?Number(s):void 0,o=r in t.colors;if(o){const a=i!==void 0?t.colors[r][i]:t.colors[r][_g(t,n||"light")];return{color:r,value:a,shade:i,isThemeColor:o,isLight:_p(a,t.luminanceThreshold),variable:s?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:_p(e,t.luminanceThreshold),shade:i,variable:void 0}}function Cr(e,t){const n=Rc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Hk(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)??t.defaultGradient.deg??0},r=Cr(n.from,t),s=Cr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${s} 100%)`}function po(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const i=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${i}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:s}=Hj(e);return`rgba(${n}, ${r}, ${s}, ${t})`}const vf=po,xZ=({color:e,theme:t,variant:n,gradient:r,autoContrast:s})=>{const i=Rc({color:e,theme:t}),o=typeof s=="boolean"?s:t.autoContrast;if(n==="filled"){const a=o&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ae(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${Ae(1)} solid transparent`}:{background:e,hover:Db(e,.1),color:a,border:`${Ae(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:po(a,.1),hover:po(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:po(e,.1),hover:po(e,.12),color:e,border:`${Ae(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ae(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:po(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ae(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:po(e,.05),color:e,border:`${Ae(1)} solid ${e}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:"transparent",hover:po(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:"transparent",hover:po(e,.12),color:e,border:`${Ae(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ae(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:e,border:`${Ae(1)} solid transparent`}:n==="gradient"?{background:Hk(r,t),hover:Hk(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ae(1)} solid var(--mantine-color-default-border)`}:{}},wZ={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Wk="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Wj={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:wZ,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:xZ,autoContrast:!1,luminanceThreshold:.3,fontFamily:Wk,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Wk,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ae(34),lineHeight:"1.3"},h2:{fontSize:Ae(26),lineHeight:"1.35"},h3:{fontSize:Ae(22),lineHeight:"1.4"},h4:{fontSize:Ae(18),lineHeight:"1.45"},h5:{fontSize:Ae(16),lineHeight:"1.5"},h6:{fontSize:Ae(14),lineHeight:"1.5"}}},fontSizes:{xs:Ae(12),sm:Ae(14),md:Ae(16),lg:Ae(18),xl:Ae(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ae(2),sm:Ae(4),md:Ae(8),lg:Ae(16),xl:Ae(32)},spacing:{xs:Ae(10),sm:Ae(12),md:Ae(16),lg:Ae(20),xl:Ae(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), 0 ${Ae(1)} ${Ae(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(10)} ${Ae(15)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(7)} ${Ae(7)} ${Ae(-5)}`,md:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(20)} ${Ae(25)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(10)} ${Ae(10)} ${Ae(-5)}`,lg:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(28)} ${Ae(23)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(12)} ${Ae(12)} ${Ae(-7)}`,xl:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(36)} ${Ae(28)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(17)} ${Ae(17)} ${Ae(-7)}`},other:{},components:{}};function Gk(e){return e==="auto"||e==="dark"||e==="light"}function SZ({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Gk(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Gk(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const EZ="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",Yk="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function aN(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Jk(e){if(!(e.primaryColor in e.colors))throw new Error(EZ);if(typeof e.primaryShade=="object"&&(!aN(e.primaryShade.dark)||!aN(e.primaryShade.light)))throw new Error(Yk);if(typeof e.primaryShade=="number"&&!aN(e.primaryShade))throw new Error(Yk)}function NZ(e,t){var r;if(!t)return Jk(e),e;const n=Lj(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Jk(n),n}const Gj=w.createContext(null),_Z=()=>w.useContext(Gj)||Wj;function Ds(){const e=w.useContext(Gj);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function s7({theme:e,children:t,inherit:n=!0}){const r=_Z(),s=w.useMemo(()=>NZ(n?r:Wj,e),[e,r,n]);return m.jsx(Gj.Provider,{value:s,children:t})}s7.displayName="@mantine/core/MantineThemeProvider";function CZ(){const e=Ds(),t=qj(),n=No(e.breakpoints).reduce((r,s)=>{const i=e.breakpoints[s].includes("px"),o=EQ(e.breakpoints[s]),a=i?`${o-.1}px`:Bk(o-.1),c=i?`${o}px`:Bk(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function lN(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Cp(e,t){return(Array.isArray(e)?e:[e]).reduce((r,s)=>`${s}{${r}}`,t)}function OZ(e,t){const n=lN(e.variables),r=n?Cp(t,n):"",s=lN(e.dark),i=lN(e.light),o=s?Cp(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,s):"",a=i?Cp(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):"";return`${r}${o}${a}`}function Ay({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Rc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Xk(e,t){return Ay({color:e.colors[e.primaryColor][_g(e,t)],theme:e,autoContrast:null})}function Lb({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:s=!0}){if(!e.colors[t])return{};if(n==="light"){const a=_g(e,"light"),c={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:vf(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:vf(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:vf(e.colors[t][a],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...c}:c}const i=_g(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:vf(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:vf(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:vf(e.colors[t][Math.max(i-4,0)],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function jZ(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function xf(e,t,n){No(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const i7=e=>{const t=_g(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ae(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Xk(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Xk(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};xf(r.variables,e.breakpoints,"breakpoint"),xf(r.variables,e.spacing,"spacing"),xf(r.variables,e.fontSizes,"font-size"),xf(r.variables,e.lineHeights,"line-height"),xf(r.variables,e.shadows,"shadow"),xf(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((i,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),No(e.colors).forEach(i=>{const o=e.colors[i];if(jZ(o)){Object.assign(r.light,Lb({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Lb({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,c)=>{r.variables[`--mantine-color-${i}-${c}`]=a}),Object.assign(r.light,Lb({theme:e,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Lb({theme:e,color:i,colorScheme:"dark",withColorValues:!1}))});const s=e.headings.sizes;return No(s).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=s[i].fontSize,r.variables[`--mantine-${i}-line-height`]=s[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=s[i].fontWeight||e.headings.fontWeight}),r};function AZ({theme:e,generator:t}){const n=i7(e),r=t==null?void 0:t(e);return r?Lj(n,r):n}const cN=i7(Wj);function TZ(e){const t={variables:{},light:{},dark:{}};return No(e.variables).forEach(n=>{cN.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),No(e.light).forEach(n=>{cN.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),No(e.dark).forEach(n=>{cN.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function $Z(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function o7({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ds(),r=qj(),s=lZ(),i=AZ({theme:n,generator:s}),o=e===":root"&&t,a=o?TZ(i):i,c=OZ(a,e);return c?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${c}${o?"":$Z(e)}`}}):null}o7.displayName="@mantine/CssVariables";function RZ(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function wf(e,t){var s,i;const n=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function kZ({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const s=w.useRef(null),[i,o]=w.useState(()=>e.get(t)),a=r||i,c=w.useCallback(f=>{r||(wf(f,n),o(f),e.set(f))},[e.set,a,r]),u=w.useCallback(()=>{o(t),wf(t,n),e.clear()},[e.clear,t]);return w.useEffect(()=>(e.subscribe(c),e.unsubscribe),[e.subscribe,e.unsubscribe]),Kh(()=>{wf(e.get(t),n)},[]),w.useEffect(()=>{var h;if(r)return wf(r,n),()=>{};r===void 0&&wf(i,n),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const f=p=>{i==="auto"&&wf(p.matches?"dark":"light",n)};return(h=s.current)==null||h.addEventListener("change",f),()=>{var p;return(p=s.current)==null?void 0:p.removeEventListener("change",f)}},[i,r]),{colorScheme:a,setColorScheme:c,clearColorScheme:u}}function MZ({respectReducedMotion:e,getRootElement:t}){Kh(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}RZ();function a7({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:s=!0,deduplicateCssVariables:i=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:c="mantine",colorSchemeManager:u=SZ(),defaultColorScheme:f="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:y,stylesTransform:v,env:x}){const{colorScheme:S,setColorScheme:N,clearColorScheme:_}=kZ({defaultColorScheme:f,forceColorScheme:y,manager:u,getRootElement:h});return MZ({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:h}),m.jsx(n7.Provider,{value:{colorScheme:S,setColorScheme:N,clearColorScheme:_,getRootElement:h,classNamesPrefix:c,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:v,env:x},children:m.jsxs(s7,{theme:e,children:[o&&m.jsx(o7,{cssVariablesSelector:a,deduplicateCssVariables:i}),s&&m.jsx(CZ,{}),t]})})}a7.displayName="@mantine/core/MantineProvider";function Zh({classNames:e,styles:t,props:n,stylesCtx:r}){const s=Ds();return{resolvedClassNames:Uw({theme:s,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:ix({theme:s,styles:t,props:n,stylesCtx:r||void 0})}}const IZ={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function PZ({theme:e,options:t,unstyled:n}){return yn((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||IZ[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function DZ({selector:e,stylesCtx:t,options:n,props:r,theme:s}){return Uw({theme:s,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Kk({selector:e,stylesCtx:t,theme:n,classNames:r,props:s}){return Uw({theme:n,classNames:r,props:s,stylesCtx:t})[e]}function LZ({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function FZ({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function BZ({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(s=>`${t}-${s}-${n}`)}function zZ({themeName:e,theme:t,selector:n,props:r,stylesCtx:s}){return e.map(i=>{var o,a;return(a=Uw({theme:t,classNames:(o=t.components[i])==null?void 0:o.classNames,props:r,stylesCtx:s}))==null?void 0:a[n]})}function VZ({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function UZ({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:s,classNames:i,classes:o,unstyled:a,className:c,rootSelector:u,props:f,stylesCtx:h,withStaticClasses:p,headless:y,transformedStyles:v}){return yn(PZ({theme:e,options:t,unstyled:a||y}),zZ({theme:e,themeName:n,selector:r,props:f,stylesCtx:h}),VZ({options:t,classes:o,selector:r,unstyled:a}),Kk({selector:r,stylesCtx:h,theme:e,classNames:i,props:f}),Kk({selector:r,stylesCtx:h,theme:e,classNames:v,props:f}),DZ({selector:r,stylesCtx:h,options:t,props:f,theme:e}),LZ({rootSelector:u,selector:r,className:c}),FZ({selector:r,classes:o,unstyled:a||y}),p&&!y&&BZ({themeName:n,classNamesPrefix:s,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function qZ({theme:e,themeName:t,props:n,stylesCtx:r,selector:s}){return t.map(i=>{var o;return ix({theme:e,styles:(o=e.components[i])==null?void 0:o.styles,props:n,stylesCtx:r})[s]}).reduce((i,o)=>({...i,...o}),{})}function fC({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...fC({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function HZ(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Fj(n[r])}}),t),{})}function WZ({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:s,selector:i,themeName:o,headless:a}){var c;return(c=HZ([a?{}:t==null?void 0:t(n,r,s),...o.map(u=>{var f,h,p;return(p=(h=(f=n.components)==null?void 0:f[u])==null?void 0:h.vars)==null?void 0:p.call(h,n,r,s)}),e==null?void 0:e(n,r,s)]))==null?void 0:c[i]}function GZ({theme:e,themeName:t,selector:n,options:r,props:s,stylesCtx:i,rootSelector:o,styles:a,style:c,vars:u,varsResolver:f,headless:h,withStylesTransform:p}){return{...!p&&qZ({theme:e,themeName:t,props:s,stylesCtx:i,selector:n}),...!p&&ix({theme:e,styles:a,props:s,stylesCtx:i})[n],...!p&&ix({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:i})[n],...WZ({theme:e,props:s,stylesCtx:i,vars:u,varsResolver:f,selector:n,themeName:t,headless:h}),...o===n?fC({style:c,theme:e}):null,...fC({style:r==null?void 0:r.style,theme:e})}}function YZ({props:e,stylesCtx:t,themeName:n}){var o;const r=Ds(),s=(o=hZ())==null?void 0:o();return{getTransformedStyles:a=>s?[...a.map(u=>s(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var f;return s((f=r.components[u])==null?void 0:f.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!s}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:s,style:i,rootSelector:o="root",unstyled:a,classNames:c,styles:u,vars:f,varsResolver:h}){const p=Ds(),y=cZ(),v=uZ(),x=dZ(),S=(Array.isArray(e)?e:[e]).filter(C=>C),{withStylesTransform:N,getTransformedStyles:_}=YZ({props:n,stylesCtx:r,themeName:S});return(C,j)=>({className:UZ({theme:p,options:j,themeName:S,selector:C,classNamesPrefix:y,classNames:c,classes:t,unstyled:a,className:s,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:v,headless:x,transformedStyles:_([j==null?void 0:j.styles,u])}),style:GZ({theme:p,themeName:S,selector:C,options:j,props:n,stylesCtx:r,rootSelector:o,styles:u,style:i,vars:f,varsResolver:h,headless:x,withStylesTransform:N})})}function Yj(e,t){return typeof e=="boolean"?e:t.autoContrast}function Pe(e,t,n){var o;const r=Ds(),s=(o=r.components[e])==null?void 0:o.defaultProps,i=typeof s=="function"?s(r):s;return{...t,...i,...Fj(n)}}function uN(e){return No(e).reduce((t,n)=>e[n]!==void 0?`${t}${wQ(n)}:${e[n]};`:t,"").trim()}function JZ({selector:e,styles:t,media:n,container:r}){const s=t?uN(t):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${uN(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${uN(a.styles)}}}`):[];return`${s?`${e}{${s}}`:""}${i.join("")}${o.join("")}`.trim()}function XZ(e){const t=qj();return m.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:JZ(e)}})}function em(e){const{m:t,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:c,ms:u,p:f,px:h,py:p,pt:y,pb:v,pl:x,pr:S,pe:N,ps:_,bd:C,bg:j,c:A,opacity:$,ff:k,fz:R,fw:F,lts:z,ta:L,lh:B,fs:H,tt:I,td:V,w:T,miw:D,maw:P,h:q,mih:M,mah:W,bgsz:X,bgp:Q,bgr:oe,bga:ae,pos:fe,top:le,left:ue,bottom:ve,right:_e,inset:ke,display:Oe,flex:$e,hiddenFrom:Re,visibleFrom:qe,lightHidden:et,darkHidden:Ce,sx:Me,...Ie}=e;return{styleProps:Fj({m:t,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:c,ms:u,p:f,px:h,py:p,pt:y,pb:v,pl:x,pr:S,pe:N,ps:_,bd:C,bg:j,c:A,opacity:$,ff:k,fz:R,fw:F,lts:z,ta:L,lh:B,fs:H,tt:I,td:V,w:T,miw:D,maw:P,h:q,mih:M,mah:W,bgsz:X,bgp:Q,bgr:oe,bga:ae,pos:fe,top:le,left:ue,bottom:ve,right:_e,inset:ke,display:Oe,flex:$e,hiddenFrom:Re,visibleFrom:qe,lightHidden:et,darkHidden:Ce,sx:Me}),rest:Ie}}const KZ={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Jj(e,t){const n=Rc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function QZ(e,t){const n=Rc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Jj(e,t)}function ZZ(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const[n,r,...s]=e.split(" ").filter(o=>o.trim()!=="");let i=`${Ae(n)}`;return r&&(i+=` ${r}`),s.length>0&&(i+=` ${Jj(s.join(" "),t)}`),i.trim()}return e}const Qk={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function eee(e){return typeof e=="string"&&e in Qk?Qk[e]:e}const tee=["h1","h2","h3","h4","h5","h6"];function nee(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&tee.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ae(e):e}function ree(e){return e}const see=["h1","h2","h3","h4","h5","h6"];function iee(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&see.includes(e)?`var(--mantine-${e}-line-height)`:e}function oee(e){return typeof e=="number"?Ae(e):e}function aee(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ae(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const dN={color:Jj,textColor:QZ,fontSize:nee,spacing:aee,identity:ree,size:oee,lineHeight:iee,fontFamily:eee,border:ZZ};function Zk(e){return e.replace("(min-width: ","").replace("em)","")}function lee({media:e,...t}){const r=Object.keys(e).sort((s,i)=>Number(Zk(s))-Number(Zk(i))).map(s=>({query:s,styles:e[s]}));return{...t,media:r}}function cee(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function uee(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function dee(e){return typeof e=="object"&&e!==null?No(e).filter(t=>t!=="base"):[]}function fee(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function hee({styleProps:e,data:t,theme:n}){return lee(No(e).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return r;const i=t[s],o=Array.isArray(i.property)?i.property:[i.property],a=uee(e[s]);if(!cee(e[s]))return o.forEach(u=>{r.inlineStyles[u]=dN[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const c=dee(e[s]);return o.forEach(u=>{a&&(r.styles[u]=dN[i.type](a,n)),c.forEach(f=>{const h=`(min-width: ${n.breakpoints[f]})`;r.media[h]={...r.media[h],[u]:dN[i.type](fee(e[s],f),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function mee(){return`__m__-${w.useId().replace(/:/g,"")}`}function l7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...l7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function c7(e){return e.startsWith("data-")?e:`data-${e}`}function pee(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[c7(n)]=e[n]),t},{})}function u7(e){return e?typeof e=="string"?{[c7(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...u7(n)}),{}):pee(e):null}function hC(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...hC(r,t)}),{}):typeof e=="function"?e(t):e??{}}function gee({theme:e,style:t,vars:n,styleProps:r}){const s=hC(t,e),i=hC(n,e);return{...s,...i,...r}}const d7=w.forwardRef(({component:e,style:t,__vars:n,className:r,variant:s,mod:i,size:o,hiddenFrom:a,visibleFrom:c,lightHidden:u,darkHidden:f,renderRoot:h,__size:p,...y},v)=>{var R;const x=Ds(),S=e||"div",{styleProps:N,rest:_}=em(y),C=fZ(),j=(R=C==null?void 0:C())==null?void 0:R(N.sx),A=mee(),$=hee({styleProps:N,theme:x,data:KZ}),k={ref:v,style:gee({theme:x,style:t,vars:n,styleProps:$.inlineStyles}),className:yn(r,j,{[A]:$.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":f,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${c}`]:c}),"data-variant":s,"data-size":W8(o)?void 0:o||void 0,size:p,...u7(i),..._};return m.jsxs(m.Fragment,{children:[$.hasResponsiveStyles&&m.jsx(XZ,{selector:`.${A}`,styles:$.styles,media:$.media}),typeof h=="function"?h(k):m.jsx(S,{...k})]})});d7.displayName="@mantine/core/Box";const Ve=d7;function f7(e){return e}function Ge(e){const t=w.forwardRef(e);return t.extend=f7,t.withProps=n=>{const r=w.forwardRef((s,i)=>m.jsx(t,{...n,...s,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function kc(e){const t=w.forwardRef(e);return t.withProps=n=>{const r=w.forwardRef((s,i)=>m.jsx(t,{...n,...s,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=f7,t}const yee=w.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Mc(){return w.useContext(yee)}var Ty=L8();const Df=Zi(Ty),[bee,hi]=Ya("ScrollArea.Root component was not found in tree");function wh(e,t){const n=Su(t);Kh(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}const vee=w.forwardRef((e,t)=>{const{style:n,...r}=e,s=hi(),[i,o]=w.useState(0),[a,c]=w.useState(0),u=!!(i&&a);return wh(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),wh(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),u?m.jsx("div",{...r,ref:t,style:{...n,width:i,height:a}}):null}),xee=w.forwardRef((e,t)=>{const n=hi(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(vee,{...e,ref:t}):null}),wee={scrollHideDelay:1e3,type:"hover"},h7=w.forwardRef((e,t)=>{const n=Pe("ScrollAreaRoot",wee,e),{type:r,scrollHideDelay:s,scrollbars:i,...o}=n,[a,c]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(null),[y,v]=w.useState(null),[x,S]=w.useState(null),[N,_]=w.useState(0),[C,j]=w.useState(0),[A,$]=w.useState(!1),[k,R]=w.useState(!1),F=jn(t,z=>c(z));return m.jsx(bee,{value:{type:r,scrollHideDelay:s,scrollArea:a,viewport:u,onViewportChange:f,content:h,onContentChange:p,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:$,scrollbarY:x,onScrollbarYChange:S,scrollbarYEnabled:k,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:j},children:m.jsx(Ve,{...o,ref:F,__vars:{"--sa-corner-width":i!=="xy"?"0px":`${N}px`,"--sa-corner-height":i!=="xy"?"0px":`${C}px`}})})});h7.displayName="@mantine/core/ScrollAreaRoot";function m7(e,t){const n=e/t;return Number.isNaN(n)?0:n}function qw(e){const t=m7(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function p7(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function See(e,[t,n]){return Math.min(n,Math.max(t,e))}function eM(e,t,n="ltr"){const r=qw(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=See(e,c);return p7([0,o],[0,a])(u)}function Eee(e,t,n,r="ltr"){const s=qw(n),i=s/2,o=t||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return p7([c,u],h)(e)}function g7(e,t){return e>0&&e<t}function lc(e){return e?parseInt(e,10):0}function Wu(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Nee,y7]=Ya("ScrollAreaScrollbar was not found in tree"),b7=w.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:c,onWheelScroll:u,onResize:f,...h}=e,p=hi(),[y,v]=w.useState(null),x=jn(t,R=>v(R)),S=w.useRef(null),N=w.useRef(""),{viewport:_}=p,C=n.content-n.viewport,j=Su(u),A=Su(a),$=Bw(f,10),k=R=>{if(S.current){const F=R.clientX-S.current.left,z=R.clientY-S.current.top;c({x:F,y:z})}};return w.useEffect(()=>{const R=F=>{const z=F.target;(y==null?void 0:y.contains(z))&&j(F,C)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[_,y,C,j]),w.useEffect(A,[n,A]),wh(y,$),wh(p.content,$),m.jsx(Nee,{value:{scrollbar:y,hasThumb:r,onThumbChange:Su(s),onThumbPointerUp:Su(i),onThumbPositionChange:A,onThumbPointerDown:Su(o)},children:m.jsx("div",{...h,ref:x,"data-mantine-scrollbar":!0,style:{position:"absolute",...h.style},onPointerDown:Wu(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),S.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(R))}),onPointerMove:Wu(e.onPointerMove,k),onPointerUp:Wu(e.onPointerUp,R=>{const F=R.target;F.hasPointerCapture(R.pointerId)&&(R.preventDefault(),F.releasePointerCapture(R.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=N.current,S.current=null}})})}),v7=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...i}=e,o=hi(),[a,c]=w.useState(),u=w.useRef(null),f=jn(t,u,o.onScrollbarXChange);return w.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),m.jsx(b7,{"data-orientation":"horizontal",...i,ref:f,sizes:n,style:{...s,"--sa-thumb-width":`${qw(n)}px`},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(o.viewport){const y=o.viewport.scrollLeft+h.deltaX;e.onWheelScroll(y),g7(y,p)&&h.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:lc(a.paddingLeft),paddingEnd:lc(a.paddingRight)}})}})});v7.displayName="@mantine/core/ScrollAreaScrollbarX";const x7=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...i}=e,o=hi(),[a,c]=w.useState(),u=w.useRef(null),f=jn(t,u,o.onScrollbarYChange);return w.useEffect(()=>{u.current&&c(window.getComputedStyle(u.current))},[]),m.jsx(b7,{...i,"data-orientation":"vertical",ref:f,sizes:n,style:{"--sa-thumb-height":`${qw(n)}px`,...s},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(o.viewport){const y=o.viewport.scrollTop+h.deltaY;e.onWheelScroll(y),g7(y,p)&&h.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:lc(a.paddingTop),paddingEnd:lc(a.paddingBottom)}})}})});x7.displayName="@mantine/core/ScrollAreaScrollbarY";const Hw=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:s}=Mc(),i=hi(),o=w.useRef(null),a=w.useRef(0),[c,u]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=m7(c.viewport,c.content),h={...r,sizes:c,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:y=>{o.current=y},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:y=>{a.current=y}},p=(y,v)=>Eee(y,a.current,c,v);return n==="horizontal"?m.jsx(v7,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollLeft,v=eM(y,c,s);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=p(y,s))}}):n==="vertical"?m.jsx(x7,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollTop,v=eM(y,c);c.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=p(y))}}):null});Hw.displayName="@mantine/core/ScrollAreaScrollbarVisible";const Xj=w.forwardRef((e,t)=>{const n=hi(),{forceMount:r,...s}=e,[i,o]=w.useState(!1),a=e.orientation==="horizontal",c=Bw(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:f)}},10);return wh(n.viewport,c),wh(n.content,c),r||i?m.jsx(Hw,{"data-state":i?"visible":"hidden",...s,ref:t}):null});Xj.displayName="@mantine/core/ScrollAreaScrollbarAuto";const w7=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=hi(),[i,o]=w.useState(!1);return w.useEffect(()=>{const{scrollArea:a}=s;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),n||i?m.jsx(Xj,{"data-state":i?"visible":"hidden",...r,ref:t}):null});w7.displayName="@mantine/core/ScrollAreaScrollbarHover";const _ee=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=hi(),i=e.orientation==="horizontal",[o,a]=w.useState("hidden"),c=Bw(()=>a("idle"),100);return w.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay]),w.useEffect(()=>{const{viewport:u}=s,f=i?"scrollLeft":"scrollTop";if(u){let h=u[f];const p=()=>{const y=u[f];h!==y&&(a("scrolling"),c()),h=y};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c]),n||o!=="hidden"?m.jsx(Hw,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Wu(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Wu(e.onPointerLeave,()=>a("idle"))}):null}),mC=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=hi(),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=e.orientation==="horizontal";return w.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?m.jsx(w7,{...r,ref:t,forceMount:n}):s.type==="scroll"?m.jsx(_ee,{...r,ref:t,forceMount:n}):s.type==="auto"?m.jsx(Xj,{...r,ref:t,forceMount:n}):s.type==="always"?m.jsx(Hw,{...r,ref:t}):null});mC.displayName="@mantine/core/ScrollAreaScrollbar";function Cee(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)}const S7=w.forwardRef((e,t)=>{const{style:n,...r}=e,s=hi(),i=y7(),{onThumbPositionChange:o}=i,a=jn(t,f=>i.onThumbChange(f)),c=w.useRef(void 0),u=Bw(()=>{c.current&&(c.current(),c.current=void 0)},100);return w.useEffect(()=>{const{viewport:f}=s;if(f){const h=()=>{if(u(),!c.current){const p=Cee(f,o);c.current=p,o()}};return o(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,u,o]),m.jsx("div",{"data-state":i.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Wu(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),y=f.clientX-p.left,v=f.clientY-p.top;i.onThumbPointerDown({x:y,y:v})}),onPointerUp:Wu(e.onPointerUp,i.onThumbPointerUp)})});S7.displayName="@mantine/core/ScrollAreaThumb";const pC=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=y7();return n||s.hasThumb?m.jsx(S7,{ref:t,...r}):null});pC.displayName="@mantine/core/ScrollAreaThumb";const E7=w.forwardRef(({children:e,style:t,...n},r)=>{const s=hi(),i=jn(r,s.onViewportChange);return m.jsx(Ve,{...n,ref:i,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t},children:m.jsx("div",{style:{minWidth:"100%",display:"table"},ref:s.onContentChange,children:e})})});E7.displayName="@mantine/core/ScrollAreaViewport";var Kj={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const N7={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Oee=(e,{scrollbarSize:t,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":Ae(t),"--scrollarea-over-scroll-behavior":n}}),$y=Ge((e,t)=>{const n=Pe("ScrollArea",N7,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,scrollbarSize:c,vars:u,type:f,scrollHideDelay:h,viewportProps:p,viewportRef:y,onScrollPositionChange:v,children:x,offsetScrollbars:S,scrollbars:N,onBottomReached:_,onTopReached:C,overscrollBehavior:j,...A}=n,[$,k]=w.useState(!1),R=vt({name:"ScrollArea",props:n,classes:Kj,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oee});return m.jsxs(h7,{type:f==="never"?"always":f,scrollHideDelay:h,ref:t,scrollbars:N,...R("root"),...A,children:[m.jsx(E7,{...p,...R("viewport",{style:p==null?void 0:p.style}),ref:y,"data-offset-scrollbars":S===!0?"xy":S||void 0,"data-scrollbars":N||void 0,onScroll:F=>{var H;(H=p==null?void 0:p.onScroll)==null||H.call(p,F),v==null||v({x:F.currentTarget.scrollLeft,y:F.currentTarget.scrollTop});const{scrollTop:z,scrollHeight:L,clientHeight:B}=F.currentTarget;z-(L-B)>=0&&(_==null||_()),z===0&&(C==null||C())},children:x}),(N==="xy"||N==="x")&&m.jsx(mC,{...R("scrollbar"),orientation:"horizontal","data-hidden":f==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:m.jsx(pC,{...R("thumb")})}),(N==="xy"||N==="y")&&m.jsx(mC,{...R("scrollbar"),orientation:"vertical","data-hidden":f==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:m.jsx(pC,{...R("thumb")})}),m.jsx(xee,{...R("corner"),"data-hovered":$||void 0,"data-hidden":f==="never"||void 0})]})});$y.displayName="@mantine/core/ScrollArea";const Qj=Ge((e,t)=>{const{children:n,classNames:r,styles:s,scrollbarSize:i,scrollHideDelay:o,type:a,dir:c,offsetScrollbars:u,viewportRef:f,onScrollPositionChange:h,unstyled:p,variant:y,viewportProps:v,scrollbars:x,style:S,vars:N,onBottomReached:_,onTopReached:C,...j}=Pe("ScrollAreaAutosize",N7,e);return m.jsx(Ve,{...j,ref:t,style:[{display:"flex",overflow:"auto"},S],children:m.jsx(Ve,{style:{display:"flex",flexDirection:"column",flex:1},children:m.jsx($y,{classNames:r,styles:s,scrollHideDelay:o,scrollbarSize:i,type:a,dir:c,offsetScrollbars:u,viewportRef:f,onScrollPositionChange:h,unstyled:p,variant:y,viewportProps:v,vars:N,scrollbars:x,onBottomReached:_,onTopReached:C,children:n})})})});$y.classes=Kj;Qj.displayName="@mantine/core/ScrollAreaAutosize";Qj.classes=Kj;$y.Autosize=Qj;var _7={root:"m_87cf2631"};const jee={__staticSelector:"UnstyledButton"},La=kc((e,t)=>{const n=Pe("UnstyledButton",jee,e),{className:r,component:s="button",__staticSelector:i,unstyled:o,classNames:a,styles:c,style:u,...f}=n,h=vt({name:i,props:n,classes:_7,className:r,style:u,classNames:a,styles:c,unstyled:o});return m.jsx(Ve,{...h("root",{focusable:!0}),component:s,ref:t,type:s==="button"?"button":void 0,...f})});La.classes=_7;La.displayName="@mantine/core/UnstyledButton";var C7={root:"m_515a97f8"};const Aee={},Zj=Ge((e,t)=>{const n=Pe("VisuallyHidden",Aee,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,...u}=n,f=vt({name:"VisuallyHidden",classes:C7,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a});return m.jsx(Ve,{component:"span",ref:t,...f("root"),...u})});Zj.classes=C7;Zj.displayName="@mantine/core/VisuallyHidden";var O7={root:"m_1b7284a3"};const Tee={},$ee=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Qn(t),"--paper-shadow":zj(n)}}),eA=kc((e,t)=>{const n=Pe("Paper",Tee,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,withBorder:c,vars:u,radius:f,shadow:h,variant:p,mod:y,...v}=n,x=vt({name:"Paper",props:n,classes:O7,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$ee});return m.jsx(Ve,{ref:t,mod:[{"data-with-border":c},y],...x("root"),variant:p,...v})});eA.classes=O7;eA.displayName="@mantine/core/Paper";function Ww(){return typeof window<"u"}function tm(e){return j7(e)?(e.nodeName||"").toLowerCase():"#document"}function os(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Io(e){var t;return(t=(j7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function j7(e){return Ww()?e instanceof Node||e instanceof os(e).Node:!1}function fn(e){return Ww()?e instanceof Element||e instanceof os(e).Element:!1}function ks(e){return Ww()?e instanceof HTMLElement||e instanceof os(e).HTMLElement:!1}function gC(e){return!Ww()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof os(e).ShadowRoot}function Ry(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ai(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Ree(e){return["table","td","th"].includes(tm(e))}function Gw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tA(e){const t=Yw(),n=fn(e)?ai(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function kee(e){let t=Fa(e);for(;ks(t)&&!xc(t);){if(tA(t))return t;if(Gw(t))return null;t=Fa(t)}return null}function Yw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xc(e){return["html","body","#document"].includes(tm(e))}function ai(e){return os(e).getComputedStyle(e)}function Jw(e){return fn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fa(e){if(tm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gC(e)&&e.host||Io(e);return gC(t)?t.host:t}function A7(e){const t=Fa(e);return xc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ks(t)&&Ry(t)?t:A7(t)}function Aa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=A7(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=os(s);if(i){const a=yC(o);return t.concat(o,o.visualViewport||[],Ry(s)?s:[],a&&n?Aa(a):[])}return t.concat(s,Aa(s,[],n))}function yC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tM(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Cg(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&gC(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function T7(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function $7(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Mee(e){return Dee()?!1:!nM()&&e.width===0&&e.height===0||nM()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Iee(){return/apple/i.test(navigator.vendor)}function nM(){const e=/android/i;return e.test(T7())||e.test($7())}function Pee(){return T7().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Dee(){return $7().includes("jsdom/")}function bC(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Lee(e){return"nativeEvent"in e}function Fee(e){return e.matches("html,body")}function _u(e){return(e==null?void 0:e.ownerDocument)||document}function fN(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Af(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Bee="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function zee(e){return ks(e)&&e.matches(Bee)}const Gi=Math.min,_r=Math.max,ox=Math.round,Fb=Math.floor,_o=e=>({x:e,y:e}),Vee={left:"right",right:"left",bottom:"top",top:"bottom"},Uee={start:"end",end:"start"};function vC(e,t,n){return _r(e,Gi(t,n))}function Ba(e,t){return typeof e=="function"?e(t):e}function Yi(e){return e.split("-")[0]}function nm(e){return e.split("-")[1]}function nA(e){return e==="x"?"y":"x"}function rA(e){return e==="y"?"height":"width"}function za(e){return["top","bottom"].includes(Yi(e))?"y":"x"}function sA(e){return nA(za(e))}function qee(e,t,n){n===void 0&&(n=!1);const r=nm(e),s=sA(e),i=rA(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=ax(o)),[o,ax(o)]}function Hee(e){const t=ax(e);return[xC(e),t,xC(t)]}function xC(e){return e.replace(/start|end/g,t=>Uee[t])}function Wee(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function Gee(e,t,n,r){const s=nm(e);let i=Wee(Yi(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(xC)))),i}function ax(e){return e.replace(/left|right|bottom|top/g,t=>Vee[t])}function Yee(e){return{top:0,right:0,bottom:0,left:0,...e}}function iA(e){return typeof e!="number"?Yee(e):{top:e,right:e,bottom:e,left:e}}function Sh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function rM(e,t,n){let{reference:r,floating:s}=e;const i=za(t),o=sA(t),a=rA(o),c=Yi(t),u=i==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-s.width,y:h};break;default:y={x:r.x,y:r.y}}switch(nm(t)){case"start":y[o]-=p*(n&&u?-1:1);break;case"end":y[o]+=p*(n&&u?-1:1);break}return y}const Jee=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=rM(u,r,c),p=r,y={},v=0;for(let x=0;x<a.length;x++){const{name:S,fn:N}=a[x],{x:_,y:C,data:j,reset:A}=await N({x:f,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:e,floating:t}});f=_??f,h=C??h,y={...y,[S]:{...y[S],...j}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):A.rects),{x:f,y:h}=rM(u,p,c)),x=-1)}return{x:f,y:h,placement:p,strategy:s,middlewareData:y}};async function oA(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:y=0}=Ba(t,e),v=iA(y),S=a[p?h==="floating"?"reference":"floating":h],N=Sh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:c})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),j=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},A=Sh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:C,strategy:c}):_);return{top:(N.top-A.top+v.top)/j.y,bottom:(A.bottom-N.bottom+v.bottom)/j.y,left:(N.left-A.left+v.left)/j.x,right:(A.right-N.right+v.right)/j.x}}const Xee=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:f=0}=Ba(e,t)||{};if(u==null)return{};const h=iA(f),p={x:n,y:r},y=sA(s),v=rA(y),x=await o.getDimensions(u),S=y==="y",N=S?"top":"left",_=S?"bottom":"right",C=S?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[y]-p[y]-i.floating[v],A=p[y]-i.reference[y],$=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=$?$[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement($)))&&(k=a.floating[C]||i.floating[v]);const R=j/2-A/2,F=k/2-x[v]/2-1,z=Gi(h[N],F),L=Gi(h[_],F),B=z,H=k-x[v]-L,I=k/2-x[v]/2+R,V=vC(B,I,H),T=!c.arrow&&nm(s)!=null&&I!==V&&i.reference[v]/2-(I<B?z:L)-x[v]/2<0,D=T?I<B?I-B:I-H:0;return{[y]:p[y]+D,data:{[y]:V,centerOffset:I-V-D,...T&&{alignmentOffset:D}},reset:T}}}),Kee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...S}=Ba(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=Yi(s),_=za(a),C=Yi(a)===a,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=p||(C||!x?[ax(a)]:Hee(a)),$=v!=="none";!p&&$&&A.push(...Gee(a,x,v,j));const k=[a,...A],R=await oA(t,S),F=[];let z=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&F.push(R[N]),h){const I=qee(s,o,j);F.push(R[I[0]],R[I[1]])}if(z=[...z,{placement:s,overflows:F}],!F.every(I=>I<=0)){var L,B;const I=(((L=i.flip)==null?void 0:L.index)||0)+1,V=k[I];if(V)return{data:{index:I,overflows:z},reset:{placement:V}};let T=(B=z.filter(D=>D.overflows[0]<=0).sort((D,P)=>D.overflows[1]-P.overflows[1])[0])==null?void 0:B.placement;if(!T)switch(y){case"bestFit":{var H;const D=(H=z.filter(P=>{if($){const q=za(P.placement);return q===_||q==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(q=>q>0).reduce((q,M)=>q+M,0)]).sort((P,q)=>P[1]-q[1])[0])==null?void 0:H[0];D&&(T=D);break}case"initialPlacement":T=a;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function R7(e){const t=Gi(...e.map(i=>i.left)),n=Gi(...e.map(i=>i.top)),r=_r(...e.map(i=>i.right)),s=_r(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function Qee(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>Sh(R7(s)))}const Zee=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:a=2,x:c,y:u}=Ba(e,t),f=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),h=Qee(f),p=Sh(R7(f)),y=iA(a);function v(){if(h.length===2&&h[0].left>h[1].right&&c!=null&&u!=null)return h.find(S=>c>S.left-y.left&&c<S.right+y.right&&u>S.top-y.top&&u<S.bottom+y.bottom)||p;if(h.length>=2){if(za(n)==="y"){const z=h[0],L=h[h.length-1],B=Yi(n)==="top",H=z.top,I=L.bottom,V=B?z.left:L.left,T=B?z.right:L.right,D=T-V,P=I-H;return{top:H,bottom:I,left:V,right:T,width:D,height:P,x:V,y:H}}const S=Yi(n)==="left",N=_r(...h.map(z=>z.right)),_=Gi(...h.map(z=>z.left)),C=h.filter(z=>S?z.left===_:z.right===N),j=C[0].top,A=C[C.length-1].bottom,$=_,k=N,R=k-$,F=A-j;return{top:j,bottom:A,left:$,right:k,width:R,height:F,x:$,y:j}}return p}const x=await i.getElementRects({reference:{getBoundingClientRect:v},floating:r.floating,strategy:o});return s.reference.x!==x.reference.x||s.reference.y!==x.reference.y||s.reference.width!==x.reference.width||s.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function ete(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Yi(n),a=nm(n),c=za(n)==="y",u=["left","top"].includes(o)?-1:1,f=i&&c?-1:1,h=Ba(t,e);let{mainAxis:p,crossAxis:y,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(y=a==="end"?v*-1:v),c?{x:y*f,y:p*u}:{x:p*u,y:y*f}}const tte=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await ete(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},nte=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:N,y:_}=S;return{x:N,y:_}}},...c}=Ba(e,t),u={x:n,y:r},f=await oA(t,c),h=za(Yi(s)),p=nA(h);let y=u[p],v=u[h];if(i){const S=p==="y"?"top":"left",N=p==="y"?"bottom":"right",_=y+f[S],C=y-f[N];y=vC(_,y,C)}if(o){const S=h==="y"?"top":"left",N=h==="y"?"bottom":"right",_=v+f[S],C=v-f[N];v=vC(_,v,C)}const x=a.fn({...t,[p]:y,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[h]:o}}}}}},rte=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Ba(e,t),f={x:n,y:r},h=za(s),p=nA(h);let y=f[p],v=f[h];const x=Ba(a,t),S=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const C=p==="y"?"height":"width",j=i.reference[p]-i.floating[C]+S.mainAxis,A=i.reference[p]+i.reference[C]-S.mainAxis;y<j?y=j:y>A&&(y=A)}if(u){var N,_;const C=p==="y"?"width":"height",j=["top","left"].includes(Yi(s)),A=i.reference[h]-i.floating[C]+(j&&((N=o.offset)==null?void 0:N[h])||0)+(j?0:S.crossAxis),$=i.reference[h]+i.reference[C]+(j?0:((_=o.offset)==null?void 0:_[h])||0)-(j?S.crossAxis:0);v<A?v=A:v>$&&(v=$)}return{[p]:y,[h]:v}}}},ste=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:c=()=>{},...u}=Ba(e,t),f=await oA(t,u),h=Yi(s),p=nm(s),y=za(s)==="y",{width:v,height:x}=i.floating;let S,N;h==="top"||h==="bottom"?(S=h,N=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(N=h,S=p==="end"?"top":"bottom");const _=x-f.top-f.bottom,C=v-f.left-f.right,j=Gi(x-f[S],_),A=Gi(v-f[N],C),$=!t.middlewareData.shift;let k=j,R=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(R=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=_),$&&!p){const z=_r(f.left,0),L=_r(f.right,0),B=_r(f.top,0),H=_r(f.bottom,0);y?R=v-2*(z!==0||L!==0?z+L:_r(f.left,f.right)):k=x-2*(B!==0||H!==0?B+H:_r(f.top,f.bottom))}await c({...t,availableWidth:R,availableHeight:k});const F=await o.getDimensions(a.floating);return v!==F.width||x!==F.height?{reset:{rects:!0}}:{}}}};function k7(e){const t=ai(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ks(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=ox(n)!==i||ox(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function aA(e){return fn(e)?e:e.contextElement}function Gf(e){const t=aA(e);if(!ks(t))return _o(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=k7(t);let o=(i?ox(n.width):n.width)/r,a=(i?ox(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const ite=_o(0);function M7(e){const t=os(e);return!Yw()||!t.visualViewport?ite:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ote(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==os(e)?!1:t}function Ju(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=aA(e);let o=_o(1);t&&(r?fn(r)&&(o=Gf(r)):o=Gf(e));const a=ote(i,n,r)?M7(i):_o(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,f=s.width/o.x,h=s.height/o.y;if(i){const p=os(i),y=r&&fn(r)?os(r):r;let v=p,x=yC(v);for(;x&&r&&y!==v;){const S=Gf(x),N=x.getBoundingClientRect(),_=ai(x),C=N.left+(x.clientLeft+parseFloat(_.paddingLeft))*S.x,j=N.top+(x.clientTop+parseFloat(_.paddingTop))*S.y;c*=S.x,u*=S.y,f*=S.x,h*=S.y,c+=C,u+=j,v=os(x),x=yC(v)}}return Sh({width:f,height:h,x:c,y:u})}function lA(e,t){const n=Jw(e).scrollLeft;return t?t.left+n:Ju(Io(e)).left+n}function I7(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:lA(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function ate(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Io(r),a=t?Gw(t.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=_o(1);const f=_o(0),h=ks(r);if((h||!h&&!i)&&((tm(r)!=="body"||Ry(o))&&(c=Jw(r)),ks(r))){const y=Ju(r);u=Gf(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const p=o&&!h&&!i?I7(o,c,!0):_o(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function lte(e){return Array.from(e.getClientRects())}function cte(e){const t=Io(e),n=Jw(e),r=e.ownerDocument.body,s=_r(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=_r(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lA(e);const a=-n.scrollTop;return ai(r).direction==="rtl"&&(o+=_r(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function ute(e,t){const n=os(e),r=Io(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=Yw();(!u||u&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function dte(e,t){const n=Ju(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=ks(e)?Gf(e):_o(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function sM(e,t,n){let r;if(t==="viewport")r=ute(e,n);else if(t==="document")r=cte(Io(e));else if(fn(t))r=dte(t,n);else{const s=M7(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Sh(r)}function P7(e,t){const n=Fa(e);return n===t||!fn(n)||xc(n)?!1:ai(n).position==="fixed"||P7(n,t)}function fte(e,t){const n=t.get(e);if(n)return n;let r=Aa(e,[],!1).filter(a=>fn(a)&&tm(a)!=="body"),s=null;const i=ai(e).position==="fixed";let o=i?Fa(e):e;for(;fn(o)&&!xc(o);){const a=ai(o),c=tA(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ry(o)&&!c&&P7(e,o))?r=r.filter(f=>f!==o):s=a,o=Fa(o)}return t.set(e,r),r}function hte(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Gw(t)?[]:fte(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,f)=>{const h=sM(t,f,s);return u.top=_r(h.top,u.top),u.right=Gi(h.right,u.right),u.bottom=Gi(h.bottom,u.bottom),u.left=_r(h.left,u.left),u},sM(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mte(e){const{width:t,height:n}=k7(e);return{width:t,height:n}}function pte(e,t,n){const r=ks(t),s=Io(t),i=n==="fixed",o=Ju(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=_o(0);if(r||!r&&!i)if((tm(t)!=="body"||Ry(s))&&(a=Jw(t)),r){const p=Ju(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=lA(s));const u=s&&!r&&!i?I7(s,a):_o(0),f=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:f,y:h,width:o.width,height:o.height}}function hN(e){return ai(e).position==="static"}function iM(e,t){if(!ks(e)||ai(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Io(e)===n&&(n=n.ownerDocument.body),n}function D7(e,t){const n=os(e);if(Gw(e))return n;if(!ks(e)){let s=Fa(e);for(;s&&!xc(s);){if(fn(s)&&!hN(s))return s;s=Fa(s)}return n}let r=iM(e,t);for(;r&&Ree(r)&&hN(r);)r=iM(r,t);return r&&xc(r)&&hN(r)&&!tA(r)?n:r||kee(e)||n}const gte=async function(e){const t=this.getOffsetParent||D7,n=this.getDimensions,r=await n(e.floating);return{reference:pte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yte(e){return ai(e).direction==="rtl"}const bte={convertOffsetParentRelativeRectToViewportRelativeRect:ate,getDocumentElement:Io,getClippingRect:hte,getOffsetParent:D7,getElementRects:gte,getClientRects:lte,getDimensions:mte,getScale:Gf,isElement:fn,isRTL:yte};function L7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vte(e,t){let n=null,r;const s=Io(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:f,top:h,width:p,height:y}=u;if(a||t(),!p||!y)return;const v=Fb(h),x=Fb(s.clientWidth-(f+p)),S=Fb(s.clientHeight-(h+y)),N=Fb(f),C={rootMargin:-v+"px "+-x+"px "+-S+"px "+-N+"px",threshold:_r(0,Gi(1,c))||1};let j=!0;function A($){const k=$[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!L7(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(A,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,C)}n.observe(e)}return o(!0),i}function xte(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=aA(e),f=s||i?[...u?Aa(u):[],...Aa(t)]:[];f.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const h=u&&a?vte(u,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(N=>{let[_]=N;_&&_.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let v,x=c?Ju(e):null;c&&S();function S(){const N=Ju(e);x&&!L7(x,N)&&n(),x=N,v=requestAnimationFrame(S)}return n(),()=>{var N;f.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(N=y)==null||N.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const wte=tte,Ste=nte,Ete=Kee,Nte=ste,oM=Xee,_te=Zee,Cte=rte,Ote=(e,t,n)=>{const r=new Map,s={platform:bte,...n},i={...s.platform,_c:r};return Jee(e,t,{...s,platform:i})};var jv=typeof document<"u"?w.useLayoutEffect:w.useEffect;function lx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lx(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!lx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function F7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aM(e,t){const n=F7(e);return Math.round(t*n)/n}function mN(e){const t=w.useRef(e);return jv(()=>{t.current=e}),t}function jte(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[f,h]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,y]=w.useState(r);lx(p,r)||y(r);const[v,x]=w.useState(null),[S,N]=w.useState(null),_=w.useCallback(P=>{P!==$.current&&($.current=P,x(P))},[]),C=w.useCallback(P=>{P!==k.current&&(k.current=P,N(P))},[]),j=i||v,A=o||S,$=w.useRef(null),k=w.useRef(null),R=w.useRef(f),F=c!=null,z=mN(c),L=mN(s),B=mN(u),H=w.useCallback(()=>{if(!$.current||!k.current)return;const P={placement:t,strategy:n,middleware:p};L.current&&(P.platform=L.current),Ote($.current,k.current,P).then(q=>{const M={...q,isPositioned:B.current!==!1};I.current&&!lx(R.current,M)&&(R.current=M,Ty.flushSync(()=>{h(M)}))})},[p,t,n,L,B]);jv(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const I=w.useRef(!1);jv(()=>(I.current=!0,()=>{I.current=!1}),[]),jv(()=>{if(j&&($.current=j),A&&(k.current=A),j&&A){if(z.current)return z.current(j,A,H);H()}},[j,A,H,z,F]);const V=w.useMemo(()=>({reference:$,floating:k,setReference:_,setFloating:C}),[_,C]),T=w.useMemo(()=>({reference:j,floating:A}),[j,A]),D=w.useMemo(()=>{const P={position:n,left:0,top:0};if(!T.floating)return P;const q=aM(T.floating,f.x),M=aM(T.floating,f.y);return a?{...P,transform:"translate("+q+"px, "+M+"px)",...F7(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:M}},[n,a,T.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:H,refs:V,elements:T,floatingStyles:D}),[f,H,V,T,D])}const Ate=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?oM({element:r.current,padding:s}).fn(n):{}:r?oM({element:r,padding:s}).fn(n):{}}}},B7=(e,t)=>({...wte(e),options:[e,t]}),cA=(e,t)=>({...Ste(e),options:[e,t]}),lM=(e,t)=>({...Cte(e),options:[e,t]}),cx=(e,t)=>({...Ete(e),options:[e,t]}),Tte=(e,t)=>({...Nte(e),options:[e,t]}),tg=(e,t)=>({..._te(e),options:[e,t]}),z7=(e,t)=>({...Ate(e),options:[e,t]}),V7={...D8},$te=V7.useInsertionEffect,Rte=$te||(e=>e());function va(e){const t=w.useRef(()=>{});return Rte(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Co=typeof document<"u"?w.useLayoutEffect:w.useEffect;let cM=!1,kte=0;const uM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kte++;function Mte(){const[e,t]=w.useState(()=>cM?uM():void 0);return Co(()=>{e==null&&t(uM())},[]),w.useEffect(()=>{cM=!0},[]),e}const Ite=V7.useId,U7=Ite||Mte;function Pte(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Dte=w.createContext(null),Lte=w.createContext(null),uA=()=>{var e;return((e=w.useContext(Dte))==null?void 0:e.id)||null},dA=()=>w.useContext(Lte);function fA(e){return"data-floating-ui-"+e}function pN(e){const t=w.useRef(e);return Co(()=>{t.current=e}),t}const dM=fA("safe-polygon");function Av(e,t,n){return n&&!bC(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Fte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:o}=e,{enabled:a=!0,delay:c=0,handleClose:u=null,mouseOnly:f=!1,restMs:h=0,move:p=!0}=t,y=dA(),v=uA(),x=pN(u),S=pN(c),N=pN(n),_=w.useRef(),C=w.useRef(-1),j=w.useRef(),A=w.useRef(-1),$=w.useRef(!0),k=w.useRef(!1),R=w.useRef(()=>{}),F=w.useRef(!1),z=w.useCallback(()=>{var D;const P=(D=s.current.openEvent)==null?void 0:D.type;return(P==null?void 0:P.includes("mouse"))&&P!=="mousedown"},[s]);w.useEffect(()=>{if(!a)return;function D(P){let{open:q}=P;q||(clearTimeout(C.current),clearTimeout(A.current),$.current=!0,F.current=!1)}return i.on("openchange",D),()=>{i.off("openchange",D)}},[a,i]),w.useEffect(()=>{if(!a||!x.current||!n)return;function D(q){z()&&r(!1,q,"hover")}const P=_u(o.floating).documentElement;return P.addEventListener("mouseleave",D),()=>{P.removeEventListener("mouseleave",D)}},[o.floating,n,r,a,x,z]);const L=w.useCallback(function(D,P,q){P===void 0&&(P=!0),q===void 0&&(q="hover");const M=Av(S.current,"close",_.current);M&&!j.current?(clearTimeout(C.current),C.current=window.setTimeout(()=>r(!1,D,q),M)):P&&(clearTimeout(C.current),r(!1,D,q))},[S,r]),B=va(()=>{R.current(),j.current=void 0}),H=va(()=>{if(k.current){const D=_u(o.floating).body;D.style.pointerEvents="",D.removeAttribute(dM),k.current=!1}}),I=va(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);w.useEffect(()=>{if(!a)return;function D(W){if(clearTimeout(C.current),$.current=!1,f&&!bC(_.current)||h>0&&!Av(S.current,"open"))return;const X=Av(S.current,"open",_.current);X?C.current=window.setTimeout(()=>{N.current||r(!0,W,"hover")},X):n||r(!0,W,"hover")}function P(W){if(I())return;R.current();const X=_u(o.floating);if(clearTimeout(A.current),F.current=!1,x.current&&s.current.floatingContext){n||clearTimeout(C.current),j.current=x.current({...s.current.floatingContext,tree:y,x:W.clientX,y:W.clientY,onClose(){H(),B(),I()||L(W,!0,"safe-polygon")}});const oe=j.current;X.addEventListener("mousemove",oe),R.current=()=>{X.removeEventListener("mousemove",oe)};return}(_.current==="touch"?!Cg(o.floating,W.relatedTarget):!0)&&L(W)}function q(W){I()||s.current.floatingContext&&(x.current==null||x.current({...s.current.floatingContext,tree:y,x:W.clientX,y:W.clientY,onClose(){H(),B(),I()||L(W)}})(W))}if(fn(o.domReference)){var M;const W=o.domReference;return n&&W.addEventListener("mouseleave",q),(M=o.floating)==null||M.addEventListener("mouseleave",q),p&&W.addEventListener("mousemove",D,{once:!0}),W.addEventListener("mouseenter",D),W.addEventListener("mouseleave",P),()=>{var X;n&&W.removeEventListener("mouseleave",q),(X=o.floating)==null||X.removeEventListener("mouseleave",q),p&&W.removeEventListener("mousemove",D),W.removeEventListener("mouseenter",D),W.removeEventListener("mouseleave",P)}}},[o,a,e,f,h,p,L,B,H,r,n,N,y,S,x,s,I]),Co(()=>{var D;if(a&&n&&(D=x.current)!=null&&D.__options.blockPointerEvents&&z()){k.current=!0;const q=o.floating;if(fn(o.domReference)&&q){var P;const M=_u(o.floating).body;M.setAttribute(dM,"");const W=o.domReference,X=y==null||(P=y.nodesRef.current.find(Q=>Q.id===v))==null||(P=P.context)==null?void 0:P.elements.floating;return X&&(X.style.pointerEvents=""),M.style.pointerEvents="none",W.style.pointerEvents="auto",q.style.pointerEvents="auto",()=>{M.style.pointerEvents="",W.style.pointerEvents="",q.style.pointerEvents=""}}}},[a,n,v,o,y,x,z]),Co(()=>{n||(_.current=void 0,F.current=!1,B(),H())},[n,B,H]),w.useEffect(()=>()=>{B(),clearTimeout(C.current),clearTimeout(A.current),H()},[a,o.domReference,B,H]);const V=w.useMemo(()=>{function D(P){_.current=P.pointerType}return{onPointerDown:D,onPointerEnter:D,onMouseMove(P){const{nativeEvent:q}=P;function M(){!$.current&&!N.current&&r(!0,q,"hover")}f&&!bC(_.current)||n||h===0||F.current&&P.movementX**2+P.movementY**2<2||(clearTimeout(A.current),_.current==="touch"?M():(F.current=!0,A.current=window.setTimeout(M,h)))}}},[f,r,n,N,h]),T=w.useMemo(()=>({onMouseEnter(){clearTimeout(C.current)},onMouseLeave(D){I()||L(D.nativeEvent,!1)}}),[L,I]);return w.useMemo(()=>a?{reference:V,floating:T}:{},[a,V,T])}const wC=()=>{},q7=w.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:wC,setState:wC,isInstantPhase:!1}),Bte=()=>w.useContext(q7);function zte(e){const{children:t,delay:n,timeoutMs:r=0}=e,[s,i]=w.useReducer((c,u)=>({...c,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=w.useRef(null),a=w.useCallback(c=>{i({currentId:c})},[]);return Co(()=>{s.currentId?o.current===null?o.current=s.currentId:s.isInstantPhase||i({isInstantPhase:!0}):(s.isInstantPhase&&i({isInstantPhase:!1}),o.current=null)},[s.currentId,s.isInstantPhase]),w.createElement(q7.Provider,{value:w.useMemo(()=>({...s,setState:i,setCurrentId:a}),[s,a])},t)}function Vte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:s}=e,{id:i,enabled:o=!0}=t,a=i??s,c=Bte(),{currentId:u,setCurrentId:f,initialDelay:h,setState:p,timeoutMs:y}=c;return Co(()=>{o&&u&&(p({delay:{open:1,close:Av(h,"close")}}),u!==a&&r(!1))},[o,a,r,p,u,h]),Co(()=>{function v(){r(!1),p({delay:h,currentId:null})}if(o&&u&&!n&&u===a){if(y){const x=window.setTimeout(v,y);return()=>{clearTimeout(x)}}v()}},[o,n,p,u,a,r,h,y]),Co(()=>{o&&(f===wC||!n||f(a))},[o,n,f,a]),c}function gN(e,t){let n=e.filter(s=>{var i;return s.parentId===t&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=e.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Ute="data-floating-ui-focusable",qte={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Hte={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},fM=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Wte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:s,dataRef:i}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:f=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:y,capture:v}=t,x=dA(),S=va(typeof c=="function"?c:()=>!1),N=typeof c=="function"?S:c,_=w.useRef(!1),C=w.useRef(!1),{escapeKey:j,outsidePress:A}=fM(y),{escapeKey:$,outsidePress:k}=fM(v),R=w.useRef(!1),F=va(V=>{var T;if(!n||!o||!a||V.key!=="Escape"||R.current)return;const D=(T=i.current.floatingContext)==null?void 0:T.nodeId,P=x?gN(x.nodesRef.current,D):[];if(!j&&(V.stopPropagation(),P.length>0)){let q=!0;if(P.forEach(M=>{var W;if((W=M.context)!=null&&W.open&&!M.context.dataRef.current.__escapeKeyBubbles){q=!1;return}}),!q)return}r(!1,Lee(V)?V.nativeEvent:V,"escape-key")}),z=va(V=>{var T;const D=()=>{var P;F(V),(P=Af(V))==null||P.removeEventListener("keydown",D)};(T=Af(V))==null||T.addEventListener("keydown",D)}),L=va(V=>{var T;const D=_.current;_.current=!1;const P=C.current;if(C.current=!1,u==="click"&&P||D||typeof N=="function"&&!N(V))return;const q=Af(V),M="["+fA("inert")+"]",W=_u(s.floating).querySelectorAll(M);let X=fn(q)?q:null;for(;X&&!xc(X);){const fe=Fa(X);if(xc(fe)||!fn(fe))break;X=fe}if(W.length&&fn(q)&&!Fee(q)&&!Cg(q,s.floating)&&Array.from(W).every(fe=>!Cg(X,fe)))return;if(ks(q)&&I){const fe=q.clientWidth>0&&q.scrollWidth>q.clientWidth,le=q.clientHeight>0&&q.scrollHeight>q.clientHeight;let ue=le&&V.offsetX>q.clientWidth;if(le&&ai(q).direction==="rtl"&&(ue=V.offsetX<=q.offsetWidth-q.clientWidth),ue||fe&&V.offsetY>q.clientHeight)return}const Q=(T=i.current.floatingContext)==null?void 0:T.nodeId,oe=x&&gN(x.nodesRef.current,Q).some(fe=>{var le;return fN(V,(le=fe.context)==null?void 0:le.elements.floating)});if(fN(V,s.floating)||fN(V,s.domReference)||oe)return;const ae=x?gN(x.nodesRef.current,Q):[];if(ae.length>0){let fe=!0;if(ae.forEach(le=>{var ue;if((ue=le.context)!=null&&ue.open&&!le.context.dataRef.current.__outsidePressBubbles){fe=!1;return}}),!fe)return}r(!1,V,"outside-press")}),B=va(V=>{var T;const D=()=>{var P;L(V),(P=Af(V))==null||P.removeEventListener(u,D)};(T=Af(V))==null||T.addEventListener(u,D)});w.useEffect(()=>{if(!n||!o)return;i.current.__escapeKeyBubbles=j,i.current.__outsidePressBubbles=A;let V=-1;function T(W){r(!1,W,"ancestor-scroll")}function D(){window.clearTimeout(V),R.current=!0}function P(){V=window.setTimeout(()=>{R.current=!1},Yw()?5:0)}const q=_u(s.floating);a&&(q.addEventListener("keydown",$?z:F,$),q.addEventListener("compositionstart",D),q.addEventListener("compositionend",P)),N&&q.addEventListener(u,k?B:L,k);let M=[];return p&&(fn(s.domReference)&&(M=Aa(s.domReference)),fn(s.floating)&&(M=M.concat(Aa(s.floating))),!fn(s.reference)&&s.reference&&s.reference.contextElement&&(M=M.concat(Aa(s.reference.contextElement)))),M=M.filter(W=>{var X;return W!==((X=q.defaultView)==null?void 0:X.visualViewport)}),M.forEach(W=>{W.addEventListener("scroll",T,{passive:!0})}),()=>{a&&(q.removeEventListener("keydown",$?z:F,$),q.removeEventListener("compositionstart",D),q.removeEventListener("compositionend",P)),N&&q.removeEventListener(u,k?B:L,k),M.forEach(W=>{W.removeEventListener("scroll",T)}),window.clearTimeout(V)}},[i,s,a,N,u,n,r,p,o,j,A,F,$,z,L,k,B]),w.useEffect(()=>{_.current=!1},[N,u]);const H=w.useMemo(()=>({onKeyDown:F,[qte[h]]:V=>{f&&r(!1,V.nativeEvent,"reference-press")}}),[F,r,f,h]),I=w.useMemo(()=>({onKeyDown:F,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[Hte[u]]:()=>{_.current=!0}}),[F,u]);return w.useMemo(()=>o?{reference:H,floating:I}:{},[o,H,I])}function Gte(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=U7(),i=w.useRef({}),[o]=w.useState(()=>Pte()),a=uA()!=null,[c,u]=w.useState(r.reference),f=va((y,v,x)=>{i.current.openEvent=y?v:void 0,o.emit("openchange",{open:y,event:v,reason:x,nested:a}),n==null||n(y,v,x)}),h=w.useMemo(()=>({setPositionReference:u}),[]),p=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:i,open:t,onOpenChange:f,elements:p,events:o,floatingId:s,refs:h}),[t,f,p,o,s,h])}function hA(e){e===void 0&&(e={});const{nodeId:t}=e,n=Gte({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=w.useState(null),[a,c]=w.useState(null),f=(s==null?void 0:s.domReference)||i,h=w.useRef(null),p=dA();Co(()=>{f&&(h.current=f)},[f]);const y=jte({...e,elements:{...s,...a&&{reference:a}}}),v=w.useCallback(C=>{const j=fn(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;c(j),y.refs.setReference(j)},[y.refs]),x=w.useCallback(C=>{(fn(C)||C===null)&&(h.current=C,o(C)),(fn(y.refs.reference.current)||y.refs.reference.current===null||C!==null&&!fn(C))&&y.refs.setReference(C)},[y.refs]),S=w.useMemo(()=>({...y.refs,setReference:x,setPositionReference:v,domReference:h}),[y.refs,x,v]),N=w.useMemo(()=>({...y.elements,domReference:f}),[y.elements,f]),_=w.useMemo(()=>({...y,...r,refs:S,elements:N,nodeId:t}),[y,S,N,t,r]);return Co(()=>{r.dataRef.current.floatingContext=_;const C=p==null?void 0:p.nodesRef.current.find(j=>j.id===t);C&&(C.context=_)}),w.useMemo(()=>({...y,context:_,refs:S,elements:N}),[y,S,N,_])}function Yte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:s,dataRef:i,elements:o}=e,{enabled:a=!0,visibleOnly:c=!0}=t,u=w.useRef(!1),f=w.useRef(),h=w.useRef(!0);w.useEffect(()=>{if(!a)return;const y=os(o.domReference);function v(){!n&&ks(o.domReference)&&o.domReference===tM(_u(o.domReference))&&(u.current=!0)}function x(){h.current=!0}return y.addEventListener("blur",v),y.addEventListener("keydown",x,!0),()=>{y.removeEventListener("blur",v),y.removeEventListener("keydown",x,!0)}},[o.domReference,n,a]),w.useEffect(()=>{if(!a)return;function y(v){let{reason:x}=v;(x==="reference-press"||x==="escape-key")&&(u.current=!0)}return s.on("openchange",y),()=>{s.off("openchange",y)}},[s,a]),w.useEffect(()=>()=>{clearTimeout(f.current)},[]);const p=w.useMemo(()=>({onPointerDown(y){Mee(y.nativeEvent)||(h.current=!1)},onMouseLeave(){u.current=!1},onFocus(y){if(u.current)return;const v=Af(y.nativeEvent);if(c&&fn(v))try{if(Iee()&&Pee())throw Error();if(!v.matches(":focus-visible"))return}catch{if(!h.current&&!zee(v))return}r(!0,y.nativeEvent,"focus")},onBlur(y){u.current=!1;const v=y.relatedTarget,x=y.nativeEvent,S=fn(v)&&v.hasAttribute(fA("focus-guard"))&&v.getAttribute("data-type")==="outside";f.current=window.setTimeout(()=>{var N;const _=tM(o.domReference?o.domReference.ownerDocument:document);!v&&_===o.domReference||Cg((N=i.current.floatingContext)==null?void 0:N.refs.floating.current,_)||Cg(o.domReference,_)||S||r(!1,x,"focus")})}}),[i,o.domReference,r,c]);return w.useMemo(()=>a?{reference:p}:{},[a,p])}const hM="active",mM="selected";function yN(e,t,n){const r=new Map,s=n==="item";let i=e;if(s&&e){const{[hM]:o,[mM]:a,...c}=e;i=c}return{...n==="floating"&&{tabIndex:-1,[Ute]:""},...i,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(c=>{let[u,f]=c;if(!(s&&[hM,mM].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var h;(h=r.get(u))==null||h.push(f),o[u]=function(){for(var p,y=arguments.length,v=new Array(y),x=0;x<y;x++)v[x]=arguments[x];return(p=r.get(u))==null?void 0:p.map(S=>S(...v)).find(S=>S!==void 0)}}}else o[u]=f}),o),{})}}function Jte(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),s=w.useCallback(a=>yN(a,e,"reference"),t),i=w.useCallback(a=>yN(a,e,"floating"),n),o=w.useCallback(a=>yN(a,e,"item"),r);return w.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}const Xte=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Kte(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:s}=e,{enabled:i=!0,role:o="dialog"}=t,a=(n=Xte.get(o))!=null?n:o,c=U7(),f=uA()!=null,h=w.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?s:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:c},...a==="menu"&&f&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,s,f,r,c,o]),p=w.useMemo(()=>{const v={id:s,...a&&{role:a}};return a==="tooltip"||o==="label"?v:{...v,...a==="menu"&&{"aria-labelledby":c}}},[a,s,c,o]),y=w.useCallback(v=>{let{active:x,selected:S}=v;const N={role:"option",...x&&{id:s+"-option"}};switch(o){case"select":return{...N,"aria-selected":x&&S};case"combobox":return{...N,...x&&{"aria-selected":!0}}}return{}},[s,o]);return w.useMemo(()=>i?{reference:h,floating:p,item:y}:{},[i,h,p,y])}function H7(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),s=n==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return t}function pM(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function gM(e,t,n,r,s){return e==="center"||r==="center"?{left:t}:e==="end"?{[s==="ltr"?"right":"left"]:n}:e==="start"?{[s==="ltr"?"left":"right"]:n}:{}}const Qte={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Zte({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,arrowX:i,arrowY:o,dir:a}){const[c,u="center"]=e.split("-"),f={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[Qte[c]]:r},h=-t/2;return c==="left"?{...f,...pM(u,o,n,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:c==="right"?{...f,...pM(u,o,n,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:c==="top"?{...f,...gM(u,i,n,s,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:c==="bottom"?{...f,...gM(u,i,n,s,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const mA=w.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,visible:i,arrowX:o,arrowY:a,style:c,...u},f)=>{const{dir:h}=Mc();return i?m.jsx("div",{...u,ref:f,style:{...c,...Zte({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,dir:h,arrowX:o,arrowY:a})}}):null});mA.displayName="@mantine/core/FloatingArrow";var W7={root:"m_9814e45f"};const ene={zIndex:eo("modal")},tne=(e,{gradient:t,color:n,backgroundOpacity:r,blur:s,radius:i,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&po(n||"#000",r??.6)||void 0,"--overlay-filter":s?`blur(${Ae(s)})`:void 0,"--overlay-radius":i===void 0?void 0:Qn(i),"--overlay-z-index":o==null?void 0:o.toString()}}),Xw=kc((e,t)=>{const n=Pe("Overlay",ene,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,fixed:u,center:f,children:h,radius:p,zIndex:y,gradient:v,blur:x,color:S,backgroundOpacity:N,mod:_,...C}=n,j=vt({name:"Overlay",props:n,classes:W7,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:tne});return m.jsx(Ve,{ref:t,...j("root"),mod:[{center:f,fixed:u},_],...C,children:h})});Xw.classes=W7;Xw.displayName="@mantine/core/Overlay";function bN(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function nne({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||bN(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const s=bN(n);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return bN(n)}const rne={},G7=Ge((e,t)=>{const{children:n,target:r,reuseTargetNode:s,...i}=Pe("Portal",rne,e),[o,a]=w.useState(!1),c=w.useRef(null);return Kh(()=>(a(!0),c.current=nne({target:r,reuseTargetNode:s,...i}),sx(t,c.current),!r&&!s&&c.current&&document.body.appendChild(c.current),()=>{!r&&!s&&c.current&&document.body.removeChild(c.current)}),[r]),!o||!c.current?null:Ty.createPortal(m.jsx(m.Fragment,{children:n}),c.current)});G7.displayName="@mantine/core/Portal";const fd=Ge(({withinPortal:e=!0,children:t,...n},r)=>r7()==="test"||!e?m.jsx(m.Fragment,{children:t}):m.jsx(G7,{ref:r,...n,children:t}));fd.displayName="@mantine/core/OptionalPortal";const Op=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Bb={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Op("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Op("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Op("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Op("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Op("top"),common:{transformOrigin:"top right"}}},yM={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function sne({transition:e,state:t,duration:n,timingFunction:r}){const s={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Bb?{transitionProperty:Bb[e].transitionProperty,...s,...Bb[e].common,...Bb[e][yM[t]]}:{}:{transitionProperty:e.transitionProperty,...s,...e.common,...e[yM[t]]}}function ine({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:s,onExit:i,onEntered:o,onExited:a,enterDelay:c,exitDelay:u}){const f=Ds(),h=Vj(),p=f.respectReducedMotion?h:!1,[y,v]=w.useState(p?0:e),[x,S]=w.useState(r?"entered":"exited"),N=w.useRef(-1),_=w.useRef(-1),C=w.useRef(-1),j=$=>{const k=$?s:i,R=$?o:a;window.clearTimeout(N.current);const F=p?0:$?e:t;v(F),F===0?(typeof k=="function"&&k(),typeof R=="function"&&R(),S($?"entered":"exited")):C.current=requestAnimationFrame(()=>{Df.flushSync(()=>{S($?"pre-entering":"pre-exiting")}),C.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),S($?"entering":"exiting"),N.current=window.setTimeout(()=>{typeof R=="function"&&R(),S($?"entered":"exited")},F)})})},A=$=>{if(window.clearTimeout(_.current),typeof($?c:u)!="number"){j($);return}_.current=window.setTimeout(()=>{j($)},$?c:u)};return Da(()=>{A(r)},[r]),w.useEffect(()=>()=>{window.clearTimeout(N.current),cancelAnimationFrame(C.current)},[]),{transitionDuration:y,transitionStatus:x,transitionTimingFunction:n||"ease"}}function Ic({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:s,children:i,timingFunction:o="ease",onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:p}){const y=r7(),{transitionDuration:v,transitionStatus:x,transitionTimingFunction:S}=ine({mounted:s,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:p});return v===0||y==="test"?s?m.jsx(m.Fragment,{children:i({})}):e?i({display:"none"}):null:x==="exited"?e?i({display:"none"}):null:m.jsx(m.Fragment,{children:i(sne({transition:t,duration:v,state:x,timingFunction:S}))})}Ic.displayName="@mantine/core/Transition";const[one,Y7]=Ya("Popover component was not found in the tree");function Kw({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const s=zw(t),i=jn(s,r);return Tc(e)?w.cloneElement(e,{[n]:i}):e}function J7(e){return m.jsx(Zj,{tabIndex:-1,"data-autofocus":!0,...e})}Kw.displayName="@mantine/core/FocusTrap";J7.displayName="@mantine/core/FocusTrapInitialFocus";Kw.InitialFocus=J7;var X7={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const ane={},pA=Ge((e,t)=>{var S,N,_,C;const n=Pe("PopoverDropdown",ane,e),{className:r,style:s,vars:i,children:o,onKeyDownCapture:a,variant:c,classNames:u,styles:f,...h}=n,p=Y7(),y=Y8({opened:p.opened,shouldReturnFocus:p.returnFocus}),v=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},x=jn(t,p.floating);return p.disabled?null:m.jsx(fd,{...p.portalProps,withinPortal:p.withinPortal,children:m.jsx(Ic,{mounted:p.opened,...p.transitionProps,transition:((S=p.transitionProps)==null?void 0:S.transition)||"fade",duration:((N=p.transitionProps)==null?void 0:N.duration)??150,keepMounted:p.keepMounted,exitDuration:typeof((_=p.transitionProps)==null?void 0:_.exitDuration)=="number"?p.transitionProps.exitDuration:(C=p.transitionProps)==null?void 0:C.duration,children:j=>m.jsx(Kw,{active:p.trapFocus&&p.opened,innerRef:x,children:m.jsxs(Ve,{...v,...h,variant:c,onKeyDownCapture:jQ(()=>{var A,$;(A=p.onClose)==null||A.call(p),($=p.onDismiss)==null||$.call(p)},{active:p.closeOnEscape,onTrigger:y,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:u,styles:f,style:[{...j,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Ae(p.width)},p.resolvedStyles.dropdown,f==null?void 0:f.dropdown,s]}),children:[o,m.jsx(mA,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:u,styles:f})})]})})})})});pA.classes=X7;pA.displayName="@mantine/core/PopoverDropdown";const lne={refProp:"ref",popupType:"dialog"},K7=Ge((e,t)=>{const{children:n,refProp:r,popupType:s,...i}=Pe("PopoverTarget",lne,e);if(!Tc(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=i,a=Y7(),c=jn(a.reference,Vw(n),t),u=a.withRoles?{"aria-haspopup":s,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return w.cloneElement(n,{...o,...u,...a.targetProps,className:yn(a.targetProps.className,o.className,n.props.className),[r]:c,...a.controlled?null:{onClick:a.onToggle}})});K7.displayName="@mantine/core/PopoverTarget";function Q7({opened:e,floating:t,position:n,positionDependencies:r}){const[s,i]=w.useState(0);w.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return xte(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,s,n]),Da(()=>{t.update()},r),Da(()=>{i(o=>o+1)},[e])}function cne(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function une(e,t){const n=cne(e.middlewares),r=[B7(e.offset)];return n.shift&&r.push(cA(typeof n.shift=="boolean"?{limiter:lM(),padding:5}:{limiter:lM(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?cx():cx(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?tg():tg(n.inline)),r.push(z7({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Tte({...typeof n.size=="boolean"?{}:n.size,apply({rects:s,availableWidth:i,availableHeight:o,...a}){var f;const u=((f=t().refs.floating.current)==null?void 0:f.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:s,availableWidth:i,availableHeight:o,...a}):Object.assign(u,{maxWidth:`${i}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(u,{width:`${s.reference.width}px`})}})),r}function dne(e){const[t,n]=cs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=w.useRef(t),s=()=>{t&&n(!1)},i=()=>n(!t),o=hA({strategy:e.strategy,placement:e.position,middleware:une(e,()=>o)});return Q7({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),Da(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),Da(()=>{var a,c;t!==r.current&&(t?(c=e.onOpen)==null||c.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:s,onToggle:i}}const fne={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:eo("popover"),__staticSelector:"Popover",width:"max-content"},hne=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Qn(t),"--popover-shadow":zj(n)}});function as(e){var ne,ce,xe,Ee,We,Vt;const t=Pe("Popover",fne,e),{children:n,position:r,offset:s,onPositionChange:i,positionDependencies:o,opened:a,transitionProps:c,onExitTransitionEnd:u,onEnterTransitionEnd:f,width:h,middlewares:p,withArrow:y,arrowSize:v,arrowOffset:x,arrowRadius:S,arrowPosition:N,unstyled:_,classNames:C,styles:j,closeOnClickOutside:A,withinPortal:$,portalProps:k,closeOnEscape:R,clickOutsideEvents:F,trapFocus:z,onClose:L,onDismiss:B,onOpen:H,onChange:I,zIndex:V,radius:T,shadow:D,id:P,defaultOpened:q,__staticSelector:M,withRoles:W,disabled:X,returnFocus:Q,variant:oe,keepMounted:ae,vars:fe,floatingStrategy:le,withOverlay:ue,overlayProps:ve,..._e}=t,ke=vt({name:M,props:t,classes:X7,classNames:C,styles:j,unstyled:_,rootSelector:"dropdown",vars:fe,varsResolver:hne}),{resolvedStyles:Oe}=Zh({classNames:C,styles:j,props:t}),$e=w.useRef(null),[Re,qe]=w.useState(null),[et,Ce]=w.useState(null),{dir:Me}=Mc(),Ie=fi(P),G=dne({middlewares:p,width:h,position:H7(Me,r),offset:typeof s=="number"?s+(y?v/2:0):s,arrowRef:$e,arrowOffset:x,onPositionChange:i,positionDependencies:o,opened:a,defaultOpened:q,onChange:I,onOpen:H,onClose:L,onDismiss:B,strategy:le});jy(()=>{A&&(G.onClose(),B==null||B())},F,[Re,et]);const re=w.useCallback(wt=>{qe(wt),G.floating.refs.setReference(wt)},[G.floating.refs.setReference]),te=w.useCallback(wt=>{Ce(wt),G.floating.refs.setFloating(wt)},[G.floating.refs.setFloating]),he=w.useCallback(()=>{var wt;(wt=c==null?void 0:c.onExited)==null||wt.call(c),u==null||u()},[c==null?void 0:c.onExited,u]),se=w.useCallback(()=>{var wt;(wt=c==null?void 0:c.onEntered)==null||wt.call(c),f==null||f()},[c==null?void 0:c.onEntered,f]);return m.jsxs(one,{value:{returnFocus:Q,disabled:X,controlled:G.controlled,reference:re,floating:te,x:G.floating.x,y:G.floating.y,arrowX:(xe=(ce=(ne=G.floating)==null?void 0:ne.middlewareData)==null?void 0:ce.arrow)==null?void 0:xe.x,arrowY:(Vt=(We=(Ee=G.floating)==null?void 0:Ee.middlewareData)==null?void 0:We.arrow)==null?void 0:Vt.y,opened:G.opened,arrowRef:$e,transitionProps:{...c,onExited:he,onEntered:se},width:h,withArrow:y,arrowSize:v,arrowOffset:x,arrowRadius:S,arrowPosition:N,placement:G.floating.placement,trapFocus:z,withinPortal:$,portalProps:k,zIndex:V,radius:T,shadow:D,closeOnEscape:R,onDismiss:B,onClose:G.onClose,onToggle:G.onToggle,getTargetId:()=>`${Ie}-target`,getDropdownId:()=>`${Ie}-dropdown`,withRoles:W,targetProps:_e,__staticSelector:M,classNames:C,styles:j,unstyled:_,variant:oe,keepMounted:ae,getStyles:ke,resolvedStyles:Oe,floatingStrategy:le},children:[n,ue&&m.jsx(Ic,{transition:"fade",mounted:G.opened,duration:(c==null?void 0:c.duration)||250,exitDuration:(c==null?void 0:c.exitDuration)||250,children:wt=>m.jsx(fd,{withinPortal:$,children:m.jsx(Xw,{...ve,...ke("overlay",{className:ve==null?void 0:ve.className,style:[wt,ve==null?void 0:ve.style]})})})})]})}as.Target=K7;as.Dropdown=pA;as.displayName="@mantine/core/Popover";as.extend=e=>e;var Bi={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Z7=w.forwardRef(({className:e,...t},n)=>m.jsxs(Ve,{component:"span",className:yn(Bi.barsLoader,e),...t,ref:n,children:[m.jsx("span",{className:Bi.bar}),m.jsx("span",{className:Bi.bar}),m.jsx("span",{className:Bi.bar})]}));Z7.displayName="@mantine/core/Bars";const eL=w.forwardRef(({className:e,...t},n)=>m.jsxs(Ve,{component:"span",className:yn(Bi.dotsLoader,e),...t,ref:n,children:[m.jsx("span",{className:Bi.dot}),m.jsx("span",{className:Bi.dot}),m.jsx("span",{className:Bi.dot})]}));eL.displayName="@mantine/core/Dots";const tL=w.forwardRef(({className:e,...t},n)=>m.jsx(Ve,{component:"span",className:yn(Bi.ovalLoader,e),...t,ref:n}));tL.displayName="@mantine/core/Oval";const nL={bars:Z7,oval:tL,dots:eL},mne={loaders:nL,type:"oval"},pne=(e,{size:t,color:n})=>({root:{"--loader-size":Mt(t,"loader-size"),"--loader-color":n?Cr(n,e):void 0}}),ky=Ge((e,t)=>{const n=Pe("Loader",mne,e),{size:r,color:s,type:i,vars:o,className:a,style:c,classNames:u,styles:f,unstyled:h,loaders:p,variant:y,children:v,...x}=n,S=vt({name:"Loader",props:n,classes:Bi,className:a,style:c,classNames:u,styles:f,unstyled:h,vars:o,varsResolver:pne});return v?m.jsx(Ve,{...S("root"),ref:t,...x,children:v}):m.jsx(Ve,{...S("root"),ref:t,component:p[i],variant:y,size:r,...x})});ky.defaultLoaders=nL;ky.classes=Bi;ky.displayName="@mantine/core/Loader";const rL=w.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));rL.displayName="@mantine/core/CloseIcon";var sL={root:"m_86a44da5","root--subtle":"m_220c80f2"};const gne={variant:"subtle"},yne=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Mt(t,"cb-size"),"--cb-radius":n===void 0?void 0:Qn(n),"--cb-icon-size":Ae(r)}}),rm=kc((e,t)=>{const n=Pe("CloseButton",gne,e),{iconSize:r,children:s,vars:i,radius:o,className:a,classNames:c,style:u,styles:f,unstyled:h,"data-disabled":p,disabled:y,variant:v,icon:x,mod:S,__staticSelector:N,..._}=n,C=vt({name:N||"CloseButton",props:n,className:a,style:u,classes:sL,classNames:c,styles:f,unstyled:h,vars:i,varsResolver:yne});return m.jsxs(La,{ref:t,..._,unstyled:h,variant:v,disabled:y,mod:[{disabled:y||p},S],...C("root",{variant:v,active:!y&&!p}),children:[x||m.jsx(rL,{}),s]})});rm.classes=sL;rm.displayName="@mantine/core/CloseButton";function bne(e){return w.Children.toArray(e).filter(Boolean)}var iL={root:"m_4081bf90"};const vne={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},xne=(e,{grow:t,preventGrowOverflow:n,gap:r,align:s,justify:i,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Bj(r),"--group-align":s,"--group-justify":i,"--group-wrap":o}}),gA=Ge((e,t)=>{const n=Pe("Group",vne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,children:c,gap:u,align:f,justify:h,wrap:p,grow:y,preventGrowOverflow:v,vars:x,variant:S,__size:N,mod:_,...C}=n,j=bne(c),A=j.length,$=Bj(u??"md"),R={childWidth:`calc(${100/A}% - (${$} - ${$} / ${A}))`},F=vt({name:"Group",props:n,stylesCtx:R,className:s,style:i,classes:iL,classNames:r,styles:o,unstyled:a,vars:x,varsResolver:xne});return m.jsx(Ve,{...F("root"),ref:t,variant:S,mod:[{grow:y},_],size:N,...C,children:j})});gA.classes=iL;gA.displayName="@mantine/core/Group";const[wne,Ja]=Ya("ModalBase component was not found in tree");function Sne({opened:e,transitionDuration:t}){const[n,r]=w.useState(e),s=w.useRef(-1),o=Vj()?0:t;return w.useEffect(()=>(e?(r(!0),window.clearTimeout(s.current)):o===0?r(!1):s.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(s.current)),[e,o]),n}function Ene({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:s,onClose:i,returnFocus:o}){const a=fi(e),[c,u]=w.useState(!1),[f,h]=w.useState(!1),p=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,y=Sne({opened:n,transitionDuration:p});return dC("keydown",v=>{var x;v.key==="Escape"&&s&&n&&((x=v.target)==null?void 0:x.getAttribute("data-mantine-stop-propagation"))!=="true"&&i()},{capture:!0}),Y8({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:c,bodyMounted:f,shouldLockScroll:y,setTitleMounted:u,setBodyMounted:h}}const oL=w.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:s,onExitTransitionEnd:i,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:c,returnFocus:u,closeOnClickOutside:f,withinPortal:h,portalProps:p,lockScroll:y,children:v,zIndex:x,shadow:S,padding:N,__vars:_,unstyled:C,removeScrollProps:j,...A},$)=>{const{_id:k,titleMounted:R,bodyMounted:F,shouldLockScroll:z,setTitleMounted:L,setBodyMounted:B}=Ene({id:r,transitionProps:s,opened:t,trapFocus:a,closeOnEscape:c,onClose:n,returnFocus:u}),{key:H,...I}=j||{};return m.jsx(fd,{...p,withinPortal:h,children:m.jsx(wne,{value:{opened:t,onClose:n,closeOnClickOutside:f,onExitTransitionEnd:i,onEnterTransitionEnd:o,transitionProps:{...s,keepMounted:e},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:R,bodyMounted:F,setTitleMounted:L,setBodyMounted:B,trapFocus:a,closeOnEscape:c,zIndex:x,unstyled:C},children:m.jsx(nx,{enabled:z&&y,...I,children:m.jsx(Ve,{ref:$,...A,__vars:{..._,"--mb-z-index":(x||eo("modal")).toString(),"--mb-shadow":zj(S),"--mb-padding":Bj(N)},children:v})},H)})})});oL.displayName="@mantine/core/ModalBase";function Nne(){const e=Ja();return w.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Eh={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const aL=w.forwardRef(({className:e,...t},n)=>{const r=Nne(),s=Ja();return m.jsx(Ve,{ref:n,...t,id:r,className:yn({[Eh.body]:!s.unstyled},e)})});aL.displayName="@mantine/core/ModalBaseBody";const lL=w.forwardRef(({className:e,onClick:t,...n},r)=>{const s=Ja();return m.jsx(rm,{ref:r,...n,onClick:i=>{s.onClose(),t==null||t(i)},className:yn({[Eh.close]:!s.unstyled},e),unstyled:s.unstyled})});lL.displayName="@mantine/core/ModalBaseCloseButton";const cL=w.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:s,...i},o)=>{const a=Ja();return m.jsx(Ic,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var c,u,f;(c=a.onExitTransitionEnd)==null||c.call(a),(f=(u=a.transitionProps)==null?void 0:u.onExited)==null||f.call(u)},onEntered:()=>{var c,u,f;(c=a.onEnterTransitionEnd)==null||c.call(a),(f=(u=a.transitionProps)==null?void 0:u.onEntered)==null||f.call(u)},...e,children:c=>m.jsx("div",{...n,className:yn({[Eh.inner]:!a.unstyled},n.className),children:m.jsx(Kw,{active:a.opened&&a.trapFocus,innerRef:o,children:m.jsx(eA,{...i,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[s,c],className:yn({[Eh.content]:!a.unstyled},t),unstyled:a.unstyled,children:i.children})})})})});cL.displayName="@mantine/core/ModalBaseContent";const uL=w.forwardRef(({className:e,...t},n)=>{const r=Ja();return m.jsx(Ve,{component:"header",ref:n,className:yn({[Eh.header]:!r.unstyled},e),...t})});uL.displayName="@mantine/core/ModalBaseHeader";const _ne={duration:200,timingFunction:"ease",transition:"fade"};function Cne(e){const t=Ja();return{..._ne,...t.transitionProps,...e}}const dL=w.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...s},i)=>{const o=Ja(),a=Cne(t);return m.jsx(Ic,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:c=>m.jsx(Xw,{ref:i,fixed:!0,style:[n,c],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{e==null||e(u),o.closeOnClickOutside&&o.onClose()},...s})})});dL.displayName="@mantine/core/ModalBaseOverlay";function One(){const e=Ja();return w.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const fL=w.forwardRef(({className:e,...t},n)=>{const r=One(),s=Ja();return m.jsx(Ve,{component:"h2",ref:n,className:yn({[Eh.title]:!s.unstyled},e),...t,id:r})});fL.displayName="@mantine/core/ModalBaseTitle";function jne({children:e}){return m.jsx(m.Fragment,{children:e})}const[Ane,Tne]=dd({size:"sm"}),$ne={},hL=Ge((e,t)=>{const n=Pe("InputClearButton",$ne,e),{size:r,variant:s,vars:i,classNames:o,styles:a,...c}=n,u=Tne(),{resolvedClassNames:f,resolvedStyles:h}=Zh({classNames:o,styles:a,props:n});return m.jsx(rm,{variant:s||"transparent",ref:t,size:r||(u==null?void 0:u.size)||"sm",classNames:f,styles:h,__staticSelector:"InputClearButton",...c})});hL.displayName="@mantine/core/InputClearButton";const[Rne,sm]=dd({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var mi={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const bM={},kne=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Vr(t)} - ${Ae(2)})`}}),Qw=Ge((e,t)=>{const n=Pe("InputDescription",bM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...y}=Pe("InputDescription",bM,n),v=sm(),x=vt({name:["InputWrapper",f],props:n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:c,varsResolver:kne}),S=h&&(v==null?void 0:v.getStyles)||x;return m.jsx(Ve,{component:"p",ref:t,variant:p,size:u,...S("description",v!=null&&v.getStyles?{className:s,style:i}:void 0),...y})});Qw.classes=mi;Qw.displayName="@mantine/core/InputDescription";const Mne={},Ine=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Vr(t)} - ${Ae(2)})`}}),Zw=Ge((e,t)=>{const n=Pe("InputError",Mne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...y}=n,v=vt({name:["InputWrapper",f],props:n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:c,varsResolver:Ine}),x=sm(),S=h&&(x==null?void 0:x.getStyles)||v;return m.jsx(Ve,{component:"p",ref:t,variant:p,size:u,...S("error",x!=null&&x.getStyles?{className:s,style:i}:void 0),...y})});Zw.classes=mi;Zw.displayName="@mantine/core/InputError";const vM={labelElement:"label"},Pne=(e,{size:t})=>({label:{"--input-label-size":Vr(t),"--input-asterisk-color":void 0}}),e1=Ge((e,t)=>{const n=Pe("InputLabel",vM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,labelElement:u,size:f,required:h,htmlFor:p,onMouseDown:y,children:v,__staticSelector:x,variant:S,mod:N,..._}=Pe("InputLabel",vM,n),C=vt({name:["InputWrapper",x],props:n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:c,varsResolver:Pne}),j=sm(),A=(j==null?void 0:j.getStyles)||C;return m.jsxs(Ve,{...A("label",j!=null&&j.getStyles?{className:s,style:i}:void 0),component:u,variant:S,size:f,ref:t,htmlFor:u==="label"?p:void 0,mod:[{required:h},N],onMouseDown:$=>{y==null||y($),!$.defaultPrevented&&$.detail>1&&$.preventDefault()},..._,children:[v,h&&m.jsx("span",{...A("required"),"aria-hidden":!0,children:" *"})]})});e1.classes=mi;e1.displayName="@mantine/core/InputLabel";const xM={},yA=Ge((e,t)=>{const n=Pe("InputPlaceholder",xM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,__staticSelector:u,variant:f,error:h,mod:p,...y}=Pe("InputPlaceholder",xM,n),v=vt({name:["InputPlaceholder",u],props:n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return m.jsx(Ve,{...v("placeholder"),mod:[{error:!!h},p],component:"span",variant:f,ref:t,...y})});yA.classes=mi;yA.displayName="@mantine/core/InputPlaceholder";function Dne(e,{hasDescription:t,hasError:n}){const r=e.findIndex(c=>c==="input"),s=e.slice(0,r),i=e.slice(r+1),o=t&&s.includes("description")||n&&s.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:o}}const Lne={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Fne=(e,{size:t})=>({label:{"--input-label-size":Vr(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Vr(t)} - ${Ae(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Vr(t)} - ${Ae(2)})`}}),bA=Ge((e,t)=>{const n=Pe("InputWrapper",Lne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,variant:f,__staticSelector:h,inputContainer:p,inputWrapperOrder:y,label:v,error:x,description:S,labelProps:N,descriptionProps:_,errorProps:C,labelElement:j,children:A,withAsterisk:$,id:k,required:R,__stylesApiProps:F,mod:z,...L}=n,B=vt({name:["InputWrapper",h],props:F||n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Fne}),H={size:u,variant:f,__staticSelector:h},I=fi(k),V=typeof $=="boolean"?$:R,T=(C==null?void 0:C.id)||`${I}-error`,D=(_==null?void 0:_.id)||`${I}-description`,P=I,q=!!x&&typeof x!="boolean",M=!!S,W=`${q?T:""} ${M?D:""}`,X=W.trim().length>0?W.trim():void 0,Q=(N==null?void 0:N.id)||`${I}-label`,oe=v&&m.jsx(e1,{labelElement:j,id:Q,htmlFor:P,required:V,...H,...N,children:v},"label"),ae=M&&m.jsx(Qw,{..._,...H,size:(_==null?void 0:_.size)||H.size,id:(_==null?void 0:_.id)||D,children:S},"description"),fe=m.jsx(w.Fragment,{children:p(A)},"input"),le=q&&w.createElement(Zw,{...C,...H,size:(C==null?void 0:C.size)||H.size,key:"error",id:(C==null?void 0:C.id)||T},x),ue=y.map(ve=>{switch(ve){case"label":return oe;case"input":return fe;case"description":return ae;case"error":return le;default:return null}});return m.jsx(Rne,{value:{getStyles:B,describedBy:X,inputId:P,labelId:Q,...Dne(y,{hasDescription:M,hasError:q})},children:m.jsx(Ve,{ref:t,variant:f,size:u,mod:[{error:!!x},z],...B("root"),...L,children:ue})})});bA.classes=mi;bA.displayName="@mantine/core/InputWrapper";const Bne={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},zne=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Mt(t.size,"input-height"),"--input-fz":Vr(t.size),"--input-radius":t.radius===void 0?void 0:Qn(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ae(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ae(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Mt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),It=kc((e,t)=>{const n=Pe("Input",Bne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,required:c,__staticSelector:u,__stylesApiProps:f,size:h,wrapperProps:p,error:y,disabled:v,leftSection:x,leftSectionProps:S,leftSectionWidth:N,rightSection:_,rightSectionProps:C,rightSectionWidth:j,rightSectionPointerEvents:A,leftSectionPointerEvents:$,variant:k,vars:R,pointer:F,multiline:z,radius:L,id:B,withAria:H,withErrorStyles:I,mod:V,inputSize:T,__clearSection:D,__clearable:P,__defaultRightSection:q,...M}=n,{styleProps:W,rest:X}=em(M),Q=sm(),oe={offsetBottom:Q==null?void 0:Q.offsetBottom,offsetTop:Q==null?void 0:Q.offsetTop},ae=vt({name:["Input",u],props:f||n,classes:mi,className:s,style:i,classNames:r,styles:o,unstyled:a,stylesCtx:oe,rootSelector:"wrapper",vars:R,varsResolver:zne}),fe=H?{required:c,disabled:v,"aria-invalid":!!y,"aria-describedby":Q==null?void 0:Q.describedBy,id:(Q==null?void 0:Q.inputId)||B}:{},le=_||P&&D||q;return m.jsx(Ane,{value:{size:h||"sm"},children:m.jsxs(Ve,{...ae("wrapper"),...W,...p,mod:[{error:!!y&&I,pointer:F,disabled:v,multiline:z,"data-with-right-section":!!le,"data-with-left-section":!!x},V],variant:k,size:h,children:[x&&m.jsx("div",{...S,"data-position":"left",...ae("section",{className:S==null?void 0:S.className,style:S==null?void 0:S.style}),children:x}),m.jsx(Ve,{component:"input",...X,...fe,ref:t,required:c,mod:{disabled:v,error:!!y&&I},variant:k,__size:T,...ae("input")}),le&&m.jsx("div",{...C,"data-position":"right",...ae("section",{className:C==null?void 0:C.className,style:C==null?void 0:C.style}),children:le})]})})});It.classes=mi;It.Wrapper=bA;It.Label=e1;It.Error=Zw;It.Description=Qw;It.Placeholder=yA;It.ClearButton=hL;It.displayName="@mantine/core/Input";function Vne(e,t,n){const r=Pe(e,t,n),{label:s,description:i,error:o,required:a,classNames:c,styles:u,className:f,unstyled:h,__staticSelector:p,__stylesApiProps:y,errorProps:v,labelProps:x,descriptionProps:S,wrapperProps:N,id:_,size:C,style:j,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:R,vars:F,mod:z,...L}=r,{styleProps:B,rest:H}=em(L),I={label:s,description:i,error:o,required:a,classNames:c,className:f,__staticSelector:p,__stylesApiProps:y||r,errorProps:v,labelProps:x,descriptionProps:S,unstyled:h,styles:u,size:C,style:j,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:R,id:_,mod:z,...N};return{...H,classNames:c,styles:u,unstyled:h,wrapperProps:{...I,...B},inputProps:{required:a,classNames:c,styles:u,unstyled:h,size:C,__staticSelector:p,__stylesApiProps:y||r,error:o,variant:R,id:_}}}const Une={__staticSelector:"InputBase",withAria:!0},pi=kc((e,t)=>{const{inputProps:n,wrapperProps:r,...s}=Vne("InputBase",Une,e);return m.jsx(It.Wrapper,{...r,children:m.jsx(It,{...n,...s,ref:t})})});pi.classes={...It.classes,...It.Wrapper.classes};pi.displayName="@mantine/core/InputBase";function qne(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Hne({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const s=w.useRef(-1),[i,o]=w.useState(!1),[a,c]=w.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t||!n.current)return;const y=e.getBoundingClientRect(),v=t.getBoundingClientRect(),x=window.getComputedStyle(e),S=window.getComputedStyle(t),N=lc(x.borderTopWidth)+lc(S.borderTopWidth),_=lc(x.borderLeftWidth)+lc(S.borderLeftWidth),C={top:y.top-v.top-N,left:y.left-v.left-_,width:y.width,height:y.height};n.current.style.transform=`translateY(${C.top}px) translateX(${C.left}px)`,n.current.style.width=`${C.width}px`,n.current.style.height=`${C.height}px`},f=()=>{window.clearTimeout(s.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),s.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},h=w.useRef(null),p=w.useRef(null);return w.useEffect(()=>{if(u(),e)return h.current=new ResizeObserver(f),h.current.observe(e),t&&(p.current=new ResizeObserver(f),p.current.observe(t)),()=>{var y,v;(y=h.current)==null||y.disconnect(),(v=p.current)==null||v.disconnect()}},[t,e]),w.useEffect(()=>{if(t){const y=v=>{qne(v.target,t)&&(f(),c(!1))};return t.addEventListener("transitionend",y),()=>{t.removeEventListener("transitionend",y)}}},[t]),QQ(()=>{e7()!=="test"&&o(!0)},20,{autoInvoke:!0}),tZ(y=>{y.forEach(v=>{v.type==="attributes"&&v.attributeName==="dir"&&f()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:i,hidden:a}}var mL={root:"m_96b553a6"};const Wne={},Gne=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),vA=Ge((e,t)=>{const n=Pe("FloatingIndicator",Wne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,target:u,parent:f,transitionDuration:h,mod:p,displayAfterTransitionEnd:y,...v}=n,x=vt({name:"FloatingIndicator",classes:mL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Gne}),S=w.useRef(null),{initialized:N,hidden:_}=Hne({target:u,parent:f,ref:S,displayAfterTransitionEnd:y}),C=jn(t,S);return!u||!f?null:m.jsx(Ve,{ref:C,mod:[{initialized:N,hidden:_},p],...x("root"),...v})});vA.displayName="@mantine/core/FloatingIndicator";vA.classes=mL;function pL(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>pL(t))}:e}function gL(e){return e?e.map(t=>pL(t)):[]}function xA(e){return e.reduce((t,n)=>"group"in n?{...t,...xA(n.items)}:(t[n.value]=n,t),{})}var us={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Yne={error:null},Jne=(e,{size:t,color:n})=>({chevron:{"--combobox-chevron-size":Mt(t,"combobox-chevron-size"),"--combobox-chevron-color":n?Cr(n,e):void 0}}),wA=Ge((e,t)=>{const n=Pe("ComboboxChevron",Yne,e),{size:r,error:s,style:i,className:o,classNames:a,styles:c,unstyled:u,vars:f,mod:h,...p}=n,y=vt({name:"ComboboxChevron",classes:us,props:n,style:i,className:o,classNames:a,styles:c,unstyled:u,vars:f,varsResolver:Jne,rootSelector:"chevron"});return m.jsx(Ve,{component:"svg",...p,...y("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:s},h],ref:t,children:m.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});wA.classes=us;wA.displayName="@mantine/core/ComboboxChevron";const[Xne,gi]=Ya("Combobox component was not found in tree"),yL=w.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...s},i)=>m.jsx(It.ClearButton,{ref:i,tabIndex:-1,"aria-hidden":!0,...s,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));yL.displayName="@mantine/core/ComboboxClearButton";const Kne={},SA=Ge((e,t)=>{const{classNames:n,styles:r,className:s,style:i,hidden:o,...a}=Pe("ComboboxDropdown",Kne,e),c=gi();return m.jsx(as.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...c.getStyles("dropdown",{className:s,style:i,classNames:n,styles:r})})});SA.classes=us;SA.displayName="@mantine/core/ComboboxDropdown";const Qne={refProp:"ref"},bL=Ge((e,t)=>{const{children:n,refProp:r}=Pe("ComboboxDropdownTarget",Qne,e);if(gi(),!Tc(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return m.jsx(as.Target,{ref:t,refProp:r,children:n})});bL.displayName="@mantine/core/ComboboxDropdownTarget";const Zne={},EA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxEmpty",Zne,e),c=gi();return m.jsx(Ve,{ref:t,...c.getStyles("empty",{className:r,classNames:n,styles:i,style:s}),...a})});EA.classes=us;EA.displayName="@mantine/core/ComboboxEmpty";function NA({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:s,autoComplete:i}){const o=gi(),[a,c]=w.useState(null),u=h=>{if(e==null||e(h),!o.readOnly&&t){if(h.nativeEvent.isComposing)return;if(h.nativeEvent.code==="ArrowDown"&&(h.preventDefault(),o.store.dropdownOpened?c(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="ArrowUp"&&(h.preventDefault(),o.store.dropdownOpened?c(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="Enter"||h.nativeEvent.code==="NumpadEnter"){if(h.nativeEvent.keyCode===229)return;const p=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&p!==-1?(h.preventDefault(),o.store.clickSelectedOption()):s==="button"&&(h.preventDefault(),o.store.openDropdown("keyboard"))}h.key==="Escape"&&o.store.closeDropdown("keyboard"),h.nativeEvent.code==="Space"&&s==="button"&&(h.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:i,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const ere={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},vL=Ge((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:i,withExpandedAttribute:o,targetType:a,autoComplete:c,...u}=Pe("ComboboxEventsTarget",ere,e);if(!Tc(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=gi(),h=NA({targetType:a,withAriaAttributes:i,withKeyboardNavigation:s,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:c});return w.cloneElement(n,{...h,...u,[r]:jn(t,f.store.targetRef,Vw(n))})});vL.displayName="@mantine/core/ComboboxEventsTarget";const tre={},_A=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxFooter",tre,e),c=gi();return m.jsx(Ve,{ref:t,...c.getStyles("footer",{className:r,classNames:n,style:s,styles:i}),...a,onMouseDown:u=>{u.preventDefault()}})});_A.classes=us;_A.displayName="@mantine/core/ComboboxFooter";const nre={},CA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,children:a,label:c,...u}=Pe("ComboboxGroup",nre,e),f=gi();return m.jsxs(Ve,{ref:t,...f.getStyles("group",{className:r,classNames:n,style:s,styles:i}),...u,children:[c&&m.jsx("div",{...f.getStyles("groupLabel",{classNames:n,styles:i}),children:c}),a]})});CA.classes=us;CA.displayName="@mantine/core/ComboboxGroup";const rre={},OA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxHeader",rre,e),c=gi();return m.jsx(Ve,{ref:t,...c.getStyles("header",{className:r,classNames:n,style:s,styles:i}),...a,onMouseDown:u=>{u.preventDefault()}})});OA.classes=us;OA.displayName="@mantine/core/ComboboxHeader";function xL({value:e,valuesDivider:t=",",...n}){return m.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}xL.displayName="@mantine/core/ComboboxHiddenInput";const sre={},jA=Ge((e,t)=>{const n=Pe("ComboboxOption",sre,e),{classNames:r,className:s,style:i,styles:o,vars:a,onClick:c,id:u,active:f,onMouseDown:h,onMouseOver:p,disabled:y,selected:v,mod:x,...S}=n,N=gi(),_=w.useId(),C=u||_;return m.jsx(Ve,{...N.getStyles("option",{className:s,classNames:r,styles:o,style:i}),...S,ref:t,id:C,mod:["combobox-option",{"combobox-active":f,"combobox-disabled":y,"combobox-selected":v},x],role:"option",onClick:j=>{var A;y?j.preventDefault():((A=N.onOptionSubmit)==null||A.call(N,n.value,n),c==null||c(j))},onMouseDown:j=>{j.preventDefault(),h==null||h(j)},onMouseOver:j=>{N.resetSelectionOnOptionHover&&N.store.resetSelectedOption(),p==null||p(j)}})});jA.classes=us;jA.displayName="@mantine/core/ComboboxOption";const ire={},AA=Ge((e,t)=>{const n=Pe("ComboboxOptions",ire,e),{classNames:r,className:s,style:i,styles:o,id:a,onMouseDown:c,labelledBy:u,...f}=n,h=gi(),p=fi(a);return w.useEffect(()=>{h.store.setListId(p)},[p]),m.jsx(Ve,{ref:t,...h.getStyles("options",{className:s,style:i,classNames:r,styles:o}),...f,id:p,role:"listbox","aria-labelledby":u,onMouseDown:y=>{y.preventDefault(),c==null||c(y)}})});AA.classes=us;AA.displayName="@mantine/core/ComboboxOptions";const ore={withAriaAttributes:!0,withKeyboardNavigation:!0},TA=Ge((e,t)=>{const n=Pe("ComboboxSearch",ore,e),{classNames:r,styles:s,unstyled:i,vars:o,withAriaAttributes:a,onKeyDown:c,withKeyboardNavigation:u,size:f,...h}=n,p=gi(),y=p.getStyles("search"),v=NA({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:c,autoComplete:"off"});return m.jsx(It,{ref:jn(t,p.store.searchRef),classNames:[{input:y.className},r],styles:[{input:y.style},s],size:f||p.size,...v,...h,__staticSelector:"Combobox"})});TA.classes=us;TA.displayName="@mantine/core/ComboboxSearch";const are={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},wL=Ge((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:i,withExpandedAttribute:o,targetType:a,autoComplete:c,...u}=Pe("ComboboxTarget",are,e);if(!Tc(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=gi(),h=NA({targetType:a,withAriaAttributes:i,withKeyboardNavigation:s,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:c}),p=w.cloneElement(n,{...h,...u});return m.jsx(as.Target,{ref:jn(t,f.store.targetRef),children:p})});wL.displayName="@mantine/core/ComboboxTarget";function lre(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function cre(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function ure(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function $A({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:s,loop:i=!0,scrollBehavior:o="instant"}={}){const[a,c]=cs({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=w.useRef(null),f=w.useRef(-1),h=w.useRef(null),p=w.useRef(null),y=w.useRef(-1),v=w.useRef(-1),x=w.useRef(-1),S=w.useCallback((T="unknown")=>{a||(c(!0),s==null||s(T))},[c,s,a]),N=w.useCallback((T="unknown")=>{a&&(c(!1),r==null||r(T))},[c,r,a]),_=w.useCallback((T="unknown")=>{a?N(T):S(T)},[N,S,a]),C=w.useCallback(()=>{const T=document.querySelector(`#${u.current} [data-combobox-selected]`);T==null||T.removeAttribute("data-combobox-selected"),T==null||T.removeAttribute("aria-selected")},[]),j=w.useCallback(T=>{const D=document.getElementById(u.current),P=D==null?void 0:D.querySelectorAll("[data-combobox-option]");if(!P)return null;const q=T>=P.length?0:T<0?P.length-1:T;return f.current=q,P!=null&&P[q]&&!P[q].hasAttribute("data-combobox-disabled")?(C(),P[q].setAttribute("data-combobox-selected","true"),P[q].setAttribute("aria-selected","true"),P[q].scrollIntoView({block:"nearest",behavior:o}),P[q].id):null},[o,C]),A=w.useCallback(()=>{const T=document.querySelector(`#${u.current} [data-combobox-active]`);if(T){const D=document.querySelectorAll(`#${u.current} [data-combobox-option]`),P=Array.from(D).findIndex(q=>q===T);return j(P)}return j(0)},[j]),$=w.useCallback(()=>j(cre(f.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[j,i]),k=w.useCallback(()=>j(lre(f.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[j,i]),R=w.useCallback(()=>j(ure(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[j]),F=w.useCallback((T="selected",D)=>{x.current=window.setTimeout(()=>{var M;const P=document.querySelectorAll(`#${u.current} [data-combobox-option]`),q=Array.from(P).findIndex(W=>W.hasAttribute(`data-combobox-${T}`));f.current=q,D!=null&&D.scrollIntoView&&((M=P[q])==null||M.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),z=w.useCallback(()=>{f.current=-1,C()},[C]),L=w.useCallback(()=>{const T=document.querySelectorAll(`#${u.current} [data-combobox-option]`),D=T==null?void 0:T[f.current];D==null||D.click()},[]),B=w.useCallback(T=>{u.current=T},[]),H=w.useCallback(()=>{y.current=window.setTimeout(()=>h.current.focus(),0)},[]),I=w.useCallback(()=>{v.current=window.setTimeout(()=>p.current.focus(),0)},[]),V=w.useCallback(()=>f.current,[]);return w.useEffect(()=>()=>{window.clearTimeout(y.current),window.clearTimeout(v.current),window.clearTimeout(x.current)},[]),{dropdownOpened:a,openDropdown:S,closeDropdown:N,toggleDropdown:_,selectedOptionIndex:f.current,getSelectedOptionIndex:V,selectOption:j,selectFirstOption:R,selectActiveOption:A,selectNextOption:$,selectPreviousOption:k,resetSelectedOption:z,updateSelectedOptionIndex:F,listId:u.current,setListId:B,clickSelectedOption:L,searchRef:h,focusSearchInput:H,targetRef:p,focusTarget:I}}const dre={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},fre=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Vr(t),"--combobox-option-padding":Mt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ae(n),"--combobox-option-fz":Vr(t),"--combobox-option-padding":Mt(t,"combobox-option-padding")}});function $t(e){const t=Pe("Combobox",dre,e),{classNames:n,styles:r,unstyled:s,children:i,store:o,vars:a,onOptionSubmit:c,onClose:u,size:f,dropdownPadding:h,resetSelectionOnOptionHover:p,__staticSelector:y,readOnly:v,...x}=t,S=$A(),N=o||S,_=vt({name:y||"Combobox",classes:us,props:t,classNames:n,styles:r,unstyled:s,vars:a,varsResolver:fre}),C=()=>{u==null||u(),N.closeDropdown()};return m.jsx(Xne,{value:{getStyles:_,store:N,onOptionSubmit:c,size:f,resetSelectionOnOptionHover:p,readOnly:v},children:m.jsx(as,{opened:N.dropdownOpened,...x,onChange:j=>!j&&C(),withRoles:!1,unstyled:s,children:i})})}const hre=e=>e;$t.extend=hre;$t.classes=us;$t.displayName="@mantine/core/Combobox";$t.Target=wL;$t.Dropdown=SA;$t.Options=AA;$t.Option=jA;$t.Search=TA;$t.Empty=EA;$t.Chevron=wA;$t.Footer=_A;$t.Header=OA;$t.EventsTarget=vL;$t.DropdownTarget=bL;$t.Group=CA;$t.ClearButton=yL;$t.HiddenInput=xL;var SL={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const mre=SL,RA=w.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:s,unstyled:i,children:o,label:a,description:c,id:u,disabled:f,error:h,size:p,labelPosition:y="left",bodyElement:v="div",labelElement:x="label",variant:S,style:N,vars:_,mod:C,...j},A)=>{const $=vt({name:e,props:t,className:n,style:N,classes:SL,classNames:r,styles:s,unstyled:i});return m.jsx(Ve,{...$("root"),ref:A,__vars:{"--label-fz":Vr(p),"--label-lh":Mt(p,"label-lh")},mod:[{"label-position":y},C],variant:S,size:p,...j,children:m.jsxs(Ve,{component:v,htmlFor:v==="label"?u:void 0,...$("body"),children:[o,m.jsxs("div",{...$("labelWrapper"),"data-disabled":f||void 0,children:[a&&m.jsx(Ve,{component:x,htmlFor:x==="label"?u:void 0,...$("label"),"data-disabled":f||void 0,children:a}),c&&m.jsx(It.Description,{size:p,__inheritStyles:!1,...$("description"),children:c}),h&&typeof h!="boolean"&&m.jsx(It.Error,{size:p,__inheritStyles:!1,...$("error"),children:h})]})]})})});RA.displayName="@mantine/core/InlineInput";function EL({children:e,role:t}){const n=sm();return n?m.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):m.jsx(m.Fragment,{children:e})}function pre({size:e,style:t,...n}){const r=e!==void 0?{width:Ae(e),height:Ae(e),...t}:t;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Nh(e){return"group"in e}function NL({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),s=[];for(let i=0;i<e.length;i+=1){const o=e[i];if(s.length===n)return s;Nh(o)&&s.push({group:o.group,items:NL({options:o.items,search:t,limit:n-s.length})}),Nh(o)||o.label.toLowerCase().includes(r)&&s.push(o)}return s}function gre(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function _L(e,t=new Set){if(Array.isArray(e))for(const n of e)if(Nh(n))_L(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function yre(e,t){return Array.isArray(e)?e.includes(t):e===t}function CL({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:s,renderOption:i}){if(!Nh(e)){const a=yre(n,e.value),c=t&&a&&m.jsx(pre,{className:us.optionsDropdownCheckIcon}),u=m.jsxs(m.Fragment,{children:[r==="left"&&c,m.jsx("span",{children:e.label}),r==="right"&&c]});return m.jsx($t.Option,{value:e.value,disabled:e.disabled,className:yn({[us.optionsDropdownOption]:!s}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof i=="function"?i({option:e,checked:a}):u})}const o=e.items.map(a=>m.jsx(CL,{data:a,value:n,unstyled:s,withCheckIcon:t,checkIconPosition:r,renderOption:i},a.value));return m.jsx($t.Group,{label:e.group,children:o})}function OL({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:s,limit:i,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:c=!0,withCheckIcon:u=!1,value:f,checkIconPosition:h,nothingFoundMessage:p,unstyled:y,labelId:v,renderOption:x,scrollAreaProps:S,"aria-label":N}){_L(e);const C=typeof s=="string"?(r||NL)({options:e,search:c?s:"",limit:i??1/0}):e,j=gre(C),A=C.map($=>m.jsx(CL,{data:$,withCheckIcon:u,value:f,checkIconPosition:h,unstyled:y,renderOption:x},Nh($)?$.group:$.value));return m.jsx($t.Dropdown,{hidden:t||n&&j,"data-composed":!0,children:m.jsxs($t.Options,{labelledBy:v,"aria-label":N,children:[a?m.jsx($y.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...S,children:A}):A,j&&p&&m.jsx($t.Empty,{children:p})]})})}var im={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const wM={orientation:"horizontal"},bre=(e,{borderWidth:t})=>({group:{"--button-border-width":Ae(t)}}),kA=Ge((e,t)=>{const n=Pe("ButtonGroup",wM,e),{className:r,style:s,classNames:i,styles:o,unstyled:a,orientation:c,vars:u,borderWidth:f,variant:h,mod:p,...y}=Pe("ButtonGroup",wM,e),v=vt({name:"ButtonGroup",props:n,classes:im,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:u,varsResolver:bre,rootSelector:"group"});return m.jsx(Ve,{...v("group"),ref:t,variant:h,mod:[{"data-orientation":c},p],role:"group",...y})});kA.classes=im;kA.displayName="@mantine/core/ButtonGroup";const SM={},vre=(e,{radius:t,color:n,gradient:r,variant:s,autoContrast:i,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:i});return{groupSection:{"--section-height":Mt(o,"section-height"),"--section-padding-x":Mt(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?Vr(o.replace("compact-","")):Vr(o),"--section-radius":t===void 0?void 0:Qn(t),"--section-bg":n||s?a.background:void 0,"--section-color":a.color,"--section-bd":n||s?a.border:void 0}}},MA=Ge((e,t)=>{const n=Pe("ButtonGroupSection",SM,e),{className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,variant:u,gradient:f,radius:h,autoContrast:p,...y}=Pe("ButtonGroupSection",SM,e),v=vt({name:"ButtonGroupSection",props:n,classes:im,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,varsResolver:vre,rootSelector:"groupSection"});return m.jsx(Ve,{...v("groupSection"),ref:t,variant:u,...y})});MA.classes=im;MA.displayName="@mantine/core/ButtonGroupSection";const xre={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ae(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},wre={},Sre=(e,{radius:t,color:n,gradient:r,variant:s,size:i,justify:o,autoContrast:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Mt(i,"button-height"),"--button-padding-x":Mt(i,"button-padding-x"),"--button-fz":i!=null&&i.includes("compact")?Vr(i.replace("compact-","")):Vr(i),"--button-radius":t===void 0?void 0:Qn(t),"--button-bg":n||s?c.background:void 0,"--button-hover":n||s?c.hover:void 0,"--button-color":c.color,"--button-bd":n||s?c.border:void 0,"--button-hover-color":n||s?c.hoverColor:void 0}}},Xu=kc((e,t)=>{const n=Pe("Button",wre,e),{style:r,vars:s,className:i,color:o,disabled:a,children:c,leftSection:u,rightSection:f,fullWidth:h,variant:p,radius:y,loading:v,loaderProps:x,gradient:S,classNames:N,styles:_,unstyled:C,"data-disabled":j,autoContrast:A,mod:$,...k}=n,R=vt({name:"Button",props:n,classes:im,className:i,style:r,classNames:N,styles:_,unstyled:C,vars:s,varsResolver:Sre}),F=!!u,z=!!f;return m.jsxs(La,{ref:t,...R("root",{active:!a&&!v&&!j}),unstyled:C,variant:p,disabled:a||v,mod:[{disabled:a||j,loading:v,block:h,"with-left-section":F,"with-right-section":z},$],...k,children:[m.jsx(Ic,{mounted:!!v,transition:xre,duration:150,children:L=>m.jsx(Ve,{component:"span",...R("loader",{style:L}),"aria-hidden":!0,children:m.jsx(ky,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...x})})}),m.jsxs("span",{...R("inner"),children:[u&&m.jsx(Ve,{component:"span",...R("section"),mod:{position:"left"},children:u}),m.jsx(Ve,{component:"span",mod:{loading:v},...R("label"),children:c}),f&&m.jsx(Ve,{component:"span",...R("section"),mod:{position:"right"},children:f})]})]})});Xu.classes=im;Xu.displayName="@mantine/core/Button";Xu.Group=kA;Xu.GroupSection=MA;function Ere({open:e,close:t,openDelay:n,closeDelay:r}){const s=w.useRef(-1),i=w.useRef(-1),o=()=>{window.clearTimeout(s.current),window.clearTimeout(i.current)},a=()=>{o(),n===0||n===void 0?e():s.current=window.setTimeout(e,n)},c=()=>{o(),r===0||r===void 0?t():i.current=window.setTimeout(t,r)};return w.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:c}}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_h.apply(null,arguments)}function IA(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Nre=w.useLayoutEffect,_re=function(t){var n=je.useRef(t);return Nre(function(){n.current=t}),n},EM=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Cre=function(t,n){var r=je.useRef();return je.useCallback(function(s){t.current=s,r.current&&EM(r.current,null),r.current=n,n&&EM(n,s)},[n])},NM={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Ore=function(t){Object.keys(NM).forEach(function(n){t.style.setProperty(n,NM[n],"important")})},_M=Ore,Ar=null,CM=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function jre(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ar||(Ar=document.createElement("textarea"),Ar.setAttribute("tabindex","-1"),Ar.setAttribute("aria-hidden","true"),_M(Ar)),Ar.parentNode===null&&document.body.appendChild(Ar);var s=e.paddingSize,i=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(p){var y=p;Ar.style[y]=o[y]}),_M(Ar),Ar.value=t;var c=CM(Ar,e);Ar.value=t,c=CM(Ar,e),Ar.value="x";var u=Ar.scrollHeight-s,f=u*n;a==="border-box"&&(f=f+s+i),c=Math.max(f,c);var h=u*r;return a==="border-box"&&(h=h+s+i),c=Math.min(h,c),[c,u]}var OM=function(){},Are=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},Tre=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],$re=!!document.documentElement.currentStyle,Rre=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Are(Tre,n),s=r.boxSizing;if(s==="")return null;$re&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:o}},kre=Rre;function jL(e,t,n){var r=_re(n);w.useLayoutEffect(function(){var s=function(o){return r.current(o)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var Mre=function(t){jL(window,"resize",t)},Ire=function(t){jL(document.fonts,"loadingdone",t)},Pre=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Dre=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,i=t.minRows,o=t.onChange,a=o===void 0?OM:o,c=t.onHeightChange,u=c===void 0?OM:c,f=IA(t,Pre),h=f.value!==void 0,p=w.useRef(null),y=Cre(p,n),v=w.useRef(0),x=w.useRef(),S=function(){var C=p.current,j=r&&x.current?x.current:kre(C);if(j){x.current=j;var A=jre(j,C.value||C.placeholder||"x",i,s),$=A[0],k=A[1];v.current!==$&&(v.current=$,C.style.setProperty("height",$+"px","important"),u($,{rowHeight:k}))}},N=function(C){h||S(),a(C)};return w.useLayoutEffect(S),Mre(S),Ire(S),w.createElement("textarea",_h({},f,{onChange:N,ref:y}))},Lre=w.forwardRef(Dre);const Fre={},My=Ge((e,t)=>{const{autosize:n,maxRows:r,minRows:s,__staticSelector:i,resize:o,...a}=Pe("Textarea",Fre,e),c=n&&e7()!=="test",u=c?{maxRows:r,minRows:s}:{};return m.jsx(pi,{component:c?Lre:"textarea",ref:t,...a,__staticSelector:i||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});My.classes=pi.classes;My.displayName="@mantine/core/Textarea";const[Bre,Iy]=Ya("Menu component was not found in the tree");var om={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const zre={},PA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("MenuDivider",zre,e),c=Iy();return m.jsx(Ve,{ref:t,...c.getStyles("divider",{className:r,style:s,styles:i,classNames:n}),...a})});PA.classes=om;PA.displayName="@mantine/core/MenuDivider";const Vre={},DA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,onMouseEnter:a,onMouseLeave:c,onKeyDown:u,children:f,...h}=Pe("MenuDropdown",Vre,e),p=w.useRef(null),y=Iy(),v=wo(u,N=>{var _,C;(N.key==="ArrowUp"||N.key==="ArrowDown")&&(N.preventDefault(),(C=(_=p.current)==null?void 0:_.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||C.focus())}),x=wo(a,()=>(y.trigger==="hover"||y.trigger==="click-hover")&&y.openDropdown()),S=wo(c,()=>(y.trigger==="hover"||y.trigger==="click-hover")&&y.closeDropdown());return m.jsxs(as.Dropdown,{...h,onMouseEnter:x,onMouseLeave:S,role:"menu","aria-orientation":"vertical",ref:jn(t,p),...y.getStyles("dropdown",{className:r,style:s,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:v,children:[y.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]})});DA.classes=om;DA.displayName="@mantine/core/MenuDropdown";const Ure={},LA=kc((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,color:a,closeMenuOnClick:c,leftSection:u,rightSection:f,children:h,disabled:p,"data-disabled":y,...v}=Pe("MenuItem",Ure,e),x=Iy(),S=Ds(),{dir:N}=Mc(),_=w.useRef(null),C=x.getItemIndex(_.current),j=v,A=wo(j.onMouseLeave,()=>x.setHovered(-1)),$=wo(j.onMouseEnter,()=>x.setHovered(x.getItemIndex(_.current))),k=wo(j.onClick,()=>{y||(typeof c=="boolean"?c&&x.closeDropdownImmediately():x.closeOnItemClick&&x.closeDropdownImmediately())}),R=wo(j.onFocus,()=>x.setHovered(x.getItemIndex(_.current))),F=a?S.variantColorResolver({color:a,theme:S,variant:"light"}):void 0,z=a?Rc({color:a,theme:S}):null;return m.jsxs(La,{...v,unstyled:x.unstyled,tabIndex:x.menuItemTabIndex,onFocus:R,...x.getStyles("item",{className:r,style:s,styles:i,classNames:n}),ref:jn(_,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||y||void 0,"data-hovered":x.hovered===C?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:$,onMouseLeave:A,onClick:k,onKeyDown:G8({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:x.loop,dir:N,orientation:"vertical",onKeyDown:j.onKeyDown}),__vars:{"--menu-item-color":z!=null&&z.isThemeColor&&(z==null?void 0:z.shade)===void 0?`var(--mantine-color-${z.color}-6)`:F==null?void 0:F.color,"--menu-item-hover":F==null?void 0:F.hover},children:[u&&m.jsx("div",{...x.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:u}),h&&m.jsx("div",{...x.getStyles("itemLabel",{styles:i,classNames:n}),children:h}),f&&m.jsx("div",{...x.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:f})]})});LA.classes=om;LA.displayName="@mantine/core/MenuItem";const qre={},FA=Ge((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("MenuLabel",qre,e),c=Iy();return m.jsx(Ve,{ref:t,...c.getStyles("label",{className:r,style:s,styles:i,classNames:n}),...a})});FA.classes=om;FA.displayName="@mantine/core/MenuLabel";const Hre={refProp:"ref"},AL=w.forwardRef((e,t)=>{const{children:n,refProp:r,...s}=Pe("MenuTarget",Hre,e);if(!Tc(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=Iy(),o=n.props,a=wo(o.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),c=wo(o.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),u=wo(o.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return m.jsx(as.Target,{refProp:r,popupType:"menu",ref:t,...s,children:w.cloneElement(n,{onClick:a,onMouseEnter:c,onMouseLeave:u,"data-expanded":i.opened?!0:void 0})})});AL.displayName="@mantine/core/MenuTarget";const Wre={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Os(e){const t=Pe("Menu",Wre,e),{children:n,onOpen:r,onClose:s,opened:i,defaultOpened:o,trapFocus:a,onChange:c,closeOnItemClick:u,loop:f,closeOnEscape:h,trigger:p,openDelay:y,closeDelay:v,classNames:x,styles:S,unstyled:N,variant:_,vars:C,menuItemTabIndex:j,keepMounted:A,withInitialFocusPlaceholder:$,...k}=t,R=vt({name:"Menu",classes:om,props:t,classNames:x,styles:S,unstyled:N}),[F,{setHovered:z,resetHovered:L}]=TQ(),[B,H]=cs({value:i,defaultValue:o,finalValue:!1,onChange:c}),[I,V]=w.useState(!1),T=()=>{H(!1),V(!1),B&&(s==null||s())},D=()=>{H(!0),!B&&(r==null||r())},P=()=>{B?T():D()},{openDropdown:q,closeDropdown:M}=Ere({open:D,close:T,closeDelay:v,openDelay:y}),W=oe=>AQ("[data-menu-item]","[data-menu-dropdown]",oe),{resolvedClassNames:X,resolvedStyles:Q}=Zh({classNames:x,styles:S,props:t});return Da(()=>{L()},[B]),m.jsx(Bre,{value:{getStyles:R,opened:B,toggleDropdown:P,getItemIndex:W,hovered:F,setHovered:z,openedViaClick:I,setOpenedViaClick:V,closeOnItemClick:u,closeDropdown:p==="click"?T:M,openDropdown:p==="click"?D:q,closeDropdownImmediately:T,loop:f,trigger:p,unstyled:N,menuItemTabIndex:j,withInitialFocusPlaceholder:$},children:m.jsx(as,{...k,opened:B,onChange:P,defaultOpened:o,trapFocus:A?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:X,styles:Q,unstyled:N,variant:_,keepMounted:A,children:n})})}Os.extend=e=>e;Os.classes=om;Os.displayName="@mantine/core/Menu";Os.Item=LA;Os.Label=FA;Os.Dropdown=DA;Os.Target=AL;Os.Divider=PA;const[Gre,am]=Ya("Modal component was not found in tree");var Xa={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Yre={},t1=Ge((e,t)=>{const n=Pe("ModalBody",Yre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=am();return m.jsx(aL,{ref:t,...u.getStyles("body",{classNames:r,style:i,styles:o,className:s}),...c})});t1.classes=Xa;t1.displayName="@mantine/core/ModalBody";const Jre={},n1=Ge((e,t)=>{const n=Pe("ModalCloseButton",Jre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=am();return m.jsx(lL,{ref:t,...u.getStyles("close",{classNames:r,style:i,styles:o,className:s}),...c})});n1.classes=Xa;n1.displayName="@mantine/core/ModalCloseButton";const Xre={},r1=Ge((e,t)=>{const n=Pe("ModalContent",Xre,e),{classNames:r,className:s,style:i,styles:o,vars:a,children:c,__hidden:u,...f}=n,h=am(),p=h.scrollAreaComponent||jne;return m.jsx(cL,{...h.getStyles("content",{className:s,style:i,styles:o,classNames:r}),innerProps:h.getStyles("inner",{className:s,style:i,styles:o,classNames:r}),"data-full-screen":h.fullScreen||void 0,"data-modal-content":!0,"data-hidden":u||void 0,ref:t,...f,children:m.jsx(p,{style:{maxHeight:h.fullScreen?"100dvh":`calc(100dvh - (${Ae(h.yOffset)} * 2))`},children:c})})});r1.classes=Xa;r1.displayName="@mantine/core/ModalContent";const Kre={},s1=Ge((e,t)=>{const n=Pe("ModalHeader",Kre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=am();return m.jsx(uL,{ref:t,...u.getStyles("header",{classNames:r,style:i,styles:o,className:s}),...c})});s1.classes=Xa;s1.displayName="@mantine/core/ModalHeader";const Qre={},i1=Ge((e,t)=>{const n=Pe("ModalOverlay",Qre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=am();return m.jsx(dL,{ref:t,...u.getStyles("overlay",{classNames:r,style:i,styles:o,className:s}),...c})});i1.classes=Xa;i1.displayName="@mantine/core/ModalOverlay";const Zre={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:eo("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},ese=(e,{radius:t,size:n,yOffset:r,xOffset:s})=>({root:{"--modal-radius":t===void 0?void 0:Qn(t),"--modal-size":Mt(n,"modal-size"),"--modal-y-offset":Ae(r),"--modal-x-offset":Ae(s)}}),o1=Ge((e,t)=>{const n=Pe("ModalRoot",Zre,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,yOffset:u,scrollAreaComponent:f,radius:h,fullScreen:p,centered:y,xOffset:v,__staticSelector:x,...S}=n,N=vt({name:x,classes:Xa,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:ese});return m.jsx(Gre,{value:{yOffset:u,scrollAreaComponent:f,getStyles:N,fullScreen:p},children:m.jsx(oL,{ref:t,...N("root"),"data-full-screen":p||void 0,"data-centered":y||void 0,unstyled:a,...S})})});o1.classes=Xa;o1.displayName="@mantine/core/ModalRoot";const[tse,nse]=dd();function TL({children:e}){const[t,n]=w.useState([]),[r,s]=w.useState(eo("modal"));return m.jsx(tse,{value:{stack:t,addModal:(i,o)=>{n(a=>[...new Set([...a,i])]),s(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:i=>n(o=>o.filter(a=>a!==i)),getZIndex:i=>`calc(${r} + ${t.indexOf(i)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}TL.displayName="@mantine/core/ModalStack";const rse={},a1=Ge((e,t)=>{const n=Pe("ModalTitle",rse,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=am();return m.jsx(fL,{ref:t,...u.getStyles("title",{classNames:r,style:i,styles:o,className:s}),...c})});a1.classes=Xa;a1.displayName="@mantine/core/ModalTitle";const sse={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:eo("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ls=Ge((e,t)=>{const{title:n,withOverlay:r,overlayProps:s,withCloseButton:i,closeButtonProps:o,children:a,radius:c,opened:u,stackId:f,zIndex:h,...p}=Pe("Modal",sse,e),y=nse(),v=!!n||i,x=y&&f?{closeOnEscape:y.currentId===f,trapFocus:y.currentId===f,zIndex:y.getZIndex(f)}:{},S=r===!1?!1:f&&y?y.currentId===f:u;return w.useEffect(()=>{y&&f&&(u?y.addModal(f,h||eo("modal")):y.removeModal(f))},[u,f,h]),m.jsxs(o1,{ref:t,radius:c,opened:u,zIndex:y&&f?y.getZIndex(f):h,...p,...x,children:[r&&m.jsx(i1,{visible:S,transitionProps:y&&f?{duration:0}:void 0,...s}),m.jsxs(r1,{radius:c,__hidden:y&&f&&u?f!==y.currentId:!1,children:[v&&m.jsxs(s1,{children:[n&&m.jsx(a1,{children:n}),i&&m.jsx(n1,{...o})]}),m.jsx(t1,{children:a})]})]})});Ls.classes=Xa;Ls.displayName="@mantine/core/Modal";Ls.Root=o1;Ls.Overlay=i1;Ls.Content=r1;Ls.Body=t1;Ls.Header=s1;Ls.Title=a1;Ls.CloseButton=n1;Ls.Stack=TL;const[ise,BA]=dd(),[ose,ase]=dd();var l1={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const lse={},cse=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Mt(t):Mt(n,"pg-gap")}}),zA=Ge((e,t)=>{const n=Pe("PillGroup",lse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,disabled:f,...h}=n,p=BA(),y=(p==null?void 0:p.size)||u||void 0,v=vt({name:"PillGroup",classes:l1,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:cse,stylesCtx:{size:y},rootSelector:"group"});return m.jsx(ose,{value:{size:y,disabled:f},children:m.jsx(Ve,{ref:t,size:y,...v("group"),...h})})});zA.classes=l1;zA.displayName="@mantine/core/PillGroup";const use={variant:"default"},dse=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Mt(n,"pill-fz"),"--pill-height":Mt(n,"pill-height"),"--pill-radius":t===void 0?void 0:Qn(t)}}),Og=Ge((e,t)=>{const n=Pe("Pill",use,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,variant:u,children:f,withRemoveButton:h,onRemove:p,removeButtonProps:y,radius:v,size:x,disabled:S,mod:N,..._}=n,C=ase(),j=BA(),A=x||(C==null?void 0:C.size)||void 0,$=(j==null?void 0:j.variant)==="filled"?"contrast":u||"default",k=vt({name:"Pill",classes:l1,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:dse,stylesCtx:{size:A}});return m.jsxs(Ve,{component:"span",ref:t,variant:$,size:A,...k("root",{variant:$}),mod:[{"with-remove":h&&!S,disabled:S||(C==null?void 0:C.disabled)},N],..._,children:[m.jsx("span",{...k("label"),children:f}),h&&m.jsx(rm,{variant:"transparent",radius:v,tabIndex:-1,"aria-hidden":!0,unstyled:a,...y,...k("remove",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),onMouseDown:R=>{var F;R.preventDefault(),R.stopPropagation(),(F=y==null?void 0:y.onMouseDown)==null||F.call(y,R)},onClick:R=>{var F;R.stopPropagation(),p==null||p(),(F=y==null?void 0:y.onClick)==null||F.call(y,R)}})]})});Og.classes=l1;Og.displayName="@mantine/core/Pill";Og.Group=zA;var $L={field:"m_45c4369d"};const fse={type:"visible"},VA=Ge((e,t)=>{const n=Pe("PillsInputField",fse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,type:u,disabled:f,id:h,pointer:p,mod:y,...v}=n,x=BA(),S=sm(),N=vt({name:"PillsInputField",classes:$L,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),_=f||(x==null?void 0:x.disabled);return m.jsx(Ve,{component:"input",ref:jn(t,x==null?void 0:x.fieldRef),"data-type":u,disabled:_,mod:[{disabled:_,pointer:p},y],...N("field"),...v,id:(S==null?void 0:S.inputId)||h,"aria-invalid":x==null?void 0:x.hasError,"aria-describedby":S==null?void 0:S.describedBy,type:"text",onMouseDown:C=>!p&&C.stopPropagation()})});VA.classes=$L;VA.displayName="@mantine/core/PillsInputField";const hse={},ux=Ge((e,t)=>{const n=Pe("PillsInput",hse,e),{children:r,onMouseDown:s,onClick:i,size:o,disabled:a,__staticSelector:c,error:u,variant:f,...h}=n,p=w.useRef(null);return m.jsx(ise,{value:{fieldRef:p,size:o,disabled:a,hasError:!!u,variant:f},children:m.jsx(pi,{size:o,error:u,variant:f,component:"div",ref:t,onMouseDown:y=>{var v;y.preventDefault(),s==null||s(y),(v=p.current)==null||v.focus()},onClick:y=>{var x;y.preventDefault();const v=y.currentTarget.closest("fieldset");v!=null&&v.disabled||((x=p.current)==null||x.focus(),i==null||i(y))},...h,multiline:!0,disabled:a,__staticSelector:c||"PillsInput",withAria:!1,children:r})})});ux.displayName="@mantine/core/PillsInput";ux.Field=VA;var RL={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const mse={withCloseButton:!0},pse=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Qn(t),"--notification-color":n?Cr(n,e):void 0}}),UA=Ge((e,t)=>{const n=Pe("Notification",mse,e),{className:r,color:s,radius:i,loading:o,withCloseButton:a,withBorder:c,title:u,icon:f,children:h,onClose:p,closeButtonProps:y,classNames:v,style:x,styles:S,unstyled:N,variant:_,vars:C,mod:j,...A}=n,$=vt({name:"Notification",classes:RL,props:n,className:r,style:x,classNames:v,styles:S,unstyled:N,vars:C,varsResolver:pse});return m.jsxs(Ve,{...$("root"),mod:[{"data-with-icon":!!f||o,"data-with-border":c},j],ref:t,variant:_,...A,role:"alert",children:[f&&!o&&m.jsx("div",{...$("icon"),children:f}),o&&m.jsx(ky,{size:28,color:s,...$("loader")}),m.jsxs("div",{...$("body"),children:[u&&m.jsx("div",{...$("title"),children:u}),m.jsx(Ve,{...$("description"),mod:{"data-with-title":!!u},children:h})]}),a&&m.jsx(rm,{iconSize:16,color:"gray",...y,unstyled:N,onClick:p,...$("closeButton")})]})});UA.classes=RL;UA.displayName="@mantine/core/Notification";function kL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}var jg;(function(e){e.event="event",e.props="prop"})(jg||(jg={}));function Jl(){}function gse(e){var t,n=void 0;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t&&r.length===t.length&&r.every(function(i,o){return i===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Ag(e){return!!(e||"").match(/\d/)}function Yf(e){return e==null}function yse(e){return typeof e=="number"&&isNaN(e)}function ML(e){return Yf(e)||yse(e)||typeof e=="number"&&!isFinite(e)}function IL(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function bse(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function vse(e,t,n){var r=bse(n),s=e.search(/[1-9]/);return s=s===-1?e.length:s,e.substring(0,s)+e.substring(s,e.length).replace(r,"$1"+t)}function xse(e){var t=w.useRef(e);t.current=e;var n=w.useRef(function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t.current.apply(t,r)});return n.current}function qA(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var s=e.split("."),i=s[0],o=s[1]||"";return{beforeDecimal:i,afterDecimal:o,hasNegation:n,addNegation:r}}function wse(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",s=n[1]||"";return(t?"-":"")+r+(s?"."+s:"")}function PL(e,t,n){for(var r="",s=n?"0":"",i=0;i<=t-1;i++)r+=e[i]||s;return r}function jM(e,t){return Array(t+1).join(e)}function DL(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),s=r[0],i=r[1];if(i=Number(i),!i)return n+s;s=s.replace(".","");var o=1+i,a=s.length;return o<0?s="0."+jM("0",Math.abs(o))+s:o>=a?s=s+jM("0",o-a):s=(s.substring(0,o)||"0")+"."+s.substring(o),n+s}function AM(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,s=qA(e),i=s.beforeDecimal,o=s.afterDecimal,a=s.hasNegation,c=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:c.toFixed(t),f=u.split("."),h=i;i&&Number(f[0])&&(h=i.split("").reverse().reduce(function(x,S,N){return x.length>N?(Number(x[0])+Number(S)).toString()+x.substring(1,x.length):S+x},f[0]));var p=PL(f[1]||"",t,n),y=a?"-":"",v=r?".":"";return""+y+h+v+p}function Eu(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var LL=gse(function(e,t){for(var n=0,r=0,s=e.length,i=t.length;e[n]===t[n]&&n<s;)n++;for(;e[s-1-r]===t[i-1-r]&&i-r>n&&s-r>n;)r++;return{from:{start:n,end:s-r},to:{start:n,end:i-r}}}),Sse=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Ese(e,t,n){return Math.min(Math.max(e,t),n)}function vN(e){return Math.max(e.selectionStart,e.selectionEnd)}function Nse(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function _se(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Cse(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,s=e.formattedValueIndex;return t[r]===n[s]}function Ose(e,t,n,r,s,i,o){o===void 0&&(o=Cse);var a=s.findIndex(function(j){return j}),c=e.slice(0,a);!t&&!n.startsWith(c)&&(t=c,n=c+n,r=r+c.length);for(var u=n.length,f=e.length,h={},p=new Array(u),y=0;y<u;y++){p[y]=-1;for(var v=0,x=f;v<x;v++){var S=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:y,formattedValueIndex:v});if(S&&h[v]!==!0){p[y]=v,h[v]=!0;break}}}for(var N=r;N<u&&(p[N]===-1||!i(n[N]));)N++;var _=N===u||p[N]===-1?f:p[N];for(N=r-1;N>0&&p[N]===-1;)N--;var C=N===-1||p[N]===-1?0:p[N]+1;return C>_?_:r-C<_-r?C:_}function TM(e,t,n,r){var s=e.length;if(t=Ese(t,0,s),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=s&&!n[t];)t++;t>s&&(t=n.lastIndexOf(!0))}return t===-1&&(t=s),t}function jse(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Ag(e[n])||Ag(e[n-1]));return t}function FL(e,t,n,r,s,i){i===void 0&&(i=Jl);var o=xse(function(v,x){var S,N;return ML(v)?(N="",S=""):typeof v=="number"||x?(N=typeof v=="number"?DL(v):v,S=r(N)):(N=s(v,void 0),S=r(N)),{formattedValue:S,numAsString:N}}),a=w.useState(function(){return o(Yf(e)?t:e,n)}),c=a[0],u=a[1],f=function(v,x){v.formattedValue!==c.formattedValue&&u({formattedValue:v.formattedValue,numAsString:v.value}),i(v,x)},h=e,p=n;Yf(e)&&(h=c.numAsString,p=!0);var y=o(h,p);return w.useMemo(function(){u(y)},[y.formattedValue]),[c,f]}function Ase(e){return e.replace(/[^0-9]/g,"")}function Tse(e){return e}function $se(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,s=e.renderText,i=e.getInputRef,o=e.format;o===void 0&&(o=Tse);var a=e.removeFormatting;a===void 0&&(a=Ase);var c=e.defaultValue,u=e.valueIsNumericString,f=e.onValueChange,h=e.isAllowed,p=e.onChange;p===void 0&&(p=Jl);var y=e.onKeyDown;y===void 0&&(y=Jl);var v=e.onMouseUp;v===void 0&&(v=Jl);var x=e.onFocus;x===void 0&&(x=Jl);var S=e.onBlur;S===void 0&&(S=Jl);var N=e.value,_=e.getCaretBoundary;_===void 0&&(_=jse);var C=e.isValidInputCharacter;C===void 0&&(C=Ag);var j=e.isCharacterSame,A=kL(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),$=FL(N,c,!!u,o,a,f),k=$[0],R=k.formattedValue,F=k.numAsString,z=$[1],L=w.useRef(),B=w.useRef({formattedValue:R,numAsString:F}),H=function(Ce,Me){B.current={formattedValue:Ce.formattedValue,numAsString:Ce.value},z(Ce,Me)},I=w.useState(!1),V=I[0],T=I[1],D=w.useRef(null),P=w.useRef({setCaretTimeout:null,focusTimeout:null});w.useEffect(function(){return T(!0),function(){clearTimeout(P.current.setCaretTimeout),clearTimeout(P.current.focusTimeout)}},[]);var q=o,M=function(Ce,Me){var Ie=parseFloat(Me);return{formattedValue:Ce,value:Me,floatValue:isNaN(Ie)?void 0:Ie}},W=function(Ce,Me,Ie){Ce.selectionStart===0&&Ce.selectionEnd===Ce.value.length||(Eu(Ce,Me),P.current.setCaretTimeout=setTimeout(function(){Ce.value===Ie&&Ce.selectionStart!==Me&&Eu(Ce,Me)},0))},X=function(Ce,Me,Ie){return TM(Ce,Me,_(Ce),Ie)},Q=function(Ce,Me,Ie){var G=_(Me),re=Ose(Me,R,Ce,Ie,G,C,j);return re=TM(Me,re,G),re},oe=function(Ce){var Me=Ce.formattedValue;Me===void 0&&(Me="");var Ie=Ce.input,G=Ce.source,re=Ce.event,te=Ce.numAsString,he;if(Ie){var se=Ce.inputValue||Ie.value,ne=vN(Ie);Ie.value=Me,he=Q(se,Me,ne),he!==void 0&&W(Ie,he,Me)}Me!==R&&H(M(Me,te),{event:re,source:G})};w.useEffect(function(){var Ce=B.current,Me=Ce.formattedValue,Ie=Ce.numAsString;(R!==Me||F!==Ie)&&H(M(R,F),{event:void 0,source:jg.props})},[R,F]);var ae=D.current?vN(D.current):void 0,fe=typeof window<"u"?w.useLayoutEffect:w.useEffect;fe(function(){var Ce=D.current;if(R!==B.current.formattedValue&&Ce){var Me=Q(B.current.formattedValue,R,ae);Ce.value=R,W(Ce,Me,R)}},[R]);var le=function(Ce,Me,Ie){var G=Me.target,re=L.current?Sse(L.current,G.selectionEnd):LL(R,Ce),te=Object.assign(Object.assign({},re),{lastValue:R}),he=a(Ce,te),se=q(he);if(he=a(se,void 0),h&&!h(M(se,he))){var ne=Me.target,ce=vN(ne),xe=Q(Ce,R,ce);return ne.value=R,W(ne,xe,R),!1}return oe({formattedValue:se,numAsString:he,inputValue:Ce,event:Me,source:Ie,input:Me.target}),!0},ue=function(Ce,Me){Me===void 0&&(Me=0);var Ie=Ce.selectionStart,G=Ce.selectionEnd;L.current={selectionStart:Ie,selectionEnd:G+Me}},ve=function(Ce){var Me=Ce.target,Ie=Me.value,G=le(Ie,Ce,jg.event);G&&p(Ce),L.current=void 0},_e=function(Ce){var Me=Ce.target,Ie=Ce.key,G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;te===void 0&&(te="");var he;Ie==="ArrowLeft"||Ie==="Backspace"?he=Math.max(G-1,0):Ie==="ArrowRight"?he=Math.min(G+1,te.length):Ie==="Delete"&&(he=G);var se=0;Ie==="Delete"&&G===re&&(se=1);var ne=Ie==="ArrowLeft"||Ie==="ArrowRight";if(he===void 0||G!==re&&!ne){y(Ce),ue(Me,se);return}var ce=he;if(ne){var xe=Ie==="ArrowLeft"?"left":"right";ce=X(te,he,xe),ce!==he&&Ce.preventDefault()}else Ie==="Delete"&&!C(te[he])?ce=X(te,he,"right"):Ie==="Backspace"&&!C(te[he])&&(ce=X(te,he,"left"));ce!==he&&W(Me,ce,te),y(Ce),ue(Me,se)},ke=function(Ce){var Me=Ce.target,Ie=function(){var G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;if(te===void 0&&(te=""),G===re){var he=X(te,G);he!==G&&W(Me,he,te)}};Ie(),requestAnimationFrame(function(){Ie()}),v(Ce),ue(Me)},Oe=function(Ce){Ce.persist&&Ce.persist();var Me=Ce.target,Ie=Ce.currentTarget;D.current=Me,P.current.focusTimeout=setTimeout(function(){var G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;te===void 0&&(te="");var he=X(te,G);he!==G&&!(G===0&&re===te.length)&&W(Me,he,te),x(Object.assign(Object.assign({},Ce),{currentTarget:Ie}))},0)},$e=function(Ce){D.current=null,clearTimeout(P.current.focusTimeout),clearTimeout(P.current.setCaretTimeout),S(Ce)},Re=V&&Nse()?"numeric":void 0,qe=Object.assign({inputMode:Re},A,{type:t,value:R,onChange:ve,onKeyDown:_e,onMouseUp:ke,onFocus:Oe,onBlur:$e});if(n==="text")return s?je.createElement(je.Fragment,null,s(R,A)||null):je.createElement("span",Object.assign({},A,{ref:i}),R);if(r){var et=r;return je.createElement(et,Object.assign({},qe,{ref:i}))}return je.createElement("input",Object.assign({},qe,{ref:i}))}function $M(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,s=t.prefix;s===void 0&&(s="");var i=t.suffix;i===void 0&&(i="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var c=c1(t),u=c.thousandSeparator,f=c.decimalSeparator,h=n!==0&&e.indexOf(".")!==-1||n&&r,p=qA(e,o),y=p.beforeDecimal,v=p.afterDecimal,x=p.addNegation;return n!==void 0&&(v=PL(v,n,!!r)),u&&(y=vse(y,u,a)),s&&(y=s+y),i&&(v=v+i),x&&(y="-"+y),e=y+(h&&f||"")+v,e}function c1(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Rse(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),s=n.test(e),i=r.test(e);return e=e.replace(/-/g,""),s&&!i&&t&&(e="-"+e),e}function kse(e,t){return new RegExp("(^-)|[0-9]|"+IL(e),"g")}function Mse(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Ise(e,t,n){var r;t===void 0&&(t=_se(e));var s=n.allowNegative,i=n.prefix;i===void 0&&(i="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,c=t.from,u=t.to,f=u.start,h=u.end,p=c1(n),y=p.allowedDecimalSeparators,v=p.decimalSeparator,x=e[h]===v;if(Ag(e)&&(e===i||e===o)&&t.lastValue==="")return e;if(h-f===1&&y.indexOf(e[f])!==-1){var S=a===0?"":v;e=e.substring(0,f)+S+e.substring(f+1,e.length)}var N=function(D,P,q){var M=!1,W=!1;i.startsWith("-")?M=!1:D.startsWith("--")?(M=!1,W=!0):o.startsWith("-")&&D.length===o.length?M=!1:D[0]==="-"&&(M=!0);var X=M?1:0;return W&&(X=2),X&&(D=D.substring(X),P-=X,q-=X),{value:D,start:P,end:q,hasNegation:M}},_=N(e,f,h),C=_.hasNegation;r=_,e=r.value,f=r.start,h=r.end;var j=N(t.lastValue,c.start,c.end),A=j.start,$=j.end,k=j.value,R=e.substring(f,h);e.length&&k.length&&(A>k.length-o.length||$<i.length)&&!(R&&o.startsWith(R))&&(e=k);var F=0;e.startsWith(i)?F+=i.length:f<i.length&&(F=f),e=e.substring(F),h-=F;var z=e.length,L=e.length-o.length;e.endsWith(o)?z=L:(h>L||h>e.length-o.length)&&(z=h),e=e.substring(0,z),e=Rse(C?"-"+e:e,s),e=(e.match(kse(v))||[]).join("");var B=e.indexOf(v);e=e.replace(new RegExp(IL(v),"g"),function(D,P){return P===B?".":""});var H=qA(e,s),I=H.beforeDecimal,V=H.afterDecimal,T=H.addNegation;return u.end-u.start<c.end-c.start&&I===""&&x&&!parseFloat(V)&&(e=T?"-":""),e}function Pse(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var s=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";s.fill(!1,0,n.length+(i?1:0));var o=e.length;return s.fill(!1,o-r.length+1,o+1),s}function Dse(e){var t=c1(e),n=t.thousandSeparator,r=t.decimalSeparator,s=e.prefix;s===void 0&&(s="");var i=e.allowNegative;if(i===void 0&&(i=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return s.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+s+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Lse(e){e=Dse(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,s=e.onKeyDown;s===void 0&&(s=Jl);var i=e.onBlur;i===void 0&&(i=Jl);var o=e.thousandSeparator,a=e.decimalScale,c=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var f=e.defaultValue,h=e.value,p=e.valueIsNumericString,y=e.onValueChange,v=kL(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),x=c1(e),S=x.decimalSeparator,N=x.allowedDecimalSeparators,_=function(T){return $M(T,e)},C=function(T,D){return Ise(T,D,e)},j=Yf(h)?f:h,A=p??Mse(j,u,t);Yf(h)?Yf(f)||(A=A||typeof f=="number"):A=A||typeof h=="number";var $=function(T){return ML(T)?T:(typeof T=="number"&&(T=DL(T)),A&&typeof a=="number"?AM(T,a,!!c):T)},k=FL($(h),$(f),!!A,_,C,y),R=k[0],F=R.numAsString,z=R.formattedValue,L=k[1],B=function(T){var D=T.target,P=T.key,q=D.selectionStart,M=D.selectionEnd,W=D.value;if(W===void 0&&(W=""),(P==="Backspace"||P==="Delete")&&M<u.length){T.preventDefault();return}if(q!==M){s(T);return}P==="Backspace"&&W[0]==="-"&&q===u.length+1&&n&&Eu(D,1),a&&c&&(P==="Backspace"&&W[q-1]===S?(Eu(D,q-1),T.preventDefault()):P==="Delete"&&W[q]===S&&T.preventDefault()),N!=null&&N.includes(P)&&W[q]===S&&Eu(D,q+1);var X=o===!0?",":o;P==="Backspace"&&W[q-1]===X&&Eu(D,q-1),P==="Delete"&&W[q]===X&&Eu(D,q+1),s(T)},H=function(T){var D=F;if(D.match(/\d/g)||(D=""),r||(D=wse(D)),c&&a&&(D=AM(D,a,c)),D!==F){var P=$M(D,e);L({formattedValue:P,value:D,floatValue:parseFloat(D)},{event:T,source:jg.event})}i(T)},I=function(T){return T===S?!0:Ag(T)},V=function(T){var D=T.currentValue,P=T.lastValue,q=T.formattedValue,M=T.currentValueIndex,W=T.formattedValueIndex,X=D[M],Q=q[W],oe=LL(P,D),ae=oe.to,fe=function(le){return C(le).indexOf(".")+u.length};return h===0&&c&&a&&D[ae.start]===S&&fe(D)<M&&fe(q)>W?!1:M>=ae.start&&M<ae.end&&N&&N.includes(X)&&Q===S?!0:X===Q};return Object.assign(Object.assign({},v),{value:z,valueIsNumericString:!1,isValidInputCharacter:I,isCharacterSame:V,onValueChange:L,format:_,removeFormatting:C,getCaretBoundary:function(T){return Pse(T,e)},onKeyDown:B,onBlur:H})}function Fse(e){var t=Lse(e);return je.createElement($se,Object.assign({},t))}function RM({direction:e,style:t,...n}){return m.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:m.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var SC={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Bse=/^(0\.0*|-0(\.0*)?)$/,zse=/^-?0\d+(\.\d+)?\.?$/;function EC(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function xN(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||EC(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function Vse(e){return e.toString().replace(".","").length}function Use(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&Vse(t)<14&&t!==""}function kM(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,s=n===void 0||e<=n;return r&&s}const qse={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Hse=(e,{size:t})=>({controls:{"--ni-chevron-size":Mt(t,"ni-chevron-size")}}),u1=Ge((e,t)=>{const n=Pe("NumberInput",qse,e),{className:r,classNames:s,styles:i,unstyled:o,vars:a,onChange:c,onValueChange:u,value:f,defaultValue:h,max:p,min:y,step:v,hideControls:x,rightSection:S,isAllowed:N,clampBehavior:_,onBlur:C,allowDecimal:j,decimalScale:A,onKeyDown:$,onKeyDownCapture:k,handlersRef:R,startValue:F,disabled:z,rightSectionPointerEvents:L,allowNegative:B,readOnly:H,size:I,rightSectionWidth:V,stepHoldInterval:T,stepHoldDelay:D,allowLeadingZeros:P,withKeyboardEvents:q,trimLeadingZeroesOnBlur:M,...W}=n,X=vt({name:"NumberInput",classes:SC,props:n,classNames:s,styles:i,unstyled:o,vars:a,varsResolver:Hse}),{resolvedClassNames:Q,resolvedStyles:oe}=Zh({classNames:s,styles:i,props:n}),[ae,fe]=cs({value:f,defaultValue:h,finalValue:"",onChange:c}),le=D!==void 0&&T!==void 0,ue=w.useRef(null),ve=w.useRef(null),_e=w.useRef(0),ke=(se,ne)=>{ne.source==="event"&&fe(Use(se.floatValue,se.value)&&!Bse.test(se.value)&&!(P&&zse.test(se.value))?se.floatValue:se.value),u==null||u(se,ne)},Oe=se=>{const ne=String(se).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ne?Math.max(0,(ne[1]?ne[1].length:0)-(ne[2]?+ne[2]:0)):0},$e=se=>{ue.current&&typeof se<"u"&&ue.current.setSelectionRange(se,se)},Re=w.useRef(cC);Re.current=()=>{if(!xN(ae))return;let se;const ne=Oe(ae),ce=Oe(v),xe=Math.max(ne,ce),Ee=10**xe;if(!EC(ae)&&(typeof ae!="number"||Number.isNaN(ae)))se=Ca(F,y,p);else if(p!==void 0){const Vt=(Math.round(Number(ae)*Ee)+Math.round(v*Ee))/Ee;se=Vt<=p?Vt:p}else se=(Math.round(Number(ae)*Ee)+Math.round(v*Ee))/Ee;const We=se.toFixed(xe);fe(parseFloat(We)),u==null||u({floatValue:parseFloat(We),formattedValue:We,value:We},{source:"increment"}),setTimeout(()=>{var Vt;return $e((Vt=ue.current)==null?void 0:Vt.value.length)},0)};const qe=w.useRef(cC);qe.current=()=>{if(!xN(ae))return;let se;const ne=y!==void 0?y:B?Number.MIN_SAFE_INTEGER:0,ce=Oe(ae),xe=Oe(v),Ee=Math.max(ce,xe),We=10**Ee;if(!EC(ae)&&typeof ae!="number"||Number.isNaN(ae))se=Ca(F,ne,p);else{const wt=(Math.round(Number(ae)*We)-Math.round(v*We))/We;se=ne!==void 0&&wt<ne?ne:wt}const Vt=se.toFixed(Ee);fe(parseFloat(Vt)),u==null||u({floatValue:parseFloat(Vt),formattedValue:Vt,value:Vt},{source:"decrement"}),setTimeout(()=>{var wt;return $e((wt=ue.current)==null?void 0:wt.value.length)},0)};const et=se=>{$==null||$(se),!(H||!q)&&(se.key==="ArrowUp"&&(se.preventDefault(),Re.current()),se.key==="ArrowDown"&&(se.preventDefault(),qe.current()))},Ce=se=>{if(k==null||k(se),se.key==="Backspace"){const ne=ue.current;ne.selectionStart===0&&ne.selectionStart===ne.selectionEnd&&(se.preventDefault(),window.setTimeout(()=>$e(0),0))}},Me=se=>{let ne=ae;if(_==="blur"&&typeof ne=="number"&&(ne=Ca(ne,y,p)),M&&typeof ne=="string"&&Oe(ne)<15){const ce=ne.toString().replace(/^0+/,""),xe=parseFloat(ce);ne=Number.isNaN(xe)||xe>Number.MAX_SAFE_INTEGER?ce:Ca(xe,y,p)}ae!==ne&&fe(ne),C==null||C(se)};sx(R,{increment:Re.current,decrement:qe.current});const Ie=se=>{se?Re.current():qe.current(),_e.current+=1},G=se=>{if(Ie(se),le){const ne=typeof T=="number"?T:T(_e.current);ve.current=window.setTimeout(()=>G(se),ne)}},re=(se,ne)=>{var ce;se.preventDefault(),(ce=ue.current)==null||ce.focus(),Ie(ne),le&&(ve.current=window.setTimeout(()=>G(ne),D))},te=()=>{ve.current&&window.clearTimeout(ve.current),ve.current=null,_e.current=0},he=m.jsxs("div",{...X("controls"),children:[m.jsx(La,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:z||typeof ae=="number"&&p!==void 0&&ae>=p,mod:{direction:"up"},onMouseDown:se=>se.preventDefault(),onPointerDown:se=>{re(se,!0)},onPointerUp:te,onPointerLeave:te,children:m.jsx(RM,{direction:"up"})}),m.jsx(La,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:z||typeof ae=="number"&&y!==void 0&&ae<=y,mod:{direction:"down"},onMouseDown:se=>se.preventDefault(),onPointerDown:se=>{re(se,!1)},onPointerUp:te,onPointerLeave:te,children:m.jsx(RM,{direction:"down"})})]});return m.jsx(pi,{component:Fse,allowNegative:B,className:yn(SC.root,r),size:I,...W,readOnly:H,disabled:z,value:ae,getInputRef:jn(t,ue),onValueChange:ke,rightSection:x||H||!xN(ae)?S:S||he,classNames:Q,styles:oe,unstyled:o,__staticSelector:"NumberInput",decimalScale:j?A:0,onKeyDown:et,onKeyDownCapture:Ce,rightSectionPointerEvents:L??(z?"none":void 0),rightSectionWidth:V??`var(--ni-right-section-width-${I||"sm"})`,allowLeadingZeros:P,onBlur:Me,isAllowed:se=>_==="strict"?N?N(se)&&kM(se.floatValue,y,p):kM(se.floatValue,y,p):N?N(se):!0})});u1.classes={...pi.classes,...SC};u1.displayName="@mantine/core/NumberInput";const[Wse,BL]=dd(),[Gse,Yse]=dd();var zL={card:"m_9dc8ae12"};const Jse={withBorder:!0},Xse=(e,{radius:t})=>({card:{"--card-radius":Qn(t)}}),HA=Ge((e,t)=>{const n=Pe("RadioCard",Jse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,checked:u,mod:f,withBorder:h,value:p,onClick:y,name:v,onKeyDown:x,...S}=n,N=vt({name:"RadioCard",classes:zL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Xse,rootSelector:"card"}),{dir:_}=Mc(),C=BL(),j=typeof u=="boolean"?u:(C==null?void 0:C.value)===p||!1,A=v||(C==null?void 0:C.name),$=k=>{if(x==null||x(k),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(k.nativeEvent.code)){k.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${A||"__mantine"}"]`)),F=R.findIndex(B=>B===k.target),z=F+1>=R.length?0:F+1,L=F-1<0?R.length-1:F-1;k.nativeEvent.code==="ArrowDown"&&(R[z].focus(),R[z].click()),k.nativeEvent.code==="ArrowUp"&&(R[L].focus(),R[L].click()),k.nativeEvent.code==="ArrowLeft"&&(R[_==="ltr"?L:z].focus(),R[_==="ltr"?L:z].click()),k.nativeEvent.code==="ArrowRight"&&(R[_==="ltr"?z:L].focus(),R[_==="ltr"?z:L].click())}};return m.jsx(Gse,{value:{checked:j},children:m.jsx(La,{ref:t,mod:[{"with-border":h,checked:j},f],...N("card"),...S,role:"radio","aria-checked":j,name:A,onClick:k=>{y==null||y(k),C==null||C.onChange(p||"")},onKeyDown:$})})});HA.displayName="@mantine/core/RadioCard";HA.classes=zL;const Kse={},d1=Ge((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:i,wrapperProps:o,children:a,name:c,readOnly:u,...f}=Pe("RadioGroup",Kse,e),h=fi(c),[p,y]=cs({value:n,defaultValue:r,finalValue:"",onChange:s}),v=x=>!u&&y(typeof x=="string"?x:x.currentTarget.value);return m.jsx(Wse,{value:{value:p,onChange:v,size:i,name:h},children:m.jsx(It.Wrapper,{size:i,ref:t,...o,...f,labelElement:"div",__staticSelector:"RadioGroup",children:m.jsx(EL,{role:"radiogroup",children:a})})})});d1.classes=It.Wrapper.classes;d1.displayName="@mantine/core/RadioGroup";function VL({size:e,style:t,...n}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ae(e),height:Ae(e),...t},"aria-hidden":!0,...n,children:m.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var UL={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Qse={icon:VL},Zse=(e,{radius:t,color:n,size:r,iconColor:s,variant:i,autoContrast:o})=>{const a=Rc({color:n||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Mt(r,"radio-size"),"--radio-radius":t===void 0?void 0:Qn(t),"--radio-color":i==="outline"?c:Cr(n,e),"--radio-icon-size":Mt(r,"radio-icon-size"),"--radio-icon-color":s?Cr(s,e):Yj(o,e)?Ay({color:n,theme:e,autoContrast:o}):void 0}}},WA=Ge((e,t)=>{const n=Pe("RadioIndicator",Qse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,icon:u,radius:f,color:h,iconColor:p,autoContrast:y,checked:v,mod:x,variant:S,disabled:N,..._}=n,C=u,j=vt({name:"RadioIndicator",classes:UL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Zse,rootSelector:"indicator"}),A=Yse(),$=typeof v=="boolean"?v:(A==null?void 0:A.checked)||!1;return m.jsx(Ve,{ref:t,...j("indicator",{variant:S}),variant:S,mod:[{checked:$,disabled:N},x],..._,children:m.jsx(C,{...j("icon")})})});WA.displayName="@mantine/core/RadioIndicator";WA.classes=UL;var qL={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const eie={labelPosition:"right"},tie=(e,{size:t,radius:n,color:r,iconColor:s,variant:i,autoContrast:o})=>{const a=Rc({color:r||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Mt(t,"radio-size"),"--radio-radius":n===void 0?void 0:Qn(n),"--radio-color":i==="outline"?c:Cr(r,e),"--radio-icon-color":s?Cr(s,e):Yj(o,e)?Ay({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Mt(t,"radio-icon-size")}}},jo=Ge((e,t)=>{const n=Pe("Radio",eie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,id:u,size:f,label:h,labelPosition:p,description:y,error:v,radius:x,color:S,variant:N,disabled:_,wrapperProps:C,icon:j=VL,rootRef:A,iconColor:$,onChange:k,mod:R,...F}=n,z=vt({name:"Radio",classes:qL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:tie}),L=BL(),B=(L==null?void 0:L.size)??f,H=n.size?f:B,{styleProps:I,rest:V}=em(F),T=fi(u),D=L?{checked:L.value===V.value,name:V.name??L.name,onChange:P=>{L.onChange(P),k==null||k(P)}}:{};return m.jsx(RA,{...z("root"),__staticSelector:"Radio",__stylesApiProps:n,id:T,size:H,labelPosition:p,label:h,description:y,error:v,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:N,ref:A,mod:R,...I,...C,children:m.jsxs(Ve,{...z("inner"),mod:{"label-position":p},children:[m.jsx(Ve,{...z("radio",{focusable:!0,variant:N}),onChange:k,...V,...D,component:"input",mod:{error:!!v},ref:t,id:T,disabled:_,type:"radio"}),m.jsx(j,{...z("icon"),"aria-hidden":!0})]})})});jo.classes=qL;jo.displayName="@mantine/core/Radio";jo.Group=d1;jo.Card=HA;jo.Indicator=WA;const nie={duration:100,transition:"fade"};function rie(e,t){return{...nie,...t,...e}}function sie({offset:e,position:t,defaultOpened:n}){const[r,s]=w.useState(n),i=w.useRef(null),{x:o,y:a,elements:c,refs:u,update:f,placement:h}=hA({placement:t,middleware:[cA({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=h.includes("right")?e:t.includes("left")?e*-1:0,y=h.includes("bottom")?e:t.includes("top")?e*-1:0,v=w.useCallback(({clientX:x,clientY:S})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x,y:S,left:x+p,top:S+y,right:x,bottom:S}}})},[c.reference]);return w.useEffect(()=>{if(u.floating.current){const x=i.current;x.addEventListener("mousemove",v);const S=Aa(u.floating.current);return S.forEach(N=>{N.addEventListener("scroll",f)}),()=>{x.removeEventListener("mousemove",v),S.forEach(N=>{N.removeEventListener("scroll",f)})}}},[c.reference,u.floating.current,f,v,r]),{handleMouseMove:v,x:o,y:a,opened:r,setOpened:s,boundaryRef:i,floating:u.setFloating}}var f1={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const iie={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:eo("popover")},oie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Qn(t),"--tooltip-bg":n?Cr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),GA=Ge((e,t)=>{const n=Pe("TooltipFloating",iie,e),{children:r,refProp:s,withinPortal:i,style:o,className:a,classNames:c,styles:u,unstyled:f,radius:h,color:p,label:y,offset:v,position:x,multiline:S,zIndex:N,disabled:_,defaultOpened:C,variant:j,vars:A,portalProps:$,...k}=n,R=Ds(),F=vt({name:"TooltipFloating",props:n,classes:f1,className:a,style:o,classNames:c,styles:u,unstyled:f,rootSelector:"tooltip",vars:A,varsResolver:oie}),{handleMouseMove:z,x:L,y:B,opened:H,boundaryRef:I,floating:V,setOpened:T}=sie({offset:v,position:x,defaultOpened:C});if(!Tc(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const D=jn(I,Vw(r),t),P=r.props,q=W=>{var X;(X=P.onMouseEnter)==null||X.call(P,W),z(W),T(!0)},M=W=>{var X;(X=P.onMouseLeave)==null||X.call(P,W),T(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(fd,{...$,withinPortal:i,children:m.jsx(Ve,{...k,...F("tooltip",{style:{...l7(o,R),zIndex:N,display:!_&&H?"block":"none",top:(B&&Math.round(B))??"",left:(L&&Math.round(L))??""}}),variant:j,ref:V,mod:{multiline:S},children:y})}),w.cloneElement(r,{...P,[s]:D,onMouseEnter:q,onMouseLeave:M})]})});GA.classes=f1;GA.displayName="@mantine/core/TooltipFloating";const HL=w.createContext(!1),aie=HL.Provider,lie=()=>w.useContext(HL),cie={openDelay:0,closeDelay:0};function YA(e){const{openDelay:t,closeDelay:n,children:r}=Pe("TooltipGroup",cie,e);return m.jsx(aie,{value:!0,children:m.jsx(zte,{delay:{open:t,close:n},children:r})})}YA.displayName="@mantine/core/TooltipGroup";YA.extend=e=>e;function uie(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function die(e){const t=uie(e.middlewares),n=[B7(e.offset)];return t.shift&&n.push(cA(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?cx():cx(t.flip)),n.push(z7({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?tg():tg(t.inline)):e.inline&&n.push(tg()),n}function fie(e){var $,k,R;const[t,n]=w.useState(e.defaultOpened),s=typeof e.opened=="boolean"?e.opened:t,i=lie(),o=fi(),a=w.useCallback(F=>{n(F),F&&_(o)},[o]),{x:c,y:u,context:f,refs:h,update:p,placement:y,middlewareData:{arrow:{x:v,y:x}={}}}=hA({strategy:e.strategy,placement:e.position,open:s,onOpenChange:a,middleware:die(e)}),{delay:S,currentId:N,setCurrentId:_}=Vte(f,{id:o}),{getReferenceProps:C,getFloatingProps:j}=Jte([Fte(f,{enabled:($=e.events)==null?void 0:$.hover,delay:i?S:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((k=e.events)!=null&&k.touch)}),Yte(f,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),Kte(f,{role:"tooltip"}),Wte(f,{enabled:typeof e.opened>"u"})]);Q7({opened:s,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:h,update:p}}),Da(()=>{var F;(F=e.onPositionChange)==null||F.call(e,y)},[y]);const A=s&&N&&N!==o;return{x:c,y:u,arrowX:v,arrowY:x,reference:h.setReference,floating:h.setFloating,getFloatingProps:j,getReferenceProps:C,isGroupPhase:A,opened:s,placement:y}}const MM={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:eo("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},hie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Qn(t),"--tooltip-bg":n?Cr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),hd=Ge((e,t)=>{const n=Pe("Tooltip",MM,e),{children:r,position:s,refProp:i,label:o,openDelay:a,closeDelay:c,onPositionChange:u,opened:f,defaultOpened:h,withinPortal:p,radius:y,color:v,classNames:x,styles:S,unstyled:N,style:_,className:C,withArrow:j,arrowSize:A,arrowOffset:$,arrowRadius:k,arrowPosition:R,offset:F,transitionProps:z,multiline:L,events:B,zIndex:H,disabled:I,positionDependencies:V,onClick:T,onMouseEnter:D,onMouseLeave:P,inline:q,variant:M,keepMounted:W,vars:X,portalProps:Q,mod:oe,floatingStrategy:ae,middlewares:fe,...le}=Pe("Tooltip",MM,n),{dir:ue}=Mc(),ve=w.useRef(null),_e=fie({position:H7(ue,s),closeDelay:c,openDelay:a,onPositionChange:u,opened:f,defaultOpened:h,events:B,arrowRef:ve,arrowOffset:$,offset:typeof F=="number"?F+(j?A/2:0):F,positionDependencies:[...V,r],inline:q,strategy:ae,middlewares:fe}),ke=vt({name:"Tooltip",props:n,classes:f1,className:C,style:_,classNames:x,styles:S,unstyled:N,rootSelector:"tooltip",vars:X,varsResolver:hie});if(!Tc(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Oe=jn(_e.reference,Vw(r),t),$e=rie(z,{duration:100,transition:"fade"}),Re=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(fd,{...Q,withinPortal:p,children:m.jsx(Ic,{...$e,keepMounted:W,mounted:!I&&!!_e.opened,duration:_e.isGroupPhase?10:$e.duration,children:qe=>m.jsxs(Ve,{...le,"data-fixed":ae==="fixed"||void 0,variant:M,mod:[{multiline:L},oe],..._e.getFloatingProps({ref:_e.floating,className:ke("tooltip").className,style:{...ke("tooltip").style,...qe,zIndex:H,top:_e.y??0,left:_e.x??0}}),children:[o,m.jsx(mA,{ref:ve,arrowX:_e.arrowX,arrowY:_e.arrowY,visible:j,position:_e.placement,arrowSize:A,arrowOffset:$,arrowRadius:k,arrowPosition:R,...ke("arrow")})]})})}),w.cloneElement(r,_e.getReferenceProps({onClick:T,onMouseEnter:D,onMouseLeave:P,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[i]:Oe,className:yn(C,Re.className),...Re}))]})});hd.classes=f1;hd.displayName="@mantine/core/Tooltip";hd.Floating=GA;hd.Group=YA;var WL={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const mie={withItemsBorders:!0},pie=(e,{radius:t,color:n,transitionDuration:r,size:s,transitionTimingFunction:i})=>({root:{"--sc-radius":t===void 0?void 0:Qn(t),"--sc-color":n?Cr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":i,"--sc-padding":Mt(s,"sc-padding"),"--sc-font-size":Vr(s)}}),md=Ge((e,t)=>{var fe,le;const n=Pe("SegmentedControl",mie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,data:u,value:f,defaultValue:h,onChange:p,size:y,name:v,disabled:x,readOnly:S,fullWidth:N,orientation:_,radius:C,color:j,transitionDuration:A,transitionTimingFunction:$,variant:k,autoContrast:R,withItemsBorders:F,mod:z,...L}=n,B=vt({name:"SegmentedControl",props:n,classes:WL,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:pie}),H=Ds(),I=u.map(ue=>typeof ue=="string"?{label:ue,value:ue}:ue),V=nZ(),[T,D]=w.useState(null),[P,q]=w.useState({}),M=(ue,ve)=>{P[ve]=ue,q(P)},[W,X]=cs({value:f,defaultValue:h,finalValue:Array.isArray(u)?((fe=I.find(ue=>!ue.disabled))==null?void 0:fe.value)??((le=u[0])==null?void 0:le.value)??null:null,onChange:p}),Q=fi(v),oe=I.map(ue=>w.createElement(Ve,{...B("control"),mod:{active:W===ue.value,orientation:_},key:ue.value},w.createElement("input",{...B("input"),disabled:x||ue.disabled,type:"radio",name:Q,value:ue.value,id:`${Q}-${ue.value}`,checked:W===ue.value,onChange:()=>!S&&X(ue.value),"data-focus-ring":H.focusRing,key:`${ue.value}-input`}),w.createElement(Ve,{component:"label",...B("label"),mod:{active:W===ue.value&&!(x||ue.disabled),disabled:x||ue.disabled,"read-only":S},htmlFor:`${Q}-${ue.value}`,ref:ve=>M(ve,ue.value),__vars:{"--sc-label-color":j!==void 0?Ay({color:j,theme:H,autoContrast:R}):void 0},key:`${ue.value}-label`},m.jsx("span",{...B("innerLabel"),children:ue.label})))),ae=jn(t,ue=>D(ue));return u.length===0?null:m.jsxs(Ve,{...B("root"),variant:k,size:y,ref:ae,mod:[{"full-width":N,orientation:_,initialized:V,"with-items-borders":F},z],...L,role:"radiogroup","data-disabled":x,children:[typeof W=="string"&&m.jsx(vA,{target:P[W],parent:T,component:"span",transitionDuration:"var(--sc-transition-duration)",...B("indicator")}),oe]})});md.classes=WL;md.displayName="@mantine/core/SegmentedControl";const gie={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},h1=Ge((e,t)=>{const n=Pe("Select",gie,e),{classNames:r,styles:s,unstyled:i,vars:o,dropdownOpened:a,defaultDropdownOpened:c,onDropdownClose:u,onDropdownOpen:f,onFocus:h,onBlur:p,onClick:y,onChange:v,data:x,value:S,defaultValue:N,selectFirstOptionOnChange:_,onOptionSubmit:C,comboboxProps:j,readOnly:A,disabled:$,filter:k,limit:R,withScrollArea:F,maxDropdownHeight:z,size:L,searchable:B,rightSection:H,checkIconPosition:I,withCheckIcon:V,nothingFoundMessage:T,name:D,form:P,searchValue:q,defaultSearchValue:M,onSearchChange:W,allowDeselect:X,error:Q,rightSectionPointerEvents:oe,id:ae,clearable:fe,clearButtonProps:le,hiddenInputProps:ue,renderOption:ve,onClear:_e,autoComplete:ke,scrollAreaProps:Oe,__defaultRightSection:$e,__clearSection:Re,__clearable:qe,chevronColor:et,...Ce}=n,Me=w.useMemo(()=>gL(x),[x]),Ie=w.useMemo(()=>xA(Me),[Me]),G=fi(ae),[re,te,he]=cs({value:S,defaultValue:N,finalValue:null,onChange:v}),se=typeof re=="string"?Ie[re]:void 0,ne=ZQ(se),[ce,xe]=cs({value:q,defaultValue:M,finalValue:se?se.label:"",onChange:W}),Ee=$A({opened:a,defaultOpened:c,onDropdownOpen:()=>{f==null||f(),Ee.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ee.resetSelectedOption()}}),{resolvedClassNames:We,resolvedStyles:Vt}=Zh({props:n,styles:s,classNames:r});w.useEffect(()=>{_&&Ee.selectFirstOption()},[_,re]),w.useEffect(()=>{S===null&&xe(""),typeof S=="string"&&se&&((ne==null?void 0:ne.value)!==se.value||(ne==null?void 0:ne.label)!==se.label)&&xe(se.label)},[S,se]);const wt=m.jsx($t.ClearButton,{...le,onClear:()=>{te(null,null),xe(""),_e==null||_e()}}),io=fe&&!!re&&!$&&!A;return m.jsxs(m.Fragment,{children:[m.jsxs($t,{store:Ee,__staticSelector:"Select",classNames:We,styles:Vt,unstyled:i,readOnly:A,onOptionSubmit:Ut=>{C==null||C(Ut);const hn=X&&Ie[Ut].value===re?null:Ie[Ut],ur=hn?hn.value:null;ur!==re&&te(ur,hn),!he&&xe(typeof ur=="string"&&(hn==null?void 0:hn.label)||""),Ee.closeDropdown()},size:L,...j,children:[m.jsx($t.Target,{targetType:B?"input":"button",autoComplete:ke,children:m.jsx(pi,{id:G,ref:t,__defaultRightSection:m.jsx($t.Chevron,{size:L,error:Q,unstyled:i,color:et}),__clearSection:wt,__clearable:io,rightSection:H,rightSectionPointerEvents:oe||(io?"all":"none"),...Ce,size:L,__staticSelector:"Select",disabled:$,readOnly:A||!B,value:ce,onChange:Ut=>{xe(Ut.currentTarget.value),Ee.openDropdown(),_&&Ee.selectFirstOption()},onFocus:Ut=>{B&&Ee.openDropdown(),h==null||h(Ut)},onBlur:Ut=>{var hn;B&&Ee.closeDropdown(),xe(re!=null&&((hn=Ie[re])==null?void 0:hn.label)||""),p==null||p(Ut)},onClick:Ut=>{B?Ee.openDropdown():Ee.toggleDropdown(),y==null||y(Ut)},classNames:We,styles:Vt,unstyled:i,pointer:!B,error:Q})}),m.jsx(OL,{data:Me,hidden:A||$,filter:k,search:ce,limit:R,hiddenWhenEmpty:!T,withScrollArea:F,maxDropdownHeight:z,filterOptions:B&&(se==null?void 0:se.label)!==ce,value:re,checkIconPosition:I,withCheckIcon:V,nothingFoundMessage:T,unstyled:i,labelId:Ce.label?`${G}-label`:void 0,"aria-label":Ce.label?void 0:Ce["aria-label"],renderOption:ve,scrollAreaProps:Oe})]}),m.jsx($t.HiddenInput,{value:re,name:D,form:P,disabled:$,...ue})]})});h1.classes={...pi.classes,...$t.classes};h1.displayName="@mantine/core/Select";const[yie,m1]=Ya("SliderProvider was not found in tree"),GL=w.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:s,radius:i,...o},a)=>{const{getStyles:c}=m1();return m.jsx(Ve,{tabIndex:-1,variant:n,size:e,ref:a,...c("root"),...o})});GL.displayName="@mantine/core/SliderRoot";const YL=w.forwardRef(({max:e,min:t,value:n,position:r,label:s,dragging:i,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:c,labelAlwaysOn:u,thumbLabel:f,onFocus:h,onBlur:p,showLabelOnHover:y,isHovered:v,children:x=null,disabled:S},N)=>{const{getStyles:_}=m1(),[C,j]=w.useState(!1),A=u||i||C||y&&v;return m.jsxs(Ve,{tabIndex:0,role:"slider","aria-label":f,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:N,__vars:{"--slider-thumb-offset":`${r}%`},..._("thumb",{focusable:!0}),mod:{dragging:i,disabled:S},onFocus:$=>{j(!0),typeof h=="function"&&h($)},onBlur:$=>{j(!1),typeof p=="function"&&p($)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:$=>$.stopPropagation(),children:[x,m.jsx(Ic,{mounted:s!=null&&!!A,transition:"fade",duration:0,...c,children:$=>m.jsx("div",{..._("label",{style:$}),children:s})})]})});YL.displayName="@mantine/core/SliderThumb";function JL({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function bie({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function XL({marks:e,min:t,max:n,disabled:r,value:s,offset:i,inverted:o}){const{getStyles:a}=m1();if(!e)return null;const c=e.map((u,f)=>w.createElement(Ve,{...a("markWrapper"),__vars:{"--mark-offset":`${JL({value:u.value,min:t,max:n})}%`},key:f},m.jsx(Ve,{...a("mark"),mod:{filled:bie({mark:u,value:s,offset:i,inverted:o}),disabled:r}}),u.label&&m.jsx("div",{...a("markLabel"),children:u.label})));return m.jsx("div",{children:c})}XL.displayName="@mantine/core/SliderMarks";function KL({filled:e,children:t,offset:n,disabled:r,marksOffset:s,inverted:i,containerProps:o,...a}){const{getStyles:c}=m1();return m.jsx(Ve,{...c("trackContainer"),mod:{disabled:r},...o,children:m.jsxs(Ve,{...c("track"),mod:{inverted:i,disabled:r},children:[m.jsx(Ve,{mod:{inverted:i,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...c("bar")}),t,m.jsx(XL,{...a,offset:s,disabled:r,inverted:i})]})})}KL.displayName="@mantine/core/SliderTrack";function vie({value:e,containerWidth:t,min:n,max:r,step:s,precision:i}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),c=(a!==0?Math.round(a/s)*s:0)+n,u=Math.max(c,n);return i!==void 0?Number(u.toFixed(i)):u}function zb(e,t){return parseFloat(e.toFixed(t))}function xie(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function wN(e,t){const r=[...t].sort((s,i)=>s.value-i.value).find(s=>s.value>e);return r?r.value:e}function SN(e,t){const r=[...t].sort((s,i)=>i.value-s.value).find(s=>s.value<e);return r?r.value:e}function IM(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function PM(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var QL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const wie={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Sie=(e,{size:t,color:n,thumbSize:r,radius:s})=>({root:{"--slider-size":Mt(t,"slider-size"),"--slider-color":n?Cr(n,e):void 0,"--slider-radius":s===void 0?void 0:Qn(s),"--slider-thumb-size":r!==void 0?Ae(r):"calc(var(--slider-size) * 2)"}}),JA=Ge((e,t)=>{const n=Pe("Slider",wie,e),{classNames:r,styles:s,value:i,onChange:o,onChangeEnd:a,size:c,min:u,max:f,step:h,precision:p,defaultValue:y,name:v,marks:x,label:S,labelTransitionProps:N,labelAlwaysOn:_,thumbLabel:C,showLabelOnHover:j,thumbChildren:A,disabled:$,unstyled:k,scale:R,inverted:F,className:z,style:L,vars:B,hiddenInputProps:H,restrictToMarks:I,thumbProps:V,...T}=n,D=vt({name:"Slider",props:n,classes:QL,classNames:r,className:z,styles:s,style:L,vars:B,varsResolver:Sie,unstyled:k}),{dir:P}=Mc(),[q,M]=w.useState(!1),[W,X]=cs({value:typeof i=="number"?Ca(i,u,f):i,defaultValue:typeof y=="number"?Ca(y,u,f):y,finalValue:Ca(0,u,f),onChange:o}),Q=w.useRef(W),oe=w.useRef(null),ae=w.useRef(null),fe=JL({value:W,min:u,max:f}),le=R(W),ue=typeof S=="function"?S(le):S,ve=p??xie(h),_e=w.useCallback(({x:Re})=>{if(!$){const qe=vie({value:Re,min:u,max:f,step:h,precision:ve});X(I&&(x!=null&&x.length)?qk(qe,x.map(et=>et.value)):qe),Q.current=qe}},[$,u,f,h,ve,X,x,I]),{ref:ke,active:Oe}=WQ(_e,{onScrubEnd:()=>!$&&(a==null?void 0:a(I&&(x!=null&&x.length)?qk(Q.current,x.map(Re=>Re.value)):Q.current))},P),$e=Re=>{var qe,et,Ce,Me,Ie,G;if(!$)switch(Re.key){case"ArrowUp":{if(Re.preventDefault(),(qe=ae.current)==null||qe.focus(),I&&x){const te=wN(W,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(W+h,u),f),ve);X(re),a==null||a(re);break}case"ArrowRight":{if(Re.preventDefault(),(et=ae.current)==null||et.focus(),I&&x){const te=P==="rtl"?SN(W,x):wN(W,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(P==="rtl"?W-h:W+h,u),f),ve);X(re),a==null||a(re);break}case"ArrowDown":{if(Re.preventDefault(),(Ce=ae.current)==null||Ce.focus(),I&&x){const te=SN(W,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(W-h,u),f),ve);X(re),a==null||a(re);break}case"ArrowLeft":{if(Re.preventDefault(),(Me=ae.current)==null||Me.focus(),I&&x){const te=P==="rtl"?wN(W,x):SN(W,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(P==="rtl"?W+h:W-h,u),f),ve);X(re),a==null||a(re);break}case"Home":{if(Re.preventDefault(),(Ie=ae.current)==null||Ie.focus(),I&&x){X(IM(x)),a==null||a(IM(x));break}X(u),a==null||a(u);break}case"End":{if(Re.preventDefault(),(G=ae.current)==null||G.focus(),I&&x){X(PM(x)),a==null||a(PM(x));break}X(f),a==null||a(f);break}}};return m.jsx(yie,{value:{getStyles:D},children:m.jsxs(GL,{...T,ref:jn(t,oe),onKeyDownCapture:$e,onMouseDownCapture:()=>{var Re;return(Re=oe.current)==null?void 0:Re.focus()},size:c,disabled:$,children:[m.jsx(KL,{inverted:F,offset:0,filled:fe,marks:x,min:u,max:f,value:le,disabled:$,containerProps:{ref:ke,onMouseEnter:j?()=>M(!0):void 0,onMouseLeave:j?()=>M(!1):void 0},children:m.jsx(YL,{max:f,min:u,value:le,position:fe,dragging:Oe,label:ue,ref:ae,labelTransitionProps:N,labelAlwaysOn:_,thumbLabel:C,showLabelOnHover:j,isHovered:q,disabled:$,...V,children:A})}),m.jsx("input",{type:"hidden",name:v,value:le,...H})]})})});JA.classes=QL;JA.displayName="@mantine/core/Slider";const ZL=w.createContext(null),Eie=ZL.Provider,Nie=()=>w.useContext(ZL),_ie={},XA=Ge((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:i,wrapperProps:o,children:a,readOnly:c,...u}=Pe("SwitchGroup",_ie,e),[f,h]=cs({value:n,defaultValue:r,finalValue:[],onChange:s}),p=y=>{const v=y.currentTarget.value;!c&&h(f.includes(v)?f.filter(x=>x!==v):[...f,v])};return m.jsx(Eie,{value:{value:f,onChange:p,size:i},children:m.jsx(It.Wrapper,{size:i,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:m.jsx(EL,{role:"group",children:a})})})});XA.classes=It.Wrapper.classes;XA.displayName="@mantine/core/SwitchGroup";var eF={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Cie={labelPosition:"right"},Oie=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Qn(t),"--switch-height":Mt(r,"switch-height"),"--switch-width":Mt(r,"switch-width"),"--switch-thumb-size":Mt(r,"switch-thumb-size"),"--switch-label-font-size":Mt(r,"switch-label-font-size"),"--switch-track-label-padding":Mt(r,"switch-track-label-padding"),"--switch-color":n?Cr(n,e):void 0}}),Ka=Ge((e,t)=>{const n=Pe("Switch",Cie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,color:u,label:f,offLabel:h,onLabel:p,id:y,size:v,radius:x,wrapperProps:S,thumbIcon:N,checked:_,defaultChecked:C,onChange:j,labelPosition:A,description:$,error:k,disabled:R,variant:F,rootRef:z,mod:L,...B}=n,H=Nie(),I=v||(H==null?void 0:H.size),V=vt({name:"Switch",props:n,classes:eF,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Oie}),{styleProps:T,rest:D}=em(B),P=fi(y),q=H?{checked:H.value.includes(D.value),onChange:H.onChange}:{},[M,W]=cs({value:q.checked??_,defaultValue:C,finalValue:!1});return m.jsxs(RA,{...V("root"),__staticSelector:"Switch",__stylesApiProps:n,id:P,size:I,labelPosition:A,label:f,description:$,error:k,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":q.checked||_||void 0,variant:F,ref:z,mod:L,...T,...S,children:[m.jsx("input",{...D,disabled:R,checked:M,"data-checked":q.checked||_||void 0,onChange:X=>{var Q;H?(Q=q.onChange)==null||Q.call(q,X):j==null||j(X),W(X.currentTarget.checked)},id:P,ref:t,type:"checkbox",role:"switch",...V("input")}),m.jsxs(Ve,{"aria-hidden":"true",mod:{error:k,"label-position":A,"without-labels":!p&&!h},...V("track"),children:[m.jsx(Ve,{component:"span",mod:"reduce-motion",...V("thumb"),children:N}),m.jsx("span",{...V("trackLabel"),children:M?p:h})]})]})});Ka.classes={...eF,...mre};Ka.displayName="@mantine/core/Switch";Ka.Group=XA;const[jie,KA]=Ya("Tabs component was not found in the tree");var Py={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Aie={},QA=Ge((e,t)=>{const n=Pe("TabsList",Aie,e),{children:r,className:s,grow:i,justify:o,classNames:a,styles:c,style:u,mod:f,...h}=n,p=KA();return m.jsx(Ve,{...h,...p.getStyles("list",{className:s,style:u,classNames:a,styles:c,props:n,variant:p.variant}),ref:t,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},f],"aria-orientation":p.orientation,__vars:{"--tabs-justify":o},children:r})});QA.classes=Py;QA.displayName="@mantine/core/TabsList";const Tie={},ZA=Ge((e,t)=>{const n=Pe("TabsPanel",Tie,e),{children:r,className:s,value:i,classNames:o,styles:a,style:c,mod:u,keepMounted:f,...h}=n,p=KA(),y=p.value===i,v=p.keepMounted||f||y?r:null;return m.jsx(Ve,{...h,...p.getStyles("panel",{className:s,classNames:o,styles:a,style:[c,y?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:p.orientation},u],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:v})});ZA.classes=Py;ZA.displayName="@mantine/core/TabsPanel";const $ie={},eT=Ge((e,t)=>{const n=Pe("TabsTab",$ie,e),{className:r,children:s,rightSection:i,leftSection:o,value:a,onClick:c,onKeyDown:u,disabled:f,color:h,style:p,classNames:y,styles:v,vars:x,mod:S,tabIndex:N,..._}=n,C=Ds(),{dir:j}=Mc(),A=KA(),$=a===A.value,k=F=>{A.onChange(A.allowTabDeactivation&&a===A.value?null:a),c==null||c(F)},R={classNames:y,styles:v,props:n};return m.jsxs(La,{..._,...A.getStyles("tab",{className:r,style:p,variant:A.variant,...R}),disabled:f,unstyled:A.unstyled,variant:A.variant,mod:[{active:$,disabled:f,orientation:A.orientation,inverted:A.inverted,placement:A.orientation==="vertical"&&A.placement},S],ref:t,role:"tab",id:A.getTabId(a),"aria-selected":$,tabIndex:N!==void 0?N:$||A.value===null?0:-1,"aria-controls":A.getPanelId(a),onClick:k,__vars:{"--tabs-color":h?Cr(h,C):void 0},onKeyDown:G8({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:A.activateTabWithKeyboard,loop:A.loop,orientation:A.orientation||"horizontal",dir:j,onKeyDown:u}),children:[o&&m.jsx("span",{...A.getStyles("tabSection",R),"data-position":"left",children:o}),s&&m.jsx("span",{...A.getStyles("tabLabel",R),children:s}),i&&m.jsx("span",{...A.getStyles("tabSection",R),"data-position":"right",children:i})]})});eT.classes=Py;eT.displayName="@mantine/core/TabsTab";const DM="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Rie={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kie=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Qn(t),"--tabs-color":Cr(n,e),"--tabs-text-color":Yj(r,e)?Ay({color:n,theme:e,autoContrast:r}):void 0}}),wn=Ge((e,t)=>{const n=Pe("Tabs",Rie,e),{defaultValue:r,value:s,onChange:i,orientation:o,children:a,loop:c,id:u,activateTabWithKeyboard:f,allowTabDeactivation:h,variant:p,color:y,radius:v,inverted:x,placement:S,keepMounted:N,classNames:_,styles:C,unstyled:j,className:A,style:$,vars:k,autoContrast:R,mod:F,...z}=n,L=fi(u),[B,H]=cs({value:s,defaultValue:r,finalValue:null,onChange:i}),I=vt({name:"Tabs",props:n,classes:Py,className:A,style:$,classNames:_,styles:C,unstyled:j,vars:k,varsResolver:kie});return m.jsx(jie,{value:{placement:S,value:B,orientation:o,id:L,loop:c,activateTabWithKeyboard:f,getTabId:zk(`${L}-tab`,DM),getPanelId:zk(`${L}-panel`,DM),onChange:H,allowTabDeactivation:h,variant:p,color:y,radius:v,inverted:x,keepMounted:N,unstyled:j,getStyles:I},children:m.jsx(Ve,{ref:t,id:L,variant:p,mod:[{orientation:o,inverted:o==="horizontal"&&x,placement:o==="vertical"&&S},F],...I("root"),...z,children:a})})});wn.classes=Py;wn.displayName="@mantine/core/Tabs";wn.Tab=eT;wn.Panel=ZA;wn.List=QA;function Mie({data:e,value:t}){const n=t.map(s=>s.trim().toLowerCase());return e.reduce((s,i)=>(Nh(i)?s.push({group:i.group,items:i.items.filter(o=>n.indexOf(o.label.toLowerCase().trim())===-1)}):n.indexOf(i.label.toLowerCase().trim())===-1&&s.push(i),s),[])}function Iie(e,t){return e?t.split(new RegExp(`[${e.join("")}]`)).map(n=>n.trim()).filter(n=>n!==""):[t]}function LM({splitChars:e,allowDuplicates:t,maxTags:n,value:r,currentTags:s}){const i=Iie(e,r),o=t?[...s,...i]:[...new Set([...s,...i])];return n?o.slice(0,n):o}const Pie={maxTags:1/0,allowDuplicates:!1,acceptValueOnBlur:!0,splitChars:[","],hiddenInputValuesDivider:","},tT=Ge((e,t)=>{const n=Pe("TagsInput",Pie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,value:f,defaultValue:h,onChange:p,onKeyDown:y,maxTags:v,allowDuplicates:x,onDuplicate:S,variant:N,data:_,dropdownOpened:C,defaultDropdownOpened:j,onDropdownOpen:A,onDropdownClose:$,selectFirstOptionOnChange:k,onOptionSubmit:R,comboboxProps:F,filter:z,limit:L,withScrollArea:B,maxDropdownHeight:H,searchValue:I,defaultSearchValue:V,onSearchChange:T,readOnly:D,disabled:P,splitChars:q,onFocus:M,onBlur:W,onPaste:X,radius:Q,rightSection:oe,rightSectionWidth:ae,rightSectionPointerEvents:fe,rightSectionProps:le,leftSection:ue,leftSectionWidth:ve,leftSectionPointerEvents:_e,leftSectionProps:ke,inputContainer:Oe,inputWrapperOrder:$e,withAsterisk:Re,required:qe,labelProps:et,descriptionProps:Ce,errorProps:Me,wrapperProps:Ie,description:G,label:re,error:te,withErrorStyles:he,name:se,form:ne,id:ce,clearable:xe,clearButtonProps:Ee,hiddenInputProps:We,hiddenInputValuesDivider:Vt,mod:wt,renderOption:io,onRemove:Ut,onClear:hn,scrollAreaProps:ur,acceptValueOnBlur:xi,...Bs}=n,oo=fi(ce),qc=gL(_),Ad=xA(qc),ol=w.useRef(null),zo=jn(ol,t),zs=$A({opened:C,defaultOpened:j,onDropdownOpen:A,onDropdownClose:()=>{$==null||$(),zs.resetSelectedOption()}}),{styleProps:Hc,rest:{type:_m,autoComplete:Wc,...Gc}}=em(Bs),[mn,wi]=cs({value:f,defaultValue:h,finalValue:[],onChange:p}),[er,an]=cs({value:I,defaultValue:V,finalValue:"",onChange:T}),Ln=vt({name:"TagsInput",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Si,resolvedStyles:al}=Zh({props:n,styles:o,classNames:r}),Td=ht=>{const Tn=mn.some(br=>br.toLowerCase()===ht.toLowerCase());Tn&&(S==null||S(ht)),(!Tn||Tn&&x)&&mn.length<v&&(R==null||R(ht),an(""),ht.length>0&&wi([...mn,ht]))},Cm=ht=>{if(y==null||y(ht),ht.isPropagationStopped())return;const Tn=er.trim(),{length:br}=Tn;if(q.includes(ht.key)&&br>0&&(wi(LM({splitChars:q,allowDuplicates:x,maxTags:v,value:er,currentTags:mn})),an(""),ht.preventDefault()),ht.key==="Enter"&&br>0&&!ht.nativeEvent.isComposing){if(ht.preventDefault(),!!document.querySelector(`#${zs.listId} [data-combobox-option][data-combobox-selected]`))return;Td(Tn)}ht.key==="Backspace"&&br===0&&mn.length>0&&!ht.nativeEvent.isComposing&&(Ut==null||Ut(mn[mn.length-1]),wi(mn.slice(0,mn.length-1)))},$d=ht=>{if(X==null||X(ht),ht.preventDefault(),ht.clipboardData){const Tn=ht.clipboardData.getData("text/plain");wi(LM({splitChars:q,allowDuplicates:x,maxTags:v,value:`${er}${Tn}`,currentTags:mn})),an("")}},Vo=mn.map((ht,Tn)=>m.jsx(Og,{withRemoveButton:!D,onRemove:()=>{const br=mn.slice();br.splice(Tn,1),wi(br),Ut==null||Ut(ht)},unstyled:a,disabled:P,...Ln("pill"),children:ht},`${ht}-${Tn}`));w.useEffect(()=>{k&&zs.selectFirstOption()},[k,mn,er]);const Yc=m.jsx($t.ClearButton,{...Ee,onClear:()=>{var ht;wi([]),an(""),(ht=ol.current)==null||ht.focus(),zs.openDropdown(),hn==null||hn()}});return m.jsxs(m.Fragment,{children:[m.jsxs($t,{store:zs,classNames:Si,styles:al,unstyled:a,size:u,readOnly:D,__staticSelector:"TagsInput",onOptionSubmit:ht=>{R==null||R(ht),an(""),mn.length<v&&wi([...mn,Ad[ht].label]),zs.resetSelectedOption()},...F,children:[m.jsx($t.DropdownTarget,{children:m.jsx(ux,{...Hc,__staticSelector:"TagsInput",classNames:Si,styles:al,unstyled:a,size:u,className:s,style:i,variant:N,disabled:P,radius:Q,rightSection:oe,__clearSection:Yc,__clearable:xe&&mn.length>0&&!P&&!D,rightSectionWidth:ae,rightSectionPointerEvents:fe,rightSectionProps:le,leftSection:ue,leftSectionWidth:ve,leftSectionPointerEvents:_e,leftSectionProps:ke,inputContainer:Oe,inputWrapperOrder:$e,withAsterisk:Re,required:qe,labelProps:et,descriptionProps:Ce,errorProps:Me,wrapperProps:Ie,description:G,label:re,error:te,multiline:!0,withErrorStyles:he,__stylesApiProps:{...n,multiline:!0},id:oo,mod:wt,children:m.jsxs(Og.Group,{disabled:P,unstyled:a,...Ln("pillsList"),children:[Vo,m.jsx($t.EventsTarget,{autoComplete:Wc,children:m.jsx(ux.Field,{...Gc,ref:zo,...Ln("inputField"),unstyled:a,onKeyDown:Cm,onFocus:ht=>{M==null||M(ht),zs.openDropdown()},onBlur:ht=>{W==null||W(ht),xi&&Td(er),zs.closeDropdown()},onPaste:$d,value:er,onChange:ht=>an(ht.currentTarget.value),required:qe&&mn.length===0,disabled:P,readOnly:D,id:oo})})]})})}),m.jsx(OL,{data:Mie({data:qc,value:mn}),hidden:D||P,filter:z,search:er,limit:L,hiddenWhenEmpty:!0,withScrollArea:B,maxDropdownHeight:H,unstyled:a,labelId:re?`${oo}-label`:void 0,"aria-label":re?void 0:Bs["aria-label"],renderOption:io,scrollAreaProps:ur})]}),m.jsx($t.HiddenInput,{name:se,form:ne,value:mn,valuesDivider:Vt,disabled:P,...We})]})});tT.classes={...pi.classes,...$t.classes};tT.displayName="@mantine/core/TagsInput";const Die={},On=Ge((e,t)=>{const n=Pe("TextInput",Die,e);return m.jsx(pi,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});On.classes=pi.classes;On.displayName="@mantine/core/TextInput";function Lie(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(s){t=typeof s=="function"?s(t):s},setState(s){this.updateState(s),r.forEach(i=>i(t))},initialize(s){n||(t=s,n=!0)},subscribe(s){return r.add(s),()=>r.delete(s)}}}function Fie(e){return w.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Bie(e,t,n){const r=[],s=[],i={};for(const o of e){const a=o.position||t;i[a]=i[a]||0,i[a]+=1,i[a]<=n?s.push(o):r.push(o)}return{notifications:s,queue:r}}const zie=()=>Lie({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),pd=zie(),Vie=(e=pd)=>Fie(e);function lm(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),s=Bie(r,n.defaultPosition,n.limit);e.setState({notifications:s.notifications,queue:s.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Uie(e,t=pd){const n=e.id||Wf();return lm(t,r=>e.id&&r.some(s=>s.id===e.id)?r:[...r,{...e,id:n}]),n}function tF(e,t=pd){return lm(t,n=>n.filter(r=>{var s;return r.id===e?((s=r.onClose)==null||s.call(r,r),!1):!0})),e}function qie(e,t=pd){return lm(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Hie(e=pd){lm(e,()=>[])}function Wie(e=pd){lm(e,t=>t.slice(0,e.getState().limit))}const wc={show:Uie,hide:tF,update:qie,clean:Hie,cleanQueue:Wie,updateState:lm};function NC(e,t){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},NC(e,t)}function nF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,NC(e,t)}const FM={disabled:!1},dx=je.createContext(null);var Gie=function(t){return t.scrollTop},Yp="unmounted",mu="exited",pu="entering",Tf="entered",_C="exiting",Qa=function(e){nF(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?a?(c=mu,i.appearStatus=pu):c=Tf:r.unmountOnExit||r.mountOnEnter?c=Yp:c=mu,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Yp?{status:mu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==pu&&o!==Tf&&(i=pu):(o===pu||o===Tf)&&(i=_C)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===pu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Df.findDOMNode(this);o&&Gie(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===mu&&this.setState({status:Yp})},n.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,c=this.props.nodeRef?[a]:[Df.findDOMNode(this),a],u=c[0],f=c[1],h=this.getTimeouts(),p=a?h.appear:h.enter;if(!s&&!o||FM.disabled){this.safeSetState({status:Tf},function(){i.props.onEntered(u)});return}this.props.onEnter(u,f),this.safeSetState({status:pu},function(){i.props.onEntering(u,f),i.onTransitionEnd(p,function(){i.safeSetState({status:Tf},function(){i.props.onEntered(u,f)})})})},n.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Df.findDOMNode(this);if(!i||FM.disabled){this.safeSetState({status:mu},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:_C},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:mu},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Df.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],f=c[1];this.props.addEndListener(u,f)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Yp)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=IA(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return je.createElement(dx.Provider,{value:null},typeof o=="function"?o(s,a):je.cloneElement(je.Children.only(o),a))},t}(je.Component);Qa.contextType=dx;Qa.propTypes={};function Sf(){}Qa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Sf,onEntering:Sf,onEntered:Sf,onExit:Sf,onExiting:Sf,onExited:Sf};Qa.UNMOUNTED=Yp;Qa.EXITED=mu;Qa.ENTERING=pu;Qa.ENTERED=Tf;Qa.EXITING=_C;function Yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nT(e,t){var n=function(i){return t&&w.isValidElement(i)?t(i):i},r=Object.create(null);return e&&w.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function Jie(e,t){e=e||{},t=t||{};function n(f){return f in t?t[f]:e[f]}var r=Object.create(null),s=[];for(var i in e)i in t?s.length&&(r[i]=s,s=[]):s.push(i);var o,a={};for(var c in t){if(r[c])for(o=0;o<r[c].length;o++){var u=r[c][o];a[r[c][o]]=n(u)}a[c]=n(c)}for(o=0;o<s.length;o++)a[s[o]]=n(s[o]);return a}function Cu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Xie(e,t){return nT(e.children,function(n){return w.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Cu(n,"appear",e),enter:Cu(n,"enter",e),exit:Cu(n,"exit",e)})})}function Kie(e,t,n){var r=nT(e.children),s=Jie(t,r);return Object.keys(s).forEach(function(i){var o=s[i];if(w.isValidElement(o)){var a=i in t,c=i in r,u=t[i],f=w.isValidElement(u)&&!u.props.in;c&&(!a||f)?s[i]=w.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Cu(o,"exit",e),enter:Cu(o,"enter",e)}):!c&&a&&!f?s[i]=w.cloneElement(o,{in:!1}):c&&a&&w.isValidElement(u)&&(s[i]=w.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:Cu(o,"exit",e),enter:Cu(o,"enter",e)}))}}),s}var Qie=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Zie={component:"div",childFactory:function(t){return t}},ql=function(e){nF(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=i.handleExited.bind(Yie(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,i){var o=i.children,a=i.handleExited,c=i.firstRender;return{children:c?Xie(s,a):Kie(s,o,a),firstRender:!1}},n.handleExited=function(s,i){var o=nT(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(a){var c=_h({},a.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,i=s.component,o=s.childFactory,a=IA(s,["component","childFactory"]),c=this.state.contextValue,u=Qie(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,i===null?je.createElement(dx.Provider,{value:c},u):je.createElement(dx.Provider,{value:c},je.createElement(i,a,u))},t}(je.Component);ql.propTypes={};ql.defaultProps=Zie;const rF=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function eoe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),rF.reduce((n,r)=>(n[r]=[],n),{}))}const BM={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},toe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function noe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[s,i]=n.split("-"),o=i==="center"?`${s}-center`:i,a={opacity:0,maxHeight:t,transform:BM[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},c={opacity:1,transform:toe[o]},u={opacity:0,maxHeight:0,transform:BM[o]};return{...a,...{entering:c,entered:c,exiting:u,exited:u}[e]}}function roe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const sF=w.forwardRef(({data:e,onHide:t,autoClose:n,...r},s)=>{const{autoClose:i,message:o,...a}=e,c=roe(n,e.autoClose),u=w.useRef(-1),f=()=>window.clearTimeout(u.current),h=()=>{t(e.id),f()},p=()=>{typeof c=="number"&&(u.current=window.setTimeout(h,c))};return w.useEffect(()=>{var y;(y=e.onOpen)==null||y.call(e,e)},[]),w.useEffect(()=>(p(),f),[c]),m.jsx(UA,{...r,...a,onClose:h,ref:s,onMouseEnter:f,onMouseLeave:p,children:o})});sF.displayName="@mantine/notifications/NotificationContainer";var iF={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const soe=Qa,ioe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:eo("overlay"),store:pd,withinPortal:!0},ooe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ae(n)}}),Po=Ge((e,t)=>{const n=Pe("Notifications",ioe,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,position:u,autoClose:f,transitionDuration:h,containerWidth:p,notificationMaxHeight:y,limit:v,zIndex:x,store:S,portalProps:N,withinPortal:_,...C}=n,j=Ds(),A=Vie(S),$=VQ(),k=Vj(),R=w.useRef({}),F=w.useRef(0),L=(j.respectReducedMotion?k:!1)?1:h,B=vt({name:"Notifications",classes:iF,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:ooe});w.useEffect(()=>{S==null||S.updateState(V=>({...V,limit:v||5,defaultPosition:u}))},[v,u]),Da(()=>{A.notifications.length>F.current&&setTimeout(()=>$(),0),F.current=A.notifications.length},[A.notifications]);const H=eoe(A.notifications,u),I=rF.reduce((V,T)=>(V[T]=H[T].map(({style:D,...P})=>m.jsx(soe,{timeout:L,onEnter:()=>R.current[P.id].offsetHeight,nodeRef:{current:R.current[P.id]},children:q=>m.jsx(sF,{ref:M=>{R.current[P.id]=M},data:P,onHide:M=>tF(M,S),autoClose:f,...B("notification",{style:{...noe({state:q,position:T,transitionDuration:L,maxHeight:y}),...D}})})},P.id)),V),{});return m.jsxs(fd,{withinPortal:_,...N,children:[m.jsx(Ve,{...B("root"),"data-position":"top-center",ref:t,...C,children:m.jsx(ql,{children:I["top-center"]})}),m.jsx(Ve,{...B("root"),"data-position":"top-left",...C,children:m.jsx(ql,{children:I["top-left"]})}),m.jsx(Ve,{...B("root",{className:nx.classNames.fullWidth}),"data-position":"top-right",...C,children:m.jsx(ql,{children:I["top-right"]})}),m.jsx(Ve,{...B("root",{className:nx.classNames.fullWidth}),"data-position":"bottom-right",...C,children:m.jsx(ql,{children:I["bottom-right"]})}),m.jsx(Ve,{...B("root"),"data-position":"bottom-left",...C,children:m.jsx(ql,{children:I["bottom-left"]})}),m.jsx(Ve,{...B("root"),"data-position":"bottom-center",...C,children:m.jsx(ql,{children:I["bottom-center"]})})]})});Po.classes=iF;Po.displayName="@mantine/notifications/Notifications";Po.show=wc.show;Po.hide=wc.hide;Po.update=wc.update;Po.clean=wc.clean;Po.cleanQueue=wc.cleanQueue;Po.updateState=wc.updateState;var Tv={exports:{}},aoe=Tv.exports,zM;function loe(){return zM||(zM=1,function(e,t){(function(n,r){e.exports=r()})(aoe,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",u="day",f="week",h="month",p="quarter",y="year",v="date",x="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var V=["th","st","nd","rd"],T=I%100;return"["+I+(V[(T-20)%10]||V[T]||V[0])+"]"}},C=function(I,V,T){var D=String(I);return!D||D.length>=V?I:""+Array(V+1-D.length).join(T)+I},j={s:C,z:function(I){var V=-I.utcOffset(),T=Math.abs(V),D=Math.floor(T/60),P=T%60;return(V<=0?"+":"-")+C(D,2,"0")+":"+C(P,2,"0")},m:function I(V,T){if(V.date()<T.date())return-I(T,V);var D=12*(T.year()-V.year())+(T.month()-V.month()),P=V.clone().add(D,h),q=T-P<0,M=V.clone().add(D+(q?-1:1),h);return+(-(D+(T-P)/(q?P-M:M-P))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:h,y,w:f,d:u,D:v,h:c,m:a,s:o,ms:i,Q:p}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},A="en",$={};$[A]=_;var k="$isDayjsObject",R=function(I){return I instanceof B||!(!I||!I[k])},F=function I(V,T,D){var P;if(!V)return A;if(typeof V=="string"){var q=V.toLowerCase();$[q]&&(P=q),T&&($[q]=T,P=q);var M=V.split("-");if(!P&&M.length>1)return I(M[0])}else{var W=V.name;$[W]=V,P=W}return!D&&P&&(A=P),P||!D&&A},z=function(I,V){if(R(I))return I.clone();var T=typeof V=="object"?V:{};return T.date=I,T.args=arguments,new B(T)},L=j;L.l=F,L.i=R,L.w=function(I,V){return z(I,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var B=function(){function I(T){this.$L=F(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[k]=!0}var V=I.prototype;return V.parse=function(T){this.$d=function(D){var P=D.date,q=D.utc;if(P===null)return new Date(NaN);if(L.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var M=P.match(S);if(M){var W=M[2]-1||0,X=(M[7]||"0").substring(0,3);return q?new Date(Date.UTC(M[1],W,M[3]||1,M[4]||0,M[5]||0,M[6]||0,X)):new Date(M[1],W,M[3]||1,M[4]||0,M[5]||0,M[6]||0,X)}}return new Date(P)}(T),this.init()},V.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},V.$utils=function(){return L},V.isValid=function(){return this.$d.toString()!==x},V.isSame=function(T,D){var P=z(T);return this.startOf(D)<=P&&P<=this.endOf(D)},V.isAfter=function(T,D){return z(T)<this.startOf(D)},V.isBefore=function(T,D){return this.endOf(D)<z(T)},V.$g=function(T,D,P){return L.u(T)?this[D]:this.set(P,T)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(T,D){var P=this,q=!!L.u(D)||D,M=L.p(T),W=function(ve,_e){var ke=L.w(P.$u?Date.UTC(P.$y,_e,ve):new Date(P.$y,_e,ve),P);return q?ke:ke.endOf(u)},X=function(ve,_e){return L.w(P.toDate()[ve].apply(P.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(_e)),P)},Q=this.$W,oe=this.$M,ae=this.$D,fe="set"+(this.$u?"UTC":"");switch(M){case y:return q?W(1,0):W(31,11);case h:return q?W(1,oe):W(0,oe+1);case f:var le=this.$locale().weekStart||0,ue=(Q<le?Q+7:Q)-le;return W(q?ae-ue:ae+(6-ue),oe);case u:case v:return X(fe+"Hours",0);case c:return X(fe+"Minutes",1);case a:return X(fe+"Seconds",2);case o:return X(fe+"Milliseconds",3);default:return this.clone()}},V.endOf=function(T){return this.startOf(T,!1)},V.$set=function(T,D){var P,q=L.p(T),M="set"+(this.$u?"UTC":""),W=(P={},P[u]=M+"Date",P[v]=M+"Date",P[h]=M+"Month",P[y]=M+"FullYear",P[c]=M+"Hours",P[a]=M+"Minutes",P[o]=M+"Seconds",P[i]=M+"Milliseconds",P)[q],X=q===u?this.$D+(D-this.$W):D;if(q===h||q===y){var Q=this.clone().set(v,1);Q.$d[W](X),Q.init(),this.$d=Q.set(v,Math.min(this.$D,Q.daysInMonth())).$d}else W&&this.$d[W](X);return this.init(),this},V.set=function(T,D){return this.clone().$set(T,D)},V.get=function(T){return this[L.p(T)]()},V.add=function(T,D){var P,q=this;T=Number(T);var M=L.p(D),W=function(oe){var ae=z(q);return L.w(ae.date(ae.date()+Math.round(oe*T)),q)};if(M===h)return this.set(h,this.$M+T);if(M===y)return this.set(y,this.$y+T);if(M===u)return W(1);if(M===f)return W(7);var X=(P={},P[a]=r,P[c]=s,P[o]=n,P)[M]||1,Q=this.$d.getTime()+T*X;return L.w(Q,this)},V.subtract=function(T,D){return this.add(-1*T,D)},V.format=function(T){var D=this,P=this.$locale();if(!this.isValid())return P.invalidDate||x;var q=T||"YYYY-MM-DDTHH:mm:ssZ",M=L.z(this),W=this.$H,X=this.$m,Q=this.$M,oe=P.weekdays,ae=P.months,fe=P.meridiem,le=function(_e,ke,Oe,$e){return _e&&(_e[ke]||_e(D,q))||Oe[ke].slice(0,$e)},ue=function(_e){return L.s(W%12||12,_e,"0")},ve=fe||function(_e,ke,Oe){var $e=_e<12?"AM":"PM";return Oe?$e.toLowerCase():$e};return q.replace(N,function(_e,ke){return ke||function(Oe){switch(Oe){case"YY":return String(D.$y).slice(-2);case"YYYY":return L.s(D.$y,4,"0");case"M":return Q+1;case"MM":return L.s(Q+1,2,"0");case"MMM":return le(P.monthsShort,Q,ae,3);case"MMMM":return le(ae,Q);case"D":return D.$D;case"DD":return L.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return le(P.weekdaysMin,D.$W,oe,2);case"ddd":return le(P.weekdaysShort,D.$W,oe,3);case"dddd":return oe[D.$W];case"H":return String(W);case"HH":return L.s(W,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return ve(W,X,!0);case"A":return ve(W,X,!1);case"m":return String(X);case"mm":return L.s(X,2,"0");case"s":return String(D.$s);case"ss":return L.s(D.$s,2,"0");case"SSS":return L.s(D.$ms,3,"0");case"Z":return M}return null}(_e)||M.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(T,D,P){var q,M=this,W=L.p(D),X=z(T),Q=(X.utcOffset()-this.utcOffset())*r,oe=this-X,ae=function(){return L.m(M,X)};switch(W){case y:q=ae()/12;break;case h:q=ae();break;case p:q=ae()/3;break;case f:q=(oe-Q)/6048e5;break;case u:q=(oe-Q)/864e5;break;case c:q=oe/s;break;case a:q=oe/r;break;case o:q=oe/n;break;default:q=oe}return P?q:L.a(q)},V.daysInMonth=function(){return this.endOf(h).$D},V.$locale=function(){return $[this.$L]},V.locale=function(T,D){if(!T)return this.$L;var P=this.clone(),q=F(T,D,!0);return q&&(P.$L=q),P},V.clone=function(){return L.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},I}(),H=B.prototype;return z.prototype=H,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",u],["$M",h],["$y",y],["$D",v]].forEach(function(I){H[I[1]]=function(V){return this.$g(V,I[0],I[1])}}),z.extend=function(I,V){return I.$i||(I(V,B,z),I.$i=!0),z},z.locale=F,z.isDayjs=R,z.unix=function(I){return z(1e3*I)},z.en=$[A],z.Ls=$,z.p={},z})}(Tv)),Tv.exports}var coe=loe();const fx=Zi(coe);var $v={exports:{}},uoe=$v.exports,VM;function doe(){return VM||(VM=1,function(e,t){(function(n,r){e.exports=r()})(uoe,function(){var n="week",r="year";return function(s,i,o){var a=i.prototype;a.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var f=o(this).startOf(r).add(1,r).date(u),h=o(this).endOf(n);if(f.isBefore(h))return 1}var p=o(this).startOf(r).date(u).startOf(n).subtract(1,"millisecond"),y=this.diff(p,n,!0);return y<0?o(this).startOf("week").week():Math.ceil(y)},a.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})}($v)),$v.exports}var foe=doe();const hoe=Zi(foe);fx.extend(hoe);function oF(e){return fx(e).format("YYYY-MM-DD HH:mm:ss")}var Vb={exports:{}},UM;function moe(){if(UM)return Vb.exports;UM=1;var e=String,t=function(){return{isColorSupported:!1,reset:e,bold:e,dim:e,italic:e,underline:e,inverse:e,hidden:e,strikethrough:e,black:e,red:e,green:e,yellow:e,blue:e,magenta:e,cyan:e,white:e,gray:e,bgBlack:e,bgRed:e,bgGreen:e,bgYellow:e,bgBlue:e,bgMagenta:e,bgCyan:e,bgWhite:e,blackBright:e,redBright:e,greenBright:e,yellowBright:e,blueBright:e,magentaBright:e,cyanBright:e,whiteBright:e,bgBlackBright:e,bgRedBright:e,bgGreenBright:e,bgYellowBright:e,bgBlueBright:e,bgMagentaBright:e,bgCyanBright:e,bgWhiteBright:e}};return Vb.exports=t(),Vb.exports.createColors=t,Vb.exports}var poe=moe();const Xs=Zi(poe);var goe={};const CC=(e,t)=>typeof e=="string"?[1,"1","true"].includes(e):!!(e||t);function qr(){try{return CC(0)}catch{return!1}}function yoe(){try{return"0.18.0-rc.1"}catch{return"0.0.0"}}const boe={cli_log_level:{key:"BKND_CLI_LOG_LEVEL",validate:e=>{if(typeof e=="string"&&["log","info","warn","error","debug"].includes(e.toLowerCase()))return e.toLowerCase()}},cli_create_ref:{key:"BKND_CLI_CREATE_REF",validate:e=>typeof e=="string"?e:void 0},cli_telemetry:{key:"BKND_CLI_TELEMETRY",validate:e=>{if(!(typeof e>"u"))return CC(e,!0)}},modules_debug:{key:"BKND_MODULES_DEBUG",validate:CC}},aF=(e,t,n)=>{var r,s;try{const i=(n==null?void 0:n.source)??goe,o=boe[e],a=i[o.key],c=o.validate(a);if(typeof c<"u")return(r=n==null?void 0:n.onValid)==null||r.call(n,c),c;(s=n==null?void 0:n.onFallback)==null||s.call(n,a)}catch{}return t};function voe(){try{const e=process||{},t=e.argv||[],n=e.env||{};return!(n.NO_COLOR||t.includes("--no-color"))&&(!!n.FORCE_COLOR||t.includes("--color")||e.platform==="win32"||(e.stdout||{}).isTTY&&n.TERM!=="dumb"||!!n.CI)}catch{return!1}}const rT={critical:{prefix:"CRT",color:Xs.red,args_color:Xs.red,original:console.error},error:{prefix:"ERR",color:Xs.red,args_color:Xs.red,original:console.error},warn:{prefix:"WRN",color:Xs.yellow,args_color:Xs.yellow,original:console.warn},info:{prefix:"INF",color:Xs.cyan,original:console.info},log:{prefix:"LOG",color:Xs.dim,args_color:Xs.dim,original:console.log},debug:{prefix:"DBG",color:Xs.yellow,args_color:Xs.dim,original:console.debug}};function xoe(e,t){const n=voe(),r=rT[e],s=r.color(`[${r.prefix}]`),i=t.map(o=>"args_color"in r&&n&&typeof o=="string"?r.args_color(o):o);return r.original(s,Xs.gray(oF()),...i)}const lF=aF("cli_log_level","log"),du=globalThis.__consoleConfig??(globalThis.__consoleConfig={level:lF,enabled:!0}),qM=Object.keys(rT),pt=new Proxy(du,{get:(e,t)=>{switch(t){case"original":return console;case"disable":return()=>{du.enabled=!1};case"enable":return()=>{du.enabled=!0};case"setLevel":return s=>{du.level=s};case"resetLevel":return()=>{du.level=lF}}if(!du.enabled)return()=>null;const n=qM.indexOf(du.level),r=qM.indexOf(t);return t in rT&&r<=n?(...s)=>xoe(t,s):()=>null}});function woe(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1?"Opera":navigator.userAgent.indexOf("Edg")!==-1?"Edge":navigator.userAgent.indexOf("Chrome")!==-1?"Chrome":navigator.userAgent.indexOf("Safari")!==-1?"Safari":navigator.userAgent.indexOf("Firefox")!==-1?"Firefox":navigator.userAgent.indexOf("MSIE")!==-1||document.documentMode?"IE":"unknown"}function li(e){return!e||e.length===0?e:e.charAt(0).toUpperCase()+e.slice(1)}function Soe(e,t=" "){return!e||e.length===0?e:e.split(t).map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(t)}function cF(e,t=!1){const s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+(t?"!@#$%^&*()_+{}:\"<>?|[];',./`~":"");let i="";for(let o=0;o<e;o++)i+=s[Math.floor(Math.random()*s.length)];return i}function Ch(e){return!e||e.length===0?e:e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}function OC(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Eoe(e){return/^[a-z]+(_[a-z]+)*$/.test(e)?"snake_case":/^[A-Z][a-zA-Z]*$/.test(e)?"PascalCase":/^[a-z][a-zA-Z]*$/.test(e)?"camelCase":/^[a-z]+(-[a-z]+)*$/.test(e)?"kebab-case":/^[A-Z]+(_[A-Z]+)*$/.test(e)?"SCREAMING_SNAKE_CASE":"unknown"}function Noe(e){switch(Eoe(e)){case"snake_case":return Ch(e);case"PascalCase":return EN(OC(e));case"camelCase":return li(EN(OC(e)));case"kebab-case":return EN(e);case"SCREAMING_SNAKE_CASE":return Ch(e.toLowerCase());case"unknown":return li(e)}}function Ku(e){return Noe(e)}function EN(e){return e.split("-").map(li).join(" ")}function Dy(e,t=" "){return Soe(Ch(e),t)}function _oe(e,t){return t instanceof RegExp?t.test(e):typeof t=="string"&&t.startsWith("/")?new RegExp(t).test(e):typeof t=="string"?e.startsWith(t):!1}function Coe(e,t=50,n="..."){return e.length<=t?e:e.substring(0,t)+n}function Qu(e){return Object.prototype.toString.call(e)==="[object Object]"}function Oh(e){return e!==null&&typeof e=="object"}function Ms(e,t){const n=new Set(t),r={};for(const[s,i]of Object.entries(e))n.has(s)||(r[s]=i);return r}function Ooe(e,t){const n=new Set(t),r={};for(const[s,i]of Object.entries(e))n.has(s)&&(r[s]=i);return r}function jC(e,t=[]){return e===null||typeof e!="object"?e:Array.isArray(e)?e.map(n=>jC(n,t)):Object.keys(e).reduce((n,r)=>{const s=t.includes(r)?r:OC(r);return n[s]=jC(e[r],t),n},{})}function uF(e,t){const n={};for(const r in e)t.some(i=>r.includes(i))||(typeof e[r]=="object"&&e[r]!==null&&!Array.isArray(e[r])?n[r]=uF(e[r],t):n[r]=e[r]);return n}function en(e,t){const n={};for(const[r,s]of Object.entries(e)){const i=t(s,r);typeof i<"u"&&(n[r]=i)}return n}const p1=en;function dF(e,t=""){let n=[];for(const r in e){const s=t?`${t}.${r}`:r;n.push(s),typeof e[r]=="object"&&e[r]!==null&&(n=n.concat(dF(e[r],s)))}return n}function fF(e){let t=1;for(const n in e)if(typeof e[n]=="object"){const r=fF(e[n])+1;t=Math.max(r,t)}return t}function joe(e,t){function n(r,s){if(Qu(r)){if(s>t)return;const i={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=n(r[o],s+1));return i}return Array.isArray(r)?r.map(i=>n(i,s)):r}return n(e,1)}function Tg(e){return e&&Object.entries(e).reduce((t,[n,r])=>{if(r&&Array.isArray(r)&&r.some(s=>typeof s=="object")){const s=r.map(Tg);s.length>0&&(t[n]=s)}else if(r&&typeof r=="object"&&!Array.isArray(r)){const s=Tg(r);Object.keys(s).length>0&&(t[n]=s)}else r!==""&&r!==null&&r!==void 0&&(t[n]=r);return t},{})}function hF(e,...t){for(const n of t)for(const[r,s]of Object.entries(n))s!==void 0&&(!Qu(s)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(e[r])?e[r]=s:Oh(e[r])?hF(e[r],s):e[r]=s);return e}function mF(e,t,n){for(const[r,s]of Object.entries(t)){const i=n(e[r],s,r,e,t);if(i!==void 0){e[r]=i;continue}s!==void 0&&(!Qu(s)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(e[r])?e[r]=s:Oh(e[r])?mF(e[r],s,n):e[r]=s)}return e}function Ta(e,t){const n=s=>{var i;if(s!==Object(s))return"primitive";if(Array.isArray(s))return"array";if(s instanceof Map)return"map";if(s!=null&&[null,Object.prototype].includes(Object.getPrototypeOf(s)))return"plainObject";if(s instanceof Function)return"function";throw new Error(`deeply comparing an instance of type ${(i=e.constructor)==null?void 0:i.name} is not supported.`)},r=n(e);if(r!==n(t))return!1;if(r==="primitive")return e===t||Number.isNaN(e)&&Number.isNaN(t);if(r==="array")return e.length===t.length&&e.every((s,i)=>Ta(s,t[i]));if(r==="map")return e.size===t.size&&[...e].every(([s,i])=>t.has(s)&&Ta(i,t.get(s)));if(r==="plainObject"){const s=new Map(Object.entries(e)),i=new Map(Object.entries(t));return s.size===i.size&&[...s].every(([o,a])=>i.has(o)&&Ta(a,i.get(o)))}else{if(r==="function")return e.toString()===t.toString();throw new Error("Unreachable")}}function Er(e,t,n=void 0){const r=typeof t=="string"?t.split(/[.\[\]\"]+/).filter(s=>s):t;if(r.length===0)return e;try{const[s,...i]=r;return!s||!(s in e)?n:Er(e[s],i,n)}catch{if(typeof n<"u")return n;throw new Error(`Invalid path: ${r.join(".")}`)}}function AC(e,t=0,n=0){const r=t?`
`:"",s=c=>t?" ".repeat(t*c):"",i=s(n+1),o=s(n);if(e===null)return"null";if(e===void 0)return"undefined";const a=typeof e;if(a==="string")return JSON.stringify(e);if(a==="number"||a==="boolean")return String(e);if(Array.isArray(e)){const c=e.map(u=>AC(u,t,n+1)).join(", "+(t?r+i:""));return"["+(t&&e.length?r+i:"")+c+(t&&e.length?r+o:"")+"]"}if(a==="object"){const c=Object.entries(e).map(([f,h])=>(/^[A-Za-z_$][\w$]*$/.test(f)?f:JSON.stringify(f))+": "+AC(h,t,n+1)),u=c.join(", "+(t?r+i:""));return"{"+(t&&c.length?r+i:"")+u+(t&&c.length?r+o:"")+"}"}throw new TypeError(`Unsupported data type: ${a}`)}function pF(e,t){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}function $f(e){if(Object.isFrozen(e))return e;const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&$f(r)}return Object.freeze(e)}const sT={video:["mp4","webm"],audio:["ogg"],image:["jpeg","png","gif","webp","bmp","tiff","avif","heic","heif"],text:["html","css","mdx","yaml","vcard","csv","vtt"],application:["zip","xml","toml","json","json5"],font:["woff","woff2","ttf","otf"]},yt={vnd:"vnd.openxmlformats-officedocument",z:"application/x-7z-compressed",t:(e="plain")=>`text/${e}`,a:(e="octet-stream")=>`application/${e}`,i:e=>`image/${e}`,v:e=>`video/${e}`},iT=new Map([["7z",yt.z],["7zip",yt.z],["ai",yt.a("pdf")],["apk",yt.a("vnd.android.package-archive")],["doc",yt.a("msword")],["docx",`${yt.vnd}.wordprocessingml.document`],["eps",yt.a("postscript")],["epub",yt.a("epub+zip")],["ini",yt.t()],["ico",yt.i("vnd.microsoft.icon")],["jar",yt.a("java-archive")],["jsonld",yt.a("ld+json")],["jpg",yt.i("jpeg")],["js",yt.t("javascript")],["log",yt.t()],["m3u",yt.t()],["m3u8",yt.a("vnd.apple.mpegurl")],["manifest",yt.t("cache-manifest")],["md",yt.t("markdown")],["mkv",yt.v("x-matroska")],["mp3",yt.a("mpeg")],["mobi",yt.a("x-mobipocket-ebook")],["ppt",yt.a("powerpoint")],["pptx",`${yt.vnd}.presentationml.presentation`],["qt",yt.v("quicktime")],["svg",yt.i("svg+xml")],["tif",yt.i("tiff")],["tsv",yt.t("tab-separated-values")],["tgz",yt.a("x-tar")],["txt",yt.t()],["text",yt.t()],["vcd",yt.a("x-cdlink")],["vcs",yt.t("x-vcalendar")],["wav",yt.a("x-wav")],["webmanifest",yt.a("manifest+json")],["xls",yt.a("vnd.ms-excel")],["xlsx",`${yt.vnd}.spreadsheetml.sheet`],["yml",yt.t("yaml")]]);function gF(e){try{const t=e.split(".").pop();if(!t)return yt.a();for(const[n,r]of Object.entries(sT))if(r.includes(t))return`${n}/${t}`;return iT.get(t)}catch{return yt.a()}}function yF(e,t=[]){const n=e.toLowerCase();if(t.includes(n))return!1;if(Object.entries(sT).flatMap(([r,s])=>s.map(i=>`${r}/${i}`)).includes(n))return!0;for(const[r,s]of iT.entries())if(s===n&&!t.includes(r))return!0;return!1}function bF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(sT))for(const s of r)if(t===`${n}/${s}`)return s;for(const[n,r]of iT.entries())if(r===t)return n;return""}var Aoe={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},vF=()=>{var n,r;const e=globalThis;if(typeof navigator<"u"&&typeof navigator.userAgent=="string"){for(const[s,i]of Object.entries(Aoe))if(Toe(i))return s}return typeof(e==null?void 0:e.EdgeRuntime)=="string"?"edge-light":(e==null?void 0:e.fastly)!==void 0?"fastly":((r=(n=e==null?void 0:e.process)==null?void 0:n.release)==null?void 0:r.name)==="node"?"node":"other"},Toe=e=>navigator.userAgent.startsWith(e);function $oe(){var t,n,r,s;const e=globalThis;return((n=(t=e==null?void 0:e.process)==null?void 0:t.env)==null?void 0:n.NEXT_RUNTIME)==="nodejs"?"nextjs":((s=(r=e==null?void 0:e.process)==null?void 0:r.env)==null?void 0:s.NEXT_RUNTIME)==="edge"?"nextjs-edge":typeof window<"u"&&window.__NEXT_DATA__?"nextjs-client":vF()}const HM={redirects_non_fq:!0};function Roe(e){return $oe().startsWith("nextjs")&&(HM.redirects_non_fq=!1),HM[e]}function WM(e,t){if(!e)throw new Error(t)}function koe(e){let t="";typeof e=="string"?t=e:e instanceof Headers?t=e.get("Content-Disposition")||"":e instanceof Request&&(t=e.headers.get("Content-Disposition")||"");const n=t.match(/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/);return n?n[2]:void 0}function Moe(e){return typeof e=="object"&&e!==null&&typeof e.getReader=="function"}function g1(e){return typeof e=="object"&&e!==null&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"}function gd(e){return g1(e)&&typeof e.name=="string"&&typeof e.lastModified=="number"}function Ioe(e){return typeof e=="object"&&e!==null&&Object.prototype.toString.call(e)==="[object ArrayBuffer]"}function Poe(e){return typeof e=="object"&&e!==null&&ArrayBuffer.isView(e)}const Doe={"89504E47":"image/png",FFD8FF:"image/jpeg",47494638:"image/gif","49492A00":"image/tiff","4D4D002A":"image/tiff","52494646????57454250":"image/webp","504B0304":"application/zip",25504446:"application/pdf","00000020667479706D70":"video/mp4","000001BA":"video/mpeg","000001B3":"video/mpeg","1A45DFA3":"video/webm","4F676753":"audio/ogg",494433:"audio/mpeg",FFF1:"audio/aac",FFF9:"audio/aac","52494646????41564920":"audio/wav","52494646????57415645":"audio/wave","52494646????415550":"audio/aiff"};async function Loe(e){if(!e)return;let t;if(Moe(e)){const r=e.getReader(),{value:s}=await r.read();if(!s)return;t=new Uint8Array(s)}else if(g1(e)||gd(e))t=new Uint8Array(await e.slice(0,12).arrayBuffer());else if(Ioe(e))t=new Uint8Array(e);else if(Poe(e))t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if(typeof e=="string")t=new TextEncoder().encode(e);else return;const n=Array.from(t.slice(0,12)).map(r=>r.toString(16).padStart(2,"0").toUpperCase()).join("");for(const[r,s]of Object.entries(Doe))if(new RegExp("^"+r.replace(/\?\?/g,"..")).test(n))return s}async function NN(e){const t=e.req.header("Content-Type")??"application/octet-stream";if(t!=null&&t.startsWith("multipart/form-data")||t!=null&&t.startsWith("application/x-www-form-urlencoded"))try{const n=await e.req.formData();if([...n.values()].length>0){const r=[...n.values()][0];return await GM(r)}}catch(n){pt.warn("Error parsing form data",n)}else try{const n=await e.req.blob();if(gd(n))return n;if(g1(n))return await GM(n,{name:koe(e.req.raw),type:t})}catch(n){pt.warn("Error parsing blob",n)}throw new Error("No file found in request")}async function Foe(e,t){const n=gd(e),r=n?e.type:t;WM(r&&typeof r=="string"&&r.startsWith("image/"),"type must be image/*");const s=n?await e.arrayBuffer():e;WM(s.byteLength>=128,"Buffer must be at least 128 bytes");const i=new DataView(s);if(r==="image/jpeg"){let o=2;for(;o<i.byteLength;){const a=i.getUint16(o);if(o+=2,a===65472||a===65474)return{width:i.getUint16(o+5),height:i.getUint16(o+3)};o+=i.getUint16(o)}}else{if(r==="image/png")return{width:i.getUint32(16),height:i.getUint32(20)};if(r==="image/gif")return{width:i.getUint16(6),height:i.getUint16(8)};if(r==="image/tiff"){const o=i.getUint16(0)===18761,a=i.getUint32(4,o),c=i.getUint32(a+18,o),u=i.getUint32(a+10,o);return{width:c,height:u}}}throw new Error("Unsupported image format")}async function GM(e,t={}){if(gd(e))return e;if(!g1(e))throw new Error("Not a Blob");const n=yF(t.type,["application/octet-stream"])?t.type:await Loe(e),r=n?bF(n):"",s=t.name||[cF(16),r].filter(Boolean).join(".");return new File([e],s,{type:n||gF(s),lastModified:Date.now()})}function Boe(e){return e?{...Object.fromEntries(e.entries())}:{}}function zoe(e,t){const n=Boe(e),r={};for(const s of t)n[s]&&(r[s]=n[s]);return r}function Voe(e,t){const n=new Headers;for(const r of t)e.has(r)&&n.set(r,e.get(r));return n}function y1(e,t){let n="";function r(s){return t!=null&&t.encode?encodeURIComponent(s):s}for(const s in e){let i=e[s];if(i!==void 0)if(Array.isArray(i))for(let o=0;o<i.length;o++)n.length>0&&(n+="&"),n+=`${r(s)}=${r(i[o])}`;else typeof i=="object"&&(i=JSON.stringify(i)),n.length>0&&(n+="&"),n+=`${r(s)}=${r(i)}`}return((t==null?void 0:t.prefix)||"")+n}function Uoe(e){function t(o){if(!o)return"";const a=decodeURIComponent(o);if(a==="false")return!1;if(a==="true")return!0;try{return JSON.parse(a)}catch{return+a*0===0?+a:a}}let n,r;const s={},i=e.split("&");for(;n=i.shift();)n=n.split("="),r=n.shift(),s[r]!==void 0?s[r]=[].concat(s[r],t(n.shift())):s[r]=t(n.shift());return s}var gn=(e=>(e[e.CONTINUE=100]="CONTINUE",e[e.PROCESSING=102]="PROCESSING",e[e.EARLY_HINTS=103]="EARLY_HINTS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.ALREADY_REPORTED=208]="ALREADY_REPORTED",e[e.IM_USED=226]="IM_USED",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.USE_PROXY=305]="USE_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.IM_A_TEAPOT=418]="IM_A_TEAPOT",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.TOO_EARLY=425]="TOO_EARLY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.LOOP_DETECTED=508]="LOOP_DETECTED",e[e.NOT_EXTENDED=510]="NOT_EXTENDED",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",e))(gn||{});const xF=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",qoe=xF+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Hoe="["+xF+"]["+qoe+"]*",Woe=new RegExp("^"+Hoe+"$");function wF(e,t){const n=[];let r=t.exec(e);for(;r;){const s=[];s.startIndex=t.lastIndex-r[0].length;const i=r.length;for(let o=0;o<i;o++)s.push(r[o]);n.push(s),r=t.exec(e)}return n}const oT=function(e){const t=Woe.exec(e);return!(t===null||typeof t>"u")};function Goe(e){return typeof e<"u"}const Yoe={allowBooleanAttributes:!1,unpairedTags:[]};function Joe(e,t){t=Object.assign({},Yoe,t);const n=[];let r=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=JM(e,i),i.err)return i}else if(e[i]==="<"){let o=i;if(i++,e[i]==="!"){i=XM(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let c="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)c+=e[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!rae(c)){let h;return c.trim().length===0?h="Invalid space after '<'.":h="Tag '"+c+"' is an invalid name.",Mn("InvalidTag",h,kr(e,i))}const u=Qoe(e,i);if(u===!1)return Mn("InvalidAttr","Attributes for '"+c+"' have open quote.",kr(e,i));let f=u.value;if(i=u.index,f[f.length-1]==="/"){const h=i-f.length;f=f.substring(0,f.length-1);const p=KM(f,t);if(p===!0)r=!0;else return Mn(p.err.code,p.err.msg,kr(e,h+p.err.line))}else if(a)if(u.tagClosed){if(f.trim().length>0)return Mn("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",kr(e,o));if(n.length===0)return Mn("InvalidTag","Closing tag '"+c+"' has not been opened.",kr(e,o));{const h=n.pop();if(c!==h.tagName){let p=kr(e,h.tagStartPos);return Mn("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",kr(e,o))}n.length==0&&(s=!0)}}else return Mn("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",kr(e,i));else{const h=KM(f,t);if(h!==!0)return Mn(h.err.code,h.err.msg,kr(e,i-f.length+h.err.line));if(s===!0)return Mn("InvalidXml","Multiple possible root nodes found.",kr(e,i));t.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:o}),r=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=XM(e,i);continue}else if(e[i+1]==="?"){if(i=JM(e,++i),i.err)return i}else break;else if(e[i]==="&"){const h=tae(e,i);if(h==-1)return Mn("InvalidChar","char '&' is not expected.",kr(e,i));i=h}else if(s===!0&&!YM(e[i]))return Mn("InvalidXml","Extra text at the end",kr(e,i));e[i]==="<"&&i--}}else{if(YM(e[i]))continue;return Mn("InvalidChar","char '"+e[i]+"' is not expected.",kr(e,i))}if(r){if(n.length==1)return Mn("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",kr(e,n[0].tagStartPos));if(n.length>0)return Mn("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Mn("InvalidXml","Start tag expected.",1);return!0}function YM(e){return e===" "||e==="	"||e===`
`||e==="\r"}function JM(e,t){const n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const r=e.substr(n,t-n);if(t>5&&r==="xml")return Mn("InvalidXml","XML declaration allowed only at the start of the document.",kr(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function XM(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const Xoe='"',Koe="'";function Qoe(e,t){let n="",r="",s=!1;for(;t<e.length;t++){if(e[t]===Xoe||e[t]===Koe)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){s=!0;break}n+=e[t]}return r!==""?!1:{value:n,index:t,tagClosed:s}}const Zoe=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function KM(e,t){const n=wF(e,Zoe),r={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return Mn("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",jp(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return Mn("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",jp(n[s]));if(n[s][3]===void 0&&!t.allowBooleanAttributes)return Mn("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",jp(n[s]));const i=n[s][2];if(!nae(i))return Mn("InvalidAttr","Attribute '"+i+"' is an invalid name.",jp(n[s]));if(!r.hasOwnProperty(i))r[i]=1;else return Mn("InvalidAttr","Attribute '"+i+"' is repeated.",jp(n[s]))}return!0}function eae(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function tae(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,eae(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function Mn(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function nae(e){return oT(e)}function rae(e){return oT(e)}function kr(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function jp(e){return e.startIndex+e[1].length}const sae={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}},iae=function(e){return Object.assign({},sae,e)};class Ap{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function oae(e,t){const n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,s=!1,i=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(s&&cae(e,t)){t+=7;let a,c;[a,c,t]=aae(e,t+1),c.indexOf("&")===-1&&(n[hae(a)]={regx:RegExp(`&${a};`,"g"),val:c})}else if(s&&uae(e,t))t+=8;else if(s&&dae(e,t))t+=8;else if(s&&fae(e,t))t+=9;else if(lae)i=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,r--):r--,r===0)break}else e[t]==="["?s=!0:o+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}function aae(e,t){let n="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)n+=e[t];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=e[t++];let s="";for(;t<e.length&&e[t]!==r;t++)s+=e[t];return[n,s,t]}function lae(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function cae(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function uae(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function dae(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function fae(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function hae(e){if(oT(e))return e;throw new Error(`Invalid entity name ${e}`)}const mae=/^[-+]?0x[a-fA-F0-9]+$/,pae=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,gae={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function yae(e,t={}){if(t=Object.assign({},gae,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e==="0")return 0;if(t.hex&&mae.test(n))return vae(n,16);if(n.search(/[eE]/)!==-1){const r=n.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(t.leadingZeros)n=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return e;return t.eNotation?Number(n):e}else return e}else{const r=pae.exec(n);if(r){const s=r[1],i=r[2];let o=bae(r[3]);if(!t.leadingZeros&&i.length>0&&s&&n[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!s&&n[1]!==".")return e;if(t.leadingZeros&&i===e)return 0;{const a=Number(n),c=""+a;return c.search(/[eE]/)!==-1?t.eNotation?a:e:n.indexOf(".")!==-1?c==="0"&&o===""||c===o||s&&c==="-"+o?a:e:i?o===c||s+o===c?a:e:n===c||n===s+c?a:e}}else return e}}function bae(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function vae(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function xae(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(const n of e)if(typeof n=="string"&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}class wae{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=Sae,this.parseXml=Oae,this.parseTextData=Eae,this.resolveNameSpace=Nae,this.buildAttributesMap=Cae,this.isItStopNode=$ae,this.replaceEntitiesValue=Aae,this.readStopNodeData=kae,this.saveTextToParentTag=Tae,this.addChild=jae,this.ignoreAttributesFn=xae(this.options.ignoreAttributes)}}function Sae(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function Eae(e,t,n,r,s,i,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,n,s,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?$C(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?$C(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Nae(e){if(this.options.removeNSPrefix){const t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}const _ae=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Cae(e,t,n){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){const r=wF(e,_ae),s=r.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(r[o][1]);if(this.ignoreAttributesFn(a,t))continue;let c=r[o][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const f=this.options.attributeValueProcessor(a,c,t);f==null?i[u]=c:typeof f!=typeof c||f!==c?i[u]=f:i[u]=$C(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const Oae=function(e){e=e.replace(/\r\n?/g,`
`);const t=new Ap("!xml");let n=t,r="",s="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const a=Ou(e,">",i,"Closing Tag is not closed.");let c=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=c.indexOf(":");h!==-1&&(c=c.substr(h+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(r=this.saveTextToParentTag(r,n,s));const u=s.substring(s.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let f=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(f=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):f=s.lastIndexOf("."),s=s.substring(0,f),n=this.tagsNodeStack.pop(),r="",i=a}else if(e[i+1]==="?"){let a=TC(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const c=new Ap(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,c,s)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const a=Ou(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const c=e.substring(i+4,a-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(e.substr(i+1,2)==="!D"){const a=oae(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){const a=Ou(e,"]]>",i,"CDATA is not closed.")-2,c=e.substring(i+9,a);r=this.saveTextToParentTag(r,n,s);let u=this.parseTextData(c,n.tagname,s,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):n.add(this.options.textNodeName,u),i=a+2}else{let a=TC(e,i,this.options.removeNSPrefix),c=a.tagName;const u=a.rawTagName;let f=a.tagExp,h=a.attrExpPresent,p=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,s,!1));const y=n;if(y&&this.options.unpairedTags.indexOf(y.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),c!==t.tagname&&(s+=s?"."+c:c),this.isItStopNode(this.options.stopNodes,s,c)){let v="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),f=c):f=f.substr(0,f.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{const S=this.readStopNodeData(e,u,p+1);if(!S)throw new Error(`Unexpected end of ${u}`);i=S.i,v=S.tagContent}const x=new Ap(c);c!==f&&h&&(x[":@"]=this.buildAttributesMap(f,s,c)),v&&(v=this.parseTextData(v,c,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),x.add(this.options.textNodeName,v),this.addChild(n,x,s)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),f=c):f=f.substr(0,f.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const v=new Ap(c);c!==f&&h&&(v[":@"]=this.buildAttributesMap(f,s,c)),this.addChild(n,v,s),s=s.substr(0,s.lastIndexOf("."))}else{const v=new Ap(c);this.tagsNodeStack.push(n),c!==f&&h&&(v[":@"]=this.buildAttributesMap(f,s,c)),this.addChild(n,v,s),n=v}r="",i=p}}else r+=e[i];return t.child};function jae(e,t,n){const r=this.options.updateTag(t.tagname,n,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),e.addChild(t))}const Aae=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Tae(e,t,n,r){return e&&(r===void 0&&(r=t.child.length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function $ae(e,t,n){const r="*."+n;for(const s in e){const i=e[s];if(r===i||t===i)return!0}return!1}function Rae(e,t,n=">"){let r,s="";for(let i=t;i<e.length;i++){let o=e[i];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(e[i+1]===n[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function Ou(e,t,n,r){const s=e.indexOf(t,n);if(s===-1)throw new Error(r);return s+t.length-1}function TC(e,t,n,r=">"){const s=Rae(e,t+1,r);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let c=i,u=!0;a!==-1&&(c=i.substring(0,a),i=i.substring(a+1).trimStart());const f=c;if(n){const h=c.indexOf(":");h!==-1&&(c=c.substr(h+1),u=c!==s.data.substr(h+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u,rawTagName:f}}function kae(e,t,n){const r=n;let s=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const i=Ou(e,">",n,`${t} is not closed`);if(e.substring(n+2,i).trim()===t&&(s--,s===0))return{tagContent:e.substring(r,n),i};n=i}else if(e[n+1]==="?")n=Ou(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=Ou(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=Ou(e,"]]>",n,"StopNode is not closed.")-2;else{const i=TC(e,n,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,n=i.closeIndex)}}function $C(e,t,n){if(t&&typeof e=="string"){const r=e.trim();return r==="true"?!0:r==="false"?!1:yae(e,n)}else return Goe(e)?e:""}function Mae(e,t){return SF(e,t)}function SF(e,t,n){let r;const s={};for(let i=0;i<e.length;i++){const o=e[i],a=Iae(o);let c="";if(n===void 0?c=a:c=n+"."+a,a===t.textNodeName)r===void 0?r=o[a]:r+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=SF(o[a],t,c);const f=Dae(u,t);o[":@"]?Pae(u,o[":@"],c,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):t.isArray(a,c,f)?s[a]=[u]:s[a]=u}}}return typeof r=="string"?r.length>0&&(s[t.textNodeName]=r):r!==void 0&&(s[t.textNodeName]=r),s}function Iae(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];if(r!==":@")return r}}function Pae(e,t,n,r){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const a=s[o];r.isArray(a,n+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Dae(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[n]||typeof e[n]=="boolean"||e[n]===0))}class Lae{constructor(t){this.externalEntities={},this.options=iae(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const i=Joe(t,n);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const r=new wae(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(t);return this.options.preserveOrder||s===void 0?s:Mae(s,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}}function Fae(e){return new Lae().parse(e)}const Bae=["SHA-1","SHA-256","SHA-384","SHA-512"];async function QM(e,t,n,r){if(!Bae.includes(e))throw new Error(`Invalid hash algorithm: ${e}`);const s=new TextEncoder().encode((n??"")+t+(r??"")),i=await crypto.subtle.digest(e,s);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")}const EF={sha256:async(e,t,n)=>QM("SHA-256",e,t,n),sha1:async(e,t,n)=>QM("SHA-1",e,t,n)};function zae(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),Array.from(t,n=>String.fromCharCode(33+n%94)).join("")}const mr=[];for(let e=0;e<256;++e)mr.push((e+256).toString(16).slice(1));function NF(e,t=0){return(mr[e[t+0]]+mr[e[t+1]]+mr[e[t+2]]+mr[e[t+3]]+"-"+mr[e[t+4]]+mr[e[t+5]]+"-"+mr[e[t+6]]+mr[e[t+7]]+"-"+mr[e[t+8]]+mr[e[t+9]]+"-"+mr[e[t+10]]+mr[e[t+11]]+mr[e[t+12]]+mr[e[t+13]]+mr[e[t+14]]+mr[e[t+15]]).toLowerCase()}let _N;const Vae=new Uint8Array(16);function _F(){if(!_N){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_N=crypto.getRandomValues.bind(crypto)}return _N(Vae)}const Uae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ZM={randomUUID:Uae};function qae(e,t,n){var s;if(ZM.randomUUID&&!e)return ZM.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??_F();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,NF(r)}const CN={};function Hae(e,t,n){let r;{const s=Date.now(),i=_F();Wae(CN,s,i),r=Gae(i,CN.msecs,CN.seq,t,n)}return t??NF(r)}function Wae(e,t,n){return e.msecs??(e.msecs=-1/0),e.seq??(e.seq=0),t>e.msecs?(e.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],e.msecs=t):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}function Gae(e,t,n,r,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),s=0;else if(s<0||s+16>r.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);return t??(t=Date.now()),n??(n=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9]),r[s++]=t/1099511627776&255,r[s++]=t/4294967296&255,r[s++]=t/16777216&255,r[s++]=t/65536&255,r[s++]=t/256&255,r[s++]=t&255,r[s++]=112|n>>>28&15,r[s++]=n>>>20&255,r[s++]=128|n>>>14&63,r[s++]=n>>>6&255,r[s++]=n<<2&255|e[10]&3,r[s++]=e[11],r[s++]=e[12],r[s++]=e[13],r[s++]=e[14],r[s++]=e[15],r}function Yae(){return qae()}function Jae(){return Hae()}function CF(e,t,n){const r=Math.min(t,n),s=Math.max(t,n);return Math.max(r,Math.min(e,s))}function e6(e){return e==null?0:typeof e=="number"?e:Number.parseInt(e,10)}const aT={fileSize:(e,t=2)=>{if(e===0)return"0 B";const n=1024,r=t<0?0:t,s=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(e)/Math.log(n));return Number.parseFloat((e/n**i).toFixed(r))+" "+s[i]}};var RC=(e=[],t="")=>"/"+[t,...e.map(n=>String(n).replace(/\./g,"/"))].filter(Boolean).join("/"),OF=e=>e.split("/").slice(1);function Xae(e,t,n=void 0){let r=typeof t=="string"?OF(t):RC(t);return b1(e,r,n)}function b1(e,t,n=void 0){let r=typeof t=="string"?t.split(/[.\[\]\"]+/).filter(s=>s):t;if(r.length===0)return e;try{let[s,...i]=r;return!s||!(s in e)?n:b1(e[s],i,n)}catch{if(typeof n<"u")return n;throw new Error(`Invalid path: ${r.join(".")}`)}}var tn=(e={},t,n,r)=>({valid:!1,errors:[...e.errors??[],{keywordLocation:RC([...e.keywordPath??[],t]),instanceLocation:RC(e.instancePath),error:typeof n=="string"?n:`Invalid value for ${t}`,data:r}]}),tt=()=>({valid:!0,errors:[]}),cm=(e,t,n)=>{let r=Array.isArray(t)?t:[t],s=n?Array.isArray(n)?n:[n]:[];return{...e,keywordPath:[...e.keywordPath??[],...r],instancePath:s?[...e.instancePath??[],...s]:e.instancePath}},Rv=(e={})=>({...e,errors:[]}),Zu=class extends Error{constructor(t){super(`Expected ${t}`)}},Kae=class extends Error{constructor(e,t){super(`${e??"Invalid raw schema"}: ${JSON.stringify(t)}`),this.schema=t}},Qae=class extends Error{constructor(t,n){super(`${t}, got: 'type "${typeof n}": ${JSON.stringify(n)}'`),this.value=n}},Dr=Symbol.for("jsonv-ts:schema");function Zae(e){return e===null}function Xn(e){return!Array.isArray(e)&&typeof e=="object"&&e!==null}function ele(e){return Object.prototype.toString.call(e)==="[object Object]"}function Do(e){return typeof e=="string"}function Za(e){return typeof e=="number"}function tle(e){return typeof e=="number"&&Number.isInteger(e)}function lT(e){return typeof e=="boolean"}function Ao(e){return Array.isArray(e)}function nle(e){return typeof e!="boolean"}function rle(e){return e!==void 0&&nle(e)&&"type"in e}function ci(e){return e!==void 0&&Xn(e)&&Dr in e}function sle(e){return ci(e)&&typeof e.toJSON()=="boolean"}function ile(e,t,n){if(!e)throw new Qae(t,n)}var t6=new WeakMap;function Va(e){if(e==null||typeof e=="boolean"||typeof e=="number")return e;if(Do(e))return e.normalize("NFC");if(Ao(e)||Xn(e)){let t=t6.get(e);if(t!==void 0)return t;let n;if(Ao(e))n=e.map(Va).sort();else{let r=Object.entries(e).sort(([s],[i])=>s.localeCompare(i)).map(([s,i])=>[s,Va(i)]);n=Object.fromEntries(r)}return t6.set(e,n),n}return e}function ole(e,t){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}function jF(e){try{return structuredClone(e)}catch{return e}}var cT=class{constructor(e){K(this,"cache");this.root=e,this.cache=new Map}hasRef(e,t){return t!==void 0&&"$ref"in e&&Do(e.$ref)}resolve(e){let t=this.cache.get(e);if(!t){if(t=Xae(this.root,e),!ci(t))throw new Error(`ref not found: ${e}`);if("$ref"in t&&t.$ref===e)throw new Error(`ref loop: ${e}`);this.cache.set(e,t)}return t}};function ale(e,t,n={}){let r=t;try{r=structuredClone(t)}catch{r=JSON.parse(JSON.stringify(t))}let s={resolver:n.resolver||new cT(e),depth:n.depth||0,dropUnknown:n.dropUnknown||!1};return s.resolver.hasRef(e,r)?s.resolver.resolve(e.$ref).coerce(r,{...s,depth:s.depth+1}):r}var lle=({type:e},t,n={})=>{if(e===void 0||t===void 0)return tt();let r,s={string:Do,number:Za,integer:tle,object:Xn,array:Ao,boolean:lT,null:Zae};if(Array.isArray(e)){for(let i of e){if(!(i in s))throw new Zu(`Unknown type: ${i}`);if(s[i](t))return tt()}r=`Expected one of: ${e.join(", ")}`}else{if(!(e in s))throw new Zu(`Unknown type: ${e}`);s[e](t)||(r=`Expected ${e}`)}return r?tn(n,"type",r,t):tt()},cle=({const:e},t,n={})=>{let r=JSON.stringify(Va(e)),s=JSON.stringify(Va(t));return r!==s?tn(n,"const",`Expected const: ${r}`,s):tt()},ule=({enum:e=[]},t,n={})=>{let r=JSON.stringify(e.map(Va)),s=JSON.stringify(Va(t));return r.includes(s)?tt():tn(n,"enum",`Expected enum: ${r}`,t)};function v1(e,t,n={}){return e.map(r=>r.validate(t,Rv(n)).valid?r:void 0).filter(Boolean)}var dle=({anyOf:e=[]},t,n={})=>v1(e,t,n).length>0?tt():tn(n,"anyOf","Expected at least one to match",t),fle=({oneOf:e=[]},t,n={})=>v1(e,t).length===1?tt():tn(n,"oneOf","Expected exactly one to match",t),hle=({allOf:e=[]},t,n={})=>v1(e,t,n).length===e.length?tt():tn(n,"allOf","Expected all to match",t),mle=({not:e},t,n={})=>t===void 0?tt():ci(e)&&e.validate(t,n).valid?tn(n,"not","Expected not to match",t):tt(),ple=({if:e,then:t,else:n},r,s={})=>{if(e&&(t||n)){if(e.validate(r,Rv(s)).valid)return t?t.validate(r,Rv(s)):tt();if(n)return n.validate(r,Rv(s))}return tt()},gle=({pattern:e=""},t,n={})=>{if(!Do(t))return tt();if(e instanceof RegExp){if(e.test(t))return tt()}else if(new RegExp(e,"u").test(t))return tt();return tn(n,"pattern",`Expected string matching pattern ${e}`,t)},yle=({minLength:e=0},t,n={})=>Do(t)?[...Va(t)].length>=e?tt():tn(n,"minLength",`Expected string with minimum length of ${e}`,t):tt(),ble=({maxLength:e=0},t,n={})=>Do(t)?[...Va(t)].length<=e?tt():tn(n,"maxLength",`Expected string with maximum length of ${e}`,t):tt(),vle=({multipleOf:e=0},t,n={})=>{if(!Za(t))return tt();if(!(Number.isFinite(t)&&Number.isFinite(e))||e<=0)throw new Zu("number");let r=t/e,s=Number.EPSILON*Math.max(1,Math.abs(r));return Math.abs(r-Math.round(r))<=s?tt():tn(n,"multipleOf",`Expected number being a multiple of ${e}`,t)},xle=({maximum:e=0},t,n={})=>!Za(t)||t<=e?tt():tn(n,"maximum",`Expected number less than or equal to ${e}`,t),wle=({exclusiveMaximum:e=0},t,n={})=>!Za(t)||t<e?tt():tn(n,"exclusiveMaximum",`Expected number less than ${e}`,t),Sle=({minimum:e=0},t,n={})=>!Za(t)||t>=e?tt():tn(n,"minimum",`Expected number greater than or equal to ${e}`,t),Ele=({exclusiveMinimum:e=0},t,n={})=>!Za(t)||t>e?tt():tn(n,"exclusiveMinimum",`Expected number greater than ${e}`,t),Nle=({properties:e={}},t,n={})=>{if(!Xn(t))return tt();for(let[r,s]of Object.entries(t)){let i=e[r];if(!ci(i))continue;let o=i.validate(s,cm(n,["properties",r],r));if(!o.valid)return o}return tt()},_le=({properties:e={},additionalProperties:t,patternProperties:n},r,s={})=>{if(!Xn(r))return tt();if(!ci(t))throw new Zu("additionalProperties must be a boolean or a managed schema");let i=Object.keys(e),o=Xn(n)?Object.keys(r).filter(c=>Object.keys(n).some(u=>new RegExp(u).test(c))):[],a=Object.keys(r).filter(c=>!i.includes(c)&&!o.includes(c));if(a.length>0){if(sle(t)){if(t.toJSON()===!0)return tt();let c=a.reduce((u,f)=>(u[f]=r[f],u),{});return tn(s,"additionalProperties","Additional properties are not allowed",c)}else if(ci(t))for(let c of a){let u=t.validate(r[c],cm(s,["additionalProperties"],c));if(!u.valid)return u}}return tt()},Cle=({dependentRequired:e},t,n={})=>{if(!Xn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");if(Xn(e)){for(let[s,i]of Object.entries(e))if(r.includes(s)){for(let o of i)if(!r.includes(o))return tn(n,"dependentRequired",`Expected dependent required property ${o}`,t)}}return tt()},Ole=({required:e=[]},t,n={})=>{if(!Xn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");return e.every(s=>r.includes(s))?tt():tn(n,"required",`Expected object with required properties ${e.join(", ")}`,t)},jle=({dependentSchemas:e},t,n={})=>{if(!Xn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");if(Xn(e)){for(let[s,i]of Object.entries(e))if(r.includes(s)){let o=i.validate(t,n);if(!o.valid)return o}}return tt()},Ale=({minProperties:e=0},t,n={})=>Xn(t)?Object.keys(t).length>=e?tt():tn(n,"minProperties",`Expected object with at least ${e} properties`,t):tt(),Tle=({maxProperties:e=0},t,n={})=>!Xn(t)||Object.keys(t).length<=e?tt():tn(n,"maxProperties",`Expected object with at most ${e} properties`,t),$le=({patternProperties:e={}},t,n={})=>{if(!Xn(t))return tt();if(!Xn(e))throw new Zu("patternProperties must be an object");for(let[r,s]of Object.entries(t))for(let[i,o]of Object.entries(e))if(new RegExp(i,"u").test(r)){let a=o.validate(s,cm(n,["patternProperties"],r));if(!a.valid)return a}return tt()},Rle=({propertyNames:e},t,n={})=>{if(!Xn(t)||e===void 0)return tt();if(!ci(e))throw new Zu("propertyNames must be a managed schema");for(let r of Object.keys(t)){let s=e.validate(r,cm(n,["propertyNames"],r));if(!s.valid)return s}return tt()},kle=({items:e,prefixItems:t=[]},n,r={})=>{if(!Ao(n)||e===void 0)return tt();if(!ci(e))throw new Zu("items must be a managed schema");for(let[s,i]of n.slice(t.length).entries()){let o=e.validate(i,cm(r,["items"],String(s)));if(!o.valid)return o}return tt()},Mle=({minItems:e=0},t,n={})=>!Ao(t)||t.length>=e?tt():tn(n,"minItems",`Expected array with at least ${e} items`,t),Ile=({maxItems:e=0},t,n={})=>!Ao(t)||t.length<=e?tt():tn(n,"maxItems",`Expected array with at most ${e} items`,t),Ple=({uniqueItems:e=!1},t,n={})=>{if(!Ao(t)||!e)return tt();let r=t.map(Va);return new Set(r.map(s=>JSON.stringify(s))).size===t.length?tt():tn(n,"uniqueItems","Expected array with unique items",t)},Dle=({contains:e,minContains:t,maxContains:n},r,s={})=>{if(!ci(e))throw new Error("contains must be a managed schema");if(!Ao(r))return tt();let i=r.filter(o=>e.validate(o).valid).length;return i<(t??1)?tn(s,t?"minContains":"contains",`Expected array to contain at least ${t??1}, but found ${i}`,r):n!==void 0&&i>n?tn(s,"maxContains",`Expected array to contain at most ${n}, but found ${i}`,r):tt()},Lle=({prefixItems:e=[]},t,n={})=>{var r;if(!Ao(t))return tt();for(let s=0;s<t.length;s++){let i=(r=e[s])==null?void 0:r.validate(t[s],cm(n,String(s),String(s)));if(i&&(i==null?void 0:i.valid)!==!0)return i}return tt()},n6={email:e=>{if(e.length>318)return!1;if(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,20}(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,21}){0,2}@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,60}[a-z0-9])?){0,3}$/i.test(e))return!0;if(!e.includes("@")||/(^\.|^"|\.@|\.\.)/.test(e))return!1;let[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},hostname:e=>e.length>(e.endsWith(".")?254:253)?!1:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*\.?$/i.test(e),date:e=>{if(e.length!==10)return!1;if(e[5]==="0"&&e[6]==="2"){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)$/.test(e))return!0;let t=e.match(/^(\d\d\d\d)-02-29$/);if(!t)return!1;let n=Number(t[1]);return n%16===0||n%4===0&&n%25!==0}return e.endsWith("31")?/^\d\d\d\d-(?:0[13578]|1[02])-31$/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)$/.test(e)},time:e=>{if(e.length>27||!/^(?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)?$/i.test(e))return!1;if(!/:60/.test(e))return!0;let t=e.match(/([0-9.]+|[^0-9.])/g);if(!t)return!1;let n=Number(t[0])*60+Number(t[2]);return t[5]==="+"?n+=24*60-Number(t[6]||0)*60-Number(t[8]||0):t[5]==="-"&&(n+=Number(t[6]||0)*60+Number(t[8]||0)),n%(24*60)===23*60+59},"date-time":e=>{if(e.length>38)return!1;let t=/^\d\d\d\d-(?:0[1-9]|1[0-2])-(?:[0-2]\d|3[01])[t\s](?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)$/i,n=e[5]==="0"&&e[6]==="2";if(n&&e[8]==="3"||!t.test(e))return!1;if(e[17]==="6"){let r=e.slice(11).match(/([0-9.]+|[^0-9.])/g);if(!r)return!1;let s=Number(r[0])*60+Number(r[2]);if(r[5]==="+"?s+=24*60-Number(r[6]||0)*60-Number(r[8]||0):r[5]==="-"&&(s+=Number(r[6]||0)*60+Number(r[8]||0)),s%(24*60)!==23*60+59)return!1}if(n){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)/.test(e))return!0;let r=e.match(/^(\d\d\d\d)-02-29/);if(!r)return!1;let s=Number(r[1]??0);return s%16===0||s%4===0&&s%25!==0}return e[8]==="3"&&e[9]==="1"?/^\d\d\d\d-(?:0[13578]|1[02])-31/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)/.test(e)},ipv4:e=>e.length<=15&&/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)$/.test(e),ipv6:e=>{if(e.length>45||e.length<2)return!1;let t=0,n=0,r=0,s=!1,i=!1,o=0,a=!0;for(let u=0;u<e.length;u++){let f=e.charCodeAt(u);if(u===1&&o===58&&f!==58)return!1;if(f>=48&&f<=57){if(++r>4)return!1}else if(f===46){if(t>6||n>=3||r===0||i)return!1;n++,r=0}else if(f===58){if(n>0||t>=7)return!1;if(o===58){if(s)return!1;s=!0}else u===0&&(a=!1);t++,r=0,i=!1}else if(f>=97&&f<=102||f>=65&&f<=70){if(n>0||++r>4)return!1;i=!0}else return!1;o=f}if(t<2||n>0&&(n!==3||r===0))return!1;if(s&&e.length===2)return!0;if(n>0&&!/(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/.test(e))return!1;let c=n>0?6:7;return s?(a||r>0)&&t<c:t===c&&a&&r>0},uri:e=>/^[a-z][a-z0-9+\-.]*:(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i.test(e),"uri-reference":e=>/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)?(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i.test(e),"uri-template":e=>/^(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2}|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i.test(e),"json-pointer":e=>/^(?:|\/(?:[^~]|~0|~1)*)$/.test(e),"relative-json-pointer":e=>/^(?:0|[1-9][0-9]*)(?:|#|\/(?:[^~]|~0|~1)*)$/.test(e),uuid:e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),regex:e=>{if(/[^\\]\\Z/.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}},binary:()=>!0,password:()=>!0},Fle=({format:e},t,n={})=>!Do(t)||!e?tt():n6[e]?n6[e](t)?tt():tn(n,"format",`Expected format: ${e}`,t):tt(),ON={type:lle,const:cle,enum:ule,allOf:hle,anyOf:dle,oneOf:fle,not:mle,minLength:yle,maxLength:ble,pattern:gle,format:Fle,minimum:Sle,exclusiveMinimum:Ele,maximum:xle,exclusiveMaximum:wle,multipleOf:vle,required:Ole,dependentRequired:Cle,dependentSchemas:jle,minProperties:Ale,maxProperties:Tle,propertyNames:Rle,properties:Nle,patternProperties:$le,additionalProperties:_le,minItems:Mle,maxItems:Ile,uniqueItems:Ple,contains:Dle,prefixItems:Lle,items:kle,if:ple};function Ble(e,t,n={}){var i;let r={keywordPath:n.keywordPath||[],instancePath:n.instancePath||[],coerce:n.coerce||!1,errors:n.errors||[],shortCircuit:n.shortCircuit||!1,ignoreUnsupported:n.ignoreUnsupported||!1,resolver:n.resolver||((i=e.getResolver)==null?void 0:i.call(e))||new cT(e),depth:n.depth?n.depth+1:0,skipClone:n.skipClone||!1},s;if(n!=null&&n.coerce&&e.coerce){let o=e.coerce(t,{resolver:r.resolver,depth:r.depth});s=r.skipClone?o:structuredClone(o)}else s=r.skipClone?t:structuredClone(t);if(n.ignoreUnsupported!==!0){let o=["$defs"];for(let a of o)if(e[a])throw new Error(`${a} not implemented`)}if(r.resolver.hasRef(e,s)){let o=r.resolver.resolve(e.$ref).validate(s,{...r,errors:[]});o.valid||r.errors.push(...o.errors)}else{let o={keywordPath:r.keywordPath,instancePath:r.instancePath,coerce:r.coerce,errors:[],shortCircuit:r.shortCircuit,ignoreUnsupported:r.ignoreUnsupported,resolver:r.resolver,depth:r.depth};for(let a in e)if(a==="type"&&e.type!==void 0){if(s!==void 0){let c=ON[a];if(c){o.errors=[];let u=c(e,s,o);if(!u.valid){if(n.shortCircuit)return u;r.errors.push(...u.errors)}}}}else if(a in ON&&e[a]!==void 0){if(s===void 0)continue;let c=ON[a];if(c){o.errors=[];let u=c(e,s,o);if(!u.valid){if(n.shortCircuit)return u;r.errors.push(...u.errors)}}}}return{valid:r.errors.length===0,errors:r.errors}}var E8,Pc=class{constructor(e,t){K(this,"~standard");K(this,E8);K(this,"_resolver");K(this,"type");K(this,"$id");K(this,"$ref");K(this,"$schema");K(this,"title");K(this,"description");K(this,"readOnly");K(this,"writeOnly");K(this,"$comment");K(this,"examples");let{type:n,validate:r,coerce:s,template:i,...o}=e||{};Object.assign(this,{type:n},o),this[Dr]={raw:e,optional:!1,overrides:t},this["~standard"]={version:1,vendor:"jsonv-ts",validate:a=>{let c=this.validate(a);return c.valid?{value:a}:{issues:c.errors.map(u=>({message:u.error,path:OF(u.instanceLocation)}))}}}}template(e,t){var i,o,a;let n=this,r=e;if(n.const!==void 0?r=n.const:r===void 0&&(n.default!==void 0&&(r=n.default),t!=null&&t.withExtendedOptional&&n.enum!==void 0&&(r=n.enum[0])),(t==null?void 0:t.withOptional)!==!0&&r===void 0&&this.isOptional())return r;if((i=this[Dr].raw)!=null&&i.template){let c=this[Dr].raw.template(r,t);c!==void 0&&(r=c)}let s=(a=(o=this[Dr].overrides)==null?void 0:o.template)==null?void 0:a.call(o,r,t);return s!==void 0&&(r=s),r}validate(e,t){var s;let n={keywordPath:(t==null?void 0:t.keywordPath)||[],instancePath:(t==null?void 0:t.instancePath)||[],coerce:(t==null?void 0:t.coerce)||!1,errors:(t==null?void 0:t.errors)||[],shortCircuit:(t==null?void 0:t.shortCircuit)||!1,ignoreUnsupported:(t==null?void 0:t.ignoreUnsupported)||!1,resolver:(t==null?void 0:t.resolver)||this.getResolver(),depth:t!=null&&t.depth?t.depth+1:0,skipClone:(t==null?void 0:t.skipClone)??!0},r=(s=this[Dr].raw)==null?void 0:s.validate;if(r!==void 0){let i=r(e,n);if(!i.valid)return i}return Ble(this,e,n)}coerce(e,t){var i,o,a;let n={...t,resolver:(t==null?void 0:t.resolver)||this.getResolver(),depth:t!=null&&t.depth?t.depth+1:0,dropUnknown:(t==null?void 0:t.dropUnknown)||!1},r=(i=this[Dr].raw)==null?void 0:i.coerce;if(r!==void 0)return r(e,n);let s=((a=(o=this[Dr].overrides)==null?void 0:o.coerce)==null?void 0:a.call(o,e,n))??e;return ale(this,s,n)}optional(){return this[Dr].optional=!0,this}isOptional(){return this[Dr].optional}getResolver(){return this._resolver||(this._resolver=new cT(this)),this._resolver}children(e){return[]}*walk({instancePath:e=[],keywordPath:t=[],data:n,maxDepth:r=Number.POSITIVE_INFINITY,...s}={}){let i=e.length===0&&n?jF(n):n;if(s.includeSelf!==!1&&(yield new Ly(this,{instancePath:e,keywordPath:t,data:i,...s})),!(e.length>=r))for(let o of this.children(s)){let a=[...e,...o.instancePath];yield*o.schema.walk({...s,data:i,maxDepth:r,instancePath:a,keywordPath:[...t,...o.keywordPath]})}}*[(E8=Dr,Symbol.iterator)](e){for(let t of this.walk(e))yield t}toJSON(){let{toJSON:e,"~standard":t,_resolver:n,...r}=this;return JSON.parse(JSON.stringify(r))}},Ly=class{constructor(t,n={}){K(this,"instancePath");K(this,"keywordPath");K(this,"data");K(this,"depth");this.schema=t,this.instancePath=n.instancePath||[],this.keywordPath=n.keywordPath||[],this.depth=this.instancePath.length;try{if(n.data!==void 0){let r=b1(n.data,this.instancePath);t.validate(r).valid&&(this.data=r)}}catch{}}appendInstancePath(t){return this.instancePath=[...this.instancePath,...t],this}appendKeywordPath(t){return this.keywordPath=[...this.keywordPath,...t],this}setData(t){return this.data=t,this}};function x1(e,t,n){return new class extends Pc{constructor(){super(...arguments);K(this,"type",e)}}(t,n)}var zle=class extends Pc{constructor(e){super(),this.bool=e}toJSON(){return this.bool}validate(e,t){return this.bool?tt():tn(t,"","Always fails",e)}};function kC(e){return new zle(e)}var Ji=e=>x1(e==null?void 0:e.type,e),si=(e,t)=>x1(void 0,{...t,const:e}),AF=class extends Pc{constructor(t,n){let r=[];for(let[i,o]of Object.entries(t||{}))ile(ci(o),"properties must be managed schemas",o),o[Dr].optional||r.push(i);let s=(n==null?void 0:n.additionalProperties)===!1?kC(!1):n==null?void 0:n.additionalProperties;r=r.length>0?r:void 0;super({...n,additionalProperties:s,properties:t,required:r},{template:(i,o)=>{let a=structuredClone(Xn(i)?i:{}),c={...a};if(this.properties)for(let[u,f]of Object.entries(this.properties)){let h=b1(a,u);if(f.isOptional()&&(o==null?void 0:o.withOptional)!==!0&&h===void 0&&i===void 0)continue;let p=f.template(h,o);p!==void 0&&(c[u]=p)}if(!(Object.keys(c).length===0&&!(o!=null&&o.withExtendedOptional)))return c},coerce:(i,o)=>{let a=Object.keys(this.properties),c=jF(i),u=a.length>0&&Object.values(this.properties).every(f=>!f[Dr].optional);if(ele(c)&&((o==null?void 0:o.dropUnknown)===!0||u)&&(c=ole(c,a)),typeof c=="string"&&c.match(/^\{/)&&(c=JSON.parse(c)),!(typeof c!="object"||c===null)){if(this.properties)for(let[f,h]of Object.entries(this.properties)){let p=c[f];p!==void 0&&(c[f]=h.coerce(p,o))}return c}}});K(this,"type","object");K(this,"properties");K(this,"required");this.properties=t,this.required=r}strict(){return this.additionalProperties=kC(!1),this[Dr].raw.additionalProperties=!1,this}partial(){for(let[,t]of Object.entries(this.properties))t[Dr].optional=!0;return this.required=void 0,this}children(t){let n=[];for(let[r,s]of Object.entries(this.properties)){let i=new Ly(s,t);i.appendInstancePath([r]),i.appendKeywordPath(["properties",r]),n.push(i)}return n}},ze=(e,t)=>new AF(e,t),He=(e,t)=>ze(e,t).strict(),TF=(e,t)=>ze(e,t).partial(),$F=class extends Pc{constructor(t,n){super({...n,additionalProperties:t},{template:(r,s)=>s!=null&&s.withExtendedOptional&&(r===void 0||!Xn(r))?{}:r});K(this,"type","object");K(this,"additionalProperties");this.additionalProperties=t}children(t){let n=[],r=new Ly(this.additionalProperties,t);return r.appendKeywordPath(["additionalProperties"]),n.push(r),n}},ed=(e,t)=>new $F(e,t),RF=class extends Pc{constructor(t){super(t,{template:(n,r)=>r!=null&&r.withExtendedOptional&&(n===void 0||!Do(n))?"":n,coerce:n=>Za(n)?String(n):n});K(this,"type","string")}toJSON(){let{pattern:t,"~standard":n,_resolver:r,...s}=this;return JSON.parse(JSON.stringify({...s,pattern:t instanceof RegExp?t.source:t}))}},ge=e=>new RF(e),kF=(e,t,n)=>x1(e,n,{template:(r,s)=>s!=null&&s.withExtendedOptional&&(r===void 0||!Za(r))?(n==null?void 0:n.minimum)??0:r,coerce:r=>{if(Do(r)){let s=t.parseFn(r);if(!Number.isNaN(s))return s}return r}}),jt=e=>kF("number",{parseFn:Number},e),Vle=e=>kF("integer",{parseFn:Number.parseInt},e),Ule=class extends Pc{constructor(t,n={}){super({...n,items:t},{template:r=>r===void 0||!Array.isArray(r)?[]:r,coerce:(r,s)=>{try{let i=typeof r=="string"?JSON.parse(r):r;if(!Array.isArray(i))return;if(ci(this.items))for(let[o,a]of i.entries())i[o]=this.items.coerce(a,s);return i}catch{}return r}});K(this,"type","array");this.items=t,this.items=t}children(t){let n=[];if(this.items){let r=new Ly(this.items,t);r.appendKeywordPath(["items"]),n.push(r)}return n}},Sn=(e,t)=>new Ule(e,t),mt=e=>x1("boolean",e,{template:(t,n)=>n!=null&&n.withExtendedOptional&&(t===void 0||!lT(t))?!1:t,coerce:t=>{if(Do(t)&&["true","false","1","0"].includes(t))return t==="true"||t==="1";if(Za(t)){if(t===1)return!0;if(t===0)return!1}return t}}),Ub=Symbol.for("unionType"),N8,_8,MF=class extends(_8=Pc,N8=Ub,_8){constructor(t,n,r){super({...r,[n]:t},{coerce:(s,i)=>{let o=r==null?void 0:r.coerce;if(o!==void 0)return o.bind(this)(s,i);let a=v1(t,s,{ignoreUnsupported:!0,resolver:i==null?void 0:i.resolver,coerce:!0});return a.length>0?a[0].coerce(s,i):s}});K(this,N8);this[Ub]=n}get schemas(){return this[this[Ub]]}children(t){let n=[];for(let[r,s]of this.schemas.entries()){let i=new Ly(s,t);i.appendKeywordPath([this[Ub],r]),n.push(i)}return n}},nn=(e,t)=>new MF(e,"anyOf",t),qle=(e,t)=>new MF(e,"oneOf",t);function r6(e,t){return Array.isArray(e)?e.map(t):e!==void 0?[t(e)]:[]}function s6(e,t,n=r=>r){return Object.fromEntries(Object.entries(e).map(([r,s])=>[r,n(t(s),r)]))}function xa(e){if(lT(e))return kC(e);let t=structuredClone(e);if(!Xn(t))throw new Kae("non-object schemas not implemented",t);"properties"in t&&t.properties&&(t.properties=s6(t.properties,xa,(i,o)=>"required"in t&&Array.isArray(t.required)&&t.required.includes(o)?i:i.optional()));let n=["patternProperties","dependentSchemas","$defs"];for(let i of n)i in t&&t[i]&&(t[i]=s6(t[i],xa));let r=["additionalProperties","items","prefixItems","propertyNames","contains","not","if","then","else"];for(let i of r)i in t&&typeof t[i]<"u"&&(Ao(t[i])?t[i]=r6(t[i],xa):t[i]=xa(t[i]));let s=["anyOf","oneOf","allOf"];for(let i of s)if(i in t){let{[i]:o}=t;t[i]=r6(o,xa)}if(rle(t))switch(t.type){case"string":return ge(t);case"number":return jt(t);case"integer":return Vle(t);case"boolean":return mt(t);case"object":{let{properties:i,...o}=t;return ze(i,o)}case"array":{let{items:i,...o}=t;return Sn(i,o)}}return Ji(t)}var Hle=e=>e(new Pc({$ref:"#",coerce:(t,n)=>{var s;let r=(s=n==null?void 0:n.resolver)==null?void 0:s.resolve("#");if(!ci(r))throw new Error("Ref not found: #");return r.coerce(t,n)}})),IF=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Wle=e=>{const{groups:t,path:n}=Gle(e),r=IF(n);return Yle(r,t)},Gle=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(n,r)=>{const s=`@${r}`;return t.push([s,n]),s}),{groups:t,path:e}},Yle=(e,t)=>{for(let n=t.length-1;n>=0;n--){const[r]=t[n];for(let s=e.length-1;s>=0;s--)if(e[s].includes(r)){e[s]=e[s].replace(r,t[n][1]);break}}return e},qb={},Jle=(e,t)=>{if(e==="*")return"*";const n=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(n){const r=`${e}#${t}`;return qb[r]||(n[2]?qb[r]=t&&t[0]!==":"&&t[0]!=="*"?[r,n[1],new RegExp(`^${n[2]}(?=/${t})`)]:[e,n[1],new RegExp(`^${n[2]}$`)]:qb[r]=[e,n[1],!0]),qb[r]}return null},w1=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,n=>{try{return t(n)}catch{return n}})}},Xle=e=>w1(e,decodeURI),PF=e=>{const t=e.url,n=t.indexOf("/",t.charCodeAt(9)===58?13:8);let r=n;for(;r<t.length;r++){const s=t.charCodeAt(r);if(s===37){const i=t.indexOf("?",r),o=t.slice(n,i===-1?void 0:i);return Xle(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(s===63)break}return t.slice(n,r)},Kle=e=>{const t=PF(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},Rf=(e,t,...n)=>(n.length&&(t=Rf(t,...n)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),DF=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),n=[];let r="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))r+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){n.length===0&&r===""?n.push("/"):n.push(r);const i=s.replace("?","");r+="/"+i,n.push(r)}else r+="/"+s}),n.filter((s,i,o)=>o.indexOf(s)===i)},jN=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?w1(e,uT):e):e,LF=(e,t,n)=>{let r;if(!n&&t&&!/[%+]/.test(t)){let o=e.indexOf(`?${t}`,8);for(o===-1&&(o=e.indexOf(`&${t}`,8));o!==-1;){const a=e.charCodeAt(o+t.length+1);if(a===61){const c=o+t.length+2,u=e.indexOf("&",c);return jN(e.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";o=e.indexOf(`&${t}`,o+1)}if(r=/[%+]/.test(e),!r)return}const s={};r??(r=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const o=e.indexOf("&",i+1);let a=e.indexOf("=",i);a>o&&o!==-1&&(a=-1);let c=e.slice(i+1,a===-1?o===-1?void 0:o:a);if(r&&(c=jN(c)),i=o,c==="")continue;let u;a===-1?u="":(u=e.slice(a+1,o===-1?void 0:o),r&&(u=jN(u))),n?(s[c]&&Array.isArray(s[c])||(s[c]=[]),s[c].push(u)):s[c]??(s[c]=u)}return t?s[t]:s},Qle=LF,Zle=(e,t)=>LF(e,t,!0),uT=decodeURIComponent,dT={name:"HMAC",hash:"SHA-256"},FF=async e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e;return await crypto.subtle.importKey("raw",t,dT,!1,["sign","verify"])},ece=async(e,t)=>{const n=await FF(t),r=await crypto.subtle.sign(dT.name,n,new TextEncoder().encode(e));return btoa(String.fromCharCode(...new Uint8Array(r)))},tce=async(e,t,n)=>{try{const r=atob(e),s=new Uint8Array(r.length);for(let i=0,o=r.length;i<o;i++)s[i]=r.charCodeAt(i);return await crypto.subtle.verify(dT,n,s,new TextEncoder().encode(t))}catch{return!1}},nce=/^[\w!#$%&'*.^`|~+-]+$/,rce=/^[ !#-:<-[\]-~]*$/,MC=(e,t)=>{if(t&&e.indexOf(t)===-1)return{};const n=e.trim().split(";"),r={};for(let s of n){s=s.trim();const i=s.indexOf("=");if(i===-1)continue;const o=s.substring(0,i).trim();if(t&&t!==o||!nce.test(o))continue;let a=s.substring(i+1).trim();if(a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),rce.test(a)&&(r[o]=a.indexOf("%")!==-1?w1(a,uT):a,t))break}return r},i6=async(e,t,n)=>{const r={},s=await FF(t);for(const[i,o]of Object.entries(MC(e,n))){const a=o.lastIndexOf(".");if(a<1)continue;const c=o.substring(0,a),u=o.substring(a+1);if(u.length!==44||!u.endsWith("="))continue;const f=await tce(u,c,s);r[i]=f?c:!1}return r},BF=(e,t,n={})=>{let r=`${e}=${t}`;if(e.startsWith("__Secure-")&&!n.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!n.secure)throw new Error("__Host- Cookie must have Secure attributes");if(n.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(n.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(n&&typeof n.maxAge=="number"&&n.maxAge>=0){if(n.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");r+=`; Max-Age=${n.maxAge|0}`}if(n.domain&&n.prefix!=="host"&&(r+=`; Domain=${n.domain}`),n.path&&(r+=`; Path=${n.path}`),n.expires){if(n.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite&&(r+=`; SameSite=${n.sameSite.charAt(0).toUpperCase()+n.sameSite.slice(1)}`),n.priority&&(r+=`; Priority=${n.priority}`),n.partitioned){if(!n.secure)throw new Error("Partitioned Cookie must have Secure attributes");r+="; Partitioned"}return r},AN=(e,t,n)=>(t=encodeURIComponent(t),BF(e,t,n)),kv=async(e,t,n,r={})=>{const s=await ece(t,n);return t=`${t}.${s}`,t=encodeURIComponent(t),BF(e,t,r)},zF=(e,t,n)=>{const r=e.req.raw.headers.get("Cookie");if(typeof t=="string"){if(!r)return;let i=t;return n==="secure"?i="__Secure-"+t:n==="host"&&(i="__Host-"+t),MC(r,i)[i]}return r?MC(r):{}},VF=async(e,t,n,r)=>{const s=e.req.raw.headers.get("Cookie");if(typeof n=="string"){if(!s)return;let o=n;return(await i6(s,t,o))[o]}return s?await i6(s,t):{}},UF=(e,t,n,r)=>{let s;(r==null?void 0:r.prefix)==="secure"?s=AN("__Secure-"+t,n,{path:"/",...r,secure:!0}):(r==null?void 0:r.prefix)==="host"?s=AN("__Host-"+t,n,{...r,path:"/",secure:!0,domain:void 0}):s=AN(t,n,{path:"/",...r}),e.header("Set-Cookie",s,{append:!0})},qF=async(e,t,n,r,s)=>{let i;(s==null?void 0:s.prefix)==="secure"?i=await kv("__Secure-"+t,n,r,{path:"/",...s,secure:!0}):(s==null?void 0:s.prefix)==="host"?i=await kv("__Host-"+t,n,r,{...s,path:"/",secure:!0,domain:void 0}):i=await kv(t,n,r,{path:"/",...s}),e.header("set-cookie",i,{append:!0})},sce=(e,t,n)=>{const r=zF(e,t,n==null?void 0:n.prefix);return UF(e,t,"",{...n,maxAge:0}),r},o6=class extends Error{constructor(t=500,n){super(n==null?void 0:n.message,{cause:n==null?void 0:n.cause});K(this,"res");K(this,"status");this.res=n==null?void 0:n.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},ice=(e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),oce=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,ace=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,lce=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,cce=(e,t)=>async(n,r)=>{let s={};const i=n.req.header("Content-Type");switch(e){case"json":if(!i||!oce.test(i))break;try{s=await n.req.json()}catch{const a="Malformed JSON in request body";throw new o6(400,{message:a})}break;case"form":{if(!i||!(ace.test(i)||lce.test(i)))break;let a;if(n.req.bodyCache.formData)a=await n.req.bodyCache.formData;else try{const u=await n.req.arrayBuffer();a=await ice(u,i),n.req.bodyCache.formData=a}catch(u){let f="Malformed FormData request.";throw f+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new o6(400,{message:f})}const c={};a.forEach((u,f)=>{f.endsWith("[]")?(c[f]??(c[f]=[])).push(u):Array.isArray(c[f])?c[f].push(u):f in c?c[f]=[c[f],u]:c[f]=u}),s=c;break}case"query":s=Object.fromEntries(Object.entries(n.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":s=n.req.param();break;case"header":s=n.req.header();break;case"cookie":s=zF(n);break}const o=await t(s,n);if(o instanceof Response)return o;n.req.addValidatedData(e,o),await r()},uce=Symbol.for("jsonv"),HF=(e,t)=>Object.assign(e,{[uce]:t}),qt=(e,t,n,r)=>{let s=cce(e,async(i,o)=>{let a=(n==null?void 0:n.coerce)!==!1?t.coerce(i,{dropUnknown:n==null?void 0:n.dropUnknown}):i,c=t.validate(a);return c.valid?a:o.json({...c,schema:t},400)});return HF(s,{type:"parameters",skip:n==null?void 0:n.skipOpenAPI,value:{target:e,schema:t}})},dce={query:"query",param:"path",header:"header",cookie:"cookie"};function fce(e,t){let n=dce[t];return{parameters:Object.entries(e.properties).map(([r,s])=>{var i;return{name:r,in:n,required:((i=e.required)==null?void 0:i.includes(r))||void 0,description:(s==null?void 0:s.description)||void 0,schema:structuredClone(s.toJSON())}})}}var Zt=e=>HF(async(t,n)=>{await n()},{type:"route-doc",value:e??{}}),Tp={ConnectionClosed:{code:-32e3,message:"Connection closed"},RequestTimeout:{code:-32001,message:"Request timeout"},ParseError:{code:-32700,message:"Parse error"},InvalidRequest:{code:-32600,message:"Invalid request"},MethodNotFound:{code:-32601,message:"Method not found"},InvalidParams:{code:-32602,message:"Invalid params"},InternalError:{code:-32603,message:"Internal error",statusCode:500}},hce=class extends Error{constructor(t,n,r){super(r??Tp[t].message);K(this,"jsonrpc","2.0");K(this,"id");this.code=t,this.data=n}static get codes(){return Object.fromEntries(Object.entries(Tp).map(([t,n])=>[t,t]))}setId(t){return this.id=t,this}get statusCode(){var t;return((t=Tp[this.code])==null?void 0:t.statusCode)??400}toJSON(){return{jsonrpc:this.jsonrpc,id:this.id,error:{code:Tp[this.code].code,message:this.message,data:this.data}}}toString(){return`MCP Error (${Tp[this.code].code} ${this.code}): ${this.message}`}},mce=ze({}),WF=ze({jsonrpc:ge({const:"2.0"}),id:qle([ge(),jt()]).optional()});ze({...WF.properties,method:ge(),params:Ji().optional()});ze({...WF.properties,result:mce.optional(),error:ze({}).optional()});ze({title:ge(),readOnlyHint:mt(),destructiveHint:mt({default:!0}),idempotentHint:mt(),openWorldHint:mt({default:!0})}).partial().strict();var cc=class{constructor(e,t,n){this.name=e,this.config=t,this.handler=n}async call(e,t,n){var r;if((r=this.config)!=null&&r.inputSchema){let s=this.config.inputSchema.validate(e);if(!s.valid)throw new hce("InvalidParams",{method:this.name,errors:s.errors,given:e,schema:this.config.inputSchema.toJSON()},"Invalid tool parameters")}return await this.handler(e,{context:t,raw:n,text:s=>({type:"text",text:s}),json:s=>({type:"text",text:JSON.stringify(s)})})}toJSON(){var e,t,n,r,s,i,o,a,c;return{name:this.name,title:(e=this.config)==null?void 0:e.title,description:(t=this.config)==null?void 0:t.description,inputSchema:((r=(n=this.config)==null?void 0:n.inputSchema)==null?void 0:r.toJSON())??{type:"object"},outputSchema:(i=(s=this.config)==null?void 0:s.outputSchema)==null?void 0:i.toJSON(),annotations:Object.keys(((o=this.config)==null?void 0:o.annotations)??{}).length>0?(a=this.config)==null?void 0:a.annotations:void 0,_meta:(c=this.config)==null?void 0:c._meta}}};He({name:ge(),version:ge()});var pce="2025-06-18",gce=class{constructor(e){K(this,"id",1);K(this,"sessionId");this.config=e}async request(e,t){let n={jsonrpc:"2.0",id:this.id++,method:e,params:t},r=new Headers({"Content-Type":"application/json",Accept:"application/json"});this.config.headers&&Object.entries(this.config.headers).forEach(([i,o])=>{r.set(i,o)}),this.sessionId&&r.set("Mcp-Session-Id",this.sessionId);let s=await(this.config.fetch??fetch)(this.config.url,{method:"POST",headers:r,body:JSON.stringify(n)});this.sessionId||(this.sessionId=s.headers.get("Mcp-Session-Id")??void 0);try{let i=await s.json();if(i.jsonrpc!=="2.0")throw new Error("Invalid JSON-RPC version");return i.result}catch(i){throw console.error(i),i}}async connect(){return this.request("initialize",{protocolVersion:pce,capabilities:{},clientInfo:{name:this.config.name,version:this.config.version}})}async ping(){return this.request("ping",{})}async setLoggingLevel(e){return this.request("logging/setLevel",{level:e})}async listResources(){return this.request("resources/list",{})}async listResourceTemplates(){return this.request("resources/templates/list",{})}async readResource(e){return this.request("resources/read",e)}async callTool(e){return this.request("tools/call",e)}async listTools(){return this.request("tools/list",{})}},yce=Symbol("mcp-feature"),ws=(e,t={})=>Object.assign(async(n,r)=>{await r()},{[yce]:{type:"tool",tool:{name:e,config:t}}});class bce extends RF{}const $g=e=>new bce(e),vce=e=>e,td=ge({pattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",minLength:2,maxLength:150});class S1 extends Error{constructor(t,n,r=[]){super(`Invalid schema given for ${JSON.stringify(n,null,2)}

Error: ${JSON.stringify(r[0],null,2)}`),this.schema=t,this.value=n,this.errors=r}first(){return this.errors[0]}firstToString(){const t=this.first();return`${t.error} at ${t.instanceLocation}`}}const GF=e=>{const t=e.toJSON();return xa(t)};function Un(e,t,n){const r=n!=null&&n.clone?GF(e):e;let s=(n==null?void 0:n.coerce)!==!1?r.coerce(t,{dropUnknown:(n==null?void 0:n.coerceDropUnknown)??!1}):t;(n==null?void 0:n.withDefaults)!==!1&&(s=r.template(s,{withOptional:!0,withExtendedOptional:(n==null?void 0:n.withExtendedDefaults)??!1}));const i=e.validate(s,{shortCircuit:!0,ignoreUnsupported:!0});if(!i.valid)if(n!=null&&n.onError)n.onError(i.errors);else throw new S1(r,t,i.errors);return s}let As=class extends Error{constructor(n,r){super(n);K(this,"code",gn.BAD_REQUEST);K(this,"name","Exception");K(this,"_context");r&&(this.code=r)}context(n){return this._context=n,this}toJSON(){return{error:this.message,type:this.name,context:this._context}}};class Lf extends Error{constructor(t,n,r){super(t),this.details=n,this.type=r}static with(t,n,r){throw new Lf(t,n,r)}toJSON(){return{type:this.type??"unknown",message:this.message,details:this.details}}}class lr{constructor(t){this.name=t,this.name=t}toJSON(){return{name:this.name}}}class a6{constructor(t,n){this.permission=t,this.config=n}}class hx{constructor(t,n=[],r=!1,s=!1){this.name=t,this.permissions=n,this.is_default=r,this.implicit_allow=s}static createWithPermissionNames(t,n,r=!1,s=!1){return new hx(t,n.map(i=>new a6(new lr(i))),r,s)}static create(t){var n;return new hx(t.name,((n=t.permissions)==null?void 0:n.map(r=>new a6(new lr(r))))??[],t.is_default,t.implicit_allow)}}var oC;let Hr=(oC=class{constructor(t){K(this,"_returning");K(this,"params");K(this,"returned",!1);this.params=t}validate(t){throw new xce(this,t)}clone(t){const n=new this.constructor(t);return n.returned=!0,n}},K(oC,"slug","untitled-event"),oC);class E1 extends Error{constructor(t,n){super(`Expected "${t}", got "${n}"`)}}class xce extends Error{constructor(t,n){super(`Event "${t.constructor.slug}" returned without validation`),this.data=n}}class wce{constructor(t,n,r="async",s){K(this,"mode","async");K(this,"event");K(this,"handler");K(this,"once",!1);K(this,"id");this.event=t,this.handler=n,this.mode=r,this.id=s}}class Fy{constructor(t,n){K(this,"events",[]);K(this,"listeners",[]);K(this,"enabled",!0);K(this,"asyncs",[]);var r;this.options=n,t&&this.registerEvents(t),(r=n==null?void 0:n.listeners)==null||r.forEach(s=>this.addListener(s))}enable(){return this.enabled=!0,this}disable(){return this.enabled=!1,this}clearEvents(){return this.events=[],this}clearAll(){return this.clearEvents(),this.listeners=[],this}getListeners(){return[...this.listeners]}get Events(){return new Proxy(this,{get:(t,n)=>this.events.find(r=>r.slug===n)})}eventExists(t){var r;let n;return typeof t=="string"?n=t:n=((r=t.constructor)==null?void 0:r.slug)??t.slug,!!this.events.find(s=>n===s.slug)}throwIfEventNotRegistered(t){var n;if(!this.eventExists(t)){const r=((n=t.constructor)==null?void 0:n.slug)??t.slug??t;throw new Error(`Event "${r}" not registered`)}}registerEvent(t,n=!1){if(this.eventExists(t)){if(n)return this;throw new Error(`Event "${t.name}" already registered.`)}return this.events.push(t),this}registerEvents(t){return(typeof t=="object"?Object.values(t):t).forEach(r=>this.registerEvent(r,!0)),this}addListener(t){return this.throwIfEventNotRegistered(t.event),t.id&&this.listeners.find(r=>r.id===t.id)?(pt.debug(`Listener with id "${t.id}" already exists.`),this):(this.listeners.push(t),this)}createEventListener(t,n,r="async"){const s=typeof t=="string"?this.events.find(a=>a.slug===t):t,i=typeof r=="string"?{mode:r}:r,o=new wce(s,n,i.mode);i.once&&(o.once=!0),i.id&&(o.id=`${s.slug}-${i.id}`),this.addListener(o)}onEvent(t,n,r){this.createEventListener(t,n,r)}on(t,n,r){this.createEventListener(t,n,r)}onAny(t,n){this.events.forEach(r=>this.onEvent(r,t,n))}collectAsyncs(t){this.asyncs.push(...t)}async executeAsyncs(t=n=>Promise.all(n)){if(this.asyncs.length===0)return;const n=[...this.asyncs];this.asyncs=[],await t(n.map(r=>r()))}async emit(t){var o,a,c;const n=t.constructor.slug;if(!this.enabled)return pt.debug("EventManager disabled, not emitting",n),t;if(!this.eventExists(t))throw new Error(`Event "${n}" not registered`);const r=[],s=[];this.listeners=this.listeners.filter(u=>u.event.slug!==n?!0:(u.mode==="sync"?r.push(u):s.push(async()=>await u.handler(t,u.event.slug)),!u.once)),this.collectAsyncs(s);let i=t;for(const u of r)try{const f=await u.handler(i,u.event.slug);if(typeof f<"u"){const h=i.validate(f);if(h&&h.constructor.slug===n){if(!h.returned)throw new Error(`Returned event ${h.constructor.slug} must be marked as returned.`);i=h}}}catch(f){if(f instanceof E1)(a=(o=this.options)==null?void 0:o.onInvalidReturn)==null||a.call(o,i,f),pt.warn(`Invalid return of event listener for "${n}": ${f.message}`);else if((c=this.options)!=null&&c.onError)this.options.onError(i,f);else throw f}return i}}function mx(e){return typeof e>"u"||e===void 0}function To(e){return typeof e=="string"}function fT(e){return typeof e=="number"}function YF(e){return typeof e=="boolean"}function JF(e){return e===null}function XF(e){return typeof e=="bigint"}function yd(e){return typeof e=="function"}function N1(e){return typeof e=="object"&&e!==null}function Z(e){return Object.freeze(e)}function Hb(e){return Sc(e)?e:[e]}function Sc(e){return Array.isArray(e)}const Ts=Z({is(e){return e.kind==="IdentifierNode"},create(e){return Z({kind:"IdentifierNode",name:e})}}),IC=Z({is(e){return e.kind==="SchemableIdentifierNode"},create(e){return Z({kind:"SchemableIdentifierNode",identifier:Ts.create(e)})},createWithSchema(e,t){return Z({kind:"SchemableIdentifierNode",schema:Ts.create(e),identifier:Ts.create(t)})}}),Dc=Z({is(e){return e.kind==="AliasNode"},create(e,t){return Z({kind:"AliasNode",node:e,alias:t})}}),uc=Z({is(e){return e.kind==="TableNode"},create(e){return Z({kind:"TableNode",table:IC.create(e)})},createWithSchema(e,t){return Z({kind:"TableNode",table:IC.createWithSchema(e,t)})}});function yi(e){return N1(e)&&yd(e.toOperationNode)}function Sce(e){return N1(e)&&"expressionType"in e&&yi(e)}function Ece(e){return N1(e)&&"expression"in e&&To(e.alias)&&yi(e)}const ia=Z({is(e){return e.kind==="SelectModifierNode"},create(e,t){return Z({kind:"SelectModifierNode",modifier:e,of:t})},createWithExpression(e){return Z({kind:"SelectModifierNode",rawModifier:e})}}),Ec=Z({is(e){return e.kind==="AndNode"},create(e,t){return Z({kind:"AndNode",left:e,right:t})}}),um=Z({is(e){return e.kind==="OrNode"},create(e,t){return Z({kind:"OrNode",left:e,right:t})}}),TN=Z({is(e){return e.kind==="OnNode"},create(e){return Z({kind:"OnNode",on:e})},cloneWithOperation(e,t,n){return Z({...e,on:t==="And"?Ec.create(e.on,n):um.create(e.on,n)})}}),ng=Z({is(e){return e.kind==="JoinNode"},create(e,t){return Z({kind:"JoinNode",joinType:e,table:t,on:void 0})},createWithOn(e,t,n){return Z({kind:"JoinNode",joinType:e,table:t,on:TN.create(n)})},cloneWithOn(e,t){return Z({...e,on:e.on?TN.cloneWithOperation(e.on,"And",t):TN.create(t)})}}),jh=Z({is(e){return e.kind==="BinaryOperationNode"},create(e,t,n){return Z({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:n})}}),Nce=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],_ce=["+","-","*","/","%","^","&","|","#","<<",">>"],KF=["->","->>"],Cce=[...Nce,..._ce,"&&","||"],Oce=["exists","not exists"],jce=["not","-",...Oce],Ace=[...Cce,...KF,...jce,"between","between symmetric"],nd=Z({is(e){return e.kind==="OperatorNode"},create(e){return Z({kind:"OperatorNode",operator:e})}});function l6(e){return To(e)&&KF.includes(e)}const hT=Z({is(e){return e.kind==="ColumnNode"},create(e){return Z({kind:"ColumnNode",column:Ts.create(e)})}}),QF=Z({is(e){return e.kind==="SelectAllNode"},create(){return Z({kind:"SelectAllNode"})}}),_1=Z({is(e){return e.kind==="ReferenceNode"},create(e,t){return Z({kind:"ReferenceNode",table:t,column:e})},createSelectAll(e){return Z({kind:"ReferenceNode",table:e,column:QF.create()})}});function ZF(e){return N1(e)&&yi(e)&&To(e.dynamicReference)}const PC=Z({is(e){return e.kind==="OrderByItemNode"},create(e,t){return Z({kind:"OrderByItemNode",orderBy:e,direction:t})}}),Es=Z({is(e){return e.kind==="RawNode"},create(e,t){return Z({kind:"RawNode",sqlFragments:Z(e),parameters:Z(t)})},createWithSql(e){return Es.create([e],[])},createWithChild(e){return Es.create(["",""],[e])},createWithChildren(e){return Es.create(new Array(e.length+1).fill(""),e)}});function Tce(e){return e==="asc"||e==="desc"}function mT(e){if(e.length===2)return[$N(e[0],e[1])];if(e.length===1){const[t]=e;return Array.isArray(t)?t.map(n=>$N(n)):[$N(t)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function $N(e,t){const n=$ce(e);if(PC.is(n)){if(t)throw new Error("Cannot specify direction twice!");return n}return PC.create(n,eB(t))}function $ce(e){if(A1(e))return j1(e);if(ZF(e))return e.toOperationNode();const[t,n]=e.split(" ");if(n){if(!Tce(n))throw new Error(`Invalid order by direction: ${n}`);return PC.create(Nc(t),eB(n))}return Nc(e)}function eB(e){if(e)return e==="asc"||e==="desc"?Es.createWithSql(e):e.toOperationNode()}const px=Z({is(e){return e.kind==="JSONReferenceNode"},create(e,t){return Z({kind:"JSONReferenceNode",reference:e,traversal:t})},cloneWithTraversal(e,t){return Z({...e,traversal:t})}}),tB=Z({is(e){return e.kind==="JSONOperatorChainNode"},create(e){return Z({kind:"JSONOperatorChainNode",operator:e,values:Z([])})},cloneWithValue(e,t){return Z({...e,values:Z([...e.values,t])})}}),rg=Z({is(e){return e.kind==="JSONPathNode"},create(e){return Z({kind:"JSONPathNode",inOperator:e,pathLegs:Z([])})},cloneWithLeg(e,t){return Z({...e,pathLegs:Z([...e.pathLegs,t])})}});function Rce(e){return To(e)?Nc(e):e.toOperationNode()}function Rg(e){return Sc(e)?e.map(t=>Zs(t)):[Zs(e)]}function Zs(e){return A1(e)?j1(e):Rce(e)}function kce(e,t){const n=Nc(e);if(l6(t))return px.create(n,tB.create(nd.create(t)));const r=t.slice(0,-1);if(l6(r))return px.create(n,rg.create(nd.create(r)));throw new Error(`Invalid JSON operator: ${t}`)}function Nc(e){const t=".";if(!e.includes(t))return _1.create(hT.create(e));const n=e.split(t).map(nB);if(n.length===3)return Ice(n);if(n.length===2)return Pce(n);throw new Error(`invalid column reference ${e}`)}function Mce(e){const t=" as ";if(e.includes(t)){const[n,r]=e.split(t).map(nB);return Dc.create(Nc(n),Ts.create(r))}else return Nc(e)}function Ice(e){const[t,n,r]=e;return _1.create(hT.create(r),uc.createWithSchema(t,n))}function Pce(e){const[t,n]=e;return _1.create(hT.create(n),uc.create(t))}function nB(e){return e.trim()}const Dce=Z({is(e){return e.kind==="PrimitiveValueListNode"},create(e){return Z({kind:"PrimitiveValueListNode",values:Z([...e])})}}),Lce=Z({is(e){return e.kind==="ValueListNode"},create(e){return Z({kind:"ValueListNode",values:Z(e)})}}),_c=Z({is(e){return e.kind==="ValueNode"},create(e){return Z({kind:"ValueNode",value:e})},createImmediate(e){return Z({kind:"ValueNode",value:e,immediate:!0})}});function Fce(e){return Sc(e)?Bce(e):Br(e)}function Br(e){return A1(e)?j1(e):_c.create(e)}function pT(e){return fT(e)||YF(e)||JF(e)}function gT(e){if(!pT(e))throw new Error(`unsafe immediate value ${JSON.stringify(e)}`);return _c.createImmediate(e)}function Bce(e){return e.some(A1)?Lce.create(e.map(t=>Br(t))):Dce.create(e)}const kg=Z({is(e){return e.kind==="ParensNode"},create(e){return Z({kind:"ParensNode",node:e})}});function Xi(e){if(e.length===3)return yT(e[0],e[1],e[2]);if(e.length===1)return Br(e[0]);throw new Error(`invalid arguments: ${JSON.stringify(e)}`)}function yT(e,t,n){return zce(t)&&rB(n)?jh.create(Zs(e),LC(t),_c.createImmediate(n)):jh.create(Zs(e),LC(t),Fce(n))}function Mg(e,t,n){return jh.create(Zs(e),LC(t),Zs(n))}function c6(e,t){return DC(Object.entries(e).filter(([,n])=>!mx(n)).map(([n,r])=>yT(n,rB(r)?"is":"=",r)),t)}function DC(e,t,n=!0){const r=t==="and"?Ec.create:um.create;if(e.length===0)return jh.create(_c.createImmediate(1),nd.create("="),_c.createImmediate(t==="and"?1:0));let s=u6(e[0]);for(let i=1;i<e.length;++i)s=r(s,u6(e[i]));return e.length>1&&n?kg.create(s):s}function zce(e){return e==="is"||e==="is not"}function rB(e){return JF(e)||YF(e)}function LC(e){if(To(e)&&Ace.includes(e))return nd.create(e);if(yi(e))return e.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(e)}`)}function u6(e){return yi(e)?e.toOperationNode():e}const Cc=Z({is(e){return e.kind==="OrderByNode"},create(e){return Z({kind:"OrderByNode",items:Z([...e])})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),d6=Z({is(e){return e.kind==="PartitionByNode"},create(e){return Z({kind:"PartitionByNode",items:Z(e)})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),FC=Z({is(e){return e.kind==="OverNode"},create(){return Z({kind:"OverNode"})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithPartitionByItems(e,t){return Z({...e,partitionBy:e.partitionBy?d6.cloneWithItems(e.partitionBy,t):d6.create(t)})}}),gx=Z({is(e){return e.kind==="FromNode"},create(e){return Z({kind:"FromNode",froms:Z(e)})},cloneWithFroms(e,t){return Z({...e,froms:Z([...e.froms,...t])})}}),f6=Z({is(e){return e.kind==="GroupByNode"},create(e){return Z({kind:"GroupByNode",items:Z(e)})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),h6=Z({is(e){return e.kind==="HavingNode"},create(e){return Z({kind:"HavingNode",having:e})},cloneWithOperation(e,t,n){return Z({...e,having:t==="And"?Ec.create(e.having,n):um.create(e.having,n)})}}),ln=Z({is(e){return e.kind==="SelectQueryNode"},create(e){return Z({kind:"SelectQueryNode",...e&&{with:e}})},createFrom(e,t){return Z({kind:"SelectQueryNode",from:gx.create(e),...t&&{with:t}})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})},cloneWithDistinctOn(e,t){return Z({...e,distinctOn:e.distinctOn?Z([...e.distinctOn,...t]):Z(t)})},cloneWithFrontModifier(e,t){return Z({...e,frontModifiers:e.frontModifiers?Z([...e.frontModifiers,t]):Z([t])})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithGroupByItems(e,t){return Z({...e,groupBy:e.groupBy?f6.cloneWithItems(e.groupBy,t):f6.create(t)})},cloneWithLimit(e,t){return Z({...e,limit:t})},cloneWithOffset(e,t){return Z({...e,offset:t})},cloneWithFetch(e,t){return Z({...e,fetch:t})},cloneWithHaving(e,t){return Z({...e,having:e.having?h6.cloneWithOperation(e.having,"And",t):h6.create(t)})},cloneWithSetOperations(e,t){return Z({...e,setOperations:e.setOperations?Z([...e.setOperations,...t]):Z([...t])})},cloneWithoutSelections(e){return Z({...e,selections:[]})},cloneWithoutLimit(e){return Z({...e,limit:void 0})},cloneWithoutOffset(e){return Z({...e,offset:void 0})},cloneWithoutOrderBy(e){return Z({...e,orderBy:void 0})},cloneWithoutGroupBy(e){return Z({...e,groupBy:void 0})}});function bd(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw new Error(t)}}})}var Ti,vc;let sB=(vc=class{constructor(t){Fe(this,Ti);Be(this,Ti,Z(t))}on(...t){return new vc({...Y(this,Ti),joinNode:ng.cloneWithOn(Y(this,Ti).joinNode,Xi(t))})}onRef(t,n,r){return new vc({...Y(this,Ti),joinNode:ng.cloneWithOn(Y(this,Ti).joinNode,Mg(t,n,r))})}onTrue(){return new vc({...Y(this,Ti),joinNode:ng.cloneWithOn(Y(this,Ti).joinNode,Es.createWithSql("true"))})}$call(t){return t(this)}toOperationNode(){return Y(this,Ti).joinNode}},Ti=new WeakMap,vc);bd(sB,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Vce=Z({is(e){return e.kind==="PartitionByItemNode"},create(e){return Z({kind:"PartitionByItemNode",partitionBy:e})}});function Uce(e){return Rg(e).map(Vce.create)}var Ru;const Cw=class Cw{constructor(t){Fe(this,Ru);Be(this,Ru,Z(t))}orderBy(t,n){return new Cw({overNode:FC.cloneWithOrderByItems(Y(this,Ru).overNode,mT([t,n]))})}partitionBy(t){return new Cw({overNode:FC.cloneWithPartitionByItems(Y(this,Ru).overNode,Uce(t))})}$call(t){return t(this)}toOperationNode(){return Y(this,Ru).overNode}};Ru=new WeakMap;let yx=Cw;bd(yx,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const sg=Z({is(e){return e.kind==="SelectionNode"},create(e){return Z({kind:"SelectionNode",selection:e})},createSelectAll(){return Z({kind:"SelectionNode",selection:QF.create()})},createSelectAllFromTable(e){return Z({kind:"SelectionNode",selection:_1.createSelectAll(e)})}});function iB(e){return yd(e)?iB(e(O1())):Sc(e)?e.map(t=>m6(t)):[m6(e)]}function m6(e){return To(e)?sg.create(Mce(e)):ZF(e)?sg.create(e.toOperationNode()):sg.create(mB(e))}function oB(e){return e?Array.isArray(e)?e.map(p6):[p6(e)]:[sg.createSelectAll()]}function p6(e){if(To(e))return sg.createSelectAllFromTable(zi(e));throw new Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}const qce=Z({is(e){return e.kind==="InsertQueryNode"},create(e,t,n){return Z({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:n})},createWithoutInto(){return Z({kind:"InsertQueryNode"})},cloneWith(e,t){return Z({...e,...t})}}),Hce=Z({is(e){return e.kind==="UpdateQueryNode"},create(e,t){return Z({kind:"UpdateQueryNode",table:e,...t&&{with:t}})},createWithoutTable(){return Z({kind:"UpdateQueryNode"})},cloneWithFromItems(e,t){return Z({...e,from:e.from?gx.cloneWithFroms(e.from,t):gx.create(t)})},cloneWithUpdates(e,t){return Z({...e,updates:e.updates?Z([...e.updates,...t]):t})},cloneWithLimit(e,t){return Z({...e,limit:t})}}),g6=Z({is(e){return e.kind==="UsingNode"},create(e){return Z({kind:"UsingNode",tables:Z(e)})},cloneWithTables(e,t){return Z({...e,tables:Z([...e.tables,...t])})}}),Wce=Z({is(e){return e.kind==="DeleteQueryNode"},create(e,t){return Z({kind:"DeleteQueryNode",from:gx.create(e),...t&&{with:t}})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithoutOrderBy(e){return Z({...e,orderBy:void 0})},cloneWithLimit(e,t){return Z({...e,limit:t})},cloneWithoutLimit(e){return Z({...e,limit:void 0})},cloneWithUsing(e,t){return Z({...e,using:e.using!==void 0?g6.cloneWithTables(e.using,t):g6.create(t)})}}),Ff=Z({is(e){return e.kind==="WhereNode"},create(e){return Z({kind:"WhereNode",where:e})},cloneWithOperation(e,t,n){return Z({...e,where:t==="And"?Ec.create(e.where,n):um.create(e.where,n)})}}),y6=Z({is(e){return e.kind==="ReturningNode"},create(e){return Z({kind:"ReturningNode",selections:Z(e)})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})}}),Gce=Z({is(e){return e.kind==="ExplainNode"},create(e,t){return Z({kind:"ExplainNode",format:e,options:t})}}),C1=Z({is(e){return e.kind==="WhenNode"},create(e){return Z({kind:"WhenNode",condition:e})},cloneWithResult(e,t){return Z({...e,result:t})}}),Yce=Z({is(e){return e.kind==="MergeQueryNode"},create(e,t){return Z({kind:"MergeQueryNode",into:e,...t&&{with:t}})},cloneWithUsing(e,t){return Z({...e,using:t})},cloneWithWhen(e,t){return Z({...e,whens:e.whens?Z([...e.whens,t]):Z([t])})},cloneWithThen(e,t){return Z({...e,whens:e.whens?Z([...e.whens.slice(0,-1),C1.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})}}),b6=Z({is(e){return e.kind==="OutputNode"},create(e){return Z({kind:"OutputNode",selections:Z(e)})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})}}),sr=Z({is(e){return ln.is(e)||qce.is(e)||Hce.is(e)||Wce.is(e)||Yce.is(e)},cloneWithEndModifier(e,t){return Z({...e,endModifiers:e.endModifiers?Z([...e.endModifiers,t]):Z([t])})},cloneWithWhere(e,t){return Z({...e,where:e.where?Ff.cloneWithOperation(e.where,"And",t):Ff.create(t)})},cloneWithJoin(e,t){return Z({...e,joins:e.joins?Z([...e.joins,t]):Z([t])})},cloneWithReturning(e,t){return Z({...e,returning:e.returning?y6.cloneWithSelections(e.returning,t):y6.create(t)})},cloneWithoutReturning(e){return Z({...e,returning:void 0})},cloneWithoutWhere(e){return Z({...e,where:void 0})},cloneWithExplain(e,t,n){return Z({...e,explain:Gce.create(t,n==null?void 0:n.toOperationNode())})},cloneWithTop(e,t){return Z({...e,top:t})},cloneWithOutput(e,t){return Z({...e,output:e.output?b6.cloneWithSelections(e.output,t):b6.create(t)})}});class Jce extends Error{constructor(n){super("no result");K(this,"node");this.node=n}}function Xce(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}const Kce=Z({is(e){return e.kind==="TopNode"},create(e,t){return Z({kind:"TopNode",expression:e,modifiers:t})}});function Qce(e,t){if(!fT(e)&&!XF(e))throw new Error(`Invalid top expression: ${e}`);if(!mx(t)&&!Zce(t))throw new Error(`Invalid top modifiers: ${t}`);return Kce.create(e,t)}function Zce(e){return e==="percent"||e==="with ties"||e==="percent with ties"}const eue=Z({is(e){return e.kind==="LimitNode"},create(e){return Z({kind:"LimitNode",limit:e})}}),v6=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function tue(e){let t="";for(let n=0;n<e;++n)t+=nue();return t}function nue(){return v6[~~(Math.random()*v6.length)]}function ca(){return new rue}var nh;class rue{constructor(){Fe(this,nh)}get queryId(){return Y(this,nh)===void 0&&Be(this,nh,tue(8)),Y(this,nh)}}nh=new WeakMap;var Ow;class sue{constructor(){K(this,"nodeStack",[]);Fe(this,Ow,Z({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)}))}transformNode(t){if(!t)return t;this.nodeStack.push(t);const n=this.transformNodeImpl(t);return this.nodeStack.pop(),Z(n)}transformNodeImpl(t){return Y(this,Ow)[t.kind](t)}transformNodeList(t){return t&&Z(t.map(n=>this.transformNode(n)))}transformSelectQuery(t){return{kind:"SelectQueryNode",from:this.transformNode(t.from),selections:this.transformNodeList(t.selections),distinctOn:this.transformNodeList(t.distinctOn),joins:this.transformNodeList(t.joins),groupBy:this.transformNode(t.groupBy),orderBy:this.transformNode(t.orderBy),where:this.transformNode(t.where),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),limit:this.transformNode(t.limit),offset:this.transformNode(t.offset),with:this.transformNode(t.with),having:this.transformNode(t.having),explain:this.transformNode(t.explain),setOperations:this.transformNodeList(t.setOperations),fetch:this.transformNode(t.fetch),top:this.transformNode(t.top)}}transformSelection(t){return{kind:"SelectionNode",selection:this.transformNode(t.selection)}}transformColumn(t){return{kind:"ColumnNode",column:this.transformNode(t.column)}}transformAlias(t){return{kind:"AliasNode",node:this.transformNode(t.node),alias:this.transformNode(t.alias)}}transformTable(t){return{kind:"TableNode",table:this.transformNode(t.table)}}transformFrom(t){return{kind:"FromNode",froms:this.transformNodeList(t.froms)}}transformReference(t){return{kind:"ReferenceNode",column:this.transformNode(t.column),table:this.transformNode(t.table)}}transformAnd(t){return{kind:"AndNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformOr(t){return{kind:"OrNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformValueList(t){return{kind:"ValueListNode",values:this.transformNodeList(t.values)}}transformParens(t){return{kind:"ParensNode",node:this.transformNode(t.node)}}transformJoin(t){return{kind:"JoinNode",joinType:t.joinType,table:this.transformNode(t.table),on:this.transformNode(t.on)}}transformRaw(t){return{kind:"RawNode",sqlFragments:Z([...t.sqlFragments]),parameters:this.transformNodeList(t.parameters)}}transformWhere(t){return{kind:"WhereNode",where:this.transformNode(t.where)}}transformInsertQuery(t){return{kind:"InsertQueryNode",into:this.transformNode(t.into),columns:this.transformNodeList(t.columns),values:this.transformNode(t.values),returning:this.transformNode(t.returning),onConflict:this.transformNode(t.onConflict),onDuplicateKey:this.transformNode(t.onDuplicateKey),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),ignore:t.ignore,replace:t.replace,explain:this.transformNode(t.explain),defaultValues:t.defaultValues,top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformValues(t){return{kind:"ValuesNode",values:this.transformNodeList(t.values)}}transformDeleteQuery(t){return{kind:"DeleteQueryNode",from:this.transformNode(t.from),using:this.transformNode(t.using),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),orderBy:this.transformNode(t.orderBy),limit:this.transformNode(t.limit),explain:this.transformNode(t.explain),top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformReturning(t){return{kind:"ReturningNode",selections:this.transformNodeList(t.selections)}}transformCreateTable(t){return{kind:"CreateTableNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),constraints:this.transformNodeList(t.constraints),temporary:t.temporary,ifNotExists:t.ifNotExists,onCommit:t.onCommit,frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),selectQuery:this.transformNode(t.selectQuery)}}transformColumnDefinition(t){return{kind:"ColumnDefinitionNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),references:this.transformNode(t.references),primaryKey:t.primaryKey,autoIncrement:t.autoIncrement,unique:t.unique,notNull:t.notNull,unsigned:t.unsigned,defaultTo:this.transformNode(t.defaultTo),check:this.transformNode(t.check),generated:this.transformNode(t.generated),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),nullsNotDistinct:t.nullsNotDistinct,identity:t.identity,ifNotExists:t.ifNotExists}}transformAddColumn(t){return{kind:"AddColumnNode",column:this.transformNode(t.column)}}transformDropTable(t){return{kind:"DropTableNode",table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformOrderBy(t){return{kind:"OrderByNode",items:this.transformNodeList(t.items)}}transformOrderByItem(t){return{kind:"OrderByItemNode",orderBy:this.transformNode(t.orderBy),direction:this.transformNode(t.direction)}}transformGroupBy(t){return{kind:"GroupByNode",items:this.transformNodeList(t.items)}}transformGroupByItem(t){return{kind:"GroupByItemNode",groupBy:this.transformNode(t.groupBy)}}transformUpdateQuery(t){return{kind:"UpdateQueryNode",table:this.transformNode(t.table),from:this.transformNode(t.from),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),updates:this.transformNodeList(t.updates),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),explain:this.transformNode(t.explain),limit:this.transformNode(t.limit),top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformColumnUpdate(t){return{kind:"ColumnUpdateNode",column:this.transformNode(t.column),value:this.transformNode(t.value)}}transformLimit(t){return{kind:"LimitNode",limit:this.transformNode(t.limit)}}transformOffset(t){return{kind:"OffsetNode",offset:this.transformNode(t.offset)}}transformOnConflict(t){return{kind:"OnConflictNode",columns:this.transformNodeList(t.columns),constraint:this.transformNode(t.constraint),indexExpression:this.transformNode(t.indexExpression),indexWhere:this.transformNode(t.indexWhere),updates:this.transformNodeList(t.updates),updateWhere:this.transformNode(t.updateWhere),doNothing:t.doNothing}}transformOnDuplicateKey(t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(t.updates)}}transformCreateIndex(t){return{kind:"CreateIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists,where:this.transformNode(t.where),nullsNotDistinct:t.nullsNotDistinct}}transformList(t){return{kind:"ListNode",items:this.transformNodeList(t.items)}}transformDropIndex(t){return{kind:"DropIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformPrimaryKeyConstraint(t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformUniqueConstraint(t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name),nullsNotDistinct:t.nullsNotDistinct}}transformForeignKeyConstraint(t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(t.columns),references:this.transformNode(t.references),name:this.transformNode(t.name),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformSetOperation(t){return{kind:"SetOperationNode",operator:t.operator,expression:this.transformNode(t.expression),all:t.all}}transformReferences(t){return{kind:"ReferencesNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformCheckConstraint(t){return{kind:"CheckConstraintNode",expression:this.transformNode(t.expression),name:this.transformNode(t.name)}}transformWith(t){return{kind:"WithNode",expressions:this.transformNodeList(t.expressions),recursive:t.recursive}}transformCommonTableExpression(t){return{kind:"CommonTableExpressionNode",name:this.transformNode(t.name),materialized:t.materialized,expression:this.transformNode(t.expression)}}transformCommonTableExpressionName(t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns)}}transformHaving(t){return{kind:"HavingNode",having:this.transformNode(t.having)}}transformCreateSchema(t){return{kind:"CreateSchemaNode",schema:this.transformNode(t.schema),ifNotExists:t.ifNotExists}}transformDropSchema(t){return{kind:"DropSchemaNode",schema:this.transformNode(t.schema),ifExists:t.ifExists,cascade:t.cascade}}transformAlterTable(t){return{kind:"AlterTableNode",table:this.transformNode(t.table),renameTo:this.transformNode(t.renameTo),setSchema:this.transformNode(t.setSchema),columnAlterations:this.transformNodeList(t.columnAlterations),addConstraint:this.transformNode(t.addConstraint),dropConstraint:this.transformNode(t.dropConstraint),addIndex:this.transformNode(t.addIndex),dropIndex:this.transformNode(t.dropIndex)}}transformDropColumn(t){return{kind:"DropColumnNode",column:this.transformNode(t.column)}}transformRenameColumn(t){return{kind:"RenameColumnNode",column:this.transformNode(t.column),renameTo:this.transformNode(t.renameTo)}}transformAlterColumn(t){return{kind:"AlterColumnNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),dataTypeExpression:this.transformNode(t.dataTypeExpression),setDefault:this.transformNode(t.setDefault),dropDefault:t.dropDefault,setNotNull:t.setNotNull,dropNotNull:t.dropNotNull}}transformModifyColumn(t){return{kind:"ModifyColumnNode",column:this.transformNode(t.column)}}transformAddConstraint(t){return{kind:"AddConstraintNode",constraint:this.transformNode(t.constraint)}}transformDropConstraint(t){return{kind:"DropConstraintNode",constraintName:this.transformNode(t.constraintName),ifExists:t.ifExists,modifier:t.modifier}}transformCreateView(t){return{kind:"CreateViewNode",name:this.transformNode(t.name),temporary:t.temporary,orReplace:t.orReplace,ifNotExists:t.ifNotExists,materialized:t.materialized,columns:this.transformNodeList(t.columns),as:this.transformNode(t.as)}}transformDropView(t){return{kind:"DropViewNode",name:this.transformNode(t.name),ifExists:t.ifExists,materialized:t.materialized,cascade:t.cascade}}transformGenerated(t){return{kind:"GeneratedNode",byDefault:t.byDefault,always:t.always,identity:t.identity,stored:t.stored,expression:this.transformNode(t.expression)}}transformDefaultValue(t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(t.defaultValue)}}transformOn(t){return{kind:"OnNode",on:this.transformNode(t.on)}}transformSelectModifier(t){return{kind:"SelectModifierNode",modifier:t.modifier,rawModifier:this.transformNode(t.rawModifier),of:this.transformNodeList(t.of)}}transformCreateType(t){return{kind:"CreateTypeNode",name:this.transformNode(t.name),enum:this.transformNode(t.enum)}}transformDropType(t){return{kind:"DropTypeNode",name:this.transformNode(t.name),ifExists:t.ifExists}}transformExplain(t){return{kind:"ExplainNode",format:t.format,options:this.transformNode(t.options)}}transformSchemableIdentifier(t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(t.schema),identifier:this.transformNode(t.identifier)}}transformAggregateFunction(t){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(t.aggregated),distinct:t.distinct,orderBy:this.transformNode(t.orderBy),filter:this.transformNode(t.filter),func:t.func,over:this.transformNode(t.over)}}transformOver(t){return{kind:"OverNode",orderBy:this.transformNode(t.orderBy),partitionBy:this.transformNode(t.partitionBy)}}transformPartitionBy(t){return{kind:"PartitionByNode",items:this.transformNodeList(t.items)}}transformPartitionByItem(t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(t.partitionBy)}}transformBinaryOperation(t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(t.leftOperand),operator:this.transformNode(t.operator),rightOperand:this.transformNode(t.rightOperand)}}transformUnaryOperation(t){return{kind:"UnaryOperationNode",operator:this.transformNode(t.operator),operand:this.transformNode(t.operand)}}transformUsing(t){return{kind:"UsingNode",tables:this.transformNodeList(t.tables)}}transformFunction(t){return{kind:"FunctionNode",func:t.func,arguments:this.transformNodeList(t.arguments)}}transformCase(t){return{kind:"CaseNode",value:this.transformNode(t.value),when:this.transformNodeList(t.when),else:this.transformNode(t.else),isStatement:t.isStatement}}transformWhen(t){return{kind:"WhenNode",condition:this.transformNode(t.condition),result:this.transformNode(t.result)}}transformJSONReference(t){return{kind:"JSONReferenceNode",reference:this.transformNode(t.reference),traversal:this.transformNode(t.traversal)}}transformJSONPath(t){return{kind:"JSONPathNode",inOperator:this.transformNode(t.inOperator),pathLegs:this.transformNodeList(t.pathLegs)}}transformJSONPathLeg(t){return{kind:"JSONPathLegNode",type:t.type,value:t.value}}transformJSONOperatorChain(t){return{kind:"JSONOperatorChainNode",operator:this.transformNode(t.operator),values:this.transformNodeList(t.values)}}transformTuple(t){return{kind:"TupleNode",values:this.transformNodeList(t.values)}}transformMergeQuery(t){return{kind:"MergeQueryNode",into:this.transformNode(t.into),using:this.transformNode(t.using),whens:this.transformNodeList(t.whens),with:this.transformNode(t.with),top:this.transformNode(t.top),endModifiers:this.transformNodeList(t.endModifiers),output:this.transformNode(t.output)}}transformMatched(t){return{kind:"MatchedNode",not:t.not,bySource:t.bySource}}transformAddIndex(t){return{kind:"AddIndexNode",name:this.transformNode(t.name),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists}}transformCast(t){return{kind:"CastNode",expression:this.transformNode(t.expression),dataType:this.transformNode(t.dataType)}}transformFetch(t){return{kind:"FetchNode",rowCount:this.transformNode(t.rowCount),modifier:t.modifier}}transformTop(t){return{kind:"TopNode",expression:t.expression,modifiers:t.modifiers}}transformOutput(t){return{kind:"OutputNode",selections:this.transformNodeList(t.selections)}}transformDataType(t){return t}transformSelectAll(t){return t}transformIdentifier(t){return t}transformValue(t){return t}transformPrimitiveValueList(t){return t}transformOperator(t){return t}transformDefaultInsertValue(t){return t}}Ow=new WeakMap;const iue=Z({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),oue={json_agg:!0,to_json:!0};var rh,ku,Mu,Cn,BC,aB,lB,cB,kf,zC,uB;class aue extends sue{constructor(n){super();Fe(this,Cn);Fe(this,rh);Fe(this,ku,new Set);Fe(this,Mu,new Set);Be(this,rh,n)}transformNodeImpl(n){if(!it(this,Cn,aB).call(this,n))return super.transformNodeImpl(n);const r=it(this,Cn,cB).call(this,n);for(const o of r)Y(this,Mu).add(o);const s=it(this,Cn,lB).call(this,n);for(const o of s)Y(this,ku).add(o);const i=super.transformNodeImpl(n);for(const o of s)Y(this,ku).delete(o);for(const o of r)Y(this,Mu).delete(o);return i}transformSchemableIdentifier(n){const r=super.transformSchemableIdentifier(n);return r.schema||!Y(this,ku).has(n.identifier.name)?r:{...r,schema:Ts.create(Y(this,rh))}}transformReferences(n){const r=super.transformReferences(n);return r.table.table.schema?r:{...r,table:uc.createWithSchema(Y(this,rh),r.table.table.identifier.name)}}transformAggregateFunction(n){return{...super.transformAggregateFunction({...n,aggregated:[]}),aggregated:it(this,Cn,BC).call(this,n,"aggregated")}}transformFunction(n){return{...super.transformFunction({...n,arguments:[]}),arguments:it(this,Cn,BC).call(this,n,"arguments")}}}rh=new WeakMap,ku=new WeakMap,Mu=new WeakMap,Cn=new WeakSet,BC=function(n,r){return oue[n.func]?n[r].map(s=>!uc.is(s)||s.table.schema?this.transformNode(s):{...s,table:this.transformIdentifier(s.table.identifier)}):this.transformNodeList(n[r])},aB=function(n){return n.kind in iue},lB=function(n){const r=new Set;if("name"in n&&n.name&&IC.is(n.name)&&it(this,Cn,zC).call(this,n.name,r),"from"in n&&n.from)for(const s of n.from.froms)it(this,Cn,kf).call(this,s,r);if("into"in n&&n.into&&it(this,Cn,kf).call(this,n.into,r),"table"in n&&n.table&&it(this,Cn,kf).call(this,n.table,r),"joins"in n&&n.joins)for(const s of n.joins)it(this,Cn,kf).call(this,s.table,r);return"using"in n&&n.using&&it(this,Cn,kf).call(this,n.using,r),r},cB=function(n){const r=new Set;return"with"in n&&n.with&&it(this,Cn,uB).call(this,n.with,r),r},kf=function(n,r){const s=uc.is(n)?n:Dc.is(n)&&uc.is(n.node)?n.node:null;s&&it(this,Cn,zC).call(this,s.table,r)},zC=function(n,r){const s=n.identifier.name;!Y(this,ku).has(s)&&!Y(this,Mu).has(s)&&r.add(s)},uB=function(n,r){for(const s of n.expressions){const i=s.name.table.table.identifier.name;Y(this,Mu).has(i)||r.add(i)}};var by;class lue{constructor(t){Fe(this,by);Be(this,by,new aue(t))}transformQuery(t){return Y(this,by).transformNode(t.node)}async transformResult(t){return t.result}}by=new WeakMap;var vy,sh,ih;class x6{constructor(){Fe(this,vy);Fe(this,sh);Fe(this,ih);K(this,"resolve",t=>{Y(this,sh)&&Y(this,sh).call(this,t)});K(this,"reject",t=>{Y(this,ih)&&Y(this,ih).call(this,t)});Be(this,vy,new Promise((t,n)=>{Be(this,ih,n),Be(this,sh,t)}))}get promise(){return Y(this,vy)}}vy=new WeakMap,sh=new WeakMap,ih=new WeakMap;const w6=new Set;function cue(e){w6.has(e)||(w6.add(e),console.log(e))}const uue=Z([]);var Iu,xy,VC;class due{constructor(t=uue){Fe(this,xy);Fe(this,Iu);Be(this,Iu,t)}get plugins(){return Y(this,Iu)}transformQuery(t,n){for(const r of Y(this,Iu)){const s=r.transformQuery({node:t,queryId:n});if(s.kind===t.kind)t=s;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${t.kind}`,`but it returned a ${s.kind}`].join(" "))}return t}async executeQuery(t,n){return await this.provideConnection(async r=>{const s=await r.executeQuery(t),i=await it(this,xy,VC).call(this,s,n);return fue(s,i),i})}async*stream(t,n,r){const s=new x6,i=new x6;this.provideConnection(async a=>(s.resolve(a),await i.promise)).catch(a=>s.reject(a));const o=await s.promise;try{for await(const a of o.streamQuery(t,n))yield await it(this,xy,VC).call(this,a,r)}finally{i.resolve()}}}Iu=new WeakMap,xy=new WeakSet,VC=async function(t,n){for(const r of Y(this,Iu))t=await r.transformResult({result:t,queryId:n});return t};function fue(e,t){const{numAffectedRows:n}=e;n===void 0&&e.numUpdatedOrDeletedRows===void 0||n!==void 0&&t.numAffectedRows!==void 0||cue("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Bf extends due{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(t){return new Bf([...this.plugins,t])}withPlugins(t){return new Bf([...this.plugins,...t])}withPluginAtFront(t){return new Bf([t,...this.plugins])}withoutPlugins(){return new Bf([])}}const dB=new Bf;function hue(e,t){return new sB({joinNode:ng.create(e,xx(t))})}function mue(){return new yx({overNode:FC.create()})}function Ef(e,t){if(t.length===3)return gue(e,t[0],t[1],t[2]);if(t.length===2)return pue(e,t[0],t[1]);throw new Error("not implemented")}function pue(e,t,n){return n(hue(e,t)).toOperationNode()}function gue(e,t,n,r){return ng.createWithOn(e,xx(t),Mg(n,"=",r))}const yue=Z({is(e){return e.kind==="OffsetNode"},create(e){return Z({kind:"OffsetNode",offset:e})}}),bue=Z({is(e){return e.kind==="GroupByItemNode"},create(e){return Z({kind:"GroupByItemNode",groupBy:e})}});function vue(e){return e=yd(e)?e(O1()):e,Rg(e).map(bue.create)}const xue=Z({is(e){return e.kind==="SetOperationNode"},create(e,t,n){return Z({kind:"SetOperationNode",operator:e,expression:t,all:n})}});function Nf(e,t,n){return yd(t)&&(t=t(vT())),Sc(t)||(t=[t]),t.map(r=>xue.create(e,j1(r),n))}var ma;const jw=class jw{constructor(t){Fe(this,ma);Be(this,ma,t)}get expressionType(){}as(t){return new bT(this,t)}or(...t){return new UC(um.create(Y(this,ma),Xi(t)))}and(...t){return new qC(Ec.create(Y(this,ma),Xi(t)))}$castTo(){return new jw(Y(this,ma))}$notNull(){return new jw(Y(this,ma))}toOperationNode(){return Y(this,ma)}};ma=new WeakMap;let on=jw;var oh,Zl;class bT{constructor(t,n){Fe(this,oh);Fe(this,Zl);Be(this,oh,t),Be(this,Zl,n)}get expression(){return Y(this,oh)}get alias(){return Y(this,Zl)}toOperationNode(){return Dc.create(Y(this,oh).toOperationNode(),yi(Y(this,Zl))?Y(this,Zl).toOperationNode():Ts.create(Y(this,Zl)))}}oh=new WeakMap,Zl=new WeakMap;var Pu;const Aw=class Aw{constructor(t){Fe(this,Pu);Be(this,Pu,t)}get expressionType(){}as(t){return new bT(this,t)}or(...t){return new Aw(um.create(Y(this,Pu),Xi(t)))}$castTo(){return new Aw(Y(this,Pu))}toOperationNode(){return kg.create(Y(this,Pu))}};Pu=new WeakMap;let UC=Aw;var Du;const Tw=class Tw{constructor(t){Fe(this,Du);Be(this,Du,t)}get expressionType(){}as(t){return new bT(this,t)}and(...t){return new Tw(Ec.create(Y(this,Du),Xi(t)))}$castTo(){return new Tw(Y(this,Du))}toOperationNode(){return kg.create(Y(this,Du))}};Du=new WeakMap;let qC=Tw;const wue={is(e){return e.kind==="FetchNode"},create(e,t){return{kind:"FetchNode",rowCount:_c.create(e),modifier:t}}};function Sue(e,t){if(!fT(e)&&!XF(e))throw new Error(`Invalid fetch row count: ${e}`);if(!Eue(t))throw new Error(`Invalid fetch modifier: ${t}`);return wue.create(e,t)}function Eue(e){return e==="only"||e==="with ties"}var Te;const dt=class dt{constructor(t){Fe(this,Te);Be(this,Te,Z(t))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithWhere(Y(this,Te).queryNode,Xi(t))})}whereRef(t,n,r){return new dt({...Y(this,Te),queryNode:sr.cloneWithWhere(Y(this,Te).queryNode,Mg(t,n,r))})}having(...t){return new dt({...Y(this,Te),queryNode:ln.cloneWithHaving(Y(this,Te).queryNode,Xi(t))})}havingRef(t,n,r){return new dt({...Y(this,Te),queryNode:ln.cloneWithHaving(Y(this,Te).queryNode,Mg(t,n,r))})}select(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSelections(Y(this,Te).queryNode,iB(t))})}distinctOn(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithDistinctOn(Y(this,Te).queryNode,Rg(t))})}modifyFront(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithFrontModifier(Y(this,Te).queryNode,ia.createWithExpression(t.toOperationNode()))})}modifyEnd(t){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.createWithExpression(t.toOperationNode()))})}distinct(){return new dt({...Y(this,Te),queryNode:ln.cloneWithFrontModifier(Y(this,Te).queryNode,ia.create("Distinct"))})}forUpdate(t){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("ForUpdate",t?Hb(t).map(zi):void 0))})}forShare(t){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("ForShare",t?Hb(t).map(zi):void 0))})}forKeyShare(t){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("ForKeyShare",t?Hb(t).map(zi):void 0))})}forNoKeyUpdate(t){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("ForNoKeyUpdate",t?Hb(t).map(zi):void 0))})}skipLocked(){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("SkipLocked"))})}noWait(){return new dt({...Y(this,Te),queryNode:sr.cloneWithEndModifier(Y(this,Te).queryNode,ia.create("NoWait"))})}selectAll(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSelections(Y(this,Te).queryNode,oB(t))})}innerJoin(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("InnerJoin",t))})}leftJoin(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("LeftJoin",t))})}rightJoin(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("RightJoin",t))})}fullJoin(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("FullJoin",t))})}innerJoinLateral(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("LateralInnerJoin",t))})}leftJoinLateral(...t){return new dt({...Y(this,Te),queryNode:sr.cloneWithJoin(Y(this,Te).queryNode,Ef("LateralLeftJoin",t))})}orderBy(...t){return new dt({...Y(this,Te),queryNode:ln.cloneWithOrderByItems(Y(this,Te).queryNode,mT(t))})}groupBy(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithGroupByItems(Y(this,Te).queryNode,vue(t))})}limit(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithLimit(Y(this,Te).queryNode,eue.create(Br(t)))})}offset(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithOffset(Y(this,Te).queryNode,yue.create(Br(t)))})}fetch(t,n="only"){return new dt({...Y(this,Te),queryNode:ln.cloneWithFetch(Y(this,Te).queryNode,Sue(t,n))})}top(t,n){return new dt({...Y(this,Te),queryNode:sr.cloneWithTop(Y(this,Te).queryNode,Qce(t,n))})}union(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("union",t,!1))})}unionAll(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("union",t,!0))})}intersect(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("intersect",t,!1))})}intersectAll(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("intersect",t,!0))})}except(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("except",t,!1))})}exceptAll(t){return new dt({...Y(this,Te),queryNode:ln.cloneWithSetOperations(Y(this,Te).queryNode,Nf("except",t,!0))})}as(t){return new fB(this,t)}clearSelect(){return new dt({...Y(this,Te),queryNode:ln.cloneWithoutSelections(Y(this,Te).queryNode)})}clearWhere(){return new dt({...Y(this,Te),queryNode:sr.cloneWithoutWhere(Y(this,Te).queryNode)})}clearLimit(){return new dt({...Y(this,Te),queryNode:ln.cloneWithoutLimit(Y(this,Te).queryNode)})}clearOffset(){return new dt({...Y(this,Te),queryNode:ln.cloneWithoutOffset(Y(this,Te).queryNode)})}clearOrderBy(){return new dt({...Y(this,Te),queryNode:ln.cloneWithoutOrderBy(Y(this,Te).queryNode)})}clearGroupBy(){return new dt({...Y(this,Te),queryNode:ln.cloneWithoutGroupBy(Y(this,Te).queryNode)})}$call(t){return t(this)}$if(t,n){return t?n(this):new dt({...Y(this,Te)})}$castTo(){return new dt(Y(this,Te))}$narrowType(){return new dt(Y(this,Te))}$assertType(){return new dt(Y(this,Te))}$asTuple(){return new on(this.toOperationNode())}withPlugin(t){return new dt({...Y(this,Te),executor:Y(this,Te).executor.withPlugin(t)})}toOperationNode(){return Y(this,Te).executor.transformQuery(Y(this,Te).queryNode,Y(this,Te).queryId)}compile(){return Y(this,Te).executor.compileQuery(this.toOperationNode(),Y(this,Te).queryId)}async execute(){const t=this.compile();return(await Y(this,Te).executor.executeQuery(t,Y(this,Te).queryId)).rows}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=Jce){const n=await this.executeTakeFirst();if(n===void 0)throw Xce(t)?new t(this.toOperationNode()):t(this.toOperationNode());return n}async*stream(t=100){const n=this.compile(),r=Y(this,Te).executor.stream(n,t,Y(this,Te).queryId);for await(const s of r)yield*s.rows}async explain(t,n){return await new dt({...Y(this,Te),queryNode:sr.cloneWithExplain(Y(this,Te).queryNode,t,n)}).execute()}};Te=new WeakMap;let bx=dt;bd(bx,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function Nue(e){return new bx(e)}var ah,lh;class fB{constructor(t,n){Fe(this,ah);Fe(this,lh);Be(this,ah,t),Be(this,lh,n)}get expression(){return Y(this,ah)}get alias(){return Y(this,lh)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Dc.create(Y(this,ah).toOperationNode(),Ts.create(Y(this,lh)))}}ah=new WeakMap,lh=new WeakMap;bd(fB,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Xl=Z({is(e){return e.kind==="AggregateFunctionNode"},create(e,t=[]){return Z({kind:"AggregateFunctionNode",func:e,aggregated:t})},cloneWithDistinct(e){return Z({...e,distinct:!0})},cloneWithOrderBy(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithFilter(e,t){return Z({...e,filter:e.filter?Ff.cloneWithOperation(e.filter,"And",t):Ff.create(t)})},cloneWithOrFilter(e,t){return Z({...e,filter:e.filter?Ff.cloneWithOperation(e.filter,"Or",t):Ff.create(t)})},cloneWithOver(e,t){return Z({...e,over:t})}}),S6=Z({is(e){return e.kind==="FunctionNode"},create(e,t){return Z({kind:"FunctionNode",func:e,arguments:t})}});var pr;const fa=class fa{constructor(t){Fe(this,pr);Be(this,pr,Z(t))}get expressionType(){}as(t){return new _ue(this,t)}distinct(){return new fa({...Y(this,pr),aggregateFunctionNode:Xl.cloneWithDistinct(Y(this,pr).aggregateFunctionNode)})}orderBy(t,n){return new fa({...Y(this,pr),aggregateFunctionNode:Xl.cloneWithOrderBy(Y(this,pr).aggregateFunctionNode,mT([t,n]))})}filterWhere(...t){return new fa({...Y(this,pr),aggregateFunctionNode:Xl.cloneWithFilter(Y(this,pr).aggregateFunctionNode,Xi(t))})}filterWhereRef(t,n,r){return new fa({...Y(this,pr),aggregateFunctionNode:Xl.cloneWithFilter(Y(this,pr).aggregateFunctionNode,Mg(t,n,r))})}over(t){const n=mue();return new fa({...Y(this,pr),aggregateFunctionNode:Xl.cloneWithOver(Y(this,pr).aggregateFunctionNode,(t?t(n):n).toOperationNode())})}$call(t){return t(this)}$castTo(){return new fa(Y(this,pr))}$notNull(){return new fa(Y(this,pr))}toOperationNode(){return Y(this,pr).aggregateFunctionNode}};pr=new WeakMap;let Jf=fa;bd(Jf,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var ch,uh;class _ue{constructor(t,n){Fe(this,ch);Fe(this,uh);Be(this,ch,t),Be(this,uh,n)}get expression(){return Y(this,ch)}get alias(){return Y(this,uh)}toOperationNode(){return Dc.create(Y(this,ch).toOperationNode(),Ts.create(Y(this,uh)))}}ch=new WeakMap,uh=new WeakMap;function Cue(){const e=(n,r)=>new on(S6.create(n,Rg(r??[]))),t=(n,r)=>new Jf({aggregateFunctionNode:Xl.create(n,r?Rg(r):void 0)});return Object.assign(e,{agg:t,avg(n){return t("avg",[n])},coalesce(...n){return e("coalesce",n)},count(n){return t("count",[n])},countAll(n){return new Jf({aggregateFunctionNode:Xl.create("count",oB(n))})},max(n){return t("max",[n])},min(n){return t("min",[n])},sum(n){return t("sum",[n])},any(n){return e("any",[n])},jsonAgg(n){return new Jf({aggregateFunctionNode:Xl.create("json_agg",[To(n)?zi(n):n.toOperationNode()])})},toJson(n){return new on(S6.create("to_json",[To(n)?zi(n):n.toOperationNode()]))}})}const Oue=Z({is(e){return e.kind==="UnaryOperationNode"},create(e,t){return Z({kind:"UnaryOperationNode",operator:e,operand:t})}});function jue(e,t){return Oue.create(nd.create(e),Zs(t))}const Oa=Z({is(e){return e.kind==="CaseNode"},create(e){return Z({kind:"CaseNode",value:e})},cloneWithWhen(e,t){return Z({...e,when:Z(e.when?[...e.when,t]:[t])})},cloneWithThen(e,t){return Z({...e,when:e.when?Z([...e.when.slice(0,-1),C1.cloneWithResult(e.when[e.when.length-1],t)]):void 0})},cloneWith(e,t){return Z({...e,...t})}});var dh;class Aue{constructor(t){Fe(this,dh);Be(this,dh,Z(t))}when(...t){return new hB({...Y(this,dh),node:Oa.cloneWithWhen(Y(this,dh).node,C1.create(Xi(t)))})}}dh=new WeakMap;var fh;class hB{constructor(t){Fe(this,fh);Be(this,fh,Z(t))}then(t){return new Tue({...Y(this,fh),node:Oa.cloneWithThen(Y(this,fh).node,pT(t)?gT(t):Br(t))})}}fh=new WeakMap;var go;class Tue{constructor(t){Fe(this,go);Be(this,go,Z(t))}when(...t){return new hB({...Y(this,go),node:Oa.cloneWithWhen(Y(this,go).node,C1.create(Xi(t)))})}else(t){return new $ue({...Y(this,go),node:Oa.cloneWith(Y(this,go).node,{else:pT(t)?gT(t):Br(t)})})}end(){return new on(Oa.cloneWith(Y(this,go).node,{isStatement:!1}))}endCase(){return new on(Oa.cloneWith(Y(this,go).node,{isStatement:!0}))}}go=new WeakMap;var hh;class $ue{constructor(t){Fe(this,hh);Be(this,hh,Z(t))}end(){return new on(Oa.cloneWith(Y(this,hh).node,{isStatement:!1}))}endCase(){return new on(Oa.cloneWith(Y(this,hh).node,{isStatement:!0}))}}hh=new WeakMap;const E6=Z({is(e){return e.kind==="JSONPathLegNode"},create(e,t){return Z({kind:"JSONPathLegNode",type:e,value:t})}});var yo,wy,WC;class HC{constructor(t){Fe(this,wy);Fe(this,yo);Be(this,yo,t)}at(t){return it(this,wy,WC).call(this,"ArrayLocation",t)}key(t){return it(this,wy,WC).call(this,"Member",t)}}yo=new WeakMap,wy=new WeakSet,WC=function(t,n){return px.is(Y(this,yo))?new vx(px.cloneWithTraversal(Y(this,yo),rg.is(Y(this,yo).traversal)?rg.cloneWithLeg(Y(this,yo).traversal,E6.create(t,n)):tB.cloneWithValue(Y(this,yo).traversal,_c.createImmediate(n)))):new vx(rg.cloneWithLeg(Y(this,yo),E6.create(t,n)))};var Lu;const $w=class $w extends HC{constructor(n){super(n);Fe(this,Lu);Be(this,Lu,n)}get expressionType(){}as(n){return new Rue(this,n)}$castTo(){return new $w(Y(this,Lu))}$notNull(){return new $w(Y(this,Lu))}toOperationNode(){return Y(this,Lu)}};Lu=new WeakMap;let vx=$w;var mh,ec;class Rue{constructor(t,n){Fe(this,mh);Fe(this,ec);Be(this,mh,t),Be(this,ec,n)}get expression(){return Y(this,mh)}get alias(){return Y(this,ec)}toOperationNode(){return Dc.create(Y(this,mh).toOperationNode(),yi(Y(this,ec))?Y(this,ec).toOperationNode():Ts.create(Y(this,ec)))}}mh=new WeakMap,ec=new WeakMap;const N6=Z({is(e){return e.kind==="TupleNode"},create(e){return Z({kind:"TupleNode",values:Z(e)})}}),kue=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],Mue=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],Iue=Z({is(e){return e.kind==="DataTypeNode"},create(e){return Z({kind:"DataTypeNode",dataType:e})}});function Pue(e){return!!(kue.includes(e)||Mue.some(t=>t.test(e)))}function Due(e){if(yi(e))return e.toOperationNode();if(Pue(e))return Iue.create(e);throw new Error(`invalid column data type ${JSON.stringify(e)}`)}const Lue=Z({is(e){return e.kind==="CastNode"},create(e,t){return Z({kind:"CastNode",expression:e,dataType:t})}});function vT(e=dB){function t(s,i,o){return new on(yT(s,i,o))}function n(s,i){return new on(jue(s,i))}const r=Object.assign(t,{fn:void 0,eb:void 0,selectFrom(s){return Nue({queryId:ca(),executor:e,queryNode:ln.createFrom(Fue(s))})},case(s){return new Aue({node:Oa.create(mx(s)?void 0:Zs(s))})},ref(s,i){return mx(i)?new on(Nc(s)):new HC(kce(s,i))},jsonPath(){return new HC(rg.create())},table(s){return new on(zi(s))},val(s){return new on(Br(s))},refTuple(...s){return new on(N6.create(s.map(Zs)))},tuple(...s){return new on(N6.create(s.map(Br)))},lit(s){return new on(gT(s))},unary:n,not(s){return n("not",s)},exists(s){return n("exists",s)},neg(s){return n("-",s)},between(s,i,o){return new on(jh.create(Zs(s),nd.create("between"),Ec.create(Br(i),Br(o))))},betweenSymmetric(s,i,o){return new on(jh.create(Zs(s),nd.create("between symmetric"),Ec.create(Br(i),Br(o))))},and(s){return Sc(s)?new on(DC(s,"and")):new on(c6(s,"and"))},or(s){return Sc(s)?new on(DC(s,"or")):new on(c6(s,"or"))},parens(...s){const i=Xi(s);return kg.is(i)?new on(i):new on(kg.create(i))},cast(s,i){return new on(Lue.create(Zs(s),Due(i)))},withSchema(s){return vT(e.withPluginAtFront(new lue(s)))}});return r.fn=Cue(),r.eb=r,r}function O1(e){return vT()}function j1(e){if(yi(e))return e.toOperationNode();if(yd(e))return e(O1()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(e)}`)}function mB(e){if(yi(e))return e.toOperationNode();if(yd(e))return e(O1()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function A1(e){return Sce(e)||Ece(e)||yd(e)}function Fue(e){return Sc(e)?e.map(t=>xx(t)):[xx(e)]}function xx(e){return To(e)?Bue(e):mB(e)}function Bue(e){const t=" as ";if(e.includes(t)){const[n,r]=e.split(t).map(pB);return Dc.create(zi(n),Ts.create(r))}else return zi(e)}function zi(e){const t=".";if(e.includes(t)){const[n,r]=e.split(t).map(pB);return uc.createWithSchema(n,r)}else return uc.create(e)}function pB(e){return e.trim()}var Ir,oi,Mv,GC,YC;const wg=class wg{constructor(t){Fe(this,oi);Fe(this,Ir);Be(this,Ir,Z(t))}get expressionType(){}get isRawBuilder(){return!0}as(t){return new gB(this,t)}$castTo(){return new wg({...Y(this,Ir)})}$notNull(){return new wg(Y(this,Ir))}withPlugin(t){return new wg({...Y(this,Ir),plugins:Y(this,Ir).plugins!==void 0?Z([...Y(this,Ir).plugins,t]):Z([t])})}toOperationNode(){return it(this,oi,GC).call(this,it(this,oi,Mv).call(this))}compile(t){return it(this,oi,YC).call(this,it(this,oi,Mv).call(this,t))}async execute(t){const n=it(this,oi,Mv).call(this,t);return n.executeQuery(it(this,oi,YC).call(this,n),Y(this,Ir).queryId)}};Ir=new WeakMap,oi=new WeakSet,Mv=function(t){const n=t!==void 0?t.getExecutor():dB;return Y(this,Ir).plugins!==void 0?n.withPlugins(Y(this,Ir).plugins):n},GC=function(t){return t.transformQuery(Y(this,Ir).rawNode,Y(this,Ir).queryId)},YC=function(t){return t.compileQuery(it(this,oi,GC).call(this,t),Y(this,Ir).queryId)};let wx=wg;function kl(e){return new wx(e)}bd(wx,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Fu,tc;class gB{constructor(t,n){Fe(this,Fu);Fe(this,tc);Be(this,Fu,t),Be(this,tc,n)}get expression(){return Y(this,Fu)}get alias(){return Y(this,tc)}get rawBuilder(){return Y(this,Fu)}toOperationNode(){return Dc.create(Y(this,Fu).toOperationNode(),yi(Y(this,tc))?Y(this,tc).toOperationNode():Ts.create(Y(this,tc)))}}Fu=new WeakMap,tc=new WeakMap;bd(gB,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Ig=Object.assign((e,...t)=>kl({queryId:ca(),rawNode:Es.create(e,(t==null?void 0:t.map(_6))??[])}),{ref(e){return kl({queryId:ca(),rawNode:Es.createWithChild(Nc(e))})},val(e){return kl({queryId:ca(),rawNode:Es.createWithChild(Br(e))})},value(e){return this.val(e)},table(e){return kl({queryId:ca(),rawNode:Es.createWithChild(zi(e))})},id(...e){const t=new Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",kl({queryId:ca(),rawNode:Es.create(t,e.map(Ts.create))})},lit(e){return kl({queryId:ca(),rawNode:Es.createWithChild(_c.createImmediate(e))})},literal(e){return this.lit(e)},raw(e){return kl({queryId:ca(),rawNode:Es.createWithSql(e)})},join(e,t=Ig`, `){const n=new Array(2*e.length-1),r=t.toOperationNode();for(let s=0;s<e.length;++s)n[2*s]=_6(e[s]),s!==e.length-1&&(n[2*s+1]=r);return kl({queryId:ca(),rawNode:Es.createWithChildren(n)})}});function _6(e){return yi(e)?e.toOperationNode():Br(e)}class zue{constructor(t=[]){K(this,"plugins");this.plugins=new Set(t)}async transformResultRows(t){let n=t;for(const r of this.plugins)n=(await r.transformResult({queryId:"1",result:{rows:n}})).rows;return n}}const C6=["text","integer","real","blob","date","datetime","timestamp","boolean","json"],O6=Symbol.for("bknd:connection");class yB{constructor(t,n={},r=[]){K(this,"initialized",!1);K(this,"pluginRunner");K(this,"supported",{batching:!1,softscans:!0});K(this,"kysely");K(this,"client");this.fn=n,this.plugins=r,this.kysely=t,this[O6]=!0,this.pluginRunner=new zue(r)}async init(){this.initialized=!0}static isConnection(t){return t?t[O6]===!0:!1}getIntrospector(){return this.kysely.introspection}supports(t){return this.supported[t]??!1}async ping(){return(await Ig`SELECT 1`.execute(this.kysely)).rows.length>0}async transformResultRows(t){return await this.pluginRunner.transformResultRows(t)}async executeQueries(...t){return Promise.all(t.map(async n=>await this.kysely.executeQuery(n)))}async executeQuery(t){return(await this.executeQueries(t))[0]}getCompiled(...t){return t.map(n=>"compile"in n?n.compile():n)}async withTransformedRows(t,n){return await Promise.all(t.map(async r=>{const s=n??"rows",{[s]:i,...o}=r;return{...o,rows:await this.transformResultRows(i)}}))}validateFieldSpecType(t){if(!C6.includes(t))throw new Error(`Invalid field type "${t}". Allowed types are: ${C6.join(", ")}`);return!0}toDriver(t,n){return t}fromDriver(t,n){return t}async close(){}}class Vue extends As{constructor(){super(...arguments);K(this,"name","UnableToConnectException");K(this,"code",gn.INTERNAL_SERVER_ERROR)}}class Kl extends As{constructor(){super(...arguments);K(this,"name","InvalidSearchParamsException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}class Uue extends As{constructor(){super(...arguments);K(this,"name","TransformRetrieveFailedException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}class ls extends As{constructor(){super(...arguments);K(this,"name","TransformPersistFailedException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}static invalidType(n,r,s){const i=typeof s=="object"?JSON.stringify(s):s,o=`Property "${n}" must be of type "${r}", "${i}" of type "${typeof s}" given.`;return new ls(o)}static required(n){return new ls(`Property "${n}" is required`)}}class que extends As{constructor(n,r,s){console.error("InvalidFieldConfigException",{given:r,error:s.first()});super(`Invalid Field config given for field "${n.name}": ${s.firstToString()}`);K(this,"name","InvalidFieldConfigException");K(this,"code",gn.BAD_REQUEST);this.given=r}}class Hue extends As{constructor(n){var t=(...i8e)=>(super(...i8e),K(this,"name","EntityNotDefinedException"),K(this,"code",gn.BAD_REQUEST),this);t(n?`Entity "${typeof n!="string"?n.name:n}" not defined`:"Cannot find an entity that is undefined")}}class bB extends Hr{validate(t){const{entity:n}=this.params;if(!n.isValidData(t,"create"))throw pt.warn("MutatorInsertBefore.validate: invalid",{entity:n.name,data:t}),new E1("EntityData","invalid");return this.clone({entity:n,data:t})}}K(bB,"slug","mutator-insert-before");class vB extends Hr{}K(vB,"slug","mutator-insert-after");class xB extends Hr{validate(t){const{entity:n,entityId:r}=this.params;if(!n.isValidData(t,"update"))throw pt.warn("MutatorUpdateBefore.validate: invalid",{entity:n.name,entityId:r,data:t}),new E1("EntityData","invalid");return this.clone({entityId:r,entity:n,data:t})}}K(xB,"slug","mutator-update-before");class wB extends Hr{}K(wB,"slug","mutator-update-after");class SB extends Hr{}K(SB,"slug","mutator-delete-before");class EB extends Hr{}K(EB,"slug","mutator-delete-after");const Sx={MutatorInsertBefore:bB,MutatorInsertAfter:vB,MutatorUpdateBefore:xB,MutatorUpdateAfter:wB,MutatorDeleteBefore:SB,MutatorDeleteAfter:EB};class NB extends Hr{}K(NB,"slug","repository-find-one-before");class _B extends Hr{}K(_B,"slug","repository-find-one-after");class JC extends Hr{}K(JC,"slug","repository-find-many-before"),K(JC,"another","one");class CB extends Hr{}K(CB,"slug","repository-find-many-after");const OB={RepositoryFindOneBefore:NB,RepositoryFindOneAfter:_B,RepositoryFindManyBefore:JC,RepositoryFindManyAfter:CB};class jB{constructor(t){K(this,"_relations",[]);this._relations=t}get all(){return this._relations}exists(t){return this._relations.some(n=>n.source.entity.name===t.source.entity.name&&n.target.entity.name===t.target.entity.name&&n.type===t.type)}relationsOf(t){return this._relations.filter(n=>n.visibleFrom("source")&&n.source.entity.name===t.name||n.visibleFrom("target")&&n.target.entity.name===t.name)}sourceRelationsOf(t){return this._relations.filter(n=>n.source.entity.name===t.name)}targetRelationsOf(t){return this._relations.filter(n=>n.visibleFrom("target")&&n.target.entity.name===t.name)}listableRelationsOf(t){return this.relationsOf(t).filter(n=>n.isListableFor(t))}relationOf(t,n){return this.relationsOf(t).find(r=>r.target.entity.name===t.name&&r.source.reference===n||r.source.entity.name===t.name&&r.target.reference===n)}hasRelations(t){return this.relationsOf(t).length>0}relatedEntitiesOf(t){return this.relationsOf(t).map(n=>n.other(t).entity)}relationReferencesOf(t){return this.relationsOf(t).map(n=>n.other(t).reference)}}const Wue=["create","read","update","delete"],Gue=["create","read","update","delete","form","table","submit"],j6=!0,A6=!1,to=He({label:ge(),description:ge(),required:mt({default:!1}),fillable:nn([mt({title:"Boolean"}),Sn(ge({enum:Wue}),{title:"Context",uniqueItems:!0})]),hidden:nn([mt({title:"Boolean"}),Sn(ge({enum:Gue}),{title:"Context",uniqueItems:!0})]),virtual:mt(),default_value:Ji()}).partial();let no=class{constructor(t,n){K(this,"_required");K(this,"_type");K(this,"name");K(this,"type","field");K(this,"config");this.name=t,this._type,this._required;try{this.config=Un(this.getSchema(),n||{})}catch(r){throw r instanceof S1?new que(this,n,r):r}}getType(){return this.type}schema(){return Object.freeze({name:this.name,type:"text",nullable:!0,dflt:void 0})}hasDefault(){return this.config.default_value!==void 0}getDefault(){var t;return(t=this.config)==null?void 0:t.default_value}isFillable(t){return Array.isArray(this.config.fillable)?t?this.config.fillable.includes(t):j6:this.config.fillable??j6}isHidden(t){return Array.isArray(this.config.hidden)?t?this.config.hidden.includes(t):A6:this.config.hidden??A6}isRequired(){var t;return((t=this.config)==null?void 0:t.required)??!1}isVirtual(){return this.config.virtual??!1}getLabel(t){return this.config.label?this.config.label:(t==null?void 0:t.fallback)!==!1?Ch(this.name):void 0}getDescription(){return this.config.description}getValue(t,n){return t}getHtmlConfig(){return{element:"input",props:{type:"text"}}}isValid(t,n){return typeof t<"u"?this.isFillable(n):n==="create"?!this.isRequired():!0}transformRetrieve(t){return t}async transformPersist(t,n,r){if(this.nullish(t)){if(this.isRequired()&&!this.hasDefault())throw ls.required(this.name);return this.getDefault()}return t}toSchemaWrapIfRequired(t){return this.isRequired()?t:t.optional()}nullish(t){return t==null}toJsonSchema(){return this.toSchemaWrapIfRequired(Ji())}toType(){return{required:this.isRequired(),comment:this.getDescription(),type:"any"}}toJSON(){return{type:this.type,config:this.config}}};const AB=He({default_value:mt(),...Ms(to.properties,["default_value"])}).partial();class TB extends no{constructor(){super(...arguments);K(this,"type","boolean")}getSchema(){return AB}getValue(n,r){switch(r){case"table":return n?"Yes":"No";default:return n}}schema(){return Object.freeze({...super.schema(),type:"boolean"})}getHtmlConfig(){return{...super.getHtmlConfig(),element:"boolean"}}transformRetrieve(n){return typeof n>"u"||n===null?this.isRequired()?!1:this.hasDefault()?this.getDefault():null:typeof n=="string"?n==="1":!!n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return this.isRequired()?!!this.config.default_value:void 0;if(typeof i=="number")return i!==0;if(typeof i!="boolean")throw ls.invalidType(this.name,"boolean",i);return i}toJsonSchema(){return this.toSchemaWrapIfRequired(mt({default:this.getDefault()}))}toType(){return{...super.toType(),type:"boolean"}}}const $B=He({type:ge({enum:["date","datetime","week"],default:"date"}),timezone:ge(),min_date:ge(),max_date:ge(),...to.properties}).partial();class XC extends no{constructor(){super(...arguments);K(this,"type","date")}getSchema(){return $B}schema(){return Object.freeze({...super.schema(),type:this.config.type==="datetime"?"datetime":"date"})}getHtmlConfig(){const n=this.config.type==="datetime"?"datetime-local":this.config.type;return{...super.getHtmlConfig(),element:"date",props:{type:n}}}parseDateFromString(n){if(this.config.type==="week"&&n.includes("-W")){const[r,s]=n.split("-W").map(i=>Number.parseInt(i,10));return fx().year(r).week(s).toDate()}return new Date(n)}getValue(n,r){if(n===null||!n)return;const s=this.parseDateFromString(n);if(r==="submit")try{return s.toISOString()}catch{return}if(this.config.type==="week")try{return`${s.getFullYear()}-W${fx(s).week()}`}catch(i){pt.warn("DateField.getValue:week error",n,String(i));return}try{const o=new Date().getTimezoneOffset(),a=new Date(s.getTime()-o*6e4);return this.formatDate(a)}catch(i){pt.warn("DateField.getValue error",this.config.type,n,String(i));return}}formatDate(n){switch(this.config.type){case"datetime":return n.toISOString().split(".")[0].replace("T"," ");default:return n.toISOString().split("T")[0]}}transformRetrieve(n){const r=super.transformRetrieve(n);if(r===null)return null;try{return new Date(r)}catch{return null}}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;switch(this.config.type){case"date":case"week":return new Date(i).toISOString().split("T")[0];default:return new Date(i).toISOString()}}toJsonSchema(){return this.toSchemaWrapIfRequired(ge({default:this.getDefault()}))}toType(){return{...super.toType(),type:"Date | string"}}}const RB=He({default_value:ge(),options:nn([ze({type:si("strings"),values:Sn(ge())}),ze({type:si("objects"),values:Sn(ze({label:ge(),value:ge()}))})]),...Ms(to.properties,["default_value"])}).partial();class kB extends no{constructor(n,r){super(n,r);K(this,"type","enum");if(this.config.default_value&&!this.isValidValue(this.config.default_value))throw new Error(`Default value "${this.config.default_value}" is not a valid option`)}getSchema(){return RB}getOptions(){var r,s;const n=((r=this.config)==null?void 0:r.options)??{type:"strings",values:[]};return n.type==="strings"?(s=n.values)==null?void 0:s.map(i=>({label:i,value:i})):n==null?void 0:n.values}isValidValue(n){return this.getOptions().map(s=>s.value).includes(n)}getValue(n,r){var s;if(!this.isValidValue(n))return this.hasDefault()?this.getDefault():null;switch(r){case"table":return((s=this.getOptions().find(i=>i.value===n))==null?void 0:s.label)??n}return n}transformRetrieve(n){const r=super.transformRetrieve(n);return r===null&&this.hasDefault()?this.getDefault():this.isValidValue(r)?r:this.hasDefault()?this.getDefault():null}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isValidValue(i))throw new ls(`Field "${this.name}" must be one of the following values: ${this.getOptions().map(o=>o.value).join(", ")}`);return i}toJsonSchema(){var s,i;const r=((i=(((s=this.config)==null?void 0:s.options)??{values:[]}).values)==null?void 0:i.map(o=>typeof o=="string"?o:o.value))??[];return this.toSchemaWrapIfRequired(ge({enum:r,default:this.getDefault()}))}toType(){const n=this.getOptions().map(({value:r})=>typeof r=="string"?`"${r}"`:r);return{...super.toType(),type:n.length>0?n.join(" | "):"string"}}}const MB=He({default_value:Ji(),...Ms(to.properties,["default_value"])}).partial();class IB extends no{constructor(){super(...arguments);K(this,"type","json")}getSchema(){return MB}transformRetrieve(n){const r=super.transformRetrieve(n);return r===null&&this.hasDefault()?this.getDefault():this.isSerialized(r)?JSON.parse(r):r}isSerializable(n){try{const r=JSON.stringify(n);if(r===JSON.stringify(JSON.parse(r)))return!0}catch{}return!1}isSerialized(n){try{if(typeof n=="string")return n===JSON.stringify(JSON.parse(n))}catch{}return!1}getValue(n,r){switch(r){case"form":return n===null?"":JSON.stringify(n,null,2);case"table":return n===null?null:JSON.stringify(n);case"submit":return typeof n=="string"&&n.length===0?null:JSON.parse(n)}return n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isSerializable(i))throw new ls(`Field "${this.name}" must be serializable to JSON.`);return this.isSerialized(i)?i:JSON.stringify(i)}toType(){return{...super.toType(),type:"any"}}}function ig(e,t){const n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(!ig(e[s],t[s]))return!1;return!0}if(n==="object"){if(!e||!t)return e===t;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const o of r)if(!ig(e[o],t[o]))return!1;return!0}return e===t}function Ai(e){return encodeURI(Yue(e))}function Yue(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const Jue={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Xue={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},Kue={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let Que=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function ju(e,t=Object.create(null),n=Que,r=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const i=e.$id||e.id;if(i){const o=new URL(i,n.href);o.hash.length>1?t[o.href]=e:(o.hash="",r===""?n=o:ju(e,t,n))}}else if(e!==!0&&e!==!1)return t;const s=n.href+(r?"#"+r:"");if(t[s]!==void 0)throw new Error(`Duplicate schema URI "${s}".`);if(t[s]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:s}),e.$ref&&e.__absolute_ref__===void 0){const i=new URL(e.$ref,n.href);i.hash=i.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:i.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const i=new URL(e.$recursiveRef,n.href);i.hash=i.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:i.href})}if(e.$anchor){const i=new URL("#"+e.$anchor,n.href);t[i.href]=e}for(let i in e){if(Kue[i])continue;const o=`${r}/${Ai(i)}`,a=e[i];if(Array.isArray(a)){if(Jue[i]){const c=a.length;for(let u=0;u<c;u++)ju(a[u],t,n,`${o}/${u}`)}}else if(Xue[i])for(let c in a)ju(a[c],t,n,`${o}/${Ai(c)}`);else ju(a,t,n,o)}return t}const Zue=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ede=[0,31,28,31,30,31,30,31,31,30,31,30,31],tde=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,nde=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,rde=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,sde=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ide=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,ode=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,ade=/^(?:\/(?:[^~/]|~0|~1)*)*$/,lde=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,cde=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,ude=e=>{if(e[0]==='"')return!1;const[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},dde=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,fde=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,hde=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function ho(e){return e.test.bind(e)}const T6={date:PB,time:DB.bind(void 0,!1),"date-time":gde,duration:hde,uri:vde,"uri-reference":ho(rde),"uri-template":ho(sde),url:ho(ide),email:ude,hostname:ho(nde),ipv4:ho(dde),ipv6:ho(fde),regex:wde,uuid:ho(ode),"json-pointer":ho(ade),"json-pointer-uri-fragment":ho(lde),"relative-json-pointer":ho(cde)};function mde(e){return e%4===0&&(e%100!==0||e%400===0)}function PB(e){const t=e.match(Zue);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return r>=1&&r<=12&&s>=1&&s<=(r==2&&mde(n)?29:ede[r])}function DB(e,t){const n=t.match(tde);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3],o=!!n[5];return(r<=23&&s<=59&&i<=59||r==23&&s==59&&i==60)&&(!e||o)}const pde=/t|\s/i;function gde(e){const t=e.split(pde);return t.length==2&&PB(t[0])&&DB(!0,t[1])}const yde=/\/|:/,bde=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function vde(e){return yde.test(e)&&bde.test(e)}const xde=/[^\\]\\Z/;function wde(e){if(xde.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function Sde(e){let t=0,n=e.length,r=0,s;for(;r<n;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t}function xn(e,t,n="2019-09",r=ju(t),s=!0,i=null,o="#",a="#",c=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:o,keyword:"false",keywordLocation:o,error:"False boolean schema."}]};const u=typeof e;let f;switch(u){case"boolean":case"number":case"string":f=u;break;case"object":e===null?f="null":Array.isArray(e)?f="array":f="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}const{$ref:h,$recursiveRef:p,$recursiveAnchor:y,type:v,const:x,enum:S,required:N,not:_,anyOf:C,allOf:j,oneOf:A,if:$,then:k,else:R,format:F,properties:z,patternProperties:L,additionalProperties:B,unevaluatedProperties:H,minProperties:I,maxProperties:V,propertyNames:T,dependentRequired:D,dependentSchemas:P,dependencies:q,prefixItems:M,items:W,additionalItems:X,unevaluatedItems:Q,contains:oe,minContains:ae,maxContains:fe,minItems:le,maxItems:ue,uniqueItems:ve,minimum:_e,maximum:ke,exclusiveMinimum:Oe,exclusiveMaximum:$e,multipleOf:Re,minLength:qe,maxLength:et,pattern:Ce,__absolute_ref__:Me,__absolute_recursive_ref__:Ie}=t,G=[];if(y===!0&&i===null&&(i=t),p==="#"){const te=i===null?r[Ie]:i,he=`${a}/$recursiveRef`,se=xn(e,i===null?t:i,n,r,s,te,o,he,c);se.valid||G.push({instanceLocation:o,keyword:"$recursiveRef",keywordLocation:he,error:"A subschema had errors."},...se.errors)}if(h!==void 0){const he=r[Me||h];if(he===void 0){let ce=`Unresolved $ref "${h}".`;throw Me&&Me!==h&&(ce+=`  Absolute URI "${Me}".`),ce+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(ce)}const se=`${a}/$ref`,ne=xn(e,he,n,r,s,i,o,se,c);if(ne.valid||G.push({instanceLocation:o,keyword:"$ref",keywordLocation:se,error:"A subschema had errors."},...ne.errors),n==="4"||n==="7")return{valid:G.length===0,errors:G}}if(Array.isArray(v)){let te=v.length,he=!1;for(let se=0;se<te;se++)if(f===v[se]||v[se]==="integer"&&f==="number"&&e%1===0&&e===e){he=!0;break}he||G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v.join('", "')}".`})}else v==="integer"?(f!=="number"||e%1||e!==e)&&G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v}".`}):v!==void 0&&f!==v&&G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v}".`});if(x!==void 0&&(f==="object"||f==="array"?ig(e,x)||G.push({instanceLocation:o,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`}):e!==x&&G.push({instanceLocation:o,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`})),S!==void 0&&(f==="object"||f==="array"?S.some(te=>ig(e,te))||G.push({instanceLocation:o,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(S)}.`}):S.some(te=>e===te)||G.push({instanceLocation:o,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(S)}.`})),_!==void 0){const te=`${a}/not`;xn(e,_,n,r,s,i,o,te).valid&&G.push({instanceLocation:o,keyword:"not",keywordLocation:te,error:'Instance matched "not" schema.'})}let re=[];if(C!==void 0){const te=`${a}/anyOf`,he=G.length;let se=!1;for(let ne=0;ne<C.length;ne++){const ce=C[ne],xe=Object.create(c),Ee=xn(e,ce,n,r,s,y===!0?i:null,o,`${te}/${ne}`,xe);G.push(...Ee.errors),se=se||Ee.valid,Ee.valid&&re.push(xe)}se?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"anyOf",keywordLocation:te,error:"Instance does not match any subschemas."})}if(j!==void 0){const te=`${a}/allOf`,he=G.length;let se=!0;for(let ne=0;ne<j.length;ne++){const ce=j[ne],xe=Object.create(c),Ee=xn(e,ce,n,r,s,y===!0?i:null,o,`${te}/${ne}`,xe);G.push(...Ee.errors),se=se&&Ee.valid,Ee.valid&&re.push(xe)}se?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"allOf",keywordLocation:te,error:"Instance does not match every subschema."})}if(A!==void 0){const te=`${a}/oneOf`,he=G.length,se=A.filter((ne,ce)=>{const xe=Object.create(c),Ee=xn(e,ne,n,r,s,y===!0?i:null,o,`${te}/${ce}`,xe);return G.push(...Ee.errors),Ee.valid&&re.push(xe),Ee.valid}).length;se===1?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"oneOf",keywordLocation:te,error:`Instance does not match exactly one subschema (${se} matches).`})}if((f==="object"||f==="array")&&Object.assign(c,...re),$!==void 0){const te=`${a}/if`;if(xn(e,$,n,r,s,i,o,te,c).valid){if(k!==void 0){const se=xn(e,k,n,r,s,i,o,`${a}/then`,c);se.valid||G.push({instanceLocation:o,keyword:"if",keywordLocation:te,error:'Instance does not match "then" schema.'},...se.errors)}}else if(R!==void 0){const se=xn(e,R,n,r,s,i,o,`${a}/else`,c);se.valid||G.push({instanceLocation:o,keyword:"if",keywordLocation:te,error:'Instance does not match "else" schema.'},...se.errors)}}if(f==="object"){if(N!==void 0)for(const ne of N)ne in e||G.push({instanceLocation:o,keyword:"required",keywordLocation:`${a}/required`,error:`Instance does not have required property "${ne}".`});const te=Object.keys(e);if(I!==void 0&&te.length<I&&G.push({instanceLocation:o,keyword:"minProperties",keywordLocation:`${a}/minProperties`,error:`Instance does not have at least ${I} properties.`}),V!==void 0&&te.length>V&&G.push({instanceLocation:o,keyword:"maxProperties",keywordLocation:`${a}/maxProperties`,error:`Instance does not have at least ${V} properties.`}),T!==void 0){const ne=`${a}/propertyNames`;for(const ce in e){const xe=`${o}/${Ai(ce)}`,Ee=xn(ce,T,n,r,s,i,xe,ne);Ee.valid||G.push({instanceLocation:o,keyword:"propertyNames",keywordLocation:ne,error:`Property name "${ce}" does not match schema.`},...Ee.errors)}}if(D!==void 0){const ne=`${a}/dependantRequired`;for(const ce in D)if(ce in e){const xe=D[ce];for(const Ee of xe)Ee in e||G.push({instanceLocation:o,keyword:"dependentRequired",keywordLocation:ne,error:`Instance has "${ce}" but does not have "${Ee}".`})}}if(P!==void 0)for(const ne in P){const ce=`${a}/dependentSchemas`;if(ne in e){const xe=xn(e,P[ne],n,r,s,i,o,`${ce}/${Ai(ne)}`,c);xe.valid||G.push({instanceLocation:o,keyword:"dependentSchemas",keywordLocation:ce,error:`Instance has "${ne}" but does not match dependant schema.`},...xe.errors)}}if(q!==void 0){const ne=`${a}/dependencies`;for(const ce in q)if(ce in e){const xe=q[ce];if(Array.isArray(xe))for(const Ee of xe)Ee in e||G.push({instanceLocation:o,keyword:"dependencies",keywordLocation:ne,error:`Instance has "${ce}" but does not have "${Ee}".`});else{const Ee=xn(e,xe,n,r,s,i,o,`${ne}/${Ai(ce)}`);Ee.valid||G.push({instanceLocation:o,keyword:"dependencies",keywordLocation:ne,error:`Instance has "${ce}" but does not match dependant schema.`},...Ee.errors)}}}const he=Object.create(null);let se=!1;if(z!==void 0){const ne=`${a}/properties`;for(const ce in z){if(!(ce in e))continue;const xe=`${o}/${Ai(ce)}`,Ee=xn(e[ce],z[ce],n,r,s,i,xe,`${ne}/${Ai(ce)}`);if(Ee.valid)c[ce]=he[ce]=!0;else if(se=s,G.push({instanceLocation:o,keyword:"properties",keywordLocation:ne,error:`Property "${ce}" does not match schema.`},...Ee.errors),se)break}}if(!se&&L!==void 0){const ne=`${a}/patternProperties`;for(const ce in L){const xe=new RegExp(ce,"u"),Ee=L[ce];for(const We in e){if(!xe.test(We))continue;const Vt=`${o}/${Ai(We)}`,wt=xn(e[We],Ee,n,r,s,i,Vt,`${ne}/${Ai(ce)}`);wt.valid?c[We]=he[We]=!0:(se=s,G.push({instanceLocation:o,keyword:"patternProperties",keywordLocation:ne,error:`Property "${We}" matches pattern "${ce}" but does not match associated schema.`},...wt.errors))}}}if(!se&&B!==void 0){const ne=`${a}/additionalProperties`;for(const ce in e){if(he[ce])continue;const xe=`${o}/${Ai(ce)}`,Ee=xn(e[ce],B,n,r,s,i,xe,ne);Ee.valid?c[ce]=!0:(se=s,G.push({instanceLocation:o,keyword:"additionalProperties",keywordLocation:ne,error:`Property "${ce}" does not match additional properties schema.`},...Ee.errors))}}else if(!se&&H!==void 0){const ne=`${a}/unevaluatedProperties`;for(const ce in e)if(!c[ce]){const xe=`${o}/${Ai(ce)}`,Ee=xn(e[ce],H,n,r,s,i,xe,ne);Ee.valid?c[ce]=!0:G.push({instanceLocation:o,keyword:"unevaluatedProperties",keywordLocation:ne,error:`Property "${ce}" does not match unevaluated properties schema.`},...Ee.errors)}}}else if(f==="array"){ue!==void 0&&e.length>ue&&G.push({instanceLocation:o,keyword:"maxItems",keywordLocation:`${a}/maxItems`,error:`Array has too many items (${e.length} > ${ue}).`}),le!==void 0&&e.length<le&&G.push({instanceLocation:o,keyword:"minItems",keywordLocation:`${a}/minItems`,error:`Array has too few items (${e.length} < ${le}).`});const te=e.length;let he=0,se=!1;if(M!==void 0){const ne=`${a}/prefixItems`,ce=Math.min(M.length,te);for(;he<ce;he++){const xe=xn(e[he],M[he],n,r,s,i,`${o}/${he}`,`${ne}/${he}`);if(c[he]=!0,!xe.valid&&(se=s,G.push({instanceLocation:o,keyword:"prefixItems",keywordLocation:ne,error:"Items did not match schema."},...xe.errors),se))break}}if(W!==void 0){const ne=`${a}/items`;if(Array.isArray(W)){const ce=Math.min(W.length,te);for(;he<ce;he++){const xe=xn(e[he],W[he],n,r,s,i,`${o}/${he}`,`${ne}/${he}`);if(c[he]=!0,!xe.valid&&(se=s,G.push({instanceLocation:o,keyword:"items",keywordLocation:ne,error:"Items did not match schema."},...xe.errors),se))break}}else for(;he<te;he++){const ce=xn(e[he],W,n,r,s,i,`${o}/${he}`,ne);if(c[he]=!0,!ce.valid&&(se=s,G.push({instanceLocation:o,keyword:"items",keywordLocation:ne,error:"Items did not match schema."},...ce.errors),se))break}if(!se&&X!==void 0){const ce=`${a}/additionalItems`;for(;he<te;he++){const xe=xn(e[he],X,n,r,s,i,`${o}/${he}`,ce);c[he]=!0,xe.valid||(se=s,G.push({instanceLocation:o,keyword:"additionalItems",keywordLocation:ce,error:"Items did not match additional items schema."},...xe.errors))}}}if(oe!==void 0)if(te===0&&ae===void 0)G.push({instanceLocation:o,keyword:"contains",keywordLocation:`${a}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(ae!==void 0&&te<ae)G.push({instanceLocation:o,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array has less items (${te}) than minContains (${ae}).`});else{const ne=`${a}/contains`,ce=G.length;let xe=0;for(let Ee=0;Ee<te;Ee++){const We=xn(e[Ee],oe,n,r,s,i,`${o}/${Ee}`,ne);We.valid?(c[Ee]=!0,xe++):G.push(...We.errors)}xe>=(ae||0)&&(G.length=ce),ae===void 0&&fe===void 0&&xe===0?G.splice(ce,0,{instanceLocation:o,keyword:"contains",keywordLocation:ne,error:"Array does not contain item matching schema."}):ae!==void 0&&xe<ae?G.push({instanceLocation:o,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array must contain at least ${ae} items matching schema. Only ${xe} items were found.`}):fe!==void 0&&xe>fe&&G.push({instanceLocation:o,keyword:"maxContains",keywordLocation:`${a}/maxContains`,error:`Array may contain at most ${fe} items matching schema. ${xe} items were found.`})}if(!se&&Q!==void 0){const ne=`${a}/unevaluatedItems`;for(he;he<te;he++){if(c[he])continue;const ce=xn(e[he],Q,n,r,s,i,`${o}/${he}`,ne);c[he]=!0,ce.valid||G.push({instanceLocation:o,keyword:"unevaluatedItems",keywordLocation:ne,error:"Items did not match unevaluated items schema."},...ce.errors)}}if(ve)for(let ne=0;ne<te;ne++){const ce=e[ne],xe=typeof ce=="object"&&ce!==null;for(let Ee=0;Ee<te;Ee++){if(ne===Ee)continue;const We=e[Ee];(ce===We||xe&&(typeof We=="object"&&We!==null)&&ig(ce,We))&&(G.push({instanceLocation:o,keyword:"uniqueItems",keywordLocation:`${a}/uniqueItems`,error:`Duplicate items at indexes ${ne} and ${Ee}.`}),ne=Number.MAX_SAFE_INTEGER,Ee=Number.MAX_SAFE_INTEGER)}}}else if(f==="number"){if(n==="4"?(_e!==void 0&&(Oe===!0&&e<=_e||e<_e)&&G.push({instanceLocation:o,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${Oe?"or equal to ":""} ${_e}.`}),ke!==void 0&&($e===!0&&e>=ke||e>ke)&&G.push({instanceLocation:o,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${$e?"or equal to ":""} ${ke}.`})):(_e!==void 0&&e<_e&&G.push({instanceLocation:o,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${_e}.`}),ke!==void 0&&e>ke&&G.push({instanceLocation:o,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${ke}.`}),Oe!==void 0&&e<=Oe&&G.push({instanceLocation:o,keyword:"exclusiveMinimum",keywordLocation:`${a}/exclusiveMinimum`,error:`${e} is less than ${Oe}.`}),$e!==void 0&&e>=$e&&G.push({instanceLocation:o,keyword:"exclusiveMaximum",keywordLocation:`${a}/exclusiveMaximum`,error:`${e} is greater than or equal to ${$e}.`})),Re!==void 0){const te=e%Re;Math.abs(0-te)>=11920929e-14&&Math.abs(Re-te)>=11920929e-14&&G.push({instanceLocation:o,keyword:"multipleOf",keywordLocation:`${a}/multipleOf`,error:`${e} is not a multiple of ${Re}.`})}}else if(f==="string"){const te=qe===void 0&&et===void 0?0:Sde(e);qe!==void 0&&te<qe&&G.push({instanceLocation:o,keyword:"minLength",keywordLocation:`${a}/minLength`,error:`String is too short (${te} < ${qe}).`}),et!==void 0&&te>et&&G.push({instanceLocation:o,keyword:"maxLength",keywordLocation:`${a}/maxLength`,error:`String is too long (${te} > ${et}).`}),Ce!==void 0&&!new RegExp(Ce,"u").test(e)&&G.push({instanceLocation:o,keyword:"pattern",keywordLocation:`${a}/pattern`,error:"String does not match pattern."}),F!==void 0&&T6[F]&&!T6[F](e)&&G.push({instanceLocation:o,keyword:"format",keywordLocation:`${a}/format`,error:`String does not match format "${F}".`})}return{valid:G.length===0,errors:G}}class Ede{constructor(t,n="2019-09",r=!0){K(this,"schema");K(this,"draft");K(this,"shortCircuit");K(this,"lookup");this.schema=t,this.draft=n,this.shortCircuit=r,this.lookup=ju(t)}validate(t){return xn(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,n){n&&(t={...t,$id:n}),ju(t,this.lookup)}}const LB=He({schema:Ji({type:"object"}),ui_schema:Ji({type:"object"}),default_from_schema:mt(),...to.properties}).partial();class FB extends no{constructor(n,r){super(n,r);K(this,"type","jsonschema");K(this,"validator");this.validator=new Ede({...this.getJsonSchema()})}getSchema(){return LB}getJsonSchema(){var n;return(n=this.config)==null?void 0:n.schema}getJsonUiSchema(){return this.config.ui_schema??{}}isValid(n,r="update"){return super.isValid(n,r)?!this.isRequired()&&(!n||typeof n!="object")?!0:this.validator.validate(n).valid:!1}getValue(n,r){switch(r){case"form":return n===null?"":n;case"table":return n===null?null:JSON.stringify(n)}return n}transformRetrieve(n){const r=super.transformRetrieve(n);if(r===null){if(this.config.default_from_schema)try{return xa(this.getJsonSchema()).template()}catch{return null}else if(this.hasDefault())return this.getDefault()}return r}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isValid(i))throw new ls(this.name,i);return!i||typeof i!="object"?this.getDefault():JSON.stringify(i)}toJsonSchema(){const n=this.getJsonSchema()??{type:"object"};return this.toSchemaWrapIfRequired(xa({default:this.getDefault(),...n}))}toType(){return{...super.toType(),import:[{package:"json-schema-to-ts",name:"FromSchema"}],type:`FromSchema<${AC(this.getJsonSchema(),2,1)}>`}}}const BB=He({default_value:jt(),minimum:jt(),maximum:jt(),exclusiveMinimum:jt(),exclusiveMaximum:jt(),multipleOf:jt(),...Ms(to.properties,["default_value"])}).partial();class xT extends no{constructor(){super(...arguments);K(this,"type","number")}getSchema(){return BB}getHtmlConfig(){return{element:"input",props:{type:"number",pattern:"d*",inputMode:"numeric"}}}schema(){return Object.freeze({...super.schema(),type:"integer"})}getValue(n,r){if(typeof n>"u"||n===null)return null;switch(r){case"submit":return Number.parseInt(n)}return n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(!this.nullish(i)&&typeof i!="number")throw ls.invalidType(this.name,"number",i);if(this.config.maximum&&i>this.config.maximum)throw new ls(`Field "${this.name}" cannot be greater than ${this.config.maximum}`);if(this.config.minimum&&i<this.config.minimum)throw new ls(`Field "${this.name}" cannot be less than ${this.config.minimum}`);return i}toJsonSchema(){var n,r,s,i,o;return this.toSchemaWrapIfRequired(jt({default:this.getDefault(),minimum:(n=this.config)==null?void 0:n.minimum,maximum:(r=this.config)==null?void 0:r.maximum,exclusiveMinimum:(s=this.config)==null?void 0:s.exclusiveMinimum,exclusiveMaximum:(i=this.config)==null?void 0:i.exclusiveMaximum,multipleOf:(o=this.config)==null?void 0:o.multipleOf}))}toType(){return{...super.toType(),type:"number"}}}const zB={data:{default_primary_field:"id"}},wT=["integer","uuid"],VB=He({format:ge({enum:wT,default:"integer"}),required:mt({default:!1}),...Ms(to.properties,["required"])}).partial();class Pg extends no{constructor(n=zB.data.default_primary_field,r){super(n,{...r,fillable:!1,required:!1});K(this,"type","primary")}isRequired(){return!1}getSchema(){return VB}get format(){return this.config.format??"integer"}get fieldType(){return this.format==="integer"?"integer":"text"}schema(){return Object.freeze({type:this.fieldType,name:this.name,primary:!0,nullable:!1})}getNewValue(){if(this.format==="uuid")return Jae()}async transformPersist(n){throw new Error("PrimaryField: This function should not be called")}toJsonSchema(){return this.toSchemaWrapIfRequired(this.format==="integer"?jt({writeOnly:void 0}):ge({writeOnly:void 0}))}toType(){const n=this.format==="integer"?"number":"string";return{...super.toType(),required:!0,import:[{package:"kysely",name:"Generated"}],type:`Generated<${n}>`}}}const UB=He({default_value:ge(),minLength:jt(),maxLength:jt(),pattern:ge(),html_config:TF({element:ge(),props:ed(nn([ge({title:"String"}),jt({title:"Number"})]))}),...Ms(to.properties,["default_value"])}).partial();class ST extends no{constructor(){super(...arguments);K(this,"type","text")}getSchema(){return UB}getHtmlConfig(){return this.config.html_config?this.config.html_config:super.getHtmlConfig()}transformRetrieve(n){const r=super.transformRetrieve(n);return this.config.maxLength?r.substring(0,this.config.maxLength):this.isRequired()?r?r.toString():"":r}async transformPersist(n,r,s){let i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(i!==null&&typeof i!="string"&&(i=String(i)),this.config.maxLength&&(i==null?void 0:i.length)>this.config.maxLength)throw new ls(`Field "${this.name}" must be at most ${this.config.maxLength} character(s)`);if(this.config.minLength&&(i==null?void 0:i.length)<this.config.minLength)throw new ls(`Field "${this.name}" must be at least ${this.config.minLength} character(s)`);if(this.config.pattern&&i&&!new RegExp(this.config.pattern).test(i))throw new ls(`Field "${this.name}" must match the pattern ${this.config.pattern}`);return i}toJsonSchema(){var n,r,s;return this.toSchemaWrapIfRequired(ge({default:this.getDefault(),minLength:(n=this.config)==null?void 0:n.minLength,maxLength:(r=this.config)==null?void 0:r.maxLength,pattern:(s=this.config)==null?void 0:s.pattern}))}toType(){return{...super.toType(),type:"string"}}}class qB{constructor(t,n,r=!1,s){var i;if(this.entity=t,this.fields=n,this.unique=r,this.name=s,n.length===0)throw new Error("Indices must contain at least one field");if(n.some(o=>!(o instanceof no)))throw new Error("All fields must be instances of Field");if(r&&!((i=n[0])==null?void 0:i.isRequired()))throw new Error(`Unique indices must have first field as required: ${n.map(a=>a.name).join(", ")}`);s||(this.name=[r?"idx_unique":"idx",t.name,...n.map(o=>o.name)].join("_"))}toJSON(){return{entity:this.entity.name,fields:this.fields.map(t=>t.name),unique:this.unique}}}var HB=typeof global=="object"&&global&&global.Object===Object&&global,Nde=typeof self=="object"&&self&&self.Object===Object&&self,ro=HB||Nde||Function("return this")(),ui=ro.Symbol,WB=Object.prototype,_de=WB.hasOwnProperty,Cde=WB.toString,$p=ui?ui.toStringTag:void 0;function Ode(e){var t=_de.call(e,$p),n=e[$p];try{e[$p]=void 0;var r=!0}catch{}var s=Cde.call(e);return r&&(t?e[$p]=n:delete e[$p]),s}var jde=Object.prototype,Ade=jde.toString;function Tde(e){return Ade.call(e)}var $de="[object Null]",Rde="[object Undefined]",$6=ui?ui.toStringTag:void 0;function vd(e){return e==null?e===void 0?Rde:$de:$6&&$6 in Object(e)?Ode(e):Tde(e)}function $o(e){return e!=null&&typeof e=="object"}var kde="[object Symbol]";function T1(e){return typeof e=="symbol"||$o(e)&&vd(e)==kde}function GB(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var ds=Array.isArray,R6=ui?ui.prototype:void 0,k6=R6?R6.toString:void 0;function YB(e){if(typeof e=="string")return e;if(ds(e))return GB(e,YB)+"";if(T1(e))return k6?k6.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Mde=/\s/;function Ide(e){for(var t=e.length;t--&&Mde.test(e.charAt(t)););return t}var Pde=/^\s+/;function Dde(e){return e&&e.slice(0,Ide(e)+1).replace(Pde,"")}function Or(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var M6=NaN,Lde=/^[-+]0x[0-9a-f]+$/i,Fde=/^0b[01]+$/i,Bde=/^0o[0-7]+$/i,zde=parseInt;function I6(e){if(typeof e=="number")return e;if(T1(e))return M6;if(Or(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Or(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Dde(e);var n=Fde.test(e);return n||Bde.test(e)?zde(e.slice(2),n?2:8):Lde.test(e)?M6:+e}function ET(e){return e}var Vde="[object AsyncFunction]",Ude="[object Function]",qde="[object GeneratorFunction]",Hde="[object Proxy]";function $1(e){if(!Or(e))return!1;var t=vd(e);return t==Ude||t==qde||t==Vde||t==Hde}var RN=ro["__core-js_shared__"],P6=function(){var e=/[^.]+$/.exec(RN&&RN.keys&&RN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Wde(e){return!!P6&&P6 in e}var Gde=Function.prototype,Yde=Gde.toString;function xd(e){if(e!=null){try{return Yde.call(e)}catch{}try{return e+""}catch{}}return""}var Jde=/[\\^$.*+?()[\]{}|]/g,Xde=/^\[object .+?Constructor\]$/,Kde=Function.prototype,Qde=Object.prototype,Zde=Kde.toString,efe=Qde.hasOwnProperty,tfe=RegExp("^"+Zde.call(efe).replace(Jde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nfe(e){if(!Or(e)||Wde(e))return!1;var t=$1(e)?tfe:Xde;return t.test(xd(e))}function rfe(e,t){return e==null?void 0:e[t]}function wd(e,t){var n=rfe(e,t);return nfe(n)?n:void 0}var KC=wd(ro,"WeakMap"),D6=Object.create,JB=function(){function e(){}return function(t){if(!Or(t))return{};if(D6)return D6(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function sfe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function XB(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var ife=800,ofe=16,afe=Date.now;function lfe(e){var t=0,n=0;return function(){var r=afe(),s=ofe-(r-n);if(n=r,s>0){if(++t>=ife)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function cfe(e){return function(){return e}}var Ex=function(){try{var e=wd(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ufe=Ex?function(e,t){return Ex(e,"toString",{configurable:!0,enumerable:!1,value:cfe(t),writable:!0})}:ET,KB=lfe(ufe);function QB(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var dfe=9007199254740991,ffe=/^(?:0|[1-9]\d*)$/;function R1(e,t){var n=typeof e;return t=t??dfe,!!t&&(n=="number"||n!="symbol"&&ffe.test(e))&&e>-1&&e%1==0&&e<t}function NT(e,t,n){t=="__proto__"&&Ex?Ex(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function By(e,t){return e===t||e!==e&&t!==t}var hfe=Object.prototype,mfe=hfe.hasOwnProperty;function _T(e,t,n){var r=e[t];(!(mfe.call(e,t)&&By(r,n))||n===void 0&&!(t in e))&&NT(e,t,n)}function dm(e,t,n,r){var s=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=void 0;c===void 0&&(c=e[a]),s?NT(n,a,c):_T(n,a,c)}return n}var L6=Math.max;function ZB(e,t,n){return t=L6(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=L6(r.length-t,0),o=Array(i);++s<i;)o[s]=r[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=r[s];return a[t]=n(o),sfe(e,this,a)}}function pfe(e,t){return KB(ZB(e,t,ET),e+"")}var gfe=9007199254740991;function CT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gfe}function k1(e){return e!=null&&CT(e.length)&&!$1(e)}function yfe(e,t,n){if(!Or(n))return!1;var r=typeof t;return(r=="number"?k1(n)&&R1(t,n.length):r=="string"&&t in n)?By(n[t],e):!1}function bfe(e){return pfe(function(t,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&yfe(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++r<s;){var a=n[r];a&&e(t,a,r,i)}return t})}var vfe=Object.prototype;function OT(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||vfe;return e===n}function xfe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var wfe="[object Arguments]";function F6(e){return $o(e)&&vd(e)==wfe}var ez=Object.prototype,Sfe=ez.hasOwnProperty,Efe=ez.propertyIsEnumerable,Dg=F6(function(){return arguments}())?F6:function(e){return $o(e)&&Sfe.call(e,"callee")&&!Efe.call(e,"callee")};function Nfe(){return!1}var tz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,B6=tz&&typeof module=="object"&&module&&!module.nodeType&&module,_fe=B6&&B6.exports===tz,z6=_fe?ro.Buffer:void 0,Cfe=z6?z6.isBuffer:void 0,Ah=Cfe||Nfe,Ofe="[object Arguments]",jfe="[object Array]",Afe="[object Boolean]",Tfe="[object Date]",$fe="[object Error]",Rfe="[object Function]",kfe="[object Map]",Mfe="[object Number]",Ife="[object Object]",Pfe="[object RegExp]",Dfe="[object Set]",Lfe="[object String]",Ffe="[object WeakMap]",Bfe="[object ArrayBuffer]",zfe="[object DataView]",Vfe="[object Float32Array]",Ufe="[object Float64Array]",qfe="[object Int8Array]",Hfe="[object Int16Array]",Wfe="[object Int32Array]",Gfe="[object Uint8Array]",Yfe="[object Uint8ClampedArray]",Jfe="[object Uint16Array]",Xfe="[object Uint32Array]",un={};un[Vfe]=un[Ufe]=un[qfe]=un[Hfe]=un[Wfe]=un[Gfe]=un[Yfe]=un[Jfe]=un[Xfe]=!0;un[Ofe]=un[jfe]=un[Bfe]=un[Afe]=un[zfe]=un[Tfe]=un[$fe]=un[Rfe]=un[kfe]=un[Mfe]=un[Ife]=un[Pfe]=un[Dfe]=un[Lfe]=un[Ffe]=!1;function Kfe(e){return $o(e)&&CT(e.length)&&!!un[vd(e)]}function jT(e){return function(t){return e(t)}}var nz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,og=nz&&typeof module=="object"&&module&&!module.nodeType&&module,Qfe=og&&og.exports===nz,kN=Qfe&&HB.process,Th=function(){try{var e=og&&og.require&&og.require("util").types;return e||kN&&kN.binding&&kN.binding("util")}catch{}}(),V6=Th&&Th.isTypedArray,M1=V6?jT(V6):Kfe,Zfe=Object.prototype,ehe=Zfe.hasOwnProperty;function rz(e,t){var n=ds(e),r=!n&&Dg(e),s=!n&&!r&&Ah(e),i=!n&&!r&&!s&&M1(e),o=n||r||s||i,a=o?xfe(e.length,String):[],c=a.length;for(var u in e)(t||ehe.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||R1(u,c)))&&a.push(u);return a}function sz(e,t){return function(n){return e(t(n))}}var the=sz(Object.keys,Object),nhe=Object.prototype,rhe=nhe.hasOwnProperty;function she(e){if(!OT(e))return the(e);var t=[];for(var n in Object(e))rhe.call(e,n)&&n!="constructor"&&t.push(n);return t}function zy(e){return k1(e)?rz(e):she(e)}function ihe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var ohe=Object.prototype,ahe=ohe.hasOwnProperty;function lhe(e){if(!Or(e))return ihe(e);var t=OT(e),n=[];for(var r in e)r=="constructor"&&(t||!ahe.call(e,r))||n.push(r);return n}function Vy(e){return k1(e)?rz(e,!0):lhe(e)}var che=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uhe=/^\w*$/;function AT(e,t){if(ds(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||T1(e)?!0:uhe.test(e)||!che.test(e)||t!=null&&e in Object(t)}var Lg=wd(Object,"create");function dhe(){this.__data__=Lg?Lg(null):{},this.size=0}function fhe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var hhe="__lodash_hash_undefined__",mhe=Object.prototype,phe=mhe.hasOwnProperty;function ghe(e){var t=this.__data__;if(Lg){var n=t[e];return n===hhe?void 0:n}return phe.call(t,e)?t[e]:void 0}var yhe=Object.prototype,bhe=yhe.hasOwnProperty;function vhe(e){var t=this.__data__;return Lg?t[e]!==void 0:bhe.call(t,e)}var xhe="__lodash_hash_undefined__";function whe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lg&&t===void 0?xhe:t,this}function rd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rd.prototype.clear=dhe;rd.prototype.delete=fhe;rd.prototype.get=ghe;rd.prototype.has=vhe;rd.prototype.set=whe;function She(){this.__data__=[],this.size=0}function I1(e,t){for(var n=e.length;n--;)if(By(e[n][0],t))return n;return-1}var Ehe=Array.prototype,Nhe=Ehe.splice;function _he(e){var t=this.__data__,n=I1(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nhe.call(t,n,1),--this.size,!0}function Che(e){var t=this.__data__,n=I1(t,e);return n<0?void 0:t[n][1]}function Ohe(e){return I1(this.__data__,e)>-1}function jhe(e,t){var n=this.__data__,r=I1(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function el(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}el.prototype.clear=She;el.prototype.delete=_he;el.prototype.get=Che;el.prototype.has=Ohe;el.prototype.set=jhe;var Fg=wd(ro,"Map");function Ahe(){this.size=0,this.__data__={hash:new rd,map:new(Fg||el),string:new rd}}function The(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function P1(e,t){var n=e.__data__;return The(t)?n[typeof t=="string"?"string":"hash"]:n.map}function $he(e){var t=P1(this,e).delete(e);return this.size-=t?1:0,t}function Rhe(e){return P1(this,e).get(e)}function khe(e){return P1(this,e).has(e)}function Mhe(e,t){var n=P1(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function tl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tl.prototype.clear=Ahe;tl.prototype.delete=$he;tl.prototype.get=Rhe;tl.prototype.has=khe;tl.prototype.set=Mhe;var Ihe="Expected a function";function TT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ihe);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(TT.Cache||tl),n}TT.Cache=tl;var Phe=500;function Dhe(e){var t=TT(e,function(r){return n.size===Phe&&n.clear(),r}),n=t.cache;return t}var Lhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fhe=/\\(\\)?/g,Bhe=Dhe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Lhe,function(n,r,s,i){t.push(s?i.replace(Fhe,"$1"):r||n)}),t});function zhe(e){return e==null?"":YB(e)}function fm(e,t){return ds(e)?e:AT(e,t)?[e]:Bhe(zhe(e))}function hm(e){if(typeof e=="string"||T1(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function D1(e,t){t=fm(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[hm(t[n++])];return n&&n==r?e:void 0}function Bg(e,t,n){var r=e==null?void 0:D1(e,t);return r===void 0?n:r}function $T(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}var U6=ui?ui.isConcatSpreadable:void 0;function Vhe(e){return ds(e)||Dg(e)||!!(U6&&e&&e[U6])}function iz(e,t,n,r,s){var i=-1,o=e.length;for(n||(n=Vhe),s||(s=[]);++i<o;){var a=e[i];t>0&&n(a)?t>1?iz(a,t-1,n,r,s):$T(s,a):r||(s[s.length]=a)}return s}function Uhe(e){var t=e==null?0:e.length;return t?iz(e,1):[]}function oz(e){return KB(ZB(e,void 0,Uhe),e+"")}var L1=sz(Object.getPrototypeOf,Object),qhe="[object Object]",Hhe=Function.prototype,Whe=Object.prototype,az=Hhe.toString,Ghe=Whe.hasOwnProperty,Yhe=az.call(Object);function lz(e){if(!$o(e)||vd(e)!=qhe)return!1;var t=L1(e);if(t===null)return!0;var n=Ghe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&az.call(n)==Yhe}function Jhe(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(s);++r<s;)i[r]=e[r+t];return i}function Xhe(){this.__data__=new el,this.size=0}function Khe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Qhe(e){return this.__data__.get(e)}function Zhe(e){return this.__data__.has(e)}var eme=200;function tme(e,t){var n=this.__data__;if(n instanceof el){var r=n.__data__;if(!Fg||r.length<eme-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new tl(r)}return n.set(e,t),this.size=n.size,this}function Hi(e){var t=this.__data__=new el(e);this.size=t.size}Hi.prototype.clear=Xhe;Hi.prototype.delete=Khe;Hi.prototype.get=Qhe;Hi.prototype.has=Zhe;Hi.prototype.set=tme;function nme(e,t){return e&&dm(t,zy(t),e)}function rme(e,t){return e&&dm(t,Vy(t),e)}var cz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,q6=cz&&typeof module=="object"&&module&&!module.nodeType&&module,sme=q6&&q6.exports===cz,H6=sme?ro.Buffer:void 0,W6=H6?H6.allocUnsafe:void 0;function uz(e,t){if(t)return e.slice();var n=e.length,r=W6?W6(n):new e.constructor(n);return e.copy(r),r}function ime(e,t){for(var n=-1,r=e==null?0:e.length,s=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[s++]=o)}return i}function dz(){return[]}var ome=Object.prototype,ame=ome.propertyIsEnumerable,G6=Object.getOwnPropertySymbols,RT=G6?function(e){return e==null?[]:(e=Object(e),ime(G6(e),function(t){return ame.call(e,t)}))}:dz;function lme(e,t){return dm(e,RT(e),t)}var cme=Object.getOwnPropertySymbols,fz=cme?function(e){for(var t=[];e;)$T(t,RT(e)),e=L1(e);return t}:dz;function ume(e,t){return dm(e,fz(e),t)}function hz(e,t,n){var r=t(e);return ds(e)?r:$T(r,n(e))}function QC(e){return hz(e,zy,RT)}function mz(e){return hz(e,Vy,fz)}var ZC=wd(ro,"DataView"),eO=wd(ro,"Promise"),tO=wd(ro,"Set"),Y6="[object Map]",dme="[object Object]",J6="[object Promise]",X6="[object Set]",K6="[object WeakMap]",Q6="[object DataView]",fme=xd(ZC),hme=xd(Fg),mme=xd(eO),pme=xd(tO),gme=xd(KC),Pi=vd;(ZC&&Pi(new ZC(new ArrayBuffer(1)))!=Q6||Fg&&Pi(new Fg)!=Y6||eO&&Pi(eO.resolve())!=J6||tO&&Pi(new tO)!=X6||KC&&Pi(new KC)!=K6)&&(Pi=function(e){var t=vd(e),n=t==dme?e.constructor:void 0,r=n?xd(n):"";if(r)switch(r){case fme:return Q6;case hme:return Y6;case mme:return J6;case pme:return X6;case gme:return K6}return t});var yme=Object.prototype,bme=yme.hasOwnProperty;function vme(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&bme.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Nx=ro.Uint8Array;function kT(e){var t=new e.constructor(e.byteLength);return new Nx(t).set(new Nx(e)),t}function xme(e,t){var n=t?kT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var wme=/\w*$/;function Sme(e){var t=new e.constructor(e.source,wme.exec(e));return t.lastIndex=e.lastIndex,t}var Z6=ui?ui.prototype:void 0,eI=Z6?Z6.valueOf:void 0;function Eme(e){return eI?Object(eI.call(e)):{}}function pz(e,t){var n=t?kT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Nme="[object Boolean]",_me="[object Date]",Cme="[object Map]",Ome="[object Number]",jme="[object RegExp]",Ame="[object Set]",Tme="[object String]",$me="[object Symbol]",Rme="[object ArrayBuffer]",kme="[object DataView]",Mme="[object Float32Array]",Ime="[object Float64Array]",Pme="[object Int8Array]",Dme="[object Int16Array]",Lme="[object Int32Array]",Fme="[object Uint8Array]",Bme="[object Uint8ClampedArray]",zme="[object Uint16Array]",Vme="[object Uint32Array]";function Ume(e,t,n){var r=e.constructor;switch(t){case Rme:return kT(e);case Nme:case _me:return new r(+e);case kme:return xme(e,n);case Mme:case Ime:case Pme:case Dme:case Lme:case Fme:case Bme:case zme:case Vme:return pz(e,n);case Cme:return new r;case Ome:case Tme:return new r(e);case jme:return Sme(e);case Ame:return new r;case $me:return Eme(e)}}function gz(e){return typeof e.constructor=="function"&&!OT(e)?JB(L1(e)):{}}var qme="[object Map]";function Hme(e){return $o(e)&&Pi(e)==qme}var tI=Th&&Th.isMap,Wme=tI?jT(tI):Hme,Gme="[object Set]";function Yme(e){return $o(e)&&Pi(e)==Gme}var nI=Th&&Th.isSet,Jme=nI?jT(nI):Yme,Xme=1,Kme=2,Qme=4,yz="[object Arguments]",Zme="[object Array]",epe="[object Boolean]",tpe="[object Date]",npe="[object Error]",bz="[object Function]",rpe="[object GeneratorFunction]",spe="[object Map]",ipe="[object Number]",vz="[object Object]",ope="[object RegExp]",ape="[object Set]",lpe="[object String]",cpe="[object Symbol]",upe="[object WeakMap]",dpe="[object ArrayBuffer]",fpe="[object DataView]",hpe="[object Float32Array]",mpe="[object Float64Array]",ppe="[object Int8Array]",gpe="[object Int16Array]",ype="[object Int32Array]",bpe="[object Uint8Array]",vpe="[object Uint8ClampedArray]",xpe="[object Uint16Array]",wpe="[object Uint32Array]",sn={};sn[yz]=sn[Zme]=sn[dpe]=sn[fpe]=sn[epe]=sn[tpe]=sn[hpe]=sn[mpe]=sn[ppe]=sn[gpe]=sn[ype]=sn[spe]=sn[ipe]=sn[vz]=sn[ope]=sn[ape]=sn[lpe]=sn[cpe]=sn[bpe]=sn[vpe]=sn[xpe]=sn[wpe]=!0;sn[npe]=sn[bz]=sn[upe]=!1;function ag(e,t,n,r,s,i){var o,a=t&Xme,c=t&Kme,u=t&Qme;if(n&&(o=s?n(e,r,s,i):n(e)),o!==void 0)return o;if(!Or(e))return e;var f=ds(e);if(f){if(o=vme(e),!a)return XB(e,o)}else{var h=Pi(e),p=h==bz||h==rpe;if(Ah(e))return uz(e,a);if(h==vz||h==yz||p&&!s){if(o=c||p?{}:gz(e),!a)return c?ume(e,rme(o,e)):lme(e,nme(o,e))}else{if(!sn[h])return s?e:{};o=Ume(e,h,a)}}i||(i=new Hi);var y=i.get(e);if(y)return y;i.set(e,o),Jme(e)?e.forEach(function(S){o.add(ag(S,t,n,S,e,i))}):Wme(e)&&e.forEach(function(S,N){o.set(N,ag(S,t,n,N,e,i))});var v=u?c?mz:QC:c?Vy:zy,x=f?void 0:v(e);return QB(x||e,function(S,N){x&&(N=S,S=e[N]),_T(o,N,ag(S,t,n,N,e,i))}),o}var Spe=1,Epe=4;function F1(e){return ag(e,Spe|Epe)}var Npe="__lodash_hash_undefined__";function _pe(e){return this.__data__.set(e,Npe),this}function Cpe(e){return this.__data__.has(e)}function _x(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new tl;++t<n;)this.add(e[t])}_x.prototype.add=_x.prototype.push=_pe;_x.prototype.has=Cpe;function Ope(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function jpe(e,t){return e.has(t)}var Ape=1,Tpe=2;function xz(e,t,n,r,s,i){var o=n&Ape,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var h=-1,p=!0,y=n&Tpe?new _x:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var v=e[h],x=t[h];if(r)var S=o?r(x,v,h,t,e,i):r(v,x,h,e,t,i);if(S!==void 0){if(S)continue;p=!1;break}if(y){if(!Ope(t,function(N,_){if(!jpe(y,_)&&(v===N||s(v,N,n,r,i)))return y.push(_)})){p=!1;break}}else if(!(v===x||s(v,x,n,r,i))){p=!1;break}}return i.delete(e),i.delete(t),p}function $pe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}function Rpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var kpe=1,Mpe=2,Ipe="[object Boolean]",Ppe="[object Date]",Dpe="[object Error]",Lpe="[object Map]",Fpe="[object Number]",Bpe="[object RegExp]",zpe="[object Set]",Vpe="[object String]",Upe="[object Symbol]",qpe="[object ArrayBuffer]",Hpe="[object DataView]",rI=ui?ui.prototype:void 0,MN=rI?rI.valueOf:void 0;function Wpe(e,t,n,r,s,i,o){switch(n){case Hpe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qpe:return!(e.byteLength!=t.byteLength||!i(new Nx(e),new Nx(t)));case Ipe:case Ppe:case Fpe:return By(+e,+t);case Dpe:return e.name==t.name&&e.message==t.message;case Bpe:case Vpe:return e==t+"";case Lpe:var a=$pe;case zpe:var c=r&kpe;if(a||(a=Rpe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=Mpe,o.set(e,t);var f=xz(a(e),a(t),r,s,i,o);return o.delete(e),f;case Upe:if(MN)return MN.call(e)==MN.call(t)}return!1}var Gpe=1,Ype=Object.prototype,Jpe=Ype.hasOwnProperty;function Xpe(e,t,n,r,s,i){var o=n&Gpe,a=QC(e),c=a.length,u=QC(t),f=u.length;if(c!=f&&!o)return!1;for(var h=c;h--;){var p=a[h];if(!(o?p in t:Jpe.call(t,p)))return!1}var y=i.get(e),v=i.get(t);if(y&&v)return y==t&&v==e;var x=!0;i.set(e,t),i.set(t,e);for(var S=o;++h<c;){p=a[h];var N=e[p],_=t[p];if(r)var C=o?r(_,N,p,t,e,i):r(N,_,p,e,t,i);if(!(C===void 0?N===_||s(N,_,n,r,i):C)){x=!1;break}S||(S=p=="constructor")}if(x&&!S){var j=e.constructor,A=t.constructor;j!=A&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof A=="function"&&A instanceof A)&&(x=!1)}return i.delete(e),i.delete(t),x}var Kpe=1,sI="[object Arguments]",iI="[object Array]",Wb="[object Object]",Qpe=Object.prototype,oI=Qpe.hasOwnProperty;function Zpe(e,t,n,r,s,i){var o=ds(e),a=ds(t),c=o?iI:Pi(e),u=a?iI:Pi(t);c=c==sI?Wb:c,u=u==sI?Wb:u;var f=c==Wb,h=u==Wb,p=c==u;if(p&&Ah(e)){if(!Ah(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new Hi),o||M1(e)?xz(e,t,n,r,s,i):Wpe(e,t,c,n,r,s,i);if(!(n&Kpe)){var y=f&&oI.call(e,"__wrapped__"),v=h&&oI.call(t,"__wrapped__");if(y||v){var x=y?e.value():e,S=v?t.value():t;return i||(i=new Hi),s(x,S,n,r,i)}}return p?(i||(i=new Hi),Xpe(e,t,n,r,s,i)):!1}function B1(e,t,n,r,s){return e===t?!0:e==null||t==null||!$o(e)&&!$o(t)?e!==e&&t!==t:Zpe(e,t,n,r,B1,s)}var ege=1,tge=2;function nge(e,t,n,r){var s=n.length,i=s;if(e==null)return!i;for(e=Object(e);s--;){var o=n[s];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){o=n[s];var a=o[0],c=e[a],u=o[1];if(o[2]){if(c===void 0&&!(a in e))return!1}else{var f=new Hi,h;if(!(h===void 0?B1(u,c,ege|tge,r,f):h))return!1}}return!0}function wz(e){return e===e&&!Or(e)}function rge(e){for(var t=zy(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,wz(s)]}return t}function Sz(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function sge(e){var t=rge(e);return t.length==1&&t[0][2]?Sz(t[0][0],t[0][1]):function(n){return n===e||nge(n,e,t)}}function ige(e,t){return e!=null&&t in Object(e)}function Ez(e,t,n){t=fm(t,e);for(var r=-1,s=t.length,i=!1;++r<s;){var o=hm(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=s?i:(s=e==null?0:e.length,!!s&&CT(s)&&R1(o,s)&&(ds(e)||Dg(e)))}function Nz(e,t){return e!=null&&Ez(e,t,ige)}var oge=1,age=2;function lge(e,t){return AT(e)&&wz(t)?Sz(hm(e),t):function(n){var r=Bg(n,e);return r===void 0&&r===t?Nz(n,e):B1(t,r,oge|age)}}function cge(e){return function(t){return t==null?void 0:t[e]}}function uge(e){return function(t){return D1(t,e)}}function dge(e){return AT(e)?cge(hm(e)):uge(e)}function fge(e){return typeof e=="function"?e:e==null?ET:typeof e=="object"?ds(e)?lge(e[0],e[1]):sge(e):dge(e)}function hge(e){return function(t,n,r){for(var s=-1,i=Object(t),o=r(t),a=o.length;a--;){var c=o[++s];if(n(i[c],c,i)===!1)break}return t}}var _z=hge();function mge(e,t){return e&&_z(e,t,zy)}var IN=function(){return ro.Date.now()},pge="Expected a function",gge=Math.max,yge=Math.min;function bge(e,t,n){var r,s,i,o,a,c,u=0,f=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(pge);t=I6(t)||0,Or(n)&&(f=!!n.leading,h="maxWait"in n,i=h?gge(I6(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p);function y($){var k=r,R=s;return r=s=void 0,u=$,o=e.apply(R,k),o}function v($){return u=$,a=setTimeout(N,t),f?y($):o}function x($){var k=$-c,R=$-u,F=t-k;return h?yge(F,i-R):F}function S($){var k=$-c,R=$-u;return c===void 0||k>=t||k<0||h&&R>=i}function N(){var $=IN();if(S($))return _($);a=setTimeout(N,x($))}function _($){return a=void 0,p&&r?y($):(r=s=void 0,o)}function C(){a!==void 0&&clearTimeout(a),u=0,r=c=s=a=void 0}function j(){return a===void 0?o:_(IN())}function A(){var $=IN(),k=S($);if(r=arguments,s=this,c=$,k){if(a===void 0)return v(c);if(h)return clearTimeout(a),a=setTimeout(N,t),y(c)}return a===void 0&&(a=setTimeout(N,t)),o}return A.cancel=C,A.flush=j,A}function nO(e,t,n){(n!==void 0&&!By(e[t],n)||n===void 0&&!(t in e))&&NT(e,t,n)}function vge(e){return $o(e)&&k1(e)}function rO(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function xge(e){return dm(e,Vy(e))}function wge(e,t,n,r,s,i,o){var a=rO(e,n),c=rO(t,n),u=o.get(c);if(u){nO(e,n,u);return}var f=i?i(a,c,n+"",e,t,o):void 0,h=f===void 0;if(h){var p=ds(c),y=!p&&Ah(c),v=!p&&!y&&M1(c);f=c,p||y||v?ds(a)?f=a:vge(a)?f=XB(a):y?(h=!1,f=uz(c,!0)):v?(h=!1,f=pz(c,!0)):f=[]:lz(c)||Dg(c)?(f=a,Dg(a)?f=xge(a):(!Or(a)||$1(a))&&(f=gz(c))):h=!1}h&&(o.set(c,f),s(f,c,r,i,o),o.delete(c)),nO(e,n,f)}function Cz(e,t,n,r,s){e!==t&&_z(t,function(i,o){if(s||(s=new Hi),Or(i))wge(e,t,o,n,Cz,r,s);else{var a=r?r(rO(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),nO(e,o,a)}},Vy)}var Sge=bfe(function(e,t,n,r){Cz(e,t,n,r)});function Ege(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Nge=Object.prototype,_ge=Nge.hasOwnProperty;function Cge(e,t){return e!=null&&_ge.call(e,t)}function PN(e,t){return e!=null&&Ez(e,t,Cge)}function Oge(e,t){return t.length<2?e:D1(e,Jhe(t,0,-1))}function Oz(e,t){return B1(e,t)}function jge(e,t){return t=fm(t,e),e=Oge(e,t),e==null||delete e[hm(Ege(t))]}function Age(e){return lz(e)?void 0:e}var Tge=1,$ge=2,Rge=4,$h=oz(function(e,t){var n={};if(e==null)return n;var r=!1;t=GB(t,function(i){return i=fm(i,e),r||(r=i.length>1),i}),dm(e,mz(e),n),r&&(n=ag(n,Tge|$ge|Rge,Age));for(var s=t.length;s--;)jge(n,t[s]);return n});function jz(e,t,n,r){if(!Or(e))return e;t=fm(t,e);for(var s=-1,i=t.length,o=i-1,a=e;a!=null&&++s<i;){var c=hm(t[s]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(s!=o){var f=a[c];u=r?r(f,c,a):void 0,u===void 0&&(u=Or(f)?f:R1(t[s+1])?[]:{})}_T(a,c,u),a=a[c]}return e}function kge(e,t,n){for(var r=-1,s=t.length,i={};++r<s;){var o=t[r],a=D1(e,o);n(a,o)&&jz(i,fm(o,e),a)}return i}function Mge(e,t){return kge(e,t,function(n,r){return Nz(e,r)})}var Cx=oz(function(e,t){return e==null?{}:Mge(e,t)});function Gb(e,t,n){return e==null?e:jz(e,t,n)}var Ige="Expected a function";function MT(e,t,n){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(Ige);return Or(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),bge(e,t,{leading:r,maxWait:t,trailing:s})}function ti(e,t,n){var r=ds(e),s=r||Ah(e)||M1(e);if(t=fge(t),n==null){var i=e&&e.constructor;s?n=r?new i:[]:Or(e)?n=$1(i)?JB(L1(e)):{}:n={}}return(s?QB:mge)(e,function(o,a,c){return t(n,o,a,c)}),n}const Pge={primary:{schema:VB,field:Pg},text:{schema:UB,field:ST},number:{schema:BB,field:xT},boolean:{schema:AB,field:TB},date:{schema:$B,field:XC},enum:{schema:RB,field:kB},json:{schema:MB,field:IB},jsonschema:{schema:LB,field:FB}},Rw=class Rw{constructor(t){this.em=t}getIntrospector(){return this.em.connection.getIntrospector()}async introspect(){const t=await this.getIntrospector().getTables({withInternalKyselyTables:!1}),n=await this.getIntrospector().getIndices(),r=[];for(const s of t)Rw.EXCLUDE_TABLES.includes(s.name)||r.push({...s,indices:n.filter(i=>i.table===s.name)});return r}getIntrospectionFromEntity(t){const n=t.getFields(!1),r=this.em.getIndicesOf(t);return{name:t.name,isView:!1,columns:n.map(s=>({name:s.name,dataType:"TEXT",isNullable:!0,isAutoIncrementing:s instanceof Pg,hasDefaultValue:!1,comment:void 0})),indices:r.map(s=>({name:s.name,table:t.name,isUnique:s.unique,columns:s.fields.map(i=>({name:i.name,order:0}))}))}}async getDiff(){const t=await this.introspect(),n=this.em.entities.map(i=>this.getIntrospectionFromEntity(i)),r=[],s=i=>i.name;t.filter(i=>/bknd/.test(i.name)||i.isView?!1:!n.map(o=>o.name).includes(i.name)).forEach(i=>{r.push({name:i.name,isDrop:!0,isNew:!1,columns:{add:[],drop:[],change:[]},indices:{add:[],drop:[]}})});for(const i of n){const o=t.find(a=>a.name===i.name);if(!o)r.push({name:i.name,isNew:!0,columns:{add:i.columns.map(s),drop:[],change:[]},indices:{add:i.indices.map(s),drop:[]}});else{const a=i.columns.filter(y=>!o.columns.map(s).includes(y.name)),c=o.columns.filter(y=>!i.columns.map(s).includes(y.name)),u=[];for(const y of i.columns){const v=o.columns.find(S=>S.name===y.name),x=[];for(const[S,N]of Object.entries(y))v&&v[S]!==N&&x.push({attribute:S,prev:v[S],next:N});Object.keys(x).length>0&&u.push({name:y.name,changes:x})}const f=i.indices.filter(y=>!o.indices.map(v=>v.name).includes(y.name)),h=o.indices.filter(y=>!i.indices.map(v=>v.name).includes(y.name));[a,c,f,h].some(y=>y.length>0)&&r.push({name:i.name,isNew:!1,columns:{add:a.map(s),drop:c.map(s),change:[]},indices:{add:f.map(s),drop:h.map(s)}})}}return r}collectFieldSchemas(t,n){const r=[];if(n.length===0)return r;for(const s of n){const o=this.em.entity(t).getField(s).schema();o&&r.push(this.em.connection.getFieldSchema(o))}return r}async sync(t={force:!1,drop:!1}){const n=await this.getDiff(),r=[],s=this.em.connection.kysely.schema;for(const i of n){const o=[];let a=0;const c=this.collectFieldSchemas(i.name,i.columns.add),u=i.columns.drop,f=i.indices.drop;if(i.isDrop)a++,t.drop&&o.push(s.dropTable(i.name));else if(i.isNew){let h=s.createTable(i.name);for(const p of c)a++,h=h.addColumn(...p);o.push(h)}else{if(c.length>0)for(const h of c)a++,o.push(s.alterTable(i.name).addColumn(...h));if(t.drop&&u.length>0)for(const h of u)a++,o.push(s.alterTable(i.name).dropColumn(h))}for(const h of i.indices.add){const y=this.em.getIndicesOf(i.name).find(x=>x.name===h);let v=s.createIndex(h).on(i.name).columns(y.fields.map(x=>x.name));y.unique&&(v=v.unique()),o.push(v),a++}if(t.drop)for(const h of f)o.push(s.dropIndex(h)),a++;if(a!==0)for(const h of o){const{sql:p,parameters:y}=h.compile();if(r.push({sql:p,parameters:y}),t.force)try{pt.debug("[SchemaManager]",p),await h.execute()}catch(v){throw new Error(`Failed to execute query: ${p}: ${v.message}`)}}}return r}};K(Rw,"EXCLUDE_TABLES",["libsql_wasm_func_table","sqlite_sequence","_cf_KV"]);let sO=Rw;const IT=He({name:ge(),name_singular:ge(),description:ge(),sort_field:ge({default:zB.data.default_primary_field}),sort_dir:ge({enum:["asc","desc"],default:"asc"}),primary_format:ge({enum:wT})},{default:{}}).partial(),Az=["regular","system","generated"],aI=Symbol.for("bknd:entity");var Pj,Dj;const W3=class W3{constructor(t,n,r,s){Fe(this,Pj);Fe(this,Dj);K(this,"name");K(this,"fields");K(this,"config");K(this,"data");K(this,"type","regular");if(typeof t!="string"||t.length===0)throw new Error("Entity name must be a non-empty string");this.name=t,this.config=Un(IT,r||{});const i=(n==null?void 0:n.filter(o=>o instanceof Pg).length)??0;if(i>1)throw new Error(`Entity "${t}" has more than one primary field`);this.fields=i===1?[]:[new Pg(void 0,{format:this.config.primary_format})],n&&n.forEach(o=>this.addField(o)),s&&(this.type=s),this[aI]=!0}static isEntity(t){return t?t[aI]===!0:!1}static create(t){return new W3(t.name,t.fields,t.config,t.type)}getType(){return this.type}getSelect(t,n){return this.getFields().filter(r=>!r.isHidden(n??"read")).map(r=>t?`${t}.${r.name} as ${r.name}`:r.name)}getDefaultSort(){return{by:this.config.sort_field??"id",dir:this.config.sort_dir??"asc"}}getAliasedSelectFrom(t,n,r){const s=n??this.name;return this.getFields().filter(i=>!i.isVirtual()&&!i.isHidden(r??"read")&&t.includes(i.name)).map(i=>s?`${s}.${i.name} as ${i.name}`:i.name)}getFillableFields(t,n){return this.getFields(n).filter(r=>r.isFillable(t))}getRequiredFields(){return this.getFields().filter(t=>t.isRequired())}getDefaultObject(){return this.getFields().reduce((t,n)=>(n.hasDefault()&&(t[n.name]=n.getDefault()),t),{})}getField(t){return this.fields.find(n=>n.name===t)}__replaceField(t,n){const r=this.fields.findIndex(s=>s.name===t);if(r===-1)throw new Error(`Field "${t}" not found on entity "${this.name}"`);this.fields[r]=n}getPrimaryField(){return this.fields[0]}id(){return this.getPrimaryField()}get label(){return this.config.name??Ch(this.name)}field(t){return this.getField(t)}hasField(t){const n=typeof t=="string"?t:t.name;return this.fields.findIndex(r=>r.name===n)!==-1}getFields(t=!1){return t?this.fields:this.fields.filter(n=>!n.isVirtual())}addField(t){const n=this.getField(t.name);if(n){if(JSON.stringify(n)===JSON.stringify(t)){pt.warn(`Field "${t.name}" already exists on entity "${this.name}", but it's the same, so skipping.`);return}throw new Error(`Field "${t.name}" already exists on entity "${this.name}"`)}this.fields.push(t)}__setData(t){this.data=t}isValidData(t,n,r){if(typeof t!="object"&&r!=null&&r.explain)throw new Error(`Entity "${this.name}" data must be an object`);const s=this.getFillableFields(n,!1);if((r==null?void 0:r.ignoreUnknown)!==!0){const i=s.map(c=>c.name),a=Object.keys(t).filter(c=>!i.includes(c));if(a.length>0&&r!=null&&r.explain)throw new Error(`Entity "${this.name}" data must only contain known keys, unknown: "${a}"`)}for(const i of s)if(!i.isValid(t==null?void 0:t[i.name],n)){if(pt.warn("invalid data given for",this.name,n,i.name,t[i.name]),r!=null&&r.explain)throw new Error(`Field "${i.name}" has invalid data: "${t[i.name]}"`);return!1}return!0}toSchema(t){let n;switch(t==null?void 0:t.context){case"create":case"update":n=this.getFillableFields(t.context);break;default:n=this.getFields(!0)}const r=Object.fromEntries(n.map(i=>[i.name,i])),s={type:"object",additionalProperties:!1,properties:en(r,i=>{const o=i.isFillable(t==null?void 0:t.context);return{title:i.config.label,$comment:i.config.description,$field:i.type,readOnly:o?void 0:!0,...i.toJsonSchema()}})};return t!=null&&t.clean?JSON.parse(JSON.stringify(s)):s}toTypes(){return{name:this.name,type:this.type,comment:this.config.description,fields:Object.fromEntries(this.getFields().map(t=>[t.name,t.toType()]))}}toJSON(){return{type:this.type,fields:Object.fromEntries(this.fields.map(t=>[t.name,t.toJSON()])),config:this.config}}};Pj=new WeakMap,Dj=new WeakMap;let hc=W3;function zl(e){return["string","number","boolean"].includes(typeof e)}function Dge(e){return[!0,!1,0,1].includes(e)}class Lge{constructor(t,n,r){K(this,"expect");this.key=t,this.valid=n,this.validate=r}}function Oi(e,t,n){return new Lge(e,t,n)}function Tz(e,t){const n=e.find(r=>r.key===t);if(!n)throw new Error(`Expression does not exist: "${t}"`);return n}const lI="$or";function PT(e,t,n=[]){const r=t.map(c=>c.key),s=Object.keys(e),i=[lI],o={};if(s.some(c=>c.startsWith("$")&&!i.includes(c)))throw new Error(`Invalid key '${s}'. Keys must not start with '$'.`);if(n.length>0&&s.some(c=>i.includes(c)))throw new Error(`Operand ${lI} can only appear at the top level.`);function a(c,u,f=[]){if(Tz(t,c).valid(u)===!1)throw new Error(`Invalid value at "${[...f,c].join(".")}": ${u}`)}for(const[c,u]of Object.entries(e))if(c==="$or")o.$or=PT(u,t,[...n,c]);else if(zl(u))a("$eq",u,n),o[c]={$eq:u};else if(typeof u=="object"){const f=Object.keys(u).filter(h=>!r.includes(h));if(f.length===0){o[c]={};for(const[h,p]of Object.entries(u))a(h,p,[...n,c]),o[c][h]=p}else throw new Error(`Invalid key(s) at "${c}": ${f.join(", ")}. Expected expressions.`)}return o}function cI(e,t,n){const r=n.convert?PT(e,t):e,s={$and:[],$or:[],keys:new Set},{$or:i,...o}=r;function a(c,u,f,h=[]){const p=Tz(t,c);if(!p)throw new Error(`Expression does not exist: "${c}"`);if(!p.valid(u))throw new Error(`Invalid expected value at "${[...h,c].join(".")}": ${u}`);return p.validate(u,f,n.exp_ctx)}for(const[c,u]of Object.entries(o))for(const[f,h]of Object.entries(u)){const p=n.value_is_kv?c:n.object[c];s.$and.push(a(f,h,p,[c])),s.keys.add(c)}for(const[c,u]of Object.entries(i??{})){const f=n.value_is_kv?c:n.object[c];for(const[h,p]of Object.entries(u))s.$or.push(a(h,p,f,[c])),s.keys.add(c)}return s}function Fge(e){const t={$and:void 0,$or:void 0};return t.$and=e.$and.every(n=>!!n),t.$or=e.$or.some(n=>!!n),!!t.$and||!!t.$or}function Bge(e){return{convert:t=>PT(t,e),build:(t,n)=>cI(t,e,n),validate:(t,n)=>{const r=cI(t,e,n);return Fge(r)},expressions:e,expressionKeys:e.map(t=>t.key)}}function ji(e){if(typeof e!="string")throw new Error(`Invalid key: ${e}`);return e}const zge=[Oi("$eq",e=>zl(e),(e,t,n)=>n(ji(t),"=",e)),Oi("$ne",e=>zl(e),(e,t,n)=>n(ji(t),"!=",e)),Oi("$gt",e=>zl(e),(e,t,n)=>n(ji(t),">",e)),Oi("$gte",e=>zl(e),(e,t,n)=>n(ji(t),">=",e)),Oi("$lt",e=>zl(e),(e,t,n)=>n(ji(t),"<",e)),Oi("$lte",e=>zl(e),(e,t,n)=>n(ji(t),"<=",e)),Oi("$isnull",e=>Dge(e),(e,t,n)=>n(ji(t),e?"is":"is not",null)),Oi("$in",e=>Array.isArray(e),(e,t,n)=>n(ji(t),"in",e)),Oi("$notin",e=>Array.isArray(e),(e,t,n)=>n(ji(t),"not in",e)),Oi("$between",e=>Array.isArray(e)&&e.length===2,(e,t,n)=>n.between(ji(t),e[0],e[1])),Oi("$like",e=>zl(e),(e,t,n)=>n(ji(t),"like",String(e).replace(/\*/g,"%")))],DN=Bge(zge);class dc{static addClause(t,n){return Object.keys(n).length===0?t:t.where(r=>{const s=DN.build(n,{value_is_kv:!0,exp_ctx:r,convert:!0});return s.$or.length>0&&s.$and.length>0?r.and(s.$and).or(r.and(s.$or)):s.$or.length>0?r.or(s.$or):r.and(s.$and)})}static convert(t){return DN.convert(t)}static getPropertyNames(t){const{keys:n}=DN.build(t,{value_is_kv:!0,exp_ctx:()=>null,convert:!0});return Array.from(n)}}class sd{constructor(t,n,r={}){K(this,"config");K(this,"source");K(this,"target");K(this,"directions",["source","target"]);this.source=t,this.target=n;const s=this.constructor.schema;this.config=Un(s,r)}getReferenceQuery(t,n,r){return{}}helper(t){return new Uge(this,t)}other(t){const n=typeof t=="string"?t:t.name;if(this.source.entity.name===this.target.entity.name)return this.source.cardinality===1?this.target:this.source;if(this.source.entity.name===n)return this.target;if(this.target.entity.name===n)return this.source;throw new Error(`Entity "${n}" is not part of the relation "${this.source.entity.name} <-> ${this.target.entity.name}"`)}self(t){return this.other(t).entity.name===this.source.entity.name?this.target:this.source}ref(t){return this.source.reference===t?this.source:this.target}otherRef(t){return this.source.reference===t?this.target:this.source}visibleFrom(t){return this.directions.includes(t)}hydrate(t,n,r){const s=typeof t=="string"?t:t.name,i=this.ref(s),o=r.hydrate(i.entity.name,n);if(i.cardinality===1){if(Array.isArray(o)&&o.length>1)throw new Error(`Failed to hydrate "${i.entity.name}" with value: ${JSON.stringify(n)} (cardinality: 1)`);return o[0]}if(!o)throw new Error(`Failed to hydrate "${i.entity.name}" with value: ${JSON.stringify(n)} (cardinality: -)`);return o}isListableFor(t){return this.target.entity.name===t.name}get required(){return!!this.config.required}async $set(t,n,r){throw new Error("$set is not allowed")}async $create(t,n,r){throw new Error("$create is not allowed")}async $attach(t,n,r){throw new Error("$attach is not allowed")}async $detach(t,n,r){throw new Error("$detach is not allowed")}getName(){return[this.type().replace(":",""),this.source.entity.name,this.target.entity.name,this.config.mappedBy,this.config.inversedBy].filter(Boolean).join("_")}toJSON(){return{type:this.type(),source:this.source.entity.name,target:this.target.entity.name,config:this.config}}}K(sd,"schema",He({mappedBy:ge().optional(),inversedBy:ge().optional(),required:mt().optional()}));class Rh{constructor(t,n,r){K(this,"entity");K(this,"cardinality");K(this,"reference");this.entity=t,this.cardinality=r,this.reference=n}toJSON(){return{entity:this.entity.name,cardinality:this.cardinality,name:this.reference}}}const Vge=["cascade","set null","set default","restrict","no action"],$z=He({reference:ge(),target:ge(),target_field:ge({default:"id"}).optional(),target_field_type:ge({enum:["text","integer"],default:"integer"}).optional(),on_delete:ge({enum:Vge,default:"set null"}).optional(),...to.properties});class _s extends no{constructor(){super(...arguments);K(this,"type","relation")}getSchema(){return $z}static create(n,r,s){const i=[r.reference??r.entity.name,r.entity.getPrimaryField().name].join("_");return new _s(i,{...s,required:n.required,reference:r.reference,target:r.entity.name,target_field:r.entity.getPrimaryField().name,target_field_type:r.entity.getPrimaryField().fieldType})}reference(){return this.config.reference}target(){return this.config.target}targetField(){return this.config.target_field}schema(){return Object.freeze({...super.schema(),type:this.config.target_field_type??"integer",references:`${this.config.target}.${this.config.target_field}`,onDelete:this.config.on_delete??"set null"})}transformRetrieve(n){return n}async transformPersist(n,r){throw new Error("RelationField: This function should not be called")}toJsonSchema(){var n,r;return this.toSchemaWrapIfRequired(jt({$ref:`${(n=this.config)==null?void 0:n.target}#/properties/${(r=this.config)==null?void 0:r.target_field}`}))}toType(){return{...super.toType(),type:"number"}}}const zr={OneToOne:"1:1",ManyToOne:"n:1",ManyToMany:"m:n",Polymorphic:"poly"},kw=class kw extends sd{constructor(n,r,s,i){const o=(s==null?void 0:s.connectionTable)||kw.defaultConnectionTable(n,r),a=new Rh(n,n.name),c=new Rh(r,r.name);super(a,c,s);K(this,"connectionEntity");K(this,"additionalFields",[]);K(this,"connectionTableMappedName");K(this,"em");this.connectionEntity=new hc(o,i,void 0,"generated"),this.connectionTableMappedName=(s==null?void 0:s.connectionTableMappedName)||o,this.additionalFields=i||[]}static defaultConnectionTable(n,r){return`${n.name}_${r.name}`}type(){return zr.ManyToMany}isListableFor(){return!0}getField(n){const r=this.connectionEntity,s=r.fields.find(i=>i instanceof _s&&i.target()===n.name);if(!s||!(s instanceof _s))throw new Error(`Connection entity "${r.name}" does not have a relation to "${n.name}"`);return s}getQueryInfo(n){const r=this.other(n),s=this.connectionEntity,i=this.getField(n),o=this.getField(r.entity),a=`${n.name}.${n.getPrimaryField().name}`,c=`${s.name}.${i.name}`,u=`${s.name}.${o.name}`,f=[s.name,`${r.entity.name}.${r.entity.getPrimaryField().name}`,u],h=`${n.name}.${n.getPrimaryField().name}`;return{other:r,join:f,entityRef:a,selfRef:c,otherRef:u,groupBy:h}}getReferenceQuery(n,r){const{other:s,otherRef:i}=this.getQueryInfo(n);return{where:{[i]:r},join:[s.reference]}}buildJoin(n,r){const{other:s,join:i,entityRef:o,selfRef:a,groupBy:c}=this.getQueryInfo(n);return r.innerJoin(s.entity.name,o,a).innerJoin(...i).groupBy(c)}buildWith(n){if(!this.em)throw new Error("EntityManager not set, can't build");const r=this.em.connection.fn.jsonBuildObject;if(!r)throw new Error("Connection does not support jsonBuildObject");const s=5,{other:i,join:o,entityRef:a,selfRef:c}=this.getQueryInfo(n),u=this.connectionEntity.fields.filter(f=>!(f instanceof _s||f instanceof Pg));return f=>f.selectFrom(i.entity.name).select(h=>{const p=[];if(u.length>0){const y=this.connectionEntity.name;p.push(r(Object.fromEntries(u.map(v=>[v.name,h.ref(`${y}.${v.name}`)]))).as(this.connectionTableMappedName))}return p}).whereRef(a,"=",c).innerJoin(...o).limit(s)}initialize(n){this.em=n;const r=_s.create(this,this.source),s=_s.create(this,this.target);n.hasEntity(this.connectionEntity)?(this.connectionEntity.hasField(r)||this.connectionEntity.addField(r),this.connectionEntity.hasField(s)||this.connectionEntity.addField(s)):(this.connectionEntity.addField(r),this.connectionEntity.addField(s),n.addEntity(this.connectionEntity))}getName(){return[super.getName(),[this.connectionEntity.name,this.connectionTableMappedName].filter(Boolean)].join("_")}};K(kw,"schema",He({connectionTable:ge().optional(),connectionTableMappedName:ge().optional(),...sd.schema.properties}));let Ua=kw;const Sg=class Sg extends sd{constructor(n,r,s={}){const i=s.mappedBy||r.name,o=s.inversedBy||n.name,a=typeof s.sourceCardinality=="number"&&s.sourceCardinality>0?s.sourceCardinality:void 0,c=new Rh(n,o,a),u=new Rh(r,i,1);super(c,u,s);K(this,"fieldConfig");this.fieldConfig=s.fieldConfig??{}}type(){return zr.ManyToOne}initialize(n){const r=Ch(this.target.reference),s=_s.create(this,this.target,{label:r,...this.fieldConfig});this.source.entity.field(s.name)||this.source.entity.addField(_s.create(this,this.target,{label:r,...this.fieldConfig}))}getField(){const n=this.target.entity.getPrimaryField().name,r=this.source.entity.getField(`${this.target.reference}_${n}`);if(!(r instanceof _s))throw new Error(`Field "${this.target.reference}_${n}" not found on entity "${this.source.entity.name}"`);return r}queryInfo(n,r){const s=this.source.reference===r?"source":"target",i=this[s],o=this[s==="source"?"target":"source"];let a,c,u;s==="source"?(a=this.source.reference,c=`${a}.${this.getField().name}`,u=`${n.name}.${i.entity.getPrimaryField().name}`):(a=this.target.reference,c=`${a}.${n.getPrimaryField().name}`,u=`${n.name}.${this.getField().name}`);const f=`${n.name}.${n.getPrimaryField().name}`;return{other:o,self:i,relationRef:a,entityRef:c,otherRef:u,groupBy:f}}getReferenceQuery(n,r,s){const i=this.source.reference===s?"source":"target",o=this[i],a=this[i==="source"?"target":"source"];return{where:{[`${a.reference}_${a.entity.getPrimaryField().name}`]:r},join:a.entity.name===o.entity.name?[]:[a.entity.name]}}buildJoin(n,r,s){const{self:i,entityRef:o,otherRef:a,groupBy:c}=this.queryInfo(n,s);return r.innerJoin(i.entity.name,o,a).groupBy(c)}buildWith(n,r){const{self:s,entityRef:i,otherRef:o,relationRef:a}=this.queryInfo(n,r);return c=>c.selectFrom(`${s.entity.name} as ${a}`).whereRef(i,"=",o).$if(s.cardinality===1,u=>u.limit(1))}async $set(n,r,s){if(typeof s!="object")throw new Error(`Invalid value for relation field "${r}" given, expected object.`);const i=this.source.entity,a=this.helper(i.name).getMutationInfo();if(!a.$set)throw new Error(`Cannot perform $set for relation "${r}"`);const c=a.local_field,u=this.getField(),f=s[Object.keys(s)[0]];if(!c||!(u instanceof _s))throw new Error(`Cannot perform $set for relation "${r}"`);if(f===null&&!u.isRequired())return[c,null];if(!(await n.repository(u.target()).exists({[u.targetField()]:f})).data.exists){const p=u.targetField();throw new Error(`Cannot connect "${i.name}.${r}" to "${u.target()}.${p}" = "${f}": not found.`)}return[c,f]}};K(Sg,"DEFAULTS",{with_limit:5}),K(Sg,"schema",He({sourceCardinality:jt().optional(),with_limit:jt({default:Sg.DEFAULTS.with_limit}).optional(),fieldConfig:ze({label:ge()}).optional(),...sd.schema.properties}));let Oc=Sg;class iO extends Oc{constructor(t,n,r){const{mappedBy:s,inversedBy:i,required:o}=r||{};super(t,n,{mappedBy:s,inversedBy:i,sourceCardinality:1,required:o})}type(){return zr.OneToOne}isListableFor(){return!1}async $set(t,n,r){throw new Error("$set is not allowed")}async $create(t,n,r){if(r===null||typeof r!="object")throw new Error(`Invalid value for relation field "${n}" given, expected object.`);const s=this.other(this.source.entity).entity,o=this.helper(this.source.entity.name).getMutationInfo(),a=o.primary,c=o.local_field;if(!o.$create||!a||!c)throw new Error(`Cannot perform $create for relation "${n}"`);try{const{data:u}=await t.mutator(s).insertOne(r),f=u[a];return[c,f]}catch{throw new Error(`Error performing $create on "${s.name}".`)}}}class zg extends sd{constructor(t,n,r={}){const s=r.mappedBy||n.name,i=r.inversedBy||t.name,o=typeof r.targetCardinality=="number"&&r.targetCardinality>0?r.targetCardinality:void 0,a=new Rh(t,i,1),c=new Rh(n,s,o);super(a,c,r),this.directions=["source"]}type(){return zr.Polymorphic}queryInfo(t){const n=this.other(t),r=`${n.entity.name}.${this.getReferenceField().name}`,s=`${t.name}.${this.config.mappedBy}`,i=`${n.entity.name}.${this.config.mappedBy}`,o=`${t.name}.${t.getPrimaryField().name}`,a=`${n.entity.name}.${this.getEntityIdField().name}`,c=`${t.name}.${t.getPrimaryField().name}`;return{other:n,whereLhs:r,reference:s,reference_other:i,entityRef:o,otherRef:a,groupBy:c}}buildJoin(t,n){const{other:r,whereLhs:s,reference:i,entityRef:o,otherRef:a,groupBy:c}=this.queryInfo(t);return n.innerJoin(r.entity.name,u=>u.onRef(o,"=",a).on(s,"=",i)).groupBy(c)}getReferenceQuery(t,n){const r=this.queryInfo(t);return{where:{[this.getReferenceField().name]:r.reference_other,[this.getEntityIdField().name]:n}}}buildWith(t){const{other:n,whereLhs:r,reference:s,entityRef:i,otherRef:o}=this.queryInfo(t);return a=>a.selectFrom(n.entity.name).where(r,"=",s).whereRef(i,"=",o).$if(n.cardinality===1,c=>c.limit(1))}isListableFor(t){return this.source.entity.name===t.name&&this.target.cardinality!==1}getReferenceField(){return new ST("reference",{hidden:!0,fillable:["create"]})}getEntityIdField(){return new xT("entity_id",{hidden:!0,fillable:["create"]})}initialize(t){const n=this.getReferenceField(),r=this.getEntityIdField();this.target.entity.field(n.name)||this.target.entity.addField(n),this.target.entity.field(r.name)||this.target.entity.addField(r)}}K(zg,"schema",He({targetCardinality:jt().optional(),...sd.schema.properties}));const uI=["$set","$create","$attach","$detach"];class Uge{constructor(t,n){K(this,"relation");K(this,"access");K(this,"self");K(this,"other");if(this.relation=t,t.source.entity.name===n)this.access="source",this.self=t.source,this.other=t.target;else if(t.target.entity.name===n)this.access="target",this.self=t.target,this.other=t.source;else throw new Error(`Entity "${n}" is not part of the relation "${t.source.entity.name} <-> ${t.target.entity.name}"`)}getMutationInfo(){var s,i;const t={$set:!1,$create:!1,$attach:!1,$detach:!1};let n,r;switch(this.relation.type()){case zr.ManyToOne:typeof this.self.cardinality>"u"&&this.other.cardinality===1&&(t.$set=!0,n=(s=this.relation.getField())==null?void 0:s.name,r=this.other.entity.getPrimaryField().name);break;case zr.OneToOne:this.access==="source"&&(t.$create=!0,t.$set=!0,n=(i=this.relation.getField())==null?void 0:i.name,r=this.other.entity.getPrimaryField().name);break;case zr.ManyToMany:this.access==="source"&&(t.$attach=!0,t.$detach=!0,r=this.other.entity.getPrimaryField().name);break}return{reference:this.other.reference,local_field:n,...t,primary:r,cardinality:this.other.cardinality,relation_type:this.relation.type()}}}class qge{constructor(t,n){this.entity=t,this.em=n}getRelationalKeys(){const t=[];return this.entity.type==="generated"&&this.em.relations.all.find(r=>r instanceof Ua&&r.connectionEntity.name===this.entity.name)instanceof Ua&&t.push(...this.entity.fields.filter(r=>r.type==="relation").map(r=>r.name)),this.em.relationsOf(this.entity.name).map(n=>{const r=n.helper(this.entity.name).getMutationInfo();t.push(r.reference),r.local_field&&t.push(r.local_field)}),t}async persistRelationField(t,n,r){if(r===null&&!t.isRequired())return[n,r];if(typeof r=="object")throw new Error(`Invalid value for relation field "${n}" given, expected primitive.`);if(!(await this.em.repository(t.target()).exists({[t.targetField()]:r})).data.exists){const i=t.targetField();throw new Error(`Cannot connect "${this.entity.name}.${n}" to "${t.target()}.${i}" = "${r}": not found.`)}return[n,r]}async persistReference(t,n,r){if(typeof r!="object"||r===null||typeof r>"u")throw new Error(`Invalid value for relation "${n}" given, expected object to persist reference. Like '{$set: {id: 1}}'.`);const s=Object.keys(r)[0];if(!uI.includes(s))throw new Error(`Invalid operation "${s}" for relation "${n}". Allowed: ${uI.join(", ")}`);const i=r[s];return await t[s](this.em,n,i)}async persistRelation(t,n){const r=this.entity.getField(t);if(r instanceof _s)return this.persistRelationField(r,t,n);const s=this.em.relationOf(this.entity.name,t);if(s)return this.persistReference(s,t,n);throw new Error(`Relation "${t}" failed to resolve on entity "${this.entity.name}": Unable to resolve relation origin.`)}}const DT={[zr.OneToOne]:{schema:iO.schema,cls:iO},[zr.ManyToOne]:{schema:Oc.schema,cls:Oc},[zr.ManyToMany]:{schema:Ua.schema,cls:Ua},[zr.Polymorphic]:{schema:zg.schema,cls:zg}},Hge={relation:{schema:$z,field:_s}};class Rz{constructor(t,n={}){K(this,"results",[]);K(this,"time",0);this.conn=t,this.options=n}get(){if(!this.results)throw new Error("Result not executed");return Array.isArray(this.results)?this.results??[]:this.results[0]}first(){const t=this.get();return(Array.isArray(t)?t[0]:t)??{}}get sql(){return this.first().sql}get parameters(){return this.first().parameters}get data(){var t;return this.options.single?(t=this.first().data)==null?void 0:t[0]:this.first().data??[]}async execute(t){var r,s,i,o;const n=Array.isArray(t)?t:[t];for(const a of n){const c=a.compile();await((s=(r=this.options).beforeExecute)==null?void 0:s.call(r,c));try{const u=performance.now(),f=await this.conn.executeQuery(c);this.time=Number.parseFloat((performance.now()-u).toFixed(2)),this.results.push({...f,data:(o=(i=this.options).hydrator)==null?void 0:o.call(i,f.rows),items:f.rows.length,time:this.time,sql:c.sql,parameters:[...c.parameters]})}catch(u){if(this.options.onError)await this.options.onError(u);else throw u}}return this}additionalMetaKeys(){return[]}toJSON(){const{rows:t,data:n,...r}=this.first(),s=qr()?["items","time","sql","parameters"]:["items","time"],i=pF(r,[...s,...this.additionalMetaKeys()]);return{data:this.data,meta:i}}}class Wge extends Rz{constructor(t,n,r){const s=(r==null?void 0:r.logParams)===void 0?qr():r.logParams;super(t.connection,{hydrator:i=>t.hydrate(n.name,i),beforeExecute:i=>{r!=null&&r.silent||pt.debug(`[Mutation]
${i.sql}
`,s?i.parameters:void 0)},onError:i=>{if(!(r!=null&&r.silent))throw pt.error("[ERROR] Mutator:",i.message),i},...r}),this.em=t,this.entity=n}}const ha=class ha{constructor(t,n,r){K(this,"emgr");K(this,"__unstable_disable_system_entity_creation",!0);this.em=t,this.entity=n,this.options=r,this.emgr=(r==null?void 0:r.emgr)??new Fy(Sx)}__unstable_toggleSystemEntityCreation(t){this.__unstable_disable_system_entity_creation=t}get conn(){return this.em.connection.kysely}async getValidatedData(t,n){const r=this.entity;if(!n)throw new Error("Context must be provided for validation");const s=Object.keys(t),i={},o=new qge(r,this.em),a=o.getRelationalKeys();for(const c of s){if(a.includes(c)){const f=await o.persistRelation(c,t[c]);if(Array.isArray(f)){const[h,p]=f;i[h]=p}continue}const u=r.getField(c);if(!u)throw new Error(`Field "${c}" not found on entity "${r.name}". Fields: ${r.getFillableFields().map(f=>f.name).join(", ")}`);if(!u.isFillable(n))throw new Error(`Field "${c}" is not fillable on entity "${r.name}"`);i[c]=await u.transformPersist(t[c],this.em,n),i[c]=this.em.connection.toDriver(i[c],u)}if(Object.keys(i).length===0)throw new Error(`No data left to update "${r.name}"`);return i}async performQuery(t,n){return await new Wge(this.em,this.entity,{silent:!1,...n}).execute(t)}async insertOne(t){const n=this.entity;if(n.type==="system"&&this.__unstable_disable_system_entity_creation)throw new Error(`Creation of system entity "${n.name}" is disabled`);const r=await this.emgr.emit(new ha.Events.MutatorInsertBefore({entity:n,data:t})),s=r.returned?r.params.data:t;let i=await this.getValidatedData({...n.getDefaultObject(),...s},"create");const o=n.getRequiredFields();for(const h of o)if(typeof i[h.name]>"u"||i[h.name]===null)throw new Error(`Field "${h.name}" is required`);const a=n.getPrimaryField(),c=a.getNewValue();c&&(i={[a.name]:c,...i});const u=this.conn.insertInto(n.name).values(i).returning(n.getSelect()),f=await this.performQuery(u,{single:!0});return await this.emgr.emit(new ha.Events.MutatorInsertAfter({entity:n,data:f.data,changed:i})),f}async updateOne(t,n){const r=this.entity;if(!t)throw new Error("ID must be provided for update");const s=await this.emgr.emit(new ha.Events.MutatorUpdateBefore({entity:r,entityId:t,data:n})),i=s.returned?s.params.data:n,o=await this.getValidatedData(i,"update"),a=this.conn.updateTable(r.name).set(o).where(r.id().name,"=",t).returning(r.getSelect()),c=await this.performQuery(a,{single:!0});return await this.emgr.emit(new ha.Events.MutatorUpdateAfter({entity:r,entityId:t,data:c.data,changed:o})),c}async deleteOne(t){const n=this.entity;if(!t)throw new Error("ID must be provided for deletion");await this.emgr.emit(new ha.Events.MutatorDeleteBefore({entity:n,entityId:t}));const r=this.conn.deleteFrom(n.name).where(n.id().name,"=",t).returning(n.getSelect()),s=await this.performQuery(r,{single:!0});return await this.emgr.emit(new ha.Events.MutatorDeleteAfter({entity:n,entityId:t,data:s.data})),s}getValidOptions(t){const n=this.entity,r={};if(t!=null&&t.where){const s=dc.getPropertyNames(t.where).filter(i=>typeof n.getField(i)>"u");if(s.length>0)throw new Kl(`Invalid where field(s): ${s.join(", ")}`);r.where=t.where}return r}appendWhere(t,n){const r=this.entity;if(r.name,n){const s=dc.getPropertyNames(n).filter(i=>typeof r.getField(i)>"u");if(s.length>0)throw new Kl(`Invalid where field(s): ${s.join(", ")}`);return dc.addClause(t,n)}return t}async deleteWhere(t){const n=this.entity;if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Where clause must be provided for mass deletion");const r=this.appendWhere(this.conn.deleteFrom(n.name),t).returning(n.getSelect());return await this.performQuery(r)}async updateWhere(t,n){const r=this.entity,s=await this.getValidatedData(t,"update");if(!n||typeof n!="object"||Object.keys(n).length===0)throw new Error("Where clause must be provided for mass update");const i=this.appendWhere(this.conn.updateTable(r.name),n).set(s).returning(r.getSelect());return await this.performQuery(i)}async insertMany(t){const n=this.entity;if(n.type==="system"&&this.__unstable_disable_system_entity_creation)throw new Error(`Creation of system entity "${n.name}" is disabled`);const r=[];for(const i of t){const o={...n.getDefaultObject(),...await this.getValidatedData(i,"create")},a=n.getRequiredFields();for(const c of a)if(typeof o[c.name]>"u"||o[c.name]===null)throw new Error(`Field "${c.name}" is required`);r.push(o)}const s=this.conn.insertInto(n.name).values(r).returning(n.getSelect());return await this.performQuery(s)}};K(ha,"Events",Sx);let oO=ha;const Ox=ge({}),dI=nn([Ox,Sn(Ox,{uniqueItems:!0})],{default:[],coerce:e=>Array.isArray(e)?e:typeof e=="string"?e.includes(",")?e.split(","):[e].filter(Boolean):[]}),Yb={by:"id",dir:"asc"},Gge=ze({by:ge(),dir:ge({enum:["asc","desc"]}).optional()}).strict(),Yge=nn([ge(),Gge],{default:Yb,coerce:e=>{if(typeof e=="string"){if(/^-?[a-zA-Z_][a-zA-Z0-9_.]*$/.test(e)){const t=e[0]==="-"?"desc":"asc";return{by:t==="desc"?e.slice(1):e,dir:t}}else if(/^{.*}$/.test(e))return{...Yb,...JSON.parse(e)};return pt.warn(`Invalid sort given: '${JSON.stringify(e)}'`),Yb}else if(Oh(e))return{...Yb,...e};return e}}),Jge=nn([ge(),ze({})],{default:{},examples:[{attribute:{$eq:1}}],coerce:e=>{if(e==null||e==="")return{};const t=typeof e=="string"?JSON.parse(e):e;return dc.convert(t)}}),Xge=e=>nn([Ox,Sn(Ox),e],{coerce:function(t,n={}){let r=t;if(typeof r=="string"&&(r.match(/^\{/)||r.match(/^\[/)?r=JSON.parse(r):r.includes(",")?r=r.split(","):r=[r]),Array.isArray(r)&&(r=r.reduce((s,i)=>(s[i]={},s),{})),Oh(r))for(const s in r)r[s]=e.coerce(r[s],n);return r}}),Ks=Hle(e=>ze({limit:jt({default:10}),offset:jt({default:0}),sort:Yge,where:Jge,select:dI,join:dI,with:Xge(e)}).partial()),Kge=()=>Ks.template({},{withOptional:!0});class jx{static buildClause(t,n,r,s){const i=t.relationOf(r.name,s);if(!i)throw new Error(`Relation "${s}" not found`);return i.buildJoin(r,n,s)}static getJoinedEntityNames(t,n,r){return r.flatMap(s=>{const i=t.relationOf(n.name,s);if(!i)throw new Error(`Relation "${s}" not found`);const o=i.other(n);return i instanceof Oc?[o.entity.name]:i instanceof Ua?[o.entity.name,i.connectionEntity.name]:[]})}static addClause(t,n,r,s){if(s.length===0)return n;let i=n;for(const o of s)i=jx.buildClause(t,i,r,o);return i}}class Qge extends Rz{constructor(t,n,r){super(t.connection,{hydrator:s=>t.hydrate(n.name,s),beforeExecute:s=>{r!=null&&r.silent||pt.debug(`Query:
${s.sql}
`,s.parameters)},onError:s=>{if((r==null?void 0:r.silent)!==!0)throw pt.error("Repository:",String(s)),s},...r}),this.em=t,this.entity=n}shouldIncludeCounts(t){return t===void 0?this.conn.supports("softscans"):t}async execute(t,n){var s,i,o,a,c,u;if(this.shouldIncludeCounts(n==null?void 0:n.includeCounts)){const f=(v="count")=>this.conn.kysely.fn.countAll().as(v),h=t.clearSelect().select(f()).clearLimit().clearOffset().clearGroupBy().clearOrderBy(),p=this.conn.kysely.selectFrom(this.entity.name).select(f()),y=t.compile();(i=(s=this.options).beforeExecute)==null||i.call(s,y);try{const v=performance.now(),[x,S,N]=await this.em.connection.executeQueries(y,h,p);this.time=Number.parseFloat((performance.now()-v).toFixed(2)),this.results.push({...x,data:(a=(o=this.options).hydrator)==null?void 0:a.call(o,x.rows),items:x.rows.length,count:e6(((c=S.rows[0])==null?void 0:c.count)??0),total:e6(((u=N.rows[0])==null?void 0:u.count)??0),time:this.time,sql:y.sql,parameters:[...y.parameters]})}catch(v){if(this.options.onError)await this.options.onError(v);else throw v}return this}return await super.execute(t)}get count(){return this.first().count}get total(){return this.first().total}additionalMetaKeys(){return["count","total"]}}const Gl=class Gl{constructor(t,n,r={}){K(this,"emgr");this.em=t,this.entity=n,this.options=r,this.emgr=(r==null?void 0:r.emgr)??new Fy(Sx)}cloneFor(t,n={}){return new Gl(this.em,this.em.entity(t),{...this.options,...n,emgr:this.emgr})}get conn(){return this.em.connection.kysely}checkIndex(t,n,r){var i;!this.em.getIndexedFields(t).map(o=>o.name).includes(n)&&((i=this.options)==null?void 0:i.silent)!==!0&&pt.warn(`Field "${t}.${n}" used in "${r}" is not indexed`)}getValidOptions(t){var s;const n=this.entity,r={...structuredClone(Kge()),sort:n.getDefaultSort(),select:n.getSelect()};if(!t)return r;if(t.sort){if(!r.select.includes(t.sort.by))throw new Kl(`Invalid sort field "${t.sort.by}"`);if(!["asc","desc"].includes(t.sort.dir))throw new Kl(`Invalid sort direction "${t.sort.dir}"`);this.checkIndex(n.name,t.sort.by,"sort"),r.sort={dir:t.sort.dir??"asc",by:t.sort.by}}if(t.select&&t.select.length>0){const i=t.select.filter(o=>!r.select.includes(o));if(i.length>0)throw new Kl(`Invalid select field(s): ${i.join(", ")}`).context({entity:n.name,valid:r.select});r.select=t.select}if(t.with&&(Vg.validateWiths(this.em,n.name,t.with),r.with=t.with),t.join&&t.join.length>0)for(const i of t.join){if(!this.em.relationOf(n.name,i))throw new Kl(`JOIN: "${i}" is not a relation of "${n.name}"`);r.join.push(i)}if(t.where){const i=[n.name];((s=r.join)==null?void 0:s.length)>0&&i.push(...jx.getJoinedEntityNames(this.em,n,r.join));const o=dc.getPropertyNames(t.where).filter(a=>{if(a.includes(".")){const[c,u]=a.split(".");return i.includes(c)?(this.checkIndex(c,u,"where"),!this.em.entity(c).getField(u)):!0}return this.checkIndex(n.name,a,"where"),typeof n.getField(a)>"u"});if(o.length>0)throw new Kl(`Invalid where field(s): ${o.join(", ")}`).context({aliases:i,entity:n.name});r.where=t.where}return t.limit&&(r.limit=t.limit),t.offset&&(r.offset=t.offset),r}async performQuery(t,n,r){return await new Qge(this.em,this.entity,{silent:this.options.silent,...n}).execute(t,{includeCounts:(r==null?void 0:r.includeCounts)??this.options.includeCounts})}async triggerFindBefore(t,n){const r=n.limit===1?Gl.Events.RepositoryFindOneBefore:Gl.Events.RepositoryFindManyBefore;await this.emgr.emit(new r({entity:t,options:n}))}async triggerFindAfter(t,n,r){n.limit===1?await this.emgr.emit(new Gl.Events.RepositoryFindOneAfter({entity:t,options:n,data:r})):await this.emgr.emit(new Gl.Events.RepositoryFindManyAfter({entity:t,options:n,data:r}))}async single(t,n){await this.triggerFindBefore(this.entity,n);const r=await this.performQuery(t,{single:!0});return await this.triggerFindAfter(this.entity,n,r.data),r}addOptionsToQueryBuilder(t,n,r){var h,p;const s=this.entity;let i=t??this.conn.selectFrom(s.name);const o=(r==null?void 0:r.validate)!==!1?this.getValidOptions(n):n;if(!o)return i;const a=(r==null?void 0:r.alias)??s.name,c=y=>`${a}.${y}`,u=(r==null?void 0:r.ignore)??[],f={limit:10,offset:0,...r==null?void 0:r.defaults};return!u.includes("select")&&o.select&&(i=i.select(s.getAliasedSelectFrom(o.select,a))),!u.includes("with")&&o.with&&(i=Vg.addClause(this.em,i,s,o.with)),!u.includes("join")&&o.join&&(i=jx.addClause(this.em,i,s,o.join)),!u.includes("where")&&o.where&&(i=dc.addClause(i,o.where)),u.includes("limit")||(i=i.limit(o.limit??f.limit),u.includes("offset")||(i=i.offset(o.offset??f.offset))),u.includes("sort")||(i=i.orderBy(c(((h=o.sort)==null?void 0:h.by)??"id"),((p=o.sort)==null?void 0:p.dir)??"asc")),i}buildQuery(t,n=[]){const r=this.entity,s=this.getValidOptions(t);return{qb:this.addOptionsToQueryBuilder(void 0,s,{ignore:n,alias:r.name,validate:!1}),options:s}}async findId(t,n){const{qb:r,options:s}=this.buildQuery({...n,where:{[this.entity.getPrimaryField().name]:t},limit:1},["offset","sort"]);return this.single(r,s)}async findOne(t,n){const{qb:r,options:s}=this.buildQuery({...n,where:t,limit:1});return await this.single(r,s)}async findMany(t){const{qb:n,options:r}=this.buildQuery(t);await this.triggerFindBefore(this.entity,r);const s=await this.performQuery(n);return await this.triggerFindAfter(this.entity,r,s.data),s}async findManyByReference(t,n,r){const s=this.entity,o=this.em.relations.listableRelationsOf(s).find(f=>f.ref(n).reference===n);if(!o)throw new Error(`Relation "${n}" not found or not listable on entity "${s.name}"`);const a=o.other(s).entity,c=o.getReferenceQuery(a,t,n);if(!("where"in c)||Object.keys(c.where).length===0)throw new Error(`Invalid reference query for "${n}" on entity "${a.name}"`);const u={...r,...c,where:{...c.where,...(r==null?void 0:r.where)??{}}};return this.cloneFor(a).findMany(u)}async count(t){const n=this.entity,r=this.getValidOptions({where:t}),s=this.conn.fn.count(Ig`*`).as("count");let i=this.conn.selectFrom(n.name).select(s);return r.where&&(i=dc.addClause(i,r.where)),await this.performQuery(i,{hydrator:o=>{var a;return{count:((a=o[0])==null?void 0:a.count)??0}}},{includeCounts:!1})}async exists(t){const n=this.entity,r=this.getValidOptions({where:t}),s=this.conn.fn.count(Ig`*`).as("count");let i=this.conn.selectFrom(n.name).select(s);return i=dc.addClause(i,r.where).limit(1),await this.performQuery(i,{hydrator:o=>{var a;return{exists:((a=o[0])==null?void 0:a.count)>0}}})}};K(Gl,"Events",OB);let aO=Gl;class Vg{static addClause(t,n,r,s){if(!s||!Oh(s))return console.warn(`'withs' undefined or invalid, given: ${JSON.stringify(s)}`),n;const i=t.connection.fn;let o=n;for(const[a,c]of Object.entries(s)){const u=t.relationOf(r.name,a);if(!u)throw new Error(`Relation "${r.name}<>${a}" not found`);const f=u.ref(a).cardinality,h=f===1?i.jsonObjectFrom:i.jsonArrayFrom;if(!h)throw new Error("Connection does not support jsonObjectFrom/jsonArrayFrom");const p=u.other(r);o=o.select(y=>{let v=u.buildWith(r,a)(y);return c&&(v=t.repo(p.entity).addOptionsToQueryBuilder(v,c,{ignore:["with","join",f===1?"limit":void 0].filter(Boolean)})),c.with&&(v=Vg.addClause(t,v,p.entity,c.with)),h(v).as(p.reference)})}return o}static validateWiths(t,n,r){let s=0;if(!r||!Oh(r))return r&&console.warn(`'withs' invalid, given: ${JSON.stringify(r)}`),s;const i=[];for(const[o,a]of Object.entries(r)){if(!t.relationOf(n,o))throw new Kl(`WITH: "${o}" is not a relation of "${n}"`);s++,"with"in a&&i.push(Vg.validateWiths(t,o,a.with))}return i.length>0&&(s+=Math.max(...i)),s}}const Eg=class Eg{constructor(t,n,r=[],s=[],i){K(this,"connection");K(this,"_entities",[]);K(this,"_relations",[]);K(this,"_indices",[]);K(this,"_schema");K(this,"emgr");if(t.forEach(o=>this.addEntity(o)),r.forEach(o=>this.addRelation(o)),s.forEach(o=>this.addIndex(o)),!yB.isConnection(n))throw new Vue("");this.connection=n,this.emgr=i??new Fy,this.emgr.registerEvents(Eg.Events)}fork(){return new Eg(this._entities,this.connection,this._relations,this._indices)}clear(){return this._entities=[],this._relations=[],this._indices=[],this}get entities(){return this._entities}get relations(){return new jB(this._relations)}get indices(){return this._indices}async ping(){return(await Ig`SELECT 1`.execute(this.connection.kysely)).rows.length>0}addEntity(t){const n=this.entities.find(r=>r.name===t.name);if(n){if(JSON.stringify(n)===JSON.stringify(t)){pt.warn(`Entity "${t.name}" already exists, but it's the same, skipping adding it.`);return}throw new Error(`Entity "${t.name}" already exists`)}this.entities.push(t)}__replaceEntity(t,n=t.name){const r=this._entities.findIndex(s=>s.name===n);if(r===-1)throw new Error(`Entity "${n}" not found and cannot be replaced`);this._entities[r]=t}entity(t,n){const r=this.entities.find(s=>hc.isEntity(t)?s.name===t.name:s.name===t);if(!r){if(n===!0)return;throw new Hue(hc.isEntity(t)?t.name:t)}return r}hasEntity(t){const n=typeof t=="string"?t:t.name;return this.entities.some(r=>r.name===n)}hasIndex(t){const n=typeof t=="string"?t:t.name;return this.indices.some(r=>r.name===n)}getIndexedFields(t){const n=this.entity(t),r=this.getIndicesOf(n),s=n.fields.filter(o=>o.type==="relation"),i=r.map(o=>o.fields[0]);return[n.getPrimaryField(),...s,...i].filter(Boolean)}addRelation(t){if(!this.entity(t.source.entity.name)||!this.entity(t.target.entity.name))throw new Error("Relation source or target entity not found");if(this._relations.find(r=>{const s=r.source.entity.name===t.source.entity.name&&r.target.entity.name===t.target.entity.name,i=r.source.reference===t.source.reference&&r.target.reference===t.target.reference;return s&&i}))throw new Error(`Relation "${t.type}" between "${t.source.entity.name}" and "${t.target.entity.name}" already exists`);this._relations.push(t),t.initialize(this)}relationsOf(t){return this.relations.relationsOf(this.entity(t))}relationOf(t,n){return this.relations.relationOf(this.entity(t),n)}hasRelations(t){return this.relations.hasRelations(this.entity(t))}relatedEntitiesOf(t){return this.relations.relatedEntitiesOf(this.entity(t))}relationReferencesOf(t){return this.relations.relationReferencesOf(this.entity(t))}repository(t,n={}){return this.repo(t,n)}repo(t,n={}){return new aO(this,this.entity(t),{...n,emgr:this.emgr})}mutator(t){return new oO(this,this.entity(t),{emgr:this.emgr})}addIndex(t,n=!1){if(this.indices.find(r=>r.name===t.name)){if(n)throw new Error(`Index "${t.name}" already exists`);return}this._indices.push(t)}getIndicesOf(t){const n=hc.isEntity(t)?t:this.entity(t);return this.indices.filter(r=>r.entity.name===n.name)}schema(){return this._schema||(this._schema=new sO(this)),this._schema}hydrate(t,n){const r=this.entity(t),s=[];for(const i of n){for(let[o,a]of Object.entries(i)){const c=r.getField(o);if(!c||c.isVirtual()){const u=this.relationOf(t,o);if(u){if(!a)continue;a=u.hydrate(o,Array.isArray(a)?a:[a],this),i[o]=a;continue}else if(c!=null&&c.isVirtual())continue;throw new Error(`Field "${o}" not found on entity "${r.name}"`)}try{a===null&&c.hasDefault()&&(i[o]=c.getDefault()),a=this.connection.fromDriver(a,c),i[o]=c.transformRetrieve(a)}catch(u){throw new Uue(`"${c.type}" field "${o}" on entity "${r.name}": ${u.message}`)}}s.push(i)}return s}toJSON(){return{entities:Object.fromEntries(this.entities.map(t=>[t.name,t.toJSON()])),relations:Object.fromEntries(this.relations.all.map(t=>[t.getName(),t.toJSON()])),indices:Object.fromEntries(this.indices.map(t=>[t.name,t.toJSON()]))}}};K(Eg,"Events",{...Sx,...OB});let Ax=Eg;var fI=(e,t,n)=>(r,s)=>{let i=-1;return o(0);async function o(a){if(a<=i)throw new Error("next() called multiple times");i=a;let c,u=!1,f;if(e[a]?(f=e[a][0][0],r.req.routeIndex=a):f=a===e.length&&s||void 0,f)try{c=await f(r,()=>o(a+1))}catch(h){if(h instanceof Error&&t)r.error=h,c=await t(h,r),u=!0;else throw h}else r.finalized===!1&&n&&(c=await n(r));return c&&(r.finalized===!1||u)&&(r.res=c),r}},Zge=Symbol(),eye=async(e,t=Object.create(null))=>{const{all:n=!1,dot:r=!1}=t,i=(e instanceof kz?e.raw.headers:e.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?tye(e,{all:n,dot:r}):{}};async function tye(e,t){const n=await e.formData();return n?nye(n,t):{}}function nye(e,t){const n=Object.create(null);return e.forEach((r,s)=>{t.all||s.endsWith("[]")?rye(n,s,r):n[s]=r}),t.dot&&Object.entries(n).forEach(([r,s])=>{r.includes(".")&&(sye(n,r,s),delete n[r])}),n}var rye=(e,t,n)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(n):e[t]=[e[t],n]:t.endsWith("[]")?e[t]=[n]:e[t]=n},sye=(e,t,n)=>{let r=e;const s=t.split(".");s.forEach((i,o)=>{o===s.length-1?r[i]=n:((!r[i]||typeof r[i]!="object"||Array.isArray(r[i])||r[i]instanceof File)&&(r[i]=Object.create(null)),r=r[i])})},hI=e=>w1(e,uT),ph,Qs,Ga,Mz,Iz,lO,nc,C8,kz=(C8=class{constructor(e,t="/",n=[[]]){Fe(this,Ga);K(this,"raw");Fe(this,ph);Fe(this,Qs);K(this,"routeIndex",0);K(this,"path");K(this,"bodyCache",{});Fe(this,nc,e=>{const{bodyCache:t,raw:n}=this,r=t[e];if(r)return r;const s=Object.keys(t)[0];return s?t[s].then(i=>(s==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=n[e]()});this.raw=e,this.path=t,Be(this,Qs,n),Be(this,ph,{})}param(e){return e?it(this,Ga,Mz).call(this,e):it(this,Ga,Iz).call(this)}query(e){return Qle(this.url,e)}queries(e){return Zle(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((n,r)=>{t[r]=n}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await eye(this,e))}json(){return Y(this,nc).call(this,"json")}text(){return Y(this,nc).call(this,"text")}arrayBuffer(){return Y(this,nc).call(this,"arrayBuffer")}blob(){return Y(this,nc).call(this,"blob")}formData(){return Y(this,nc).call(this,"formData")}addValidatedData(e,t){Y(this,ph)[e]=t}valid(e){return Y(this,ph)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[Zge](){return Y(this,Qs)}get matchedRoutes(){return Y(this,Qs)[0].map(([[,e]])=>e)}get routePath(){return Y(this,Qs)[0].map(([[,e]])=>e)[this.routeIndex].path}},ph=new WeakMap,Qs=new WeakMap,Ga=new WeakSet,Mz=function(e){const t=Y(this,Qs)[0][this.routeIndex][1][e],n=it(this,Ga,lO).call(this,t);return n?/\%/.test(n)?hI(n):n:void 0},Iz=function(){const e={},t=Object.keys(Y(this,Qs)[0][this.routeIndex][1]);for(const n of t){const r=it(this,Ga,lO).call(this,Y(this,Qs)[0][this.routeIndex][1][n]);r&&typeof r=="string"&&(e[n]=/\%/.test(r)?hI(r):r)}return e},lO=function(e){return Y(this,Qs)[1]?Y(this,Qs)[1][e]:e},nc=new WeakMap,C8),iye={Stringify:1},Pz=async(e,t,n,r,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const i=e.callbacks;return i!=null&&i.length?(s?s[0]+=e:s=[e],Promise.all(i.map(a=>a({phase:t,buffer:s,context:r}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Pz(c,t,!1,r,s))).then(()=>s[0]))):Promise.resolve(e)},oye="text/plain; charset=UTF-8",LN=(e,t)=>({"Content-Type":e,...t}),Sy,Ey,pa,gh,ga,Pr,Ny,yh,bh,Bu,_y,Cy,rc,Mf,O8,aye=(O8=class{constructor(e,t){Fe(this,rc);Fe(this,Sy);Fe(this,Ey);K(this,"env",{});Fe(this,pa);K(this,"finalized",!1);K(this,"error");Fe(this,gh);Fe(this,ga);Fe(this,Pr);Fe(this,Ny);Fe(this,yh);Fe(this,bh);Fe(this,Bu);Fe(this,_y);Fe(this,Cy);K(this,"render",(...e)=>(Y(this,yh)??Be(this,yh,t=>this.html(t)),Y(this,yh).call(this,...e)));K(this,"setLayout",e=>Be(this,Ny,e));K(this,"getLayout",()=>Y(this,Ny));K(this,"setRenderer",e=>{Be(this,yh,e)});K(this,"header",(e,t,n)=>{this.finalized&&Be(this,Pr,new Response(Y(this,Pr).body,Y(this,Pr)));const r=Y(this,Pr)?Y(this,Pr).headers:Y(this,Bu)??Be(this,Bu,new Headers);t===void 0?r.delete(e):n!=null&&n.append?r.append(e,t):r.set(e,t)});K(this,"status",e=>{Be(this,gh,e)});K(this,"set",(e,t)=>{Y(this,pa)??Be(this,pa,new Map),Y(this,pa).set(e,t)});K(this,"get",e=>Y(this,pa)?Y(this,pa).get(e):void 0);K(this,"newResponse",(...e)=>it(this,rc,Mf).call(this,...e));K(this,"body",(e,t,n)=>it(this,rc,Mf).call(this,e,t,n));K(this,"text",(e,t,n)=>!Y(this,Bu)&&!Y(this,gh)&&!t&&!n&&!this.finalized?new Response(e):it(this,rc,Mf).call(this,e,t,LN(oye,n)));K(this,"json",(e,t,n)=>it(this,rc,Mf).call(this,JSON.stringify(e),t,LN("application/json",n)));K(this,"html",(e,t,n)=>{const r=s=>it(this,rc,Mf).call(this,s,t,LN("text/html; charset=UTF-8",n));return typeof e=="object"?Pz(e,iye.Stringify,!1,{}).then(r):r(e)});K(this,"redirect",(e,t)=>(this.header("Location",String(e)),this.newResponse(null,t??302)));K(this,"notFound",()=>(Y(this,bh)??Be(this,bh,()=>new Response),Y(this,bh).call(this,this)));Be(this,Sy,e),t&&(Be(this,ga,t.executionCtx),this.env=t.env,Be(this,bh,t.notFoundHandler),Be(this,Cy,t.path),Be(this,_y,t.matchResult))}get req(){return Y(this,Ey)??Be(this,Ey,new kz(Y(this,Sy),Y(this,Cy),Y(this,_y))),Y(this,Ey)}get event(){if(Y(this,ga)&&"respondWith"in Y(this,ga))return Y(this,ga);throw Error("This context has no FetchEvent")}get executionCtx(){if(Y(this,ga))return Y(this,ga);throw Error("This context has no ExecutionContext")}get res(){return Y(this,Pr)||Be(this,Pr,new Response(null,{headers:Y(this,Bu)??Be(this,Bu,new Headers)}))}set res(e){if(Y(this,Pr)&&e){e=new Response(e.body,e);for(const[t,n]of Y(this,Pr).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const r=Y(this,Pr).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of r)e.headers.append("set-cookie",s)}else e.headers.set(t,n)}Be(this,Pr,e),this.finalized=!0}get var(){return Y(this,pa)?Object.fromEntries(Y(this,pa)):{}}},Sy=new WeakMap,Ey=new WeakMap,pa=new WeakMap,gh=new WeakMap,ga=new WeakMap,Pr=new WeakMap,Ny=new WeakMap,yh=new WeakMap,bh=new WeakMap,Bu=new WeakMap,_y=new WeakMap,Cy=new WeakMap,rc=new WeakSet,Mf=function(e,t,n){const r=Y(this,Pr)?new Headers(Y(this,Pr).headers):Y(this,Bu)??new Headers;if(typeof t=="object"&&"headers"in t){const i=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[o,a]of i)o.toLowerCase()==="set-cookie"?r.append(o,a):r.set(o,a)}if(n)for(const[i,o]of Object.entries(n))if(typeof o=="string")r.set(i,o);else{r.delete(i);for(const a of o)r.append(i,a)}const s=typeof t=="number"?t:(t==null?void 0:t.status)??Y(this,gh);return new Response(e,{status:s,headers:r})},O8),Yn="ALL",lye="all",cye=["get","post","put","delete","options","patch"],Dz="Can not add a route since the matcher is already built.",Lz=class extends Error{},uye="__COMPOSED_HANDLER",dye=e=>e.text("404 Not Found",404),mI=(e,t)=>{if("getResponse"in e){const n=e.getResponse();return t.newResponse(n.body,n)}return console.error(e),t.text("Internal Server Error",500)},$i,Jn,Bz,Ri,gu,Iv,Pv,j8,Fz=(j8=class{constructor(t={}){Fe(this,Jn);K(this,"get");K(this,"post");K(this,"put");K(this,"delete");K(this,"options");K(this,"patch");K(this,"all");K(this,"on");K(this,"use");K(this,"router");K(this,"getPath");K(this,"_basePath","/");Fe(this,$i,"/");K(this,"routes",[]);Fe(this,Ri,dye);K(this,"errorHandler",mI);K(this,"onError",t=>(this.errorHandler=t,this));K(this,"notFound",t=>(Be(this,Ri,t),this));K(this,"fetch",(t,...n)=>it(this,Jn,Pv).call(this,t,n[1],n[0],t.method));K(this,"request",(t,n,r,s)=>t instanceof Request?this.fetch(n?new Request(t,n):t,r,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Rf("/",t)}`,n),r,s)));K(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(it(this,Jn,Pv).call(this,t.request,t,void 0,t.request.method))})});[...cye,lye].forEach(i=>{this[i]=(o,...a)=>(typeof o=="string"?Be(this,$i,o):it(this,Jn,gu).call(this,i,Y(this,$i),o),a.forEach(c=>{it(this,Jn,gu).call(this,i,Y(this,$i),c)}),this)}),this.on=(i,o,...a)=>{for(const c of[o].flat()){Be(this,$i,c);for(const u of[i].flat())a.map(f=>{it(this,Jn,gu).call(this,u.toUpperCase(),Y(this,$i),f)})}return this},this.use=(i,...o)=>(typeof i=="string"?Be(this,$i,i):(Be(this,$i,"*"),o.unshift(i)),o.forEach(a=>{it(this,Jn,gu).call(this,Yn,Y(this,$i),a)}),this);const{strict:r,...s}=t;Object.assign(this,s),this.getPath=r??!0?t.getPath??PF:Kle}route(t,n){const r=this.basePath(t);return n.routes.map(s=>{var o;let i;n.errorHandler===mI?i=s.handler:(i=async(a,c)=>(await fI([],n.errorHandler)(a,()=>s.handler(a,c))).res,i[uye]=s.handler),it(o=r,Jn,gu).call(o,s.method,s.path,i)}),this}basePath(t){const n=it(this,Jn,Bz).call(this);return n._basePath=Rf(this._basePath,t),n}mount(t,n,r){let s,i;r&&(typeof r=="function"?i=r:(i=r.optionHandler,r.replaceRequest===!1?s=c=>c:s=r.replaceRequest));const o=i?c=>{const u=i(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};s||(s=(()=>{const c=Rf(this._basePath,t),u=c==="/"?0:c.length;return f=>{const h=new URL(f.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,f)}})());const a=async(c,u)=>{const f=await n(s(c.req.raw),...o(c));if(f)return f;await u()};return it(this,Jn,gu).call(this,Yn,Rf(t,"*"),a),this}},$i=new WeakMap,Jn=new WeakSet,Bz=function(){const t=new Fz({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,Be(t,Ri,Y(this,Ri)),t.routes=this.routes,t},Ri=new WeakMap,gu=function(t,n,r){t=t.toUpperCase(),n=Rf(this._basePath,n);const s={basePath:this._basePath,path:n,method:t,handler:r};this.router.add(t,n,[r,s]),this.routes.push(s)},Iv=function(t,n){if(t instanceof Error)return this.errorHandler(t,n);throw t},Pv=function(t,n,r,s){if(s==="HEAD")return(async()=>new Response(null,await it(this,Jn,Pv).call(this,t,n,r,"GET")))();const i=this.getPath(t,{env:r}),o=this.router.match(s,i),a=new aye(t,{path:i,matchResult:o,env:r,executionCtx:n,notFoundHandler:Y(this,Ri)});if(o[0].length===1){let u;try{u=o[0][0][0][0](a,async()=>{a.res=await Y(this,Ri).call(this,a)})}catch(f){return it(this,Jn,Iv).call(this,f,a)}return u instanceof Promise?u.then(f=>f||(a.finalized?a.res:Y(this,Ri).call(this,a))).catch(f=>it(this,Jn,Iv).call(this,f,a)):u??Y(this,Ri).call(this,a)}const c=fI(o[0],this.errorHandler,Y(this,Ri));return(async()=>{try{const u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return it(this,Jn,Iv).call(this,u,a)}})()},j8),Tx="[^/]+",lg=".*",cg="(?:|/.*)",Jp=Symbol(),fye=new Set(".\\+*[^]$()");function hye(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===lg||e===cg?1:t===lg||t===cg?-1:e===Tx?1:t===Tx?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var zu,Vu,ki,A8,cO=(A8=class{constructor(){Fe(this,zu);Fe(this,Vu);Fe(this,ki,Object.create(null))}insert(t,n,r,s,i){if(t.length===0){if(Y(this,zu)!==void 0)throw Jp;if(i)return;Be(this,zu,n);return}const[o,...a]=t,c=o==="*"?a.length===0?["","",lg]:["","",Tx]:o==="/*"?["","",cg]:o.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(c){const f=c[1];let h=c[2]||Tx;if(f&&c[2]&&(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h)))throw Jp;if(u=Y(this,ki)[h],!u){if(Object.keys(Y(this,ki)).some(p=>p!==lg&&p!==cg))throw Jp;if(i)return;u=Y(this,ki)[h]=new cO,f!==""&&Be(u,Vu,s.varIndex++)}!i&&f!==""&&r.push([f,Y(u,Vu)])}else if(u=Y(this,ki)[o],!u){if(Object.keys(Y(this,ki)).some(f=>f.length>1&&f!==lg&&f!==cg))throw Jp;if(i)return;u=Y(this,ki)[o]=new cO}u.insert(a,n,r,s,i)}buildRegExpStr(){const n=Object.keys(Y(this,ki)).sort(hye).map(r=>{const s=Y(this,ki)[r];return(typeof Y(s,Vu)=="number"?`(${r})@${Y(s,Vu)}`:fye.has(r)?`\\${r}`:r)+s.buildRegExpStr()});return typeof Y(this,zu)=="number"&&n.unshift(`#${Y(this,zu)}`),n.length===0?"":n.length===1?n[0]:"(?:"+n.join("|")+")"}},zu=new WeakMap,Vu=new WeakMap,ki=new WeakMap,A8),Mw,Oy,T8,mye=(T8=class{constructor(){Fe(this,Mw,{varIndex:0});Fe(this,Oy,new cO)}insert(e,t,n){const r=[],s=[];for(let o=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const u=`@\\${o}`;return s[o]=[u,c],o++,a=!0,u}),!a)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let o=s.length-1;o>=0;o--){const[a]=s[o];for(let c=i.length-1;c>=0;c--)if(i[c].indexOf(a)!==-1){i[c]=i[c].replace(a,s[o][1]);break}}return Y(this,Oy).insert(i,t,r,Y(this,Mw),n),r}buildRegExp(){let e=Y(this,Oy).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const n=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,i,o)=>i!==void 0?(n[++t]=Number(i),"$()"):(o!==void 0&&(r[Number(o)]=++t),"")),[new RegExp(`^${e}`),n,r]}},Mw=new WeakMap,Oy=new WeakMap,T8),zz=[],pye=[/^$/,[],Object.create(null)],Dv=Object.create(null);function Vz(e){return Dv[e]??(Dv[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,n)=>n?`\\${n}`:"(?:|/.*)")}$`))}function gye(){Dv=Object.create(null)}function yye(e){var u;const t=new mye,n=[];if(e.length===0)return pye;const r=e.map(f=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,h],[p,y])=>f?1:p?-1:h.length-y.length),s=Object.create(null);for(let f=0,h=-1,p=r.length;f<p;f++){const[y,v,x]=r[f];y?s[v]=[x.map(([N])=>[N,Object.create(null)]),zz]:h++;let S;try{S=t.insert(v,h,y)}catch(N){throw N===Jp?new Lz(v):N}y||(n[h]=x.map(([N,_])=>{const C=Object.create(null);for(_-=1;_>=0;_--){const[j,A]=S[_];C[j]=A}return[N,C]}))}const[i,o,a]=t.buildRegExp();for(let f=0,h=n.length;f<h;f++)for(let p=0,y=n[f].length;p<y;p++){const v=(u=n[f][p])==null?void 0:u[1];if(!v)continue;const x=Object.keys(v);for(let S=0,N=x.length;S<N;S++)v[x[S]]=a[v[x[S]]]}const c=[];for(const f in o)c[f]=n[o[f]];return[i,c,s]}function _f(e,t){if(e){for(const n of Object.keys(e).sort((r,s)=>s.length-r.length))if(Vz(n).test(t))return[...e[n]]}}var sc,ic,Jh,Uz,qz,$8,bye=($8=class{constructor(){Fe(this,Jh);K(this,"name","RegExpRouter");Fe(this,sc);Fe(this,ic);Be(this,sc,{[Yn]:Object.create(null)}),Be(this,ic,{[Yn]:Object.create(null)})}add(e,t,n){var a;const r=Y(this,sc),s=Y(this,ic);if(!r||!s)throw new Error(Dz);r[e]||[r,s].forEach(c=>{c[e]=Object.create(null),Object.keys(c[Yn]).forEach(u=>{c[e][u]=[...c[Yn][u]]})}),t==="/*"&&(t="*");const i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=Vz(t);e===Yn?Object.keys(r).forEach(u=>{var f;(f=r[u])[t]||(f[t]=_f(r[u],t)||_f(r[Yn],t)||[])}):(a=r[e])[t]||(a[t]=_f(r[e],t)||_f(r[Yn],t)||[]),Object.keys(r).forEach(u=>{(e===Yn||e===u)&&Object.keys(r[u]).forEach(f=>{c.test(f)&&r[u][f].push([n,i])})}),Object.keys(s).forEach(u=>{(e===Yn||e===u)&&Object.keys(s[u]).forEach(f=>c.test(f)&&s[u][f].push([n,i]))});return}const o=DF(t)||[t];for(let c=0,u=o.length;c<u;c++){const f=o[c];Object.keys(s).forEach(h=>{var p;(e===Yn||e===h)&&((p=s[h])[f]||(p[f]=[..._f(r[h],f)||_f(r[Yn],f)||[]]),s[h][f].push([n,i-u+c+1]))})}}match(e,t){gye();const n=it(this,Jh,Uz).call(this);return this.match=(r,s)=>{const i=n[r]||n[Yn],o=i[2][s];if(o)return o;const a=s.match(i[0]);if(!a)return[[],zz];const c=a.indexOf("",1);return[i[1][c],a]},this.match(e,t)}},sc=new WeakMap,ic=new WeakMap,Jh=new WeakSet,Uz=function(){const e=Object.create(null);return Object.keys(Y(this,ic)).concat(Object.keys(Y(this,sc))).forEach(t=>{e[t]||(e[t]=it(this,Jh,qz).call(this,t))}),Be(this,sc,Be(this,ic,void 0)),e},qz=function(e){const t=[];let n=e===Yn;return[Y(this,sc),Y(this,ic)].forEach(r=>{const s=r[e]?Object.keys(r[e]).map(i=>[i,r[e][i]]):[];s.length!==0?(n||(n=!0),t.push(...s)):e!==Yn&&t.push(...Object.keys(r[Yn]).map(i=>[i,r[Yn][i]]))}),n?yye(t):null},$8),oc,ya,R8,vye=(R8=class{constructor(e){K(this,"name","SmartRouter");Fe(this,oc,[]);Fe(this,ya,[]);Be(this,oc,e.routers)}add(e,t,n){if(!Y(this,ya))throw new Error(Dz);Y(this,ya).push([e,t,n])}match(e,t){if(!Y(this,ya))throw new Error("Fatal error");const n=Y(this,oc),r=Y(this,ya),s=n.length;let i=0,o;for(;i<s;i++){const a=n[i];try{for(let c=0,u=r.length;c<u;c++)a.add(...r[c]);o=a.match(e,t)}catch(c){if(c instanceof Lz)continue;throw c}this.match=a.match.bind(a),Be(this,oc,[a]),Be(this,ya,void 0);break}if(i===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,o}get activeRouter(){if(Y(this,ya)||Y(this,oc).length!==1)throw new Error("No active router has been determined yet.");return Y(this,oc)[0]}},oc=new WeakMap,ya=new WeakMap,R8),Rp=Object.create(null),ac,wr,Uu,vh,gr,ba,yu,k8,Hz=(k8=class{constructor(t,n,r){Fe(this,ba);Fe(this,ac);Fe(this,wr);Fe(this,Uu);Fe(this,vh,0);Fe(this,gr,Rp);if(Be(this,wr,r||Object.create(null)),Be(this,ac,[]),t&&n){const s=Object.create(null);s[t]={handler:n,possibleKeys:[],score:0},Be(this,ac,[s])}Be(this,Uu,[])}insert(t,n,r){Be(this,vh,++Nk(this,vh)._);let s=this;const i=Wle(n),o=[];for(let a=0,c=i.length;a<c;a++){const u=i[a],f=i[a+1],h=Jle(u,f),p=Array.isArray(h)?h[0]:u;if(p in Y(s,wr)){s=Y(s,wr)[p],h&&o.push(h[1]);continue}Y(s,wr)[p]=new Hz,h&&(Y(s,Uu).push(h),o.push(h[1])),s=Y(s,wr)[p]}return Y(s,ac).push({[t]:{handler:r,possibleKeys:o.filter((a,c,u)=>u.indexOf(a)===c),score:Y(this,vh)}}),s}search(t,n){var c;const r=[];Be(this,gr,Rp);let i=[this];const o=IF(n),a=[];for(let u=0,f=o.length;u<f;u++){const h=o[u],p=u===f-1,y=[];for(let v=0,x=i.length;v<x;v++){const S=i[v],N=Y(S,wr)[h];N&&(Be(N,gr,Y(S,gr)),p?(Y(N,wr)["*"]&&r.push(...it(this,ba,yu).call(this,Y(N,wr)["*"],t,Y(S,gr))),r.push(...it(this,ba,yu).call(this,N,t,Y(S,gr)))):y.push(N));for(let _=0,C=Y(S,Uu).length;_<C;_++){const j=Y(S,Uu)[_],A=Y(S,gr)===Rp?{}:{...Y(S,gr)};if(j==="*"){const L=Y(S,wr)["*"];L&&(r.push(...it(this,ba,yu).call(this,L,t,Y(S,gr))),Be(L,gr,A),y.push(L));continue}if(!h)continue;const[$,k,R]=j,F=Y(S,wr)[$],z=o.slice(u).join("/");if(R instanceof RegExp){const L=R.exec(z);if(L){if(A[k]=L[0],r.push(...it(this,ba,yu).call(this,F,t,Y(S,gr),A)),Object.keys(Y(F,wr)).length){Be(F,gr,A);const B=((c=L[0].match(/\//))==null?void 0:c.length)??0;(a[B]||(a[B]=[])).push(F)}continue}}(R===!0||R.test(h))&&(A[k]=h,p?(r.push(...it(this,ba,yu).call(this,F,t,A,Y(S,gr))),Y(F,wr)["*"]&&r.push(...it(this,ba,yu).call(this,Y(F,wr)["*"],t,A,Y(S,gr)))):(Be(F,gr,A),y.push(F)))}}i=y.concat(a.shift()??[])}return r.length>1&&r.sort((u,f)=>u.score-f.score),[r.map(({handler:u,params:f})=>[u,f])]}},ac=new WeakMap,wr=new WeakMap,Uu=new WeakMap,vh=new WeakMap,gr=new WeakMap,ba=new WeakSet,yu=function(t,n,r,s){const i=[];for(let o=0,a=Y(t,ac).length;o<a;o++){const c=Y(t,ac)[o],u=c[n]||c[Yn],f={};if(u!==void 0&&(u.params=Object.create(null),i.push(u),r!==Rp||s&&s!==Rp))for(let h=0,p=u.possibleKeys.length;h<p;h++){const y=u.possibleKeys[h],v=f[u.score];u.params[y]=s!=null&&s[y]&&!v?s[y]:r[y]??(s==null?void 0:s[y]),f[u.score]=!0}}return i},k8),qu,M8,xye=(M8=class{constructor(){K(this,"name","TrieRouter");Fe(this,qu);Be(this,qu,new Hz)}add(e,t,n){const r=DF(t);if(r){for(let s=0,i=r.length;s<i;s++)Y(this,qu).insert(e,r[s],n);return}Y(this,qu).insert(e,t,n)}match(e,t){return Y(this,qu).search(e,t)}},qu=new WeakMap,M8),z1=class extends Fz{constructor(e={}){super(e),this.router=e.router??new vye({routers:[new bye,new xye]})}};class pI{constructor(t,n,r){K(this,"_default");K(this,"_value");K(this,"_config");K(this,"_restriction_bypass",!1);this._schema=t,this.options=r,this._default=$f(t.template({},{withOptional:!0})),this._value=$f(Un(t,n??{},{withDefaults:!0,forceParse:this.isForceParse(),skipMark:this.isForceParse()})),this._config=$f(this._value)}isForceParse(){var t;return((t=this.options)==null?void 0:t.forceParse)??!0}default(){return this._default}async onBeforeUpdate(t,n){var r;return(r=this.options)!=null&&r.onBeforeUpdate?this.options.onBeforeUpdate(t,n):n}get(t){return t!=null&&t.stripMark?vce(this._config):this._config}clone(){return structuredClone(this._config)}async set(t,n){var i,o;const r=Un(this._schema,structuredClone(t),{coerce:!1,forceParse:!0,skipMark:this.isForceParse()}),s=await this.onBeforeUpdate(this._config,r);return this._value=$f(s),this._config=$f(s),n!==!0&&await((o=(i=this.options)==null?void 0:i.onUpdate)==null?void 0:o.call(i,this._config)),this._config}bypass(){return this._restriction_bypass=!0,this}throwIfRestricted(t){var r;if(this._restriction_bypass){this._restriction_bypass=!1;return}const n=((r=this.options)==null?void 0:r.restrictPaths)??[];if(Array.isArray(n)&&n.length>0){for(const s of n)if(typeof t=="string"?t.startsWith(s):PN(t,s))throw new Error(`Path "${s}" is restricted`)}}async patch(t,n){var a;const r=this.clone(),s=t.length>0?Gb({},t,n):n;this.throwIfRestricted(s);const i=mF(r,s,(c,u)=>{if(Array.isArray(c)&&Array.isArray(u))return u});if((a=this.options)!=null&&a.overwritePaths){const u=dF(n).map(f=>t.length>0?t+"."+f:f).filter(f=>{var h,p;return(p=(h=this.options)==null?void 0:h.overwritePaths)==null?void 0:p.some(y=>typeof y=="string"?f===y:y.test(f))});if(u.length>0){const f=u.length>1?u.filter(h=>u.some(p=>p!==h&&p.startsWith(h))):u;for(const h of f)Gb(i,h,Bg(s,h))}}const o=await this.set(i);return[s,o]}async overwrite(t,n){const r=this.clone(),s=t.length>0?Gb({},t,n):n;this.throwIfRestricted(s);const i=Gb(r,t,n),o=await this.set(i);return[s,o]}has(t){const n=t.split(".");if(n.length>1){const r=n.slice(0,-1).join(".");if(!PN(this._config,r))throw new Error(`Parent path "${r}" does not exist`)}return PN(this._config,t)}async remove(t){if(this.throwIfRestricted(t),!this.has(t))throw new Error(`Path "${t}" does not exist`);const n=this.clone(),r=Bg(n,t),s=$h(n,t),i=await this.set(s);return[r,i]}}var aC;let Uy=(aC=class{constructor(t,n){K(this,"_built",!1);K(this,"_schema");K(this,"_listener",()=>null);this._ctx=n,this._schema=new pI(this.getSchema(),t,{forceParse:this.useForceParse(),onUpdate:async r=>{await this._listener(r)},restrictPaths:this.getRestrictedPaths(),overwritePaths:this.getOverwritePaths(),onBeforeUpdate:this.onBeforeUpdate.bind(this)})}onBeforeUpdate(t,n){return n}setListener(t){return this._listener=t,this}useForceParse(){return!1}getRestrictedPaths(){}getOverwritePaths(){}get configDefault(){return this._schema.default()}get config(){return this._schema.get()}setContext(t){return this._ctx=t,this}schema(){return this._schema}onServerInit(t){}get ctx(){if(!this._ctx)throw new Error("Context not set");return this._ctx}async build(){throw new Error("Not implemented")}setBuilt(){this._built=!0,this._schema=new pI(this.getSchema(),this.toJSON(!0),{onUpdate:async t=>{await this._listener(t)},forceParse:this.useForceParse(),restrictPaths:this.getRestrictedPaths(),overwritePaths:this.getOverwritePaths(),onBeforeUpdate:this.onBeforeUpdate.bind(this)})}isBuilt(){return this._built}throwIfNotBuilt(){if(!this._built)throw new Error("Config not built: "+this.constructor.name)}toJSON(t){return this.config}},K(aC,"ctx_flags",{sync_required:!1,ctx_reload_required:!1}),aC);class wye extends yB{constructor(){super(void 0);K(this,"name","dummy");K(this,"supported",{batching:!0})}getFieldSchema(n,r){throw new Error("Method not implemented.")}}const Wz=He({entity:ge(),min_items:jt(),max_items:jt(),mime_types:Sn(ge()),...to.properties}).partial();class Ug extends no{constructor(n,r){super(n,{...r,fillable:["update"],virtual:!0});K(this,"type","media")}getSchema(){return Wz}getMaxItems(){return this.config.max_items}getMinItems(){return this.config.min_items}schema(){}toJsonSchema(){var i,o;const n="../schema.json#/properties/media",r=(i=this.config)==null?void 0:i.min_items,s=(o=this.config)==null?void 0:o.max_items;return s===1?{$ref:n}:{type:"array",items:{$ref:n},minItems:r,maxItems:s}}}const Jb={text:e=>new ST(e.field_name,{...e.config,required:e.is_required}),number:e=>new xT(e.field_name,{...e.config,required:e.is_required}),date:e=>new XC(e.field_name,{...e.config,required:e.is_required}),datetime:e=>new XC(e.field_name,{...e.config,required:e.is_required}),boolean:e=>new TB(e.field_name,{...e.config,required:e.is_required}),enumm:e=>new kB(e.field_name,{...e.config,required:e.is_required}),json:e=>new IB(e.field_name,{...e.config,required:e.is_required}),jsonSchema:e=>new FB(e.field_name,{...e.config,required:e.is_required}),media:e=>new Ug(e.field_name,{...e.config,entity:e.entity.name,required:e.is_required}),medium:e=>new Ug(e.field_name,{...e.config,entity:e.entity.name,required:e.is_required})};class mm{constructor(t,n,r){this.type=t,this.config=n,this.is_required=r}required(){return this.is_required=!0,this}getField(t){if(!Jb[this.type])throw new Error(`Unknown field type: ${this.type}`);try{return Jb[this.type](t)}catch(n){throw new Error(`Faild to construct field "${this.type}": ${n}`)}}make(t){if(!Jb[this.type])throw new Error(`Unknown field type: ${this.type}`);try{return Jb[this.type]({entity:{name:"unknown",fields:{}},field_name:t,config:this.config,is_required:this.is_required})}catch(n){throw new Error(`Faild to construct field "${this.type}": ${n}`)}}}function wa(e){return new mm("text",e,!1)}function gI(e){return new mm("number",e,!1)}function Sye(e){return new mm("date",{...e,type:"datetime"},!1)}function Eye(e){return new mm("boolean",e,!1)}function yI(e){var r;const n={options:{type:typeof((r=e==null?void 0:e.enum)==null?void 0:r[0])!="string"?"objects":"strings",values:(e==null?void 0:e.enum)??[]}};return new mm("enumm",n,!1)}function Nye(e){return new mm("json",e,!1)}function Gz(e,t,n,r){const s=[];for(const[i,o]of Object.entries(t)){const a=o,c={entity:{name:e,fields:t},field_name:i,config:a.config,is_required:a.is_required};s.push(a.getField(c))}return new hc(e,s,n,r)}function _ye(e){return{manyToOne:(t,n)=>new Oc(e,t,n),oneToOne:(t,n)=>new iO(e,t,n),manyToMany:(t,n,r)=>{const s=[];if(r){const i=r,o=[],a=(n==null?void 0:n.connectionTable)??Ua.defaultConnectionTable(e,t);for(const[c,u]of Object.entries(r)){const f=u,h={entity:{name:a,fields:i},field_name:c,config:f.config,is_required:f.is_required};o.push(f.getField(h))}s.push(o)}return new Ua(e,t,n,s)},polyToOne:(t,n)=>new zg(e,t,{...n,targetCardinality:1}),polyToMany:(t,n)=>new zg(e,t,n)}}function Cye(e){return{on:(t,n)=>{const r=t.map(s=>{const i=e.field(s);if(!i)throw new Error(`Field "${String(s)}" not found on entity "${e.name}"`);return i});return new qB(e,r,n)}}}class Oye extends Ax{constructor(t,n=[],r=[]){super(Object.values(t),new wye,n,r),this.__entities=t}withConnection(t){return new Ax(this.entities,t,this.relations.all,this.indices)}}function Yz(e,t){const n=[],r=[],s=a=>new Proxy(_ye(a),{get(c,u){return(...f)=>(n.push(c[u](...f)),s(a))}}),i=a=>new Proxy(Cye(a),{get(c,u){return(...f)=>(r.push(c[u](...f)),i(a))}});t&&t({relation:s,index:i},e);const o=new Oye(e,n,r);return{DB:o.__entities,entities:o.__entities,relations:n,indices:r,proto:o,toJSON:()=>o.toJSON()}}function jye(e,t){const n=e.toJSON(),r=s=>{if(Qu(s)&&("required"in s&&(t!=null&&t.removeRequired)&&(s.required=void 0),"default"in s&&(t!=null&&t.removeDefault)&&(s.default=void 0),"properties"in s&&Qu(s.properties)))for(const i in s.properties)s.properties[i]=r(s.properties[i]);return s};return r(n),xa(n)}function Aye(e,t){const n={...e.properties};return en(n,(r,s)=>{if(!t(r))return r})}const kh=Symbol.for("bknd-mcp-schema");class LT{constructor(t,n,r){K(this,"cleanSchema");this.schema=t,this.name=n,this.options=r,this.cleanSchema=this.getCleanSchema(this.schema)}getCleanSchema(t){if(t.type!=="object")return t;const n=Aye(t,s=>Qu(s)&&kh in s),r=He(n);return jye(r,{removeRequired:!0,removeDefault:!1})}getToolOptions(t){const{tools:n,resources:r,...s}=this.options,i=o=>o&&[t&&Ku(t),o].filter(Boolean).join(" ");return{title:i(this.options.title??this.schema.title),description:i(this.options.description??this.schema.description),annotations:{destructiveHint:!0,idempotentHint:!0,...s.annotations}}}getManager(t){const n=t.context.app.modules;if("mutateConfigSafe"in n)return n;throw new Error("Manager not found")}}class Tye extends AF{constructor(t,n,r){const{mcp:s,...i}=r||{};super(n,i),this[kh]=new LT(this,t,s||{})}get mcp(){return this[kh]}toolGet(t){return new cc([this.mcp.name,"get"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:He({path:ge({pattern:/^[a-zA-Z0-9_.]{0,}$/,title:"Path",description:"Path to the property to get, e.g. `key.subkey`"}).optional(),depth:jt({description:"Limit the depth of the response"}).optional(),secrets:mt({default:!1,description:"Include secrets in the response config"}).optional()}),annotations:{readOnlyHint:!0,destructiveHint:!1}},async(n,r)=>{const s=r.context.app.toJSON(n.secrets),i=Er(s,t.instancePath);let o=Er(i,n.path??[]);return n.depth&&(o=joe(o,n.depth)),r.json({path:n.path??"",secrets:n.secrets??!1,partial:!!n.depth,value:o??null})})}toolUpdate(t){const n=this.mcp.cleanSchema;return new cc([this.mcp.name,"update"].join("_"),{...this.mcp.getToolOptions("update"),inputSchema:He({full:mt({default:!1}).optional(),return_config:mt({default:!1,description:"If the new configuration should be returned"}).optional(),value:He(n.properties).partial()})},async(r,s)=>{const{full:i,value:o,return_config:a}=r,[c]=t.instancePath,u=this.mcp.getManager(s);i?await u.mutateConfigSafe(c).set(o):await u.mutateConfigSafe(c).patch("",o);let f;if(a){const h=s.context.app.toJSON();f=Er(h,t.instancePath)}return s.json({success:!0,module:c,config:f})})}getTools(t){const{tools:n=[]}=this.mcp.options;return[this.toolGet(t),this.toolUpdate(t),...n]}}const V1=(e,t,n)=>new Tye(e,t,n),bI=Symbol.for("bknd-mcp-record-opts");class $ye extends $F{constructor(t,n,r,s){const{mcp:i,...o}=r||{};super(n,o),this[kh]=new LT(this,t,i||{}),this[bI]={new_schema:s}}get mcp(){return this[kh]}getNewSchema(t=this.additionalProperties){return this[bI].new_schema??this.additionalProperties??t}toolGet(t){return new cc([this.mcp.name,"get"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:He({key:ge({description:"key to get"}).optional(),secrets:mt({default:!1,description:"(optional) include secrets in the response config"}).optional(),schema:mt({default:!1,description:"(optional) include the schema in the response"}).optional()}),annotations:{readOnlyHint:!0,destructiveHint:!1}},async(n,r)=>{const s=r.context.app.toJSON(n.secrets),i=Er(s,t.instancePath),[o]=t.instancePath,a=n.schema?this.getNewSchema().toJSON():void 0;if(n.key){if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);const c=Er(i,n.key);return r.json({secrets:n.secrets??!1,module:o,key:n.key,value:c??null,schema:a})}return r.json({secrets:n.secrets??!1,module:o,key:null,value:i??null,schema:a})})}toolAdd(t){return new cc([this.mcp.name,"add"].join("_"),{...this.mcp.getToolOptions("add"),inputSchema:He({key:ge({description:"key to add"}),value:this.getNewSchema(),return_config:mt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(n.key in i)throw new Error(`Key "${n.key}" already exists in config`);await c.mutateConfigSafe(o).patch([...a,n.key],n.value);const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"add",key:n.key},config:n.return_config?u:void 0})})}toolUpdate(t){return new cc([this.mcp.name,"update"].join("_"),{...this.mcp.getToolOptions("update"),inputSchema:He({key:ge({description:"key to update"}),value:this.mcp.getCleanSchema(this.getNewSchema(ze({}))),return_config:mt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);await c.mutateConfigSafe(o).patch([...a,n.key],n.value);const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"update",key:n.key},config:n.return_config?u:void 0})})}toolRemove(t){return new cc([this.mcp.name,"remove"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:He({key:ge({description:"key to remove"}),return_config:mt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);await c.mutateConfigSafe(o).remove([...a,n.key].join("."));const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"remove",key:n.key},config:n.return_config?u:void 0})})}getTools(t){const{tools:n=[],get:r=!0,add:s=!0,update:i=!0,remove:o=!0}=this.mcp.options;return[r&&this.toolGet(t),s&&this.toolAdd(t),i&&this.toolUpdate(t),o&&this.toolRemove(t),...n].filter(Boolean)}}const ug=(e,t,n,r)=>new $ye(e,t,n,r),Rye=(e,t,n)=>{const r=new LT(t,e,{}),s=a=>new cc([r.name,"get"].join("_"),{...r.getToolOptions("get"),inputSchema:He({secrets:mt({default:!1,description:"Include secrets in the response config"}).optional()})},async(c,u)=>{const f=u.context.app.toJSON(c.secrets),h=Er(f,a.instancePath);return u.json({secrets:c.secrets??!1,value:h??null})}),i=a=>new cc([r.name,"update"].join("_"),{...r.getToolOptions("update"),inputSchema:He({value:t,return_config:mt({default:!1}).optional(),secrets:mt({default:!1}).optional()})},async(c,u)=>{const{value:f,return_config:h,secrets:p}=c,[y,...v]=a.instancePath;await r.getManager(u).mutateConfigSafe(y).overwrite(v,f);let S;if(h){const N=u.context.app.toJSON(p);S=Er(N,a.instancePath)}return u.json({success:!0,module:y,config:S})}),o=a=>{const{tools:c=[]}=r.options;return[s(a),i(a),...c]};return Object.assign(t,{[kh]:r,getTools:o})};var kye=e=>{const n={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},r=(i=>typeof i=="string"?i==="*"?()=>i:o=>i===o?o:null:typeof i=="function"?i:o=>i.includes(o)?o:null)(n.origin),s=(i=>typeof i=="function"?i:Array.isArray(i)?()=>i:()=>[])(n.allowMethods);return async function(o,a){var f;function c(h,p){o.res.headers.set(h,p)}const u=r(o.req.header("origin")||"",o);if(u&&c("Access-Control-Allow-Origin",u),n.origin!=="*"){const h=o.req.header("Vary");h?c("Vary",h):c("Vary","Origin")}if(n.credentials&&c("Access-Control-Allow-Credentials","true"),(f=n.exposeHeaders)!=null&&f.length&&c("Access-Control-Expose-Headers",n.exposeHeaders.join(",")),o.req.method==="OPTIONS"){n.maxAge!=null&&c("Access-Control-Max-Age",n.maxAge.toString());const h=s(o.req.header("origin")||"",o);h.length&&c("Access-Control-Allow-Methods",h.join(","));let p=n.allowHeaders;if(!(p!=null&&p.length)){const y=o.req.header("Access-Control-Request-Headers");y&&(p=y.split(/\s*,\s*/))}return p!=null&&p.length&&(c("Access-Control-Allow-Headers",p.join(",")),o.res.headers.append("Vary","Access-Control-Request-Headers")),o.res.headers.delete("Content-Length"),o.res.headers.delete("Content-Type"),new Response(null,{headers:o.res.headers,status:204,statusText:"No Content"})}await a()}};class qy extends As{getSafeErrorAndCode(){return{error:"Invalid credentials",code:gn.UNAUTHORIZED}}toJSON(){return qr()?super.toJSON():{error:this.getSafeErrorAndCode().error,type:"AuthException"}}}class Mye extends qy{constructor(){super("User not found");K(this,"name","UserNotFoundException");K(this,"code",gn.NOT_FOUND)}}class FN extends qy{constructor(){super("Invalid credentials");K(this,"name","InvalidCredentialsException");K(this,"code",gn.UNAUTHORIZED)}}class Iye extends qy{constructor(){super("Unable to create user");K(this,"name","UnableToCreateUserException");K(this,"code",gn.INTERNAL_SERVER_ERROR)}}class Vl extends qy{constructor(n){super(n??"Invalid conditions");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}const vI=["GET","POST","PATCH","PUT","DELETE"],Pye=V1("config_server",{cors:He({origin:ge({default:"*"}),allow_methods:Sn(ge({enum:vI}),{default:vI,uniqueItems:!0}),allow_headers:Sn(ge(),{default:["Content-Type","Content-Length","Authorization","Accept"]}),allow_credentials:mt({default:!0})}),mcp:He({enabled:mt({default:!1}),path:ge({default:"/api/system/mcp"})})},{description:"Server configuration"}).strict();class Dye extends Uy{getRestrictedPaths(){return[]}get client(){return this.ctx.server}getSchema(){return Pye}async build(){const t=this.config.cors.origin??"";this.client.use("*",kye({origin:t.includes(",")?t.split(",").map(n=>n.trim()):t,allowMethods:this.config.cors.allow_methods,allowHeaders:this.config.cors.allow_headers,credentials:this.config.cors.allow_credentials})),this.client.use("/",async(n,r)=>{await r(),(!n.finalized||n.res.status===404)&&new URL(n.req.url).pathname==="/"&&(n.res=void 0,n.res=Response.json({bknd:"hello world!"}))}),this.client.onError((n,r)=>(pt.error("[AppServer:onError]",n),n instanceof Response?n:n instanceof qy?r.json(n.toJSON(),n.getSafeErrorAndCode().code):n instanceof As?r.json(n.toJSON(),n.code):n instanceof Error&&qr()?r.json({error:n.message,stack:n.stack},500):r.json({error:n.message},500))),this.setBuilt()}toJSON(t){return this.config}}const uO=new lr("auth.user.create"),Jz=new lr("auth.user.password.test"),Xz=new lr("auth.user.password.change"),Kz=new lr("auth.user.token.create"),Lye=Object.freeze(Object.defineProperty({__proto__:null,changePassword:Xz,createToken:Kz,createUser:uO,testPassword:Jz},Symbol.toStringTag,{value:"Module"})),mo=new lr("data.entity.read"),U1=new lr("data.entity.create"),dO=new lr("data.entity.update"),fO=new lr("data.entity.delete"),Qz=new lr("data.database.sync"),Fye=new lr("data.raw.query"),Bye=new lr("data.raw.mutate"),zye=Object.freeze(Object.defineProperty({__proto__:null,databaseSync:Qz,entityCreate:U1,entityDelete:fO,entityRead:mo,entityUpdate:dO,rawMutate:Bye,rawQuery:Fye},Symbol.toStringTag,{value:"Module"}));var Zz=e=>e;function FT(e){const t=e instanceof Request?e:e.req.raw;return new URL(t.url).pathname}function Vye(e,t){const n=e.get("auth");if(!n)throw new Error("auth ctx not found");if(n.skip)return!0;const r=e.req.raw;if(!t)return!1;const s=FT(r),i=t.some(o=>_oe(s,o));return n.skip=i,i}const Uye=e=>Zz(async(t,n)=>{t.get("auth")||t.set("auth",{registered:!1,resolved:!1,skip:!1,user:void 0});const r=t.get("app"),s=t.get("auth"),i=r==null?void 0:r.module.auth.authenticator;let o=Vye(t,e==null?void 0:e.skip)||!(r!=null&&r.module.auth.enabled);s.registered?(o=!0,pt.warn(`auth middleware already registered for ${FT(t)}`)):(s.registered=!0,!o&&!s.resolved&&(r!=null&&r.module.auth.enabled)&&(s.user=await(i==null?void 0:i.resolveAuthFromRequest(t)),s.resolved=!0)),await n(),s.skip=!1,s.resolved=!1,s.user=void 0}),qye=(e,t)=>Zz(async(n,r)=>{var o,a;const s=n.get("app"),i=n.get("auth");if(!i)throw new Error("auth ctx not found");if(!i.registered||!s){const c=`auth middleware not registered, cannot check permissions for ${FT(n)}`;if(s!=null&&s.module.auth.enabled)throw new Error(c);pt.warn(c)}else if(!i.skip){const c=s.modules.ctx().guard,u=Array.isArray(e)?e:[e];if(t!=null&&t.onGranted||t!=null&&t.onDenied){let f;if(u.every(h=>c.granted(h,n))?f=await((o=t==null?void 0:t.onGranted)==null?void 0:o.call(t,n)):f=await((a=t==null?void 0:t.onDenied)==null?void 0:a.call(t,n)),f instanceof Response)return f}else u.some(f=>c.throwUnlessGranted(f,n))}await r()}),Hye=Object.freeze(Object.defineProperty({__proto__:null,auth:Uye,permission:qye},Symbol.toStringTag,{value:"Module"}));class Hy{constructor(){K(this,"middlewares",Hye)}create(){return Hy.createServer()}static createServer(){return new z1}getController(){return this.create()}isJsonRequest(t){return t.req.header("Content-Type")==="application/json"||t.req.header("Accept")==="application/json"}notFound(t){return this.isJsonRequest(t)?t.json({error:"Not found"},404):t.notFound()}getEntitiesEnum(t){const n=t.entities.map(r=>r.name);return n.length>0?nn([ge({enum:n}),ge()]):ge()}registerMcp(){}}class Wye extends Hy{constructor(t){super(),this.auth=t}get guard(){return this.auth.ctx.guard}get em(){return this.auth.ctx.em}get userRepo(){const t=this.auth.config.entity_name;return this.em.repo(t)}registerStrategyActions(t,n){var h;if(!this.auth.isStrategyEnabled(t))return;const r=(h=t.getActions)==null?void 0:h.call(t);if(!r)return;const{auth:s,permission:i}=this.middlewares,o=this.create().use(s()),a=t.getName(),{create:c,change:u}=r,f=this.auth.em;c&&(o.post("/create",i([uO,U1]),Zt({summary:"Create a new user",tags:["auth"]}),async p=>{var y;try{const v=await this.auth.authenticator.getBody(p),x=Un(c.schema,v,{}),S=await((y=c.preprocess)==null?void 0:y.call(c,x))??x,N=f.mutator(this.auth.config.entity_name);N.__unstable_toggleSystemEntityCreation(!1);const{data:_}=await N.insertOne({...S,strategy:a});return N.__unstable_toggleSystemEntityCreation(!0),p.json({success:!0,action:"create",strategy:a,data:_})}catch(v){if(v instanceof S1)return p.json({success:!1,errors:v.errors},400);throw v}}),o.get("create/schema.json",Zt({summary:"Get the schema for creating a user",tags:["auth"]}),async p=>p.json(c.schema))),n.route(`/${a}/actions`,o)}getController(){const{auth:t}=this.middlewares,n=this.create();n.get("/me",Zt({summary:"Get the current user",tags:["auth"]}),ws("auth_me",{noErrorCodes:[403]}),t(),async s=>{var o,a;const i=(o=s.get("auth"))==null?void 0:o.user;if(i){const{data:c}=await this.userRepo.findId(i.id);return await((a=this.auth.authenticator)==null?void 0:a.requestCookieRefresh(s)),s.json({user:c})}return s.json({user:null},403)}),n.get("/logout",Zt({summary:"Logout the current user",tags:["auth"]}),t(),async s=>{if(await this.auth.authenticator.logout(s),this.auth.authenticator.isJsonRequest(s))return s.json({ok:!0});const i=s.req.header("referer");return i?s.redirect(i):s.redirect("/")}),n.get("/strategies",Zt({summary:"Get the available authentication strategies",tags:["auth"]}),ws("auth_strategies"),qt("query",ze({include_disabled:mt().optional()})),async s=>{const{include_disabled:i}=s.req.valid("query"),{strategies:o,basepath:a}=this.auth.toJSON(!1);return i?s.json({strategies:o,basepath:a}):s.json({strategies:en(o??{},(c,u)=>this.auth.isStrategyEnabled(u)?c:void 0),basepath:a})});const r=this.auth.authenticator.getStrategies();for(const[s,i]of Object.entries(r))this.auth.isStrategyEnabled(i)&&(n.route(`/${s}`,i.getController(this.auth.authenticator)),this.registerStrategyActions(i,n));return n}registerMcp(){const{mcp:t}=this.auth.ctx,n=nn([jt({title:"Integer"}),ge({title:"UUID"})]),r=async s=>{let i;if(s.id){const{data:o}=await this.userRepo.findId(s.id);i=o}else if(s.email){const{data:o}=await this.userRepo.findOne({email:s.email});i=o}if(!i)throw new Error("User not found");return i};t.tool("auth_user_create",{description:"Create a new user",inputSchema:ze({email:ge({format:"email"}),password:ge({minLength:8}),role:ge({enum:Object.keys(this.auth.config.roles??{})}).optional()})},async(s,i)=>(await i.context.ctx().helper.throwUnlessGranted(uO,i),i.json(await this.auth.createUser(s)))),t.tool("auth_user_token",{description:"Get a user token",inputSchema:ze({id:n.optional(),email:ge({format:"email"}).optional()})},async(s,i)=>{await i.context.ctx().helper.throwUnlessGranted(Kz,i);const o=await r(s);return i.json({user:o,token:await this.auth.authenticator.jwt(o)})}),t.tool("auth_user_password_change",{description:"Change a user's password",inputSchema:ze({id:n.optional(),email:ge({format:"email"}).optional(),password:ge({minLength:8})})},async(s,i)=>{await i.context.ctx().helper.throwUnlessGranted(Xz,i);const o=await r(s);if(!await this.auth.changePassword(o.id,s.password))throw new Error("Failed to change password");return i.json({changed:!0})}),t.tool("auth_user_password_test",{description:"Test a user's password",inputSchema:ze({email:ge({format:"email"}),password:ge({minLength:8})})},async(s,i)=>{await i.context.ctx().helper.throwUnlessGranted(Jz,i);const c=await this.auth.authenticator.strategy("password").getController(this.auth.authenticator).request(new Request("https://localhost/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password})}));return i.json({valid:c.ok})})}}const hO="__bknd_flash";function xI(e,t,n="info"){var r;(r=e.req.header("Accept"))!=null&&r.includes("text/html")&&UF(e,hO,JSON.stringify({type:n,message:t}),{path:"/"})}function Gye(e){const t=document.cookie.split("; ");for(const n of t){const[r,s]=n.split("=");if(r===e)try{return decodeURIComponent(s)}catch{return null}}return null}function Yye(e=!0){const t=Gye(hO);return t&&e&&(document.cookie=`${hO}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`),t?JSON.parse(t):void 0}var eV=e=>nV(e.replace(/_|-/g,t=>({_:"/","-":"+"})[t]??t)),tV=e=>Jye(e).replace(/\/|\+/g,t=>({"/":"_","+":"-"})[t]??t),Jye=e=>{let t="";const n=new Uint8Array(e);for(let r=0,s=n.length;r<s;r++)t+=String.fromCharCode(n[r]);return btoa(t)},nV=e=>{const t=atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=t.length/2;for(let s=0,i=t.length-1;s<=r;s++,i--)n[s]=t.charCodeAt(s),n[i]=t.charCodeAt(i);return n},rV=(e=>(e.HS256="HS256",e.HS384="HS384",e.HS512="HS512",e.RS256="RS256",e.RS384="RS384",e.RS512="RS512",e.PS256="PS256",e.PS384="PS384",e.PS512="PS512",e.ES256="ES256",e.ES384="ES384",e.ES512="ES512",e.EdDSA="EdDSA",e))(rV||{}),Xye=class extends Error{constructor(e){super(`${e} is not an implemented algorithm`),this.name="JwtAlgorithmNotImplemented"}},sV=class extends Error{constructor(e){super(`invalid JWT token: ${e}`),this.name="JwtTokenInvalid"}},Kye=class extends Error{constructor(e){super(`token (${e}) is being used before it's valid`),this.name="JwtTokenNotBefore"}},Qye=class extends Error{constructor(e){super(`token (${e}) expired`),this.name="JwtTokenExpired"}},Zye=class extends Error{constructor(e,t){super(`Invalid "iat" claim, must be a valid number lower than "${e}" (iat: "${t}")`),this.name="JwtTokenIssuedAt"}},e0e=class extends Error{constructor(e){super(`jwt header is invalid: ${JSON.stringify(e)}`),this.name="JwtHeaderInvalid"}},t0e=class extends Error{constructor(e){super(`token(${e}) signature mismatched`),this.name="JwtTokenSignatureMismatched"}},qg=(e=>(e.Encrypt="encrypt",e.Decrypt="decrypt",e.Sign="sign",e.Verify="verify",e.DeriveKey="deriveKey",e.DeriveBits="deriveBits",e.WrapKey="wrapKey",e.UnwrapKey="unwrapKey",e))(qg||{}),Wy=new TextEncoder,n0e=new TextDecoder;async function r0e(e,t,n){const r=iV(t),s=await i0e(e,r);return await crypto.subtle.sign(r,s,n)}async function s0e(e,t,n,r){const s=iV(t),i=await o0e(e,s);return await crypto.subtle.verify(s,i,n,r)}function mO(e){return nV(e.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function i0e(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(oV(e)){if(e.type!=="private"&&e.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${e.type}, expected private or secret`);return e}const n=[qg.Sign];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,n):e.includes("PRIVATE")?await crypto.subtle.importKey("pkcs8",mO(e),t,!1,n):await crypto.subtle.importKey("raw",Wy.encode(e),t,!1,n)}async function o0e(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(oV(e)){if(e.type==="public"||e.type==="secret")return e;e=await wI(e)}if(typeof e=="string"&&e.includes("PRIVATE")){const r=await crypto.subtle.importKey("pkcs8",mO(e),t,!0,[qg.Sign]);e=await wI(r)}const n=[qg.Verify];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,n):e.includes("PUBLIC")?await crypto.subtle.importKey("spki",mO(e),t,!1,n):await crypto.subtle.importKey("raw",Wy.encode(e),t,!1,n)}async function wI(e){if(e.type!=="private")throw new Error(`unexpected key type: ${e.type}`);if(!e.extractable)throw new Error("unexpected private key is unextractable");const t=await crypto.subtle.exportKey("jwk",e),{kty:n}=t,{alg:r,e:s,n:i}=t,{crv:o,x:a,y:c}=t;return{kty:n,alg:r,e:s,n:i,crv:o,x:a,y:c,key_ops:[qg.Verify]}}function iV(e){switch(e){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new Xye(e)}}function oV(e){return vF()==="node"&&crypto.webcrypto?e instanceof crypto.webcrypto.CryptoKey:e instanceof CryptoKey}var BN=e=>tV(Wy.encode(JSON.stringify(e)).buffer).replace(/=/g,""),a0e=e=>tV(e).replace(/=/g,""),SI=e=>JSON.parse(n0e.decode(eV(e)));function l0e(e){if(typeof e=="object"&&e!==null){const t=e;return"alg"in t&&Object.values(rV).includes(t.alg)&&(!("typ"in t)||t.typ==="JWT")}return!1}var c0e=async(e,t,n="HS256")=>{const r=BN(e);let s;typeof t=="object"&&"alg"in t?(n=t.alg,s=BN({alg:n,typ:"JWT",kid:t.kid})):s=BN({alg:n,typ:"JWT"});const i=`${s}.${r}`,o=await r0e(t,n,Wy.encode(i)),a=a0e(o);return`${i}.${a}`},u0e=async(e,t,n="HS256")=>{const r=e.split(".");if(r.length!==3)throw new sV(e);const{header:s,payload:i}=aV(e);if(!l0e(s))throw new e0e(s);const o=Date.now()/1e3|0;if(i.nbf&&i.nbf>o)throw new Kye(e);if(i.exp&&i.exp<=o)throw new Qye(e);if(i.iat&&o<i.iat)throw new Zye(o,i.iat);const a=e.substring(0,e.lastIndexOf("."));if(!await s0e(t,n,eV(r[2]),Wy.encode(a)))throw new t0e(e);return i},aV=e=>{try{const[t,n]=e.split("."),r=SI(t),s=SI(n);return{header:r,payload:s}}catch{throw new sV(e)}},BT={sign:c0e,verify:u0e,decode:aV},d0e=BT.verify,f0e=BT.decode,h0e=BT.sign;const lV=60*60*24*7,cV=He({path:ge({default:"/"}),sameSite:ge({enum:["strict","lax","none"],default:"lax"}),secure:mt({default:!0}),httpOnly:mt({default:!0}),expires:jt({default:lV}),partitioned:mt({default:!1}),renew:mt({default:!0}),pathSuccess:ge({default:"/"}),pathLoggedOut:ge({default:"/"})}).partial(),uV=He({secret:$g({default:""}),alg:ge({enum:["HS256","HS384","HS512"],default:"HS256"}).optional(),expires:jt().optional(),issuer:ge().optional(),fields:Sn(ge(),{default:["id","email","role"]})},{default:{}}),m0e=ze({jwt:uV,cookie:cV});class p0e{constructor(t,n,r){K(this,"config");this.strategies=t,this.userPool=n,this.config=Un(m0e,r??{})}async resolveLogin(t,n,r,s,i){try{const o=(i==null?void 0:i.identifier)||"email";if(typeof o!="string"||o.length===0)throw new Vl("Identifier must be a string");if(!(o in r))throw new Vl(`Profile must have identifier "${o}"`);const a=await this.userPool.findBy(n.getName(),o,r[o]);if(a.strategy_value){if(a.strategy!==n.getName())throw new Vl("User signed up with a different strategy")}else throw new Vl("User must have a strategy value");await s(a);const c=await this.safeAuthResponse(a);return this.respondWithUser(t,c,i)}catch(o){return this.respondWithError(t,o,i)}}async resolveRegister(t,n,r,s,i){try{const o=(i==null?void 0:i.identifier)||"email";if(typeof o!="string"||o.length===0)throw new Vl("Identifier must be a string");if(!(o in r))throw new Vl(`Profile must have identifier "${o}"`);if(!("strategy_value"in r))throw new Vl("Profile must have a strategy value");const a=await this.userPool.create(n.getName(),{...r,strategy_value:r.strategy_value});await s(a);const c=await this.safeAuthResponse(a);return this.respondWithUser(t,c,i)}catch(o){return this.respondWithError(t,o,i)}}async respondWithUser(t,n,r){const s=this.getSafeUrl(t,(r==null?void 0:r.redirect)??this.config.cookie.pathSuccess??"/");if("token"in n)return await this.setAuthCookie(t,n.token),this.isJsonRequest(t)||r!=null&&r.forceJsonResponse?t.json(n):t.redirect(s);throw new As("Invalid response")}async respondWithError(t,n,r){if(pt.error("respondWithError",n),this.isJsonRequest(t)||r!=null&&r.forceJsonResponse)throw n;await xI(t,String(n),"error");const s=this.getSafeUrl(t,t.req.header("Referer")??"/");return t.redirect(s)}getStrategies(){return this.strategies}strategy(t){try{return this.strategies[t]}catch{throw new Error(`Strategy "${String(t)}" not found`)}}async jwt(t){var i,o,a;const r={...Cx(t,this.config.jwt.fields),iat:Math.floor(Date.now()/1e3)};(i=this.config.jwt)!=null&&i.issuer&&(r.iss=this.config.jwt.issuer),(o=this.config.jwt)!=null&&o.expires&&(r.exp=Math.floor(Date.now()/1e3)+this.config.jwt.expires);const s=this.config.jwt.secret;if(!s||s.length===0)throw new Error("Cannot sign JWT without a secret");return h0e(r,s,((a=this.config.jwt)==null?void 0:a.alg)??"HS256")}async safeAuthResponse(t){const n=Cx(t,this.config.jwt.fields);return{user:n,token:await this.jwt(n)}}async verify(t){var n,r,s;try{const i=await d0e(t,((n=this.config.jwt)==null?void 0:n.secret)??"",((r=this.config.jwt)==null?void 0:r.alg)??"HS256");if((s=this.config.jwt)!=null&&s.issuer&&i.iss!==this.config.jwt.issuer)throw new As("Invalid issuer",403);return i}catch{}}get cookieOptions(){const{expires:t=lV,renew:n,...r}=this.config.cookie;return{...r,expires:new Date(Date.now()+t*1e3)}}async getAuthCookie(t){try{const n=this.config.jwt.secret,r=await VF(t,n,"auth");return typeof r!="string"?void 0:r}catch(n){n instanceof Error&&pt.error("[getAuthCookie]",n.message);return}}async requestCookieRefresh(t){var n;if(this.config.cookie.renew&&((n=t.get("auth"))!=null&&n.user)){const r=await this.getAuthCookie(t);r&&await this.setAuthCookie(t,r)}}async setAuthCookie(t,n){pt.debug("setting auth cookie",Coe(n));const r=this.config.jwt.secret;await qF(t,"auth",n,r,this.cookieOptions)}async unsafeGetAuthCookie(t){return kv("auth",t,this.config.jwt.secret,this.cookieOptions)}deleteAuthCookie(t){pt.debug("deleting auth cookie"),sce(t,"auth",this.cookieOptions)}async logout(t){pt.info("Logging out"),t.set("auth",void 0),await this.getAuthCookie(t)&&xI(t,"Signed out","info"),this.deleteAuthCookie(t)}isJsonRequest(t){return t.req.header("Content-Type")==="application/json"}async getBody(t){return this.isJsonRequest(t)?await t.req.json():Object.fromEntries((await t.req.formData()).entries())}getSafeUrl(t,n){const r=n.replace(/\/+$/,"/");return Roe("redirects_non_fq")?r:new URL(t.req.url).origin+r}async resolveAuthFromRequest(t){let n,r=!1;if(t instanceof Headers)n=t;else if(t instanceof Request)n=t.headers;else{r=!0;try{n=t.req.raw.headers}catch{throw new As("Request/Headers/Context is required to resolve auth",400)}}let s;if(n.has("Authorization")?s=String(n.get("Authorization")).replace("Bearer ",""):r&&(s=await this.getAuthCookie(t)),s)return await this.verify(s)}toJSON(t){return{...this.config,jwt:t?this.config.jwt:void 0}}}let pO;var _v,I8;(typeof navigator>"u"||!((I8=(_v=navigator.userAgent)==null?void 0:_v.startsWith)!=null&&I8.call(_v,"Mozilla/5.0 ")))&&(pO="oauth4webapi/v2.17.0");function Gy(e,t){if(e==null)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}const $x=Symbol(),g0e=Symbol(),zT=Symbol(),y0e=Symbol(),dV=Symbol(),b0e=Symbol(),v0e=new TextEncoder,x0e=new TextDecoder;function mc(e){return typeof e=="string"?v0e.encode(e):x0e.decode(e)}const EI=32768;function w0e(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=[];for(let n=0;n<e.byteLength;n+=EI)t.push(String.fromCharCode.apply(null,e.subarray(n,n+EI)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function S0e(e){try{const t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}catch(t){throw new Qe("The input to be decoded is not correctly encoded.",{cause:t})}}function $a(e){return typeof e=="string"?S0e(e):w0e(e)}class E0e{constructor(t){this.cache=new Map,this._cache=new Map,this.maxSize=t}get(t){let n=this.cache.get(t);if(n)return n;if(n=this._cache.get(t))return this.update(t,n),n}has(t){return this.cache.has(t)||this._cache.has(t)}set(t,n){return this.cache.has(t)?this.cache.set(t,n):this.update(t,n),this}delete(t){return this.cache.has(t)?this.cache.delete(t):this._cache.has(t)?this._cache.delete(t):!1}update(t,n){this.cache.set(t,n),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}}class Ki extends Error{constructor(t){var n;super(t??"operation not supported"),this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}class N0e extends Error{constructor(t,n){var r;super(t,n),this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}const Qe=N0e,fV=new E0e(100);function hV(e){return e instanceof CryptoKey}function _0e(e){return hV(e)&&e.type==="private"}function C0e(e){return hV(e)&&e.type==="public"}function VT(e){try{const t=e.headers.get("dpop-nonce");t&&fV.set(new URL(e.url).origin,t)}catch{}return e}function Mh(e){return!(e===null||typeof e!="object"||Array.isArray(e))}function q1(e){Gy(e,Headers)&&(e=Object.fromEntries(e.entries()));const t=new Headers(e);if(pO&&!t.has("user-agent")&&t.set("user-agent",pO),t.has("authorization"))throw new TypeError('"options.headers" must not include the "authorization" header name');if(t.has("dpop"))throw new TypeError('"options.headers" must not include the "dpop" header name');return t}function O0e(e){if(typeof e=="function"&&(e=e()),!(e instanceof AbortSignal))throw new TypeError('"options.signal" must return or be an instance of AbortSignal');return e}async function j0e(e,t){if(!(e instanceof URL))throw new TypeError('"issuerIdentifier" must be an instance of URL');if(e.protocol!=="https:"&&e.protocol!=="http:")throw new TypeError('"issuer.protocol" must be "https:" or "http:"');const n=new URL(e.href);switch(t==null?void 0:t.algorithm){case void 0:case"oidc":n.pathname=`${n.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":n.pathname==="/"?n.pathname=".well-known/oauth-authorization-server":n.pathname=`.well-known/oauth-authorization-server/${n.pathname}`.replace("//","/");break;default:throw new TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}const r=q1(t==null?void 0:t.headers);return r.set("accept","application/json"),((t==null?void 0:t[zT])||fetch)(n.href,{headers:Object.fromEntries(r.entries()),method:"GET",redirect:"manual",signal:null}).then(VT)}function or(e){return typeof e=="string"&&e.length!==0}async function A0e(e,t){if(!(e instanceof URL))throw new TypeError('"expectedIssuer" must be an instance of URL');if(!Gy(t,Response))throw new TypeError('"response" must be an instance of Response');if(t.status!==200)throw new Qe('"response" is not a conform Authorization Server Metadata response');Hg(t);let n;try{n=await t.json()}catch(r){throw new Qe('failed to parse "response" body as JSON',{cause:r})}if(!Mh(n))throw new Qe('"response" body must be a top level object');if(!or(n.issuer))throw new Qe('"response" body "issuer" property must be a non-empty string');if(new URL(n.issuer).href!==e.href)throw new Qe('"response" body "issuer" does not match "expectedIssuer"');return n}function mV(){return $a(crypto.getRandomValues(new Uint8Array(32)))}function NI(){return mV()}async function T0e(e){if(!or(e))throw new TypeError('"codeVerifier" must be a non-empty string');return $a(await crypto.subtle.digest("SHA-256",mc(e)))}function _I(e){return encodeURIComponent(e).replace(/%20/g,"+")}function $0e(e,t){const n=_I(e),r=_I(t);return`Basic ${btoa(`${n}:${r}`)}`}function R0e(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new Ki("unsupported RsaHashedKeyAlgorithm hash name")}}function k0e(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new Ki("unsupported RsaHashedKeyAlgorithm hash name")}}function M0e(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new Ki("unsupported EcKeyAlgorithm namedCurve")}}function I0e(e){switch(e.algorithm.name){case"RSA-PSS":return R0e(e);case"RSASSA-PKCS1-v1_5":return k0e(e);case"ECDSA":return M0e(e);case"Ed25519":case"Ed448":return"EdDSA";default:throw new Ki("unsupported CryptoKey algorithm name")}}function Yy(e){const t=e==null?void 0:e[$x];return typeof t=="number"&&Number.isFinite(t)?t:0}function UT(e){const t=e==null?void 0:e[g0e];return typeof t=="number"&&Number.isFinite(t)&&Math.sign(t)!==-1?t:30}function qT(){return Math.floor(Date.now()/1e3)}function Jy(e){if(typeof e!="object"||e===null)throw new TypeError('"as" must be an object');if(!or(e.issuer))throw new TypeError('"as.issuer" property must be a non-empty string');return!0}function Xy(e){if(typeof e!="object"||e===null)throw new TypeError('"client" must be an object');if(!or(e.client_id))throw new TypeError('"client.client_id" property must be a non-empty string');return!0}function CI(e){if(!or(e))throw new TypeError('"client.client_secret" property must be a non-empty string');return e}function OI(e,t){if(t!==void 0)throw new TypeError(`"client.client_secret" property must not be provided when ${e} client authentication method is used.`)}async function P0e(e,t,n,r,s){switch(n.delete("client_secret"),n.delete("client_assertion_type"),n.delete("client_assertion"),t.token_endpoint_auth_method){case void 0:case"client_secret_basic":{r.set("authorization",$0e(t.client_id,CI(t.client_secret)));break}case"client_secret_post":{n.set("client_id",t.client_id),n.set("client_secret",CI(t.client_secret));break}case"private_key_jwt":throw OI("private_key_jwt",t.client_secret),new TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');case"tls_client_auth":case"self_signed_tls_client_auth":case"none":{OI(t.token_endpoint_auth_method,t.client_secret),t.token_endpoint_auth_method,n.set("client_id",t.client_id);break}default:throw new Ki("unsupported client token_endpoint_auth_method")}}async function D0e(e,t,n){if(!n.usages.includes("sign"))throw new TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');const r=`${$a(mc(JSON.stringify(e)))}.${$a(mc(JSON.stringify(t)))}`,s=$a(await crypto.subtle.sign(EV(n),n,mc(r)));return`${r}.${s}`}async function L0e(e,t,n,r,s,i){var p;const{privateKey:o,publicKey:a,nonce:c=fV.get(n.origin)}=t;if(!_0e(o))throw new TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!C0e(a))throw new TypeError('"DPoP.publicKey" must be a public CryptoKey');if(c!==void 0&&!or(c))throw new TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!a.extractable)throw new TypeError('"DPoP.publicKey.extractable" must be true');const u=qT()+s,f={alg:I0e(o),typ:"dpop+jwt",jwk:await B0e(a)},h={iat:u,jti:mV(),htm:r,nonce:c,htu:`${n.origin}${n.pathname}`,ath:i?$a(await crypto.subtle.digest("SHA-256",mc(i))):void 0};(p=t[y0e])==null||p.call(t,f,h),e.set("dpop",await D0e(f,h,o))}let Lv;async function F0e(e){const{kty:t,e:n,n:r,x:s,y:i,crv:o}=await crypto.subtle.exportKey("jwk",e),a={kty:t,e:n,n:r,x:s,y:i,crv:o};return Lv.set(e,a),a}async function B0e(e){return Lv||(Lv=new WeakMap),Lv.get(e)||F0e(e)}function jI(e,t,n){if(typeof e!="string")throw n?new TypeError(`"as.mtls_endpoint_aliases.${t}" must be a string`):new TypeError(`"as.${t}" must be a string`);return new URL(e)}function pV(e,t,n=!1){return n&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?jI(e.mtls_endpoint_aliases[t],t,n):jI(e[t],t,n)}function gV(e,t){return!!(e.use_mtls_endpoint_aliases||t!=null&&t[b0e])}function zf(e){const t=e;return typeof t!="object"||Array.isArray(t)||t===null?!1:t.error!==void 0}function z0e(e){return e.length>=2&&e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}const V0e=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,U0e=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;function q0e(e,t){const n=t.split(V0e).slice(1);if(!n.length)return{scheme:e.toLowerCase(),parameters:{}};n[n.length-1]=n[n.length-1].replace(/,$/,"");const r={};for(let s=1;s<n.length;s+=2){const i=s;if(n[i][0]==='"')for(;n[i].slice(-1)!=='"'&&++s<n.length;)n[i]+=n[s];const o=n[i-1].replace(/^(?:, ?)|=$/g,"").toLowerCase();r[o]=z0e(n[i])}return{scheme:e.toLowerCase(),parameters:r}}function AI(e){if(!Gy(e,Response))throw new TypeError('"response" must be an instance of Response');const t=e.headers.get("www-authenticate");if(t===null)return;const n=[];for(const{1:s,index:i}of t.matchAll(U0e))n.push([s,i]);return n.length?n.map(([s,i],o,a)=>{const c=a[o+1];let u;return c?u=t.slice(i,c[1]):u=t.slice(i),q0e(s,u)}):void 0}async function H0e(e,t,n,r,s,i){if(!or(e))throw new TypeError('"accessToken" must be a non-empty string');if(!(n instanceof URL))throw new TypeError('"url" must be an instance of URL');return r=q1(r),(i==null?void 0:i.DPoP)===void 0?r.set("authorization",`Bearer ${e}`):(await L0e(r,i.DPoP,n,t.toUpperCase(),Yy({[$x]:i==null?void 0:i[$x]}),e),r.set("authorization",`DPoP ${e}`)),((i==null?void 0:i[zT])||fetch)(n.href,{body:s,headers:Object.fromEntries(r.entries()),method:t,redirect:"manual",signal:i!=null&&i.signal?O0e(i.signal):null}).then(VT)}async function TI(e,t,n,r){Jy(e),Xy(t);const s=pV(e,"userinfo_endpoint",gV(t,r)),i=q1(r==null?void 0:r.headers);return t.userinfo_signed_response_alg?i.set("accept","application/jwt"):(i.set("accept","application/json"),i.append("accept","application/jwt")),H0e(n,"GET",s,i,null,{...r,[$x]:Yy(t)})}const W0e=Symbol();function G0e(e){var t;return(t=e.headers.get("content-type"))==null?void 0:t.split(";")[0]}async function Y0e(e,t,n,r){if(Jy(e),Xy(t),!Gy(r,Response))throw new TypeError('"response" must be an instance of Response');if(r.status!==200)throw new Qe('"response" is not a conform UserInfo Endpoint response');let s;if(G0e(r)==="application/jwt"){Hg(r);const{claims:i,jwt:o}=await NV(await r.text(),_V.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported),HT,Yy(t),UT(t),t[dV]).then(Q0e.bind(void 0,t.client_id)).then(Z0e.bind(void 0,e.issuer));K0e.set(r,o),s=i}else{if(t.userinfo_signed_response_alg)throw new Qe("JWT UserInfo Response expected");Hg(r);try{s=await r.json()}catch(i){throw new Qe('failed to parse "response" body as JSON',{cause:i})}}if(!Mh(s))throw new Qe('"response" body must be a top level object');if(!or(s.sub))throw new Qe('"response" body "sub" property must be a non-empty string');switch(n){case W0e:break;default:if(!or(n))throw new Qe('"expectedSubject" must be a non-empty string');if(s.sub!==n)throw new Qe('unexpected "response" body "sub" value')}return s}async function J0e(e,t,n,r,s,i,o){return await P0e(e,t,s,i),i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),((o==null?void 0:o[zT])||fetch)(r.href,{body:s,headers:Object.fromEntries(i.entries()),method:n,redirect:"manual",signal:null}).then(VT)}async function X0e(e,t,n,r,s){const i=pV(e,"token_endpoint",gV(t,s));r.set("grant_type",n);const o=q1(s==null?void 0:s.headers);return o.set("accept","application/json"),J0e(e,t,"POST",i,r,o,s)}const yV=new WeakMap,K0e=new WeakMap;function bV(e){if(!e.id_token)return;const t=yV.get(e);if(!t)throw new TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return t[0]}async function vV(e,t,n,r=!1,s=!1){if(Jy(e),Xy(t),!Gy(n,Response))throw new TypeError('"response" must be an instance of Response');if(n.status!==200){let o;if(o=await obe(n))return o;throw new Qe('"response" is not a conform Token Endpoint response')}Hg(n);let i;try{i=await n.json()}catch(o){throw new Qe('failed to parse "response" body as JSON',{cause:o})}if(!Mh(i))throw new Qe('"response" body must be a top level object');if(!or(i.access_token))throw new Qe('"response" body "access_token" property must be a non-empty string');if(!or(i.token_type))throw new Qe('"response" body "token_type" property must be a non-empty string');if(i.token_type=i.token_type.toLowerCase(),i.token_type!=="dpop"&&i.token_type!=="bearer")throw new Ki("unsupported `token_type` value");if(i.expires_in!==void 0&&(typeof i.expires_in!="number"||i.expires_in<=0))throw new Qe('"response" body "expires_in" property must be a positive number');if(!s&&i.refresh_token!==void 0&&!or(i.refresh_token))throw new Qe('"response" body "refresh_token" property must be a non-empty string');if(i.scope!==void 0&&typeof i.scope!="string")throw new Qe('"response" body "scope" property must be a string');if(!r){if(i.id_token!==void 0&&!or(i.id_token))throw new Qe('"response" body "id_token" property must be a non-empty string');if(i.id_token){const{claims:o,jwt:a}=await NV(i.id_token,_V.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported),HT,Yy(t),UT(t),t[dV]).then(nbe.bind(void 0,["aud","exp","iat","iss","sub"])).then(wV.bind(void 0,e.issuer)).then(xV.bind(void 0,t.client_id));if(Array.isArray(o.aud)&&o.aud.length!==1){if(o.azp===void 0)throw new Qe('ID Token "aud" (audience) claim includes additional untrusted audiences');if(o.azp!==t.client_id)throw new Qe('unexpected ID Token "azp" (authorized party) claim value')}if(o.auth_time!==void 0&&(!Number.isFinite(o.auth_time)||Math.sign(o.auth_time)!==1))throw new Qe('ID Token "auth_time" (authentication time) must be a positive number');yV.set(i,[o,a])}}return i}function Q0e(e,t){return t.claims.aud!==void 0?xV(e,t):t}function xV(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw new Qe('unexpected JWT "aud" (audience) claim value')}else if(t.claims.aud!==e)throw new Qe('unexpected JWT "aud" (audience) claim value');return t}function Z0e(e,t){return t.claims.iss!==void 0?wV(e,t):t}function wV(e,t){if(t.claims.iss!==e)throw new Qe('unexpected JWT "iss" (issuer) claim value');return t}const SV=new WeakSet;function ebe(e){return SV.add(e),e}async function $I(e,t,n,r,s,i){if(Jy(e),Xy(t),!SV.has(n))throw new TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!or(r))throw new TypeError('"redirectUri" must be a non-empty string');if(!or(s))throw new TypeError('"codeVerifier" must be a non-empty string');const o=ua(n,"code");if(!o)throw new Qe('no authorization code in "callbackParameters"');const a=new URLSearchParams(i==null?void 0:i.additionalParameters);return a.set("redirect_uri",r),a.set("code_verifier",s),a.set("code",o),X0e(e,t,"authorization_code",a,i)}const tbe={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation"};function nbe(e,t){for(const n of e)if(t.claims[n]===void 0)throw new Qe(`JWT "${n}" (${tbe[n]}) claim missing`);return t}const rbe=Symbol(),zN=Symbol();async function sbe(e,t,n,r,s){const i=await vV(e,t,n);if(zf(i))return i;if(!or(i.id_token))throw new Qe('"response" body "id_token" property must be a non-empty string');s??(s=t.default_max_age??zN);const o=bV(i);if((t.require_auth_time||s!==zN)&&o.auth_time===void 0)throw new Qe('ID Token "auth_time" (authentication time) claim missing');if(s!==zN){if(typeof s!="number"||s<0)throw new TypeError('"maxAge" must be a non-negative number');const a=qT()+Yy(t),c=UT(t);if(o.auth_time+s<a-c)throw new Qe("too much time has elapsed since the last End-User authentication")}switch(r){case void 0:case rbe:if(o.nonce!==void 0)throw new Qe('unexpected ID Token "nonce" claim value');break;default:if(!or(r))throw new TypeError('"expectedNonce" must be a non-empty string');if(o.nonce===void 0)throw new Qe('ID Token "nonce" claim missing');if(o.nonce!==r)throw new Qe('unexpected ID Token "nonce" claim value')}return i}async function ibe(e,t,n){const r=await vV(e,t,n,!0);if(zf(r))return r;if(r.id_token!==void 0){if(typeof r.id_token=="string"&&r.id_token.length)throw new Qe("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete r.id_token}return r}function Hg(e){if(e.bodyUsed)throw new TypeError('"response" body has been used already')}async function obe(e){if(e.status>399&&e.status<500){Hg(e);try{const t=await e.json();if(Mh(t)&&typeof t.error=="string"&&t.error.length)return t.error_description!==void 0&&typeof t.error_description!="string"&&delete t.error_description,t.error_uri!==void 0&&typeof t.error_uri!="string"&&delete t.error_uri,t.algs!==void 0&&typeof t.algs!="string"&&delete t.algs,t.scope!==void 0&&typeof t.scope!="string"&&delete t.scope,t}catch{}}}function RI(e){if(typeof e.modulusLength!="number"||e.modulusLength<2048)throw new Qe(`${e.name} modulusLength must be at least 2048 bits`)}function abe(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Ki}}function EV(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:abe(e.algorithm.namedCurve)};case"RSA-PSS":switch(RI(e.algorithm),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new Ki}case"RSASSA-PKCS1-v1_5":return RI(e.algorithm),e.algorithm.name;case"Ed448":case"Ed25519":return e.algorithm.name}throw new Ki}const HT=Symbol();async function lbe(e,t,n,r){const s=`${e}.${t}`;if(!await crypto.subtle.verify(EV(n),n,r,mc(s)))throw new Qe("JWT signature verification failed")}async function NV(e,t,n,r,s,i){let{0:o,1:a,2:c,length:u}=e.split(".");if(u===5)if(i!==void 0)e=await i(e),{0:o,1:a,2:c,length:u}=e.split(".");else throw new Ki("JWE structure JWTs are not supported");if(u!==3)throw new Qe("Invalid JWT");let f;try{f=JSON.parse(mc($a(o)))}catch(x){throw new Qe("failed to parse JWT Header body as base64url encoded JSON",{cause:x})}if(!Mh(f))throw new Qe("JWT Header must be a top level object");if(t(f),f.crit!==void 0)throw new Qe('unexpected JWT "crit" header parameter');const h=$a(c);let p;n!==HT&&(p=await n(f),await lbe(o,a,p,h));let y;try{y=JSON.parse(mc($a(a)))}catch(x){throw new Qe("failed to parse JWT Payload body as base64url encoded JSON",{cause:x})}if(!Mh(y))throw new Qe("JWT Payload must be a top level object");const v=qT()+r;if(y.exp!==void 0){if(typeof y.exp!="number")throw new Qe('unexpected JWT "exp" (expiration time) claim type');if(y.exp<=v-s)throw new Qe('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(y.iat!==void 0&&typeof y.iat!="number")throw new Qe('unexpected JWT "iat" (issued at) claim type');if(y.iss!==void 0&&typeof y.iss!="string")throw new Qe('unexpected JWT "iss" (issuer) claim type');if(y.nbf!==void 0){if(typeof y.nbf!="number")throw new Qe('unexpected JWT "nbf" (not before) claim type');if(y.nbf>v+s)throw new Qe('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(y.aud!==void 0&&typeof y.aud!="string"&&!Array.isArray(y.aud))throw new Qe('unexpected JWT "aud" (audience) claim type');return{header:f,claims:y,signature:h,key:p,jwt:e}}function _V(e,t,n){if(e!==void 0){if(n.alg!==e)throw new Qe('unexpected JWT "alg" header parameter');return}if(Array.isArray(t)){if(!t.includes(n.alg))throw new Qe('unexpected JWT "alg" header parameter');return}if(n.alg!=="RS256")throw new Qe('unexpected JWT "alg" header parameter')}function ua(e,t){const{0:n,length:r}=e.getAll(t);if(r>1)throw new Qe(`"${t}" parameter must be provided only once`);return n}const cbe=Symbol(),gO=Symbol();function kI(e,t,n,r){if(Jy(e),Xy(t),n instanceof URL&&(n=n.searchParams),!(n instanceof URLSearchParams))throw new TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(ua(n,"response"))throw new Qe('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');const s=ua(n,"iss"),i=ua(n,"state");if(!s&&e.authorization_response_iss_parameter_supported)throw new Qe('response parameter "iss" (issuer) missing');if(s&&s!==e.issuer)throw new Qe('unexpected "iss" (issuer) response parameter value');switch(r){case void 0:case gO:if(i!==void 0)throw new Qe('unexpected "state" response parameter encountered');break;case cbe:break;default:if(!or(r))throw new Qe('"expectedState" must be a non-empty string');if(i===void 0)throw new Qe('response parameter "state" missing');if(i!==r)throw new Qe('unexpected "state" response parameter value')}const o=ua(n,"error");if(o)return{error:o,error_description:ua(n,"error_description"),error_uri:ua(n,"error_uri")};const a=ua(n,"id_token"),c=ua(n,"token");if(a!==void 0||c!==void 0)throw new Ki("implicit and hybrid flows are not supported");return ebe(new URLSearchParams(n))}const ube={type:"oidc",client:{token_endpoint_auth_method:"client_secret_basic"},as:{issuer:"https://accounts.google.com"},profile:async e=>({...e,sub:e.sub,email:e.email})},dbe={type:"oauth2",client:{token_endpoint_auth_method:"client_secret_basic"},as:{code_challenge_methods_supported:["S256"],issuer:"https://github.com",scopes_supported:["read:user","user:email"],scope_separator:" ",authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",userinfo_endpoint:"https://api.github.com/user"},profile:async(e,t,n)=>{var r;try{const o=(r=(await(await fetch("https://api.github.com/user/emails",{headers:{"User-Agent":"bknd",Accept:"application/json",Authorization:`Bearer ${n.access_token}`}})).json()).find(a=>a.primary))==null?void 0:r.email;if(!o)throw new Error("No primary email found");return{...e,sub:String(e.id),email:o}}catch{throw new Error("Couldn't retrive github email")}}},CV=Object.freeze(Object.defineProperty({__proto__:null,github:dbe,google:ube},Symbol.toStringTag,{value:"Module"}));class OV{constructor(t,n,r,s){K(this,"actions",{});this.config=t,this.type=n,this.name=r,this.mode=s,this.config=Un(this.getSchema(),t??{})}registerAction(t,n,r){this.actions[t]={schema:n,preprocess:r}}getType(){return this.type}getMode(){return this.mode}getName(){return this.name}toJSON(t){return{type:this.getType(),config:t?this.config:void 0}}getActions(){return this.actions}}const fbe=ze({name:ge({enum:Object.keys(CV)}),type:ge({enum:["oidc","oauth2"],default:"oauth2"}),client:ze({client_id:ge(),client_secret:ge()}).strict()},{title:"OAuth"});class kp extends As{constructor(n,r){super("OAuthCallbackException on "+r);K(this,"name","OAuthCallbackException");this.error=n,this.step=r}}class yO extends OV{constructor(t){super(t,"oauth",t.name,"external")}getSchema(){return fbe}getIssuerConfig(){return CV[this.config.name]}async getConfig(){const t=this.getIssuerConfig();if(t.type==="oidc"){const n=new URL(t.as.issuer),r=await j0e(n);t.as=await A0e(n,r)}return{...t,type:t.type,client:{...t.client,...this.config.client}}}async getCodeChallenge(t,n,r="S256"){var a;const s=(a=t.code_challenge_methods_supported)==null?void 0:a.includes(r);let i,o;return s&&(i=await T0e(n),o=r),{challenge_supported:s,challenge:i,challenge_method:o}}async request(t){const{client:n,as:r}=await this.getConfig(),{challenge_supported:s,challenge:i,challenge_method:o}=await this.getCodeChallenge(r,t.state);if(!r.authorization_endpoint)throw new Error("authorization_endpoint is not provided");const a=t.scopes??r.scopes_supported;if(!Array.isArray(a)||a.length===0)throw new Error("No scopes provided");if(a.every(f=>{var h;return!((h=r.scopes_supported)!=null&&h.includes(f))}))throw new Error("Invalid scopes provided");const c=r.authorization_endpoint,u={client_id:n.client_id,redirect_uri:t.redirect_uri,response_type:"code",scope:a.join(r.scope_separator??" ")};return s?(u.code_challenge=i,u.code_challenge_method=o):u.nonce=t.state,{url:new URL(c)+"?"+new URLSearchParams(u).toString(),endpoint:c,params:u}}async oidc(t,n){const r=await this.getConfig(),{client:s,as:i,type:o}=r,a=kI(i,s,t,gO);if(zf(a))throw new kp(a,"validateAuthResponse");const c=await $I(i,s,a,n.redirect_uri,n.state),u=AI(c);if(u)throw new kp(u,"www-authenticate");const{challenge_supported:f,challenge:h}=await this.getCodeChallenge(i,n.state),y=await sbe(i,s,c,f?void 0:h);if(zf(y))throw new kp(y,"processAuthorizationCodeOpenIDResponse");const v=bV(y),x=await TI(i,s,y.access_token),S=await Y0e(i,s,v.sub,x);return await r.profile(S,r,v)}async oauth2(t,n){const r=await this.getConfig(),{client:s,type:i,as:o,profile:a}=r,c=kI(o,s,t,gO);if(zf(c))throw new kp(c,"validateAuthResponse");const u=await $I(o,s,c,n.redirect_uri,n.state),f=AI(u);if(f)throw new kp(f,"www-authenticate");const h=u.clone();let p={};try{if(p=await ibe(o,s,u),zf(p))throw new Error}catch{p=await h.json()}const v=await(await TI(o,s,p.access_token)).json();return await r.profile(v,r,p)}async callback(t,n){switch(this.getIssuerConfig().type){case"oidc":return await this.oidc(t,n);case"oauth2":return await this.oauth2(t,n);default:throw new Error("Unsupported type")}}getController(t){const n=new z1,r="secret",s="_challenge",i=async(a,c)=>{await qF(a,s,JSON.stringify(c),r,{secure:!0,httpOnly:!0,sameSite:"Lax",maxAge:60*5})},o=async a=>{if(a.req.header("X-State-Challenge"))return{state:a.req.header("X-State-Challenge"),action:a.req.header("X-State-Action"),mode:"token"};const c=await VF(a,r,s);try{return JSON.parse(c)}catch{throw new Error("Invalid state")}};return n.get("/callback",async a=>{const c=new URL(a.req.url),u=new URLSearchParams(c.search),f=await o(a),h=f.mode==="cookie"?c.origin+c.pathname:c.origin+c.pathname.replace("/callback","/token"),p=await this.callback(u,{redirect_uri:h,state:f.state}),y={email:p.email,strategy_value:p.sub},v=async S=>{if(S.strategy_value!==p.sub)throw new As("Invalid credentials")},x={redirect:f.redirect,forceJsonResponse:f.mode!=="cookie"};switch(f.action){case"login":return t.resolveLogin(a,this,y,v,x);case"register":return t.resolveRegister(a,this,y,v,x);default:throw new Error("Invalid action")}}),n.get("/token",async a=>{const c=new URL(a.req.url),u=new URLSearchParams(c.search);return a.json({code:u.get("code")??null})}),n.post("/:action",async a=>{const c=a.req.param("action");if(!["login","register"].includes(c))return a.notFound();const u=new URL(a.req.url),f=u.pathname.replace(`/${c}`,""),h=u.origin+f+"/callback",p=new URL(a.req.header("Referer")??"/"),y=NI(),v=await this.request({redirect_uri:h,state:y});return await i(a,{state:y,action:c,redirect:p.toString(),mode:"cookie"}),a.redirect(v.url)}),n.get("/:action",async a=>{const c=a.req.param("action");if(!["login","register"].includes(c))return a.notFound();const u=new URL(a.req.url),f=u.pathname.replace(`/${c}`,""),h=u.origin+f+"/token",p=NI(),y=await this.request({redirect_uri:h,state:p});return qr()?a.json({url:y.url,redirect_uri:h,challenge:p,action:c,params:y.params}):a.json({url:y.url,challenge:p,action:c})}),n}toJSON(t){const n=t?this.config:uF(this.config,["secret","client_id"]);return{...super.toJSON(t),config:{...n,type:this.getIssuerConfig().type}}}}const VN=ge({pattern:"^(https?|wss?)://[^\\s/$.?#].[^\\s]*$"}),hbe=He({type:ge({enum:["oidc","oauth2"],default:"oidc"}),name:ge(),client:ze({client_id:ge(),client_secret:ge(),token_endpoint_auth_method:ge({enum:["client_secret_basic"]})}),as:He({issuer:ge(),code_challenge_methods_supported:ge({enum:["S256"]}).optional(),scopes_supported:Sn(ge()).optional(),scope_separator:ge({default:" "}).optional(),authorization_endpoint:VN.optional(),token_endpoint:VN.optional(),userinfo_endpoint:VN.optional()})},{title:"Custom OAuth"});class MI extends yO{constructor(t){super(t),this.type="custom_oauth"}getIssuerConfig(){return{...this.config,profile:async t=>t}}getSchema(){return hbe}}const mbe={};function pbe(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return mbe.randomBytes(e)}catch{}throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}function gbe(e,t){if(e=e||TV,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(bO(pbe(Wg),Wg)),n.join("")}function jV(e,t,n){if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),typeof e>"u")e=TV;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function r(s){Vi(function(){try{s(null,gbe(e))}catch(i){s(i)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(s,i){r(function(o,a){if(o){i(o);return}s(a)})})}function AV(e,t,n,r){function s(i){typeof e=="string"&&typeof t=="number"?jV(t,function(o,a){FI(e,a,i,r)}):typeof e=="string"&&typeof t=="string"?FI(e,t,i,r):Vi(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}function ybe(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return n===0}function bbe(e,t,n,r){function s(i){if(typeof e!="string"||typeof t!="string"){Vi(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(t.length!==60){Vi(i.bind(this,null,!1));return}AV(e,t.substring(0,29),function(o,a){o?i(o):i(null,ybe(a,t))},r)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}var Vi=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function vbe(e){for(var t=0,n=0,r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320?(++r,t+=4):t+=3;return t}function xbe(e){for(var t=0,n,r,s=new Array(vbe(e)),i=0,o=e.length;i<o;++i)n=e.charCodeAt(i),n<128?s[t++]=n:n<2048?(s[t++]=n>>6|192,s[t++]=n&63|128):(n&64512)===55296&&((r=e.charCodeAt(i+1))&64512)===56320?(n=65536+((n&1023)<<10)+(r&1023),++i,s[t++]=n>>18|240,s[t++]=n>>12&63|128,s[t++]=n>>6&63|128,s[t++]=n&63|128):(s[t++]=n>>12|224,s[t++]=n>>6&63|128,s[t++]=n&63|128);return s}var Cf="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ml=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function bO(e,t){var n=0,r=[],s,i;if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;n<t;){if(s=e[n++]&255,r.push(Cf[s>>2&63]),s=(s&3)<<4,n>=t){r.push(Cf[s&63]);break}if(i=e[n++]&255,s|=i>>4&15,r.push(Cf[s&63]),s=(i&15)<<2,n>=t){r.push(Cf[s&63]);break}i=e[n++]&255,s|=i>>6&3,r.push(Cf[s&63]),r.push(Cf[i&63])}return r.join("")}function wbe(e,t){for(var n=0,r=e.length,s=0,i=[],o,a,c,u,f,h;n<r-1&&s<t&&(h=e.charCodeAt(n++),o=h<Ml.length?Ml[h]:-1,h=e.charCodeAt(n++),a=h<Ml.length?Ml[h]:-1,!(o==-1||a==-1||(f=o<<2>>>0,f|=(a&48)>>4,i.push(String.fromCharCode(f)),++s>=t||n>=r)||(h=e.charCodeAt(n++),c=h<Ml.length?Ml[h]:-1,c==-1)||(f=(a&15)<<4>>>0,f|=(c&60)>>2,i.push(String.fromCharCode(f)),++s>=t||n>=r)));)h=e.charCodeAt(n++),u=h<Ml.length?Ml[h]:-1,f=(c&3)<<6>>>0,f|=u,i.push(String.fromCharCode(f)),++s;var p=[];for(n=0;n<s;n++)p.push(i[n].charCodeAt(0));return p}var Wg=16,TV=10,Sbe=16,Ebe=100,II=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],PI=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],$V=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Gg(e,t,n,r){var s,i=e[t],o=e[t+1];return i^=n[0],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[1],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[2],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[3],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[4],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[5],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[6],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[7],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[8],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[9],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[10],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[11],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[12],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[13],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[14],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[15],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[16],e[t]=o^n[Sbe+1],e[t+1]=i,e}function If(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|e[t]&255,t=(t+1)%e.length;return{key:r,offp:t}}function DI(e,t,n){for(var r=0,s=[0,0],i=t.length,o=n.length,a,c=0;c<i;c++)a=If(e,r),r=a.offp,t[c]=t[c]^a.key;for(c=0;c<i;c+=2)s=Gg(s,0,t,n),t[c]=s[0],t[c+1]=s[1];for(c=0;c<o;c+=2)s=Gg(s,0,t,n),n[c]=s[0],n[c+1]=s[1]}function Nbe(e,t,n,r){for(var s=0,i=[0,0],o=n.length,a=r.length,c,u=0;u<o;u++)c=If(t,s),s=c.offp,n[u]=n[u]^c.key;for(s=0,u=0;u<o;u+=2)c=If(e,s),s=c.offp,i[0]^=c.key,c=If(e,s),s=c.offp,i[1]^=c.key,i=Gg(i,0,n,r),n[u]=i[0],n[u+1]=i[1];for(u=0;u<a;u+=2)c=If(e,s),s=c.offp,i[0]^=c.key,c=If(e,s),s=c.offp,i[1]^=c.key,i=Gg(i,0,n,r),r[u]=i[0],r[u+1]=i[1]}function LI(e,t,n,r,s){var i=$V.slice(),o=i.length,a;if(n<4||n>31)if(a=Error("Illegal number of rounds (4-31): "+n),r){Vi(r.bind(this,a));return}else throw a;if(t.length!==Wg)if(a=Error("Illegal salt length: "+t.length+" != "+Wg),r){Vi(r.bind(this,a));return}else throw a;n=1<<n>>>0;var c,u,f=0,h;typeof Int32Array=="function"?(c=new Int32Array(II),u=new Int32Array(PI)):(c=II.slice(),u=PI.slice()),Nbe(t,e,c,u);function p(){if(s&&s(f/n),f<n)for(var v=Date.now();f<n&&(f=f+1,DI(e,c,u),DI(t,c,u),!(Date.now()-v>Ebe)););else{for(f=0;f<64;f++)for(h=0;h<o>>1;h++)Gg(i,h<<1,c,u);var x=[];for(f=0;f<o;f++)x.push((i[f]>>24&255)>>>0),x.push((i[f]>>16&255)>>>0),x.push((i[f]>>8&255)>>>0),x.push((i[f]&255)>>>0);if(r){r(null,x);return}else return x}r&&Vi(p)}if(typeof r<"u")p();else for(var y;;)if(typeof(y=p())<"u")return y||[]}function FI(e,t,n,r){var s;if(typeof e!="string"||typeof t!="string")if(s=Error("Invalid string / salt: Not a string"),n){Vi(n.bind(this,s));return}else throw s;var i,o;if(t.charAt(0)!=="$"||t.charAt(1)!=="2")if(s=Error("Invalid salt version: "+t.substring(0,2)),n){Vi(n.bind(this,s));return}else throw s;if(t.charAt(2)==="$")i="\0",o=3;else{if(i=t.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||t.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+t.substring(2,4)),n){Vi(n.bind(this,s));return}else throw s;o=4}if(t.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),n){Vi(n.bind(this,s));return}else throw s;var a=parseInt(t.substring(o,o+1),10)*10,c=parseInt(t.substring(o+1,o+2),10),u=a+c,f=t.substring(o+3,o+25);e+=i>="a"?"\0":"";var h=xbe(e),p=wbe(f,Wg);function y(v){var x=[];return x.push("$2"),i>="a"&&x.push(i),x.push("$"),u<10&&x.push("0"),x.push(u.toString()),x.push("$"),x.push(bO(p,p.length)),x.push(bO(v,$V.length*4-1)),x.join("")}if(typeof n>"u")return y(LI(h,p,u));LI(h,p,u,function(v,x){v?n(v,null):n(null,y(x))},r)}const _be=ze({hashing:ge({enum:["plain","sha256","bcrypt"],default:"sha256"}),rounds:jt({minimum:1,maximum:10}).optional()}).strict();class BI extends OV{constructor(t={}){super(t,"password","password","form"),this.registerAction("create",this.getPayloadSchema(),async({password:n,...r})=>({...r,strategy_value:await this.hash(n)}))}getSchema(){return _be}getPayloadSchema(){return ze({email:ge({format:"email"}),password:ge({minLength:8})})}async hash(t){switch(this.config.hashing){case"sha256":return EF.sha256(t);case"bcrypt":{const n=await jV(this.config.rounds??4);return AV(t,n)}default:return t}}async compare(t,n){switch(this.config.hashing){case"sha256":{const r=await this.hash(n);return t===r}case"bcrypt":return await bbe(n,t)}return!1}verify(t){return async n=>{if(await this.compare(n==null?void 0:n.strategy_value,t)!==!0)throw new FN}}getController(t){const n=new z1,r=ze({redirect:ge().optional()}),s=this.getPayloadSchema();return n.post("/login",qt("query",r),async i=>{try{const o=Un(s,await t.getBody(i),{onError:c=>{throw pt.error("Invalid login payload",[...c]),new FN}}),{redirect:a}=i.req.valid("query");return await t.resolveLogin(i,this,o,this.verify(o.password),{redirect:a})}catch(o){return t.respondWithError(i,o)}}),n.post("/register",qt("query",r),async i=>{try{const{redirect:o}=i.req.valid("query"),{password:a,email:c,...u}=Un(s,await t.getBody(i),{onError:h=>{pt.error("Invalid register payload",[...h]),new FN}}),f={...u,email:c,strategy_value:await this.hash(a)};return await t.resolveRegister(i,this,f,async()=>{},{redirect:o})}catch(o){return t.respondWithError(i,o)}}),n}}const Cbe={password:{cls:BI,schema:BI.prototype.getSchema()},oauth:{cls:yO,schema:yO.prototype.getSchema()},custom_oauth:{cls:MI,schema:MI.prototype.getSchema()}},RV=Cbe,Obe=p1(RV,(e,t)=>He({enabled:mt({default:!0}).optional(),type:si(t),config:e.schema},{title:t})),jbe=nn(Object.values(Obe)),Abe=ze({enabled:mt({default:!1}).optional()}),kV=He({permissions:Sn(ge()).optional(),is_default:mt().optional(),implicit_allow:mt().optional()}),zI=V1("config_auth",{enabled:mt({default:!1}),basepath:ge({default:"/api/auth"}),entity_name:ge({default:"users"}),allow_register:mt({default:!0}).optional(),jwt:uV,cookie:cV,strategies:ug("config_auth_strategies",jbe,{title:"Strategies",default:{password:{type:"password",enabled:!0,config:{hashing:"sha256"}}}},He({type:ge(),enabled:mt({default:!0}).optional(),config:ze({})})),guard:Abe.optional(),roles:ug("config_auth_roles",kV,{default:{}}).optional()},{title:"Authentication"});class Tbe{constructor(t){this.appAuth=t}get em(){return this.appAuth.em}get users(){return this.appAuth.getUsersEntity()}async findBy(t,n,r){pt.debug("[AppUserPool:findBy]",{strategy:t,prop:n,value:r}),this.toggleStrategyValueVisibility(!0);const s=await this.em.repo(this.users).findOne({[n]:r,strategy:t});if(this.toggleStrategyValueVisibility(!1),!s.data)throw pt.debug("[AppUserPool]: User not found"),new Mye;return s.data}async create(t,n){if(pt.debug("[AppUserPool:create]",{strategy:t,payload:n}),!("strategy_value"in n))throw new Vl("Profile must have a strategy_value value");const r=this.users.getSelect(void 0,"create"),i={...Cx(n,r),strategy:t},o=this.em.mutator(this.users);o.__unstable_toggleSystemEntityCreation(!1),this.toggleStrategyValueVisibility(!0);const a=await o.insertOne(i);if(o.__unstable_toggleSystemEntityCreation(!0),this.toggleStrategyValueVisibility(!1),!a.data)throw new Iye;return pt.debug("[AppUserPool]: User created",a.data),a.data}toggleStrategyValueVisibility(t){const n=(r,s)=>{const i=this.users.field(r);if(s)i.config.hidden=!1,i.config.fillable=!0;else{const o=Rx.usersFields.strategy_value.config;i.config.hidden=o.hidden,i.config.fillable=o.fillable}};n("strategy_value",t),n("strategy",t)}}const $be={email:wa().required(),strategy:wa({fillable:["create"],hidden:["update","form"]}).required(),strategy_value:wa({fillable:["create"],hidden:["read","table","update","form"]}).required(),role:wa()},Iw=class Iw extends Uy{constructor(){super(...arguments);K(this,"_authenticator");K(this,"cache",{});K(this,"_controller")}async onBeforeUpdate(n,r){var i,o;const s=zI.properties.jwt.properties.secret.default;return!n.enabled&&r.enabled&&r.jwt.secret===s&&(pt.warn("No JWT secret provided, generating a random one"),r.jwt.secret=zae(64)),(o=(i=r.strategies)==null?void 0:i.password)!=null&&o.enabled||(pt.warn("Password strategy cannot be disabled."),r.strategies.password.enabled=!0),r}get enabled(){return this.config.enabled}async build(){if(!this.enabled){this.setBuilt();return}const n=en(this.config.roles??{},(s,i)=>hx.create({name:i,...s}));this.ctx.guard.setRoles(Object.values(n)),this.ctx.guard.setConfig(this.config.guard??{});const r=en(this.config.strategies??{},(s,i)=>{try{return new RV[s.type].cls(s.config)}catch{throw new Error(`Could not build strategy ${String(i)} with config ${JSON.stringify(s.config)}`)}});this._authenticator=new p0e(r,new Tbe(this),{jwt:this.config.jwt,cookie:this.config.cookie}),this.registerEntities(),super.setBuilt(),this._controller=new Wye(this),this._controller.registerMcp(),this.ctx.server.route(this.config.basepath,this._controller.getController()),this.ctx.guard.registerPermissions(Lye)}isStrategyEnabled(n){var s,i;const r=typeof n=="string"?n:n.getName();return r==="password"?!0:((i=(s=this.config.strategies)==null?void 0:s[r])==null?void 0:i.enabled)??!1}get controller(){if(!this.isBuilt())throw new Error("Can't access controller, AppAuth not built yet");return this._controller}getSchema(){return zI}get authenticator(){return this.throwIfNotBuilt(),this._authenticator}get em(){return this.ctx.em}getUsersEntity(n){const r=this.config.entity_name;return n||!this.em.hasEntity(r)?Gz(r,Iw.usersFields,void 0,"system"):this.em.entity(r)}registerEntities(){const n=this.getUsersEntity(!0);this.ctx.helper.ensureSchema(Yz({[n.name]:n},({index:r},{users:s})=>{r(s).on(["email"],!0).on(["strategy"]).on(["strategy_value"])}));try{const r=Object.keys(this.config.roles??{});this.ctx.helper.replaceEntityField(n,"role",yI({enum:r}))}catch{}try{const r=Object.keys(this.config.strategies??{});this.ctx.helper.replaceEntityField(n,"strategy",yI({enum:r}))}catch{}}async createUser({email:n,password:r,...s}){if(!this.enabled)throw new Error("Cannot create user, auth not enabled");const i="password",a=await this.authenticator.strategy(i).hash(r),c=this.em.mutator(this.config.entity_name);c.__unstable_toggleSystemEntityCreation(!1);const{data:u}=await c.insertOne({...s,email:n,strategy:i,strategy_value:a});return c.__unstable_toggleSystemEntityCreation(!0),u}async changePassword(n,r){const s=this.config.entity_name,{data:i}=await this.em.repository(s).findId(n);if(i){if(i.strategy!=="password")throw new Error("User is not using password strategy")}else throw new Error("User not found");const o=c=>{const u=this.em.entity(s).field("strategy_value");u.config.hidden=!c,u.config.fillable=c},a=this.authenticator.strategy("password");return o(!0),await this.em.mutator(s).updateOne(i.id,{strategy_value:await a.hash(r)}),o(!1),!0}toJSON(n){if(!this.config.enabled)return this.configDefault;const r=this.authenticator.getStrategies();return{...this.config,...this.authenticator.toJSON(n),strategies:en(r,s=>({enabled:this.isStrategyEnabled(s),...s.toJSON(n)}))}}};K(Iw,"usersFields",$be);let Rx=Iw;const Rbe=new lr("system.access.api");class kbe extends Hy{constructor(t,n){super(),this.ctx=t,this.config=n}get em(){return this.ctx.em}get guard(){return this.ctx.guard}entityExists(t){try{return!!this.em.entity(t)}catch{return!1}}getController(){const{permission:t,auth:n}=this.middlewares,r=this.create().use(n(),t(Rbe)),s=this.getEntitiesEnum(this.em);return r.get("/",Zt({summary:"Retrieve data configuration",tags:["data"]}),i=>i.json(this.em.toJSON())),r.get("/sync",t(Qz),ws("data_sync",{annotations:{destructiveHint:!0}}),Zt({summary:"Sync database schema",tags:["data"]}),qt("query",ze({force:mt(),drop:mt()}).partial()),async i=>{const{force:o,drop:a}=i.req.valid("query"),c=await this.em.schema().introspect(),u=await this.em.schema().sync({force:o,drop:a});return i.json({tables:c.map(f=>f.name),changes:u})}),r.get("/schema.json",t(mo),Zt({summary:"Retrieve data schema",tags:["data"]}),async i=>{const o=`${this.config.basepath}/schema.json`,a=Object.fromEntries(this.em.entities.map(c=>[c.name,{$ref:`${this.config.basepath}/schemas/${c.name}`}]));return i.json({$schema:"https://json-schema.org/draft/2020-12/schema",$id:o,properties:a})}),r.get("/schemas/:entity/:context?",t(mo),Zt({summary:"Retrieve entity schema",tags:["data"]}),qt("param",ze({entity:s,context:ge({enum:["create","update"],default:"create"}).optional()})),async i=>{const{entity:o,context:a}=i.req.param();if(!this.entityExists(o))return this.notFound(i);const c=this.em.entity(o),u=c.toSchema({context:a}),h=`${new URL(i.req.url).origin}${this.config.basepath}`,p=`${this.config.basepath}/schemas/${o}`;return i.json({$schema:`${h}/schema.json`,$id:p,title:c.label,$comment:c.config.description,...u})}),r.route("/entity",this.getEntityRoutes()),r.get("/info/:entity",t(mo),Zt({summary:"Retrieve entity info",tags:["data"]}),ws("data_entity_info"),qt("param",ze({entity:s})),async i=>{const{entity:o}=i.req.param();if(!this.entityExists(o))return this.notFound(i);const a=this.em.entity(o),c=a.fields.map(f=>f.name),u=f=>f.map(h=>({entity:h.other(a).entity.name,ref:h.other(a).reference}));return i.json({name:a.name,fields:c,relations:{all:u(this.em.relations.relationsOf(a)),listable:u(this.em.relations.listableRelationsOf(a)),source:u(this.em.relations.sourceRelationsOf(a)),target:u(this.em.relations.targetRelationsOf(a))}})}),r}getEntityRoutes(){const{permission:t}=this.middlewares,n=this.create(),r=this.getEntitiesEnum(this.em),s=nn([jt({title:"Integer"}),ge({title:"UUID"})],{coerce:u=>u});n.post("/:entity/fn/count",t(mo),Zt({summary:"Count entities",tags:["data"]}),ws("data_entity_fn_count"),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).count(h);return u.json({entity:f,...p.data})}),n.post("/:entity/fn/exists",t(mo),Zt({summary:"Check if entity exists",tags:["data"]}),ws("data_entity_fn_exists"),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).exists(h);return u.json({entity:f,...p.data})});const i=ze({...Ms(Ks.properties,["with"]),sort:ge({default:"id"}),select:Sn(ge()),join:Sn(ge())}).partial(),o=(u=Object.keys(Ks.properties))=>{var f;return[...(f=fce(i,"query").parameters)==null?void 0:f.filter(h=>u.includes(h.name))]},a=(u=Object.keys(i.properties))=>ze(Ooe(i.properties,u));n.get("/:entity",Zt({summary:"Read many",parameters:o(["limit","offset","sort","select","join"]),tags:["data"]}),t(mo),qt("param",ze({entity:r})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("query"),p=await this.em.repository(f).findMany(h);return u.json(p,{status:p.data?200:404})}),n.get("/:entity/:id",Zt({summary:"Read one",parameters:o(["offset","sort","select"]),tags:["data"]}),t(mo),ws("data_entity_read_one",{inputSchema:{param:ze({entity:r,id:s}),query:a(["offset","sort","select"])},noErrorCodes:[404]}),qt("param",ze({entity:r,id:s})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=u.req.valid("query"),y=await this.em.repository(f).findId(h,p);return u.json(y,{status:y.data?200:404})}),n.get("/:entity/:id/:reference",Zt({summary:"Read many by reference",parameters:o(),tags:["data"]}),t(mo),qt("param",ze({entity:r,id:s,reference:ge()})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f,id:h,reference:p}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const y=u.req.valid("query"),v=await this.em.repository(f).findManyByReference(h,p,y);return u.json(v,{status:v.data?200:404})});const c=ze({...i.properties,with:ze({})}).partial();return n.post("/:entity/query",Zt({summary:"Query entities",requestBody:{content:{"application/json":{schema:c.toJSON(),example:c.template({withOptional:!0})}}},tags:["data"]}),t(mo),ws("data_entity_read_many",{inputSchema:{param:ze({entity:r}),json:c}}),qt("param",ze({entity:r})),qt("json",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).findMany(h);return u.json(p,{status:p.data?200:404})}),n.post("/:entity",Zt({summary:"Insert one or many",tags:["data"]}),t(U1),ws("data_entity_insert"),qt("param",ze({entity:r})),qt("json",nn([ze({}),Sn(ze({}))])),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=await u.req.json();if(Array.isArray(h)){const y=await this.em.mutator(f).insertMany(h);return u.json(y,201)}const p=await this.em.mutator(f).insertOne(h);return u.json(p,201)}),n.patch("/:entity",Zt({summary:"Update many",tags:["data"]}),t(dO),ws("data_entity_update_many",{inputSchema:{param:ze({entity:r}),json:ze({update:ze({}),where:ze({})})}}),qt("param",ze({entity:r})),qt("json",ze({update:ze({}),where:Ks.properties.where})),async u=>{const{entity:f}=u.req.param();if(!this.entityExists(f))return this.notFound(u);const{update:h,where:p}=await u.req.json(),y=await this.em.mutator(f).updateWhere(h,p);return u.json(y)}),n.patch("/:entity/:id",Zt({summary:"Update one",tags:["data"]}),t(dO),ws("data_entity_update_one"),qt("param",ze({entity:r,id:s})),qt("json",ze({})),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=await u.req.json(),y=await this.em.mutator(f).updateOne(h,p);return u.json(y)}),n.delete("/:entity/:id",Zt({summary:"Delete one",tags:["data"]}),t(fO),ws("data_entity_delete_one"),qt("param",ze({entity:r,id:s})),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=await this.em.mutator(f).deleteOne(h);return u.json(p)}),n.delete("/:entity",Zt({summary:"Delete many",tags:["data"]}),t(fO),ws("data_entity_delete_many",{inputSchema:{param:ze({entity:r}),json:ze({})}}),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=await u.req.json(),p=await this.em.mutator(f).deleteWhere(h);return u.json(p)}),n}registerMcp(){this.ctx.mcp.resource("data_entities","bknd://data/entities",t=>t.json(t.context.ctx().em.toJSON().entities),{title:"Entities",description:"Retrieve all entities"}).resource("data_relations","bknd://data/relations",t=>t.json(t.context.ctx().em.toJSON().relations),{title:"Relations",description:"Retrieve all relations"}).resource("data_indices","bknd://data/indices",t=>t.json(t.context.ctx().em.toJSON().indices),{title:"Indices",description:"Retrieve all indices"})}}const kx={...Pge,...Hge,media:{schema:Wz,field:Ug}},Mbe=Object.keys(kx),Ibe=DT,MV=p1(kx,(e,t)=>He({name:ge().optional(),type:si(t),config:e.schema.optional()},{title:t})),WT=nn(Object.values(MV)),IV=ed(WT,{default:{}}),GT=He({name:ge().optional(),type:ge({enum:Az,default:"regular"}).optional(),config:IT.optional(),fields:IV.optional()});He({type:ge({enum:Az,default:"regular"}).optional(),config:IT.optional(),fields:ed(ze({type:nn([ge({enum:Mbe}),ge()]),config:to.optional()}),{default:{}}).optional()});const YT=Object.entries(DT).map(([e,t])=>He({type:si(e),source:ge(),target:ge(),config:t.schema.optional()},{title:e})),Pbe=He({entity:ge(),fields:Sn(ge(),{minItems:1}),unique:mt({default:!1}).optional()}),Dbe=V1("config_data",{basepath:ge({default:"/api/data"}).optional(),default_primary_format:ge({enum:wT,default:"integer"}).optional(),entities:ug("config_data_entities",GT,{default:{}}).optional(),relations:ug("config_data_relations",nn(YT),{default:{}},He({type:ge({enum:Object.keys(DT)}),source:ge(),target:ge(),config:ze({}).optional()})).optional(),indices:ug("config_data_indices",Pbe,{default:{},mcp:{update:!1}}).optional()}).strict();function JT(e,t){const n=en(t.fields??{},(r,s)=>{const{type:i}=r;if(!(i in kx))throw new Error(`Field type "${i}" not found`);const{field:o}=kx[i];return new o(s,r.config)});return new hc(e,Object.values(n),t.config,t.type)}function PV(e,t){return new Ibe[e.type].cls(t(e.source),t(e.target),e.config)}class Lbe extends Uy{async build(){const{entities:t={},relations:n={},indices:r={}}=this.config,s=en(t,(u,f)=>JT(f,u)),i=u=>{const f=typeof u=="string"?u:u.name,h=s[f];if(h)return h;throw new Error(`[AppData] Entity "${f}" not found`)},o=en(n,u=>PV(u,i)),a=en(r,(u,f)=>{const h=i(u.entity),p=u.fields.map(y=>h.field(y));return new qB(h,p,u.unique,f)});for(const u of Object.values(s))this.ctx.em.addEntity(u);for(const u of Object.values(o))this.ctx.em.addRelation(u);for(const u of Object.values(a))this.ctx.em.addIndex(u);const c=new kbe(this.ctx,this.config);c.registerMcp(),this.ctx.server.route(this.basepath,c.getController()),this.ctx.guard.registerPermissions(Object.values(zye)),this.setBuilt()}async onBeforeUpdate(t,n){const r={from:Object.keys(t.entities??{}),to:Object.keys(n.entities??{})};if(r.from.length-r.to.length>1)throw new Error("Cannot remove more than one entity at a time");return n}getSchema(){return Dbe}get em(){return this.throwIfNotBuilt(),this.ctx.em}get basepath(){return this.config.basepath??"/api/data"}getOverwritePaths(){return[/^entities\..*\.config$/,/^entities\..*\.fields\..*\.config$/]}toJSON(t){return{...this.config,...this.em.toJSON()}}}class VI{constructor(t={},n={}){this.variables=t,this.options=n}another(){return 1}static hasMarkup(t){let n="";if(Array.isArray(t)||typeof t=="object"){if(!["Array","Object"].includes(t.constructor.name))return!1;n=JSON.stringify(t)}else n=String(t);return["{{"].some(s=>n.includes(s))}async render(t){if(typeof t>"u"||t===null)return t;if(typeof t=="string")return await this.renderString(t);if(Array.isArray(t))return await Promise.all(t.map(n=>this.render(n)));if(typeof t=="object")return await this.renderObject(t);throw new Error("Invalid template type")}async renderString(t){return t.replace(/{{\s*([^{}]+?)\s*}}/g,(n,r)=>{const s=Bg(this.variables,r.trim());return s==null?"":String(s)})}async renderObject(t){const n={};for(const[r,s]of Object.entries(t)){let i=r;this.options.renderKeys&&(i=await this.renderString(r)),n[i]=await this.render(s)}return n}}const Xp=(e,t)=>e,Ng=class Ng{constructor(t,n){K(this,"name");K(this,"_params");if(typeof t!="string")throw new Error(`Task name must be a string, got ${typeof t}`);this.name=t;const r=this.constructor.schema;if(r===Ng.schema&&typeof n<"u"&&Object.keys(n||{}).length>0)throw new Error(`Task "${t}" has no schema defined but params passed: ${JSON.stringify(n)}`);this._params=Un(r,n||{})}get params(){return this._params}clone(t,n){return new this.constructor(t,n)}static async resolveParams(t,n,r={}){const s={},i=new VI(r,{renderKeys:!0});for(const[o,a]of Object.entries(n)){if(a&&VI.hasMarkup(a)){try{s[o]=await i.render(a)}catch(c){throw c instanceof Lf?c:new Lf("Failed to resolve param",{key:o,value:a,error:c.message},"resolve-params")}continue}s[o]=a}return t.coerce(s)}async cloneWithResolvedParams(t){const n=Object.fromEntries(t.entries()),r=await Ng.resolveParams(this.constructor.schema,this._params,n);return this.clone(this.name,r)}async run(t=new Map){const n=new Date;let r,s,i,o;const a=performance.now();try{const c=await this.cloneWithResolvedParams(t);o=c.params,r=await c.execute(t),i=!0}catch(c){i=!1,c instanceof Lf?s=c.toJSON():s={type:"unknown",message:c.message}}return{start:n,output:r,error:s,success:i,params:o,time:performance.now()-a}}error(t,n){return new Lf(t,n,"runtime")}get label(){return this.name}toJSON(){return{type:this.type,params:this.params}}};K(Ng,"schema",Ji());let Ih=Ng;const UN=["GET","POST","PUT","PATCH","DELETE"];class XT extends Ih{constructor(){super(...arguments);K(this,"type","fetch")}getBody(){const n=this.params.body;if(n){if(typeof n=="string")return n;if(typeof n=="object")return JSON.stringify(n);throw new Error(`Invalid body type: ${typeof n}`)}}async execute(){var o;if(!UN.includes(this.params.method??"GET"))throw this.error("Invalid method",{given:this.params.method,valid:UN});const n=this.getBody(),r=new Headers((o=this.params.headers)==null?void 0:o.map(a=>[a.key,a.value])),s=await fetch(this.params.url,{method:this.params.method??"GET",headers:r,body:n});if(!s.ok)throw this.error("Failed to fetch",{status:s.status,statusText:s.statusText});return await s.json()}}K(XT,"schema",He({url:ge({pattern:"^(http|https)://"}),method:Xp(ge({enum:UN,default:"GET"})).optional(),headers:Xp(Sn(He({key:ge(),value:ge()}))).optional(),body:Xp(ge()).optional(),normal:Xp(jt()).optional()}));class DV extends Ih{constructor(){super(...arguments);K(this,"type","log")}async execute(){return await new Promise(n=>setTimeout(n,this.params.delay)),pt.log(`[DONE] LogTask: ${this.name}`),!0}}K(DV,"schema",He({delay:jt({default:10})}));class LV extends Ih{constructor(){super(...arguments);K(this,"type","render")}async execute(){return this.params.render}}K(LV,"schema",He({render:ge()}));class FV{constructor(t,n,r,s){K(this,"source");K(this,"target");K(this,"config");K(this,"id");this.source=t,this.target=n,this.config=r??{},this.config.condition instanceof vo||(this.config.condition=vo.default()),this.id=s??Yae()}get condition(){return this.config.condition}get max_retries(){return this.config.max_retries??0}toJSON(){var t;return Tg({source:this.source.name,target:this.target.name,config:{...this.config,condition:(t=this.config.condition)==null?void 0:t.toJSON()}})}}class vo{constructor(t,n="",r=void 0){this.type=t,this.path=n,this.value=r}static default(){return vo.success()}static success(){return new vo("success")}static error(){return new vo("error")}static matches(t,n){if(typeof t!="string"||t.length===0)throw new Error("Invalid path");return new vo("matches",t,n)}isMet(t){switch(this.type){case"success":return t.success;case"error":return t.success===!1;case"matches":return Bg(t.output,this.path)===this.value}}sameAs(t=vo.default()){return this.type===t.type&&this.path===t.path&&this.value===t.value}toJSON(){return{type:this.type,path:this.path.length===0?void 0:this.path,value:this.value}}static fromObject(t){return new vo(t.type,t.path,t.value)}}class Fv extends Hr{task(){return this.params.task}getState(){return this.succeeded()?"success":this.failed()?"failed":this.isStart()?"running":"idle"}isStart(){return this.params.end===void 0}isEnd(){return!this.isStart()}succeeded(){var t;return this.isEnd()&&((t=this.params.result)==null?void 0:t.success)}failed(){var t;return this.isEnd()&&!((t=this.params.result)!=null&&t.success)}}K(Fv,"slug","flow-execution-event");class Bv extends Hr{}K(Bv,"slug","flow-execution-state");const Pw=class Pw{constructor(t){K(this,"flow");K(this,"started_at");K(this,"finished_at");K(this,"logs",[]);K(this,"inputs",new Map);K(this,"queue",[]);K(this,"emgr");this.flow=t,this.logs=[],this.queue=[this.flow.startTask],this.emgr=new Fy(Pw.Events)}subscribe(t){this.emgr.onAny(t)}async onDone(t,n){const r=new Date;if(this.logs.push({...n,task:t,end:r}),this.inputs.set(t.name,n),this.flow.respondingTask===t){this.queue=[];return}this.queue=this.queue.filter(i=>i!==t);const s=this.flow.task(t).getOutConnections(n).filter(i=>{var u;const o=i.target,a=this.logs.filter(f=>f.task===o&&f.success).length,c=((u=this.flow.task(o).getInConnections().find(f=>f.source===t))==null?void 0:u.max_retries)??0;if(a>c)throw new Error(`Task "${o.name}" reached max retries (${a}/${c})`);return this.flow.task(o).getInTasks(!0).every(f=>this.logs.some(h=>h.task===f&&h.end!==void 0))}).map(i=>i.target);this.queue.push(...s)}__getLastTaskLog(t){var n;for(let r=this.logs.length-1;r>=0;r--)if(((n=this.logs[r])==null?void 0:n.task)===t)return this.logs[r];return null}async run(){const t=this.queue;if(t.length===0)return;const n=t.map(async r=>{await this.emgr.emit(new Fv({task:r}));const s=await r.run(this.inputs);return await this.emgr.emit(new Fv({task:r,result:s,end:new Date})),await this.onDone(r,s),s});try{return await Promise.all(n),this.run()}catch(r){throw pt.error("RuntimeExecutor: error",r),r}}async start(t){await this.emgr.emit(new Bv({execution:this,state:"started"})),this.inputs.set("flow",{start:new Date,output:t,error:void 0,success:!0,params:t}),this.started_at=new Date,await this.run(),this.finished_at=new Date,await this.emgr.emit(new Bv({execution:this,state:"ended"}))}finished(){return this.finished_at!==void 0}errorCount(){return this.logs.filter(t=>!t.success).length}hasErrors(){return this.errorCount()>0}getErrorLogs(){return this.logs.filter(t=>!t.success)}getErrors(){return this.getErrorLogs().map(t=>t.error)}getResponse(){let t=this.flow.respondingTask;t||(t=this.flow.tasks[this.flow.tasks.length-1]);const n=this.__getLastTaskLog(t);if(n)return n.output}};K(Pw,"Events",{ExecutionEvent:Fv,ExecutionState:Bv});let vO=Pw;class KT{constructor(t,n){K(this,"flow");K(this,"source");this.flow=t,this.source=n}task(t){return new KT(this.flow,t)}asInputFor(t,n,r){const s=this.getDepth(),i=this.getOutConnections(),o=i.map(c=>c.condition),a=i.some(c=>this.task(c.target).getDepth()<=s);if(o.length>0&&a&&this.getOutConnections().some(c=>c.condition.sameAs(n)))throw new Error("Task cannot be connected to a deeper task with the same condition");this.flow.addConnection(new FV(this.source,t,{condition:n,max_retries:r}))}asOutputFor(t,n){this.task(t).asInputFor(this.source,n)}getNext(){return this.flow.connections.filter(t=>t.source===this.source).map(t=>t.target)}getDepth(){return this.flow.getSequence().findIndex(t=>t.includes(this.source))}getInConnections(t=!1){if(t){const n=this.getDepth();return this.getInConnections().filter(r=>r.target===this.source&&this.task(r.source).getDepth()<n)}return this.flow.connections.filter(n=>n.target===this.source)}getInTasks(t=!1){if(t){const n=this.getDepth();return this.getInConnections().map(r=>r.source).filter(r=>this.task(r).getDepth()<n)}return this.getInConnections().map(n=>n.source)}getOutConnections(t){return t?this.flow.connections.filter(n=>n.source===this.source&&n.condition.isMet(t)):this.flow.connections.filter(n=>n.source===this.source)}getOutTasks(t){return this.getOutConnections(t).map(n=>n.target)}}class id{constructor(t){K(this,"executions",[]);K(this,"type","manual");K(this,"config");const n=this.constructor.schema;this.config=Un(n,t??{})}async register(t,...n){this.executions.push(await t.start())}toJSON(){return{type:this.type,config:this.config}}}K(id,"schema",He({mode:ge({enum:["sync","async"],default:"async"})}));class Ky{constructor(t,n,r,s){K(this,"name");K(this,"trigger");K(this,"tasks",[]);K(this,"connections",[]);K(this,"respondingTask");K(this,"startTask");K(this,"sequence");this.name=t,this.trigger=s??new id,n.map(i=>this.addTask(i)),this.connections=r||[],this.startTask=n[0],this.sequence=this.getSequence()}setStartTask(t){return this.startTask=t,this.sequence=this.getSequence(),this}getSequence(t=[]){if(t.length===0)return t.push([this.startTask]),this.getSequence(t);const n=t[t.length-1],r=[];return n==null||n.forEach(s=>{this.task(s).getOutTasks().forEach(o=>{t.some(a=>a.includes(o))||r.push(o)})}),r.length===0?t:(t.push(r),this.getSequence(t))}addTask(t){if(this.tasks.includes(t))throw new Error("Task already defined");if(this.tasks.some(n=>n.name===t.name))throw new Error(`Task with name "${t.name}" already defined. Use a unique name.`);return this.tasks.push(t),this}setRespondingTask(t){if(!this.tasks.includes(t))throw new Error(`Cannot set task "${t.name}" as responding, not registered.`);return this.respondingTask=t,this}addConnection(t){if(this.connections.some(r=>r.source===t.source&&r.target===t.target&&r.condition[0]===t.condition[0]&&r.condition[1]===t.condition[1]))throw new Error("Connection already defined");return this.connections.push(t),this}task(t){return new KT(this,t)}createExecution(){return this.sequence=this.getSequence(),new vO(this)}async start(t=void 0){const n=this.createExecution();return await n.start(t),n}toJSON(){var t,n;return{trigger:this.trigger.toJSON(),tasks:Object.fromEntries(this.tasks.map(r=>[r.name,r.toJSON()])),connections:Object.fromEntries(this.connections.map(r=>[r.id,r.toJSON()])),start_task:(t=this.startTask)==null?void 0:t.name,responding_task:(n=this.respondingTask)==null?void 0:n.name}}static fromObject(t,n,r){var c;const s=en(n.tasks??{},(u,f)=>{const h=r[u.type];if(!h)throw new Error(`Task ${f} not found in taskMap`);try{const p=h.cls;return new p(f,u.params)}catch(p){throw pt.error("Error creating task",f,u.type,u,h),new Error(`Error creating task ${u.type}: ${p.message}`)}}),i=en(n.connections??{},(u,f)=>{const h=u.config.condition?vo.fromObject(u.config.condition):void 0;return new FV(s[u.source],s[u.target],{...u.config,condition:h},f)});let o;if(n.trigger){const u=(c=ZT[n.trigger.type])==null?void 0:c.cls;u&&(o=new u(n.trigger.config))}const a=new Ky(t,Object.values(s),Object.values(i),o);return a.startTask=n.start_task?s[n.start_task]:null,n.responding_task&&(a.respondingTask=s[n.responding_task]),a}}class BV extends Ih{constructor(){super(...arguments);K(this,"type","subflow")}async execute(){const n=this.params.flow;if(!(n instanceof Ky))throw new Error("Invalid flow provided");if(this.params.loop){const s=Array.isArray(this.params.input)?this.params.input:[this.params.input],i=[];for(const o of s){const a=n.createExecution();await a.start(o),i.push(await a.getResponse())}return i}const r=n.createExecution();return await r.start(this.params.input),r.getResponse()}}K(BV,"schema",He({flow:Ji(),input:Xp(Ji()).optional(),loop:mt().optional()}));class zV extends id{constructor(){super(...arguments);K(this,"type","event")}async register(n,r){if(!r.eventExists(this.config.event))throw new Error(`Event ${this.config.event} is not registered.`);r.on(this.config.event,async s=>{const i=n.createExecution();this.executions.push(i);try{await i.start(s.params)}catch(o){pt.error(o)}},this.config.mode)}}K(zV,"schema",He({event:ge(),...id.schema.properties}));const Fbe=["GET","POST","PUT","PATCH","DELETE"];class QT extends id{constructor(){super(...arguments);K(this,"type","http")}async register(n,r){const s=this.config.method.toLowerCase();r[s](this.config.path,async i=>{const o=i.req.raw,a=i[this.config.response_type],c=n.createExecution();if(this.executions.push(c),this.config.mode==="sync"){await c.start(o);const u=c.getResponse(),f=c.getErrors();return f.length>0?i.json({success:!1,errors:f}):a(u)}return c.start(o),i.json({success:!0})})}}K(QT,"schema",He({path:ge({pattern:"^/.*$"}),method:ge({enum:Fbe,default:"GET"}),response_type:ge({enum:["json","text","html"],default:"json"}),...id.schema.properties}));const ZT={manual:{cls:id},event:{cls:zV},http:{cls:QT}},VV={fetch:{cls:XT},log:{cls:DV},render:{cls:LV},subflow:{cls:BV}},UV={...VV},qV=ZT,HV=en(UV,(e,t)=>He({type:si(t),params:e.cls.schema},{title:String(t)}));nn(Object.values(HV));const WV=en(qV,(e,t)=>He({type:si(t),config:e.cls.schema.optional()},{title:String(t)}));nn(Object.values(WV));const Bbe=He({source:ge(),target:ge(),config:He({condition:nn([He({type:si("success")},{title:"success"}),He({type:si("error")},{title:"error"}),He({type:si("matches"),path:ge(),value:ge()},{title:"matches"})]),max_retries:jt()}).partial()}),GV=He({trigger:nn(Object.values(WV)),tasks:ed(nn(Object.values(HV))).optional(),connections:ed(Bbe).optional(),start_task:ge().optional(),responding_task:ge().optional()}),zbe=He({basepath:ge({default:"/api/flows"}),flows:ed(GV,{default:{}})});class Vbe extends Uy{constructor(){super(...arguments);K(this,"flows",{})}getSchema(){return zbe}getFlowInfo(n){return{...n.toJSON(),tasks:n.tasks.length,connections:n.connections}}async build(){const n=en(this.config.flows,(s,i)=>Ky.fromObject(i,s,UV));this.flows=n;const r=new z1;r.get("/",async s=>{const i=en(this.flows,o=>this.getFlowInfo(o));return s.json(i)}),r.get("/flow/:name",async s=>{var o;const i=s.req.param("name");return s.json((o=this.flows[i])==null?void 0:o.toJSON())}),r.get("/flow/:name/run",async s=>{const i=s.req.param("name"),o=this.flows[i],a=o.createExecution(),c=performance.now();await a.start();const u=performance.now()-c,f=a.getErrors();return s.json({success:f.length===0,time:u,errors:f,response:a.getResponse(),flow:this.getFlowInfo(o),logs:a.logs})}),r.all("*",s=>s.notFound()),this.ctx.server.route(this.config.basepath,r);for(const[s,i]of Object.entries(this.flows)){const o=i.trigger;switch(!0){case o instanceof QT:await o.register(i,this.ctx.server);break}}this.setBuilt()}toJSON(){return{...this.config,flows:en(this.flows,n=>n.toJSON())}}}class e$ extends Hr{validate(t){if(typeof t!="object")throw new E1("object",typeof t);return this.clone({...t,...this.params})}}K(e$,"slug","file-uploaded");class t$ extends Hr{}K(t$,"slug","file-deleted");class n$ extends Hr{}K(n$,"slug","file-access");const Ube=Object.freeze(Object.defineProperty({__proto__:null,FileAccessEvent:n$,FileDeletedEvent:t$,FileUploadedEvent:e$},Symbol.toStringTag,{value:"Module"}));var bo;const Dw=class Dw{constructor(t,n={},r){Fe(this,bo);K(this,"emgr");K(this,"config");Be(this,bo,t),this.config={...n,body_max_size:n.body_max_size&&n.body_max_size>0?n.body_max_size:void 0},this.emgr=r??new Fy,this.emgr.registerEvents(Dw.Events)}getAdapter(){return Y(this,bo)}async objectMetadata(t){return await Y(this,bo).getObjectMeta(t)}getConfig(){return this.config}async uploadFile(t,n,r){const s=await Y(this,bo).putObject(n,t);if(typeof s>"u")throw new Error("Failed to upload file");let i={name:n,meta:{size:0,type:"application/octet-stream"},etag:typeof s=="string"?s:""};if(typeof s=="object"?i=s:gd(t)&&(i.meta.size=t.size,i.meta.type=t.type),!yF(i.meta.type,["application/octet-stream","application/json"])){const a=await Y(this,bo).getObjectMeta(n);if(!a)throw new Error("Failed to get object meta");i.meta=a}if(i.meta.type.startsWith("image")&&(!i.meta.width||!i.meta.height))try{const a=await Foe(t);i.meta={...i.meta,...a}}catch(a){pt.warn("Failed to get image dimensions",a)}const o={file:t,...i,state:{name:i.name,path:i.name}};if(!r){const a=await this.emgr.emit(new e$(o));if(a.returned)return a.params}return o}async deleteFile(t){await Y(this,bo).deleteObject(t),await this.emgr.emit(new t$({name:t}))}async fileExists(t){return await Y(this,bo).objectExists(t)}};bo=new WeakMap,K(Dw,"Events",Ube);let dg=Dw;const YV=new lr("media.file.read"),JV=new lr("media.file.list"),xO=new lr("media.file.upload"),XV=new lr("media.file.delete"),qbe=Object.freeze(Object.defineProperty({__proto__:null,deleteFile:XV,listFiles:JV,readFile:YV,uploadFile:xO},Symbol.toStringTag,{value:"Module"}));function Hbe(e){var n;if(!e.includes("."))return;const t=e.split(".");return(n=t[t.length-1])==null?void 0:n.toLowerCase()}function UI(e,t=16){const n=typeof e=="string"?e:e.name;if(typeof n!="string")throw console.error("Couldn't extract filename from",e),new Error("Invalid file name");let r=Hbe(n);if(!r&&gd(e)&&e.type){const s=bF(e.type);s.length>0&&(r=s)}return[cF(t),r].filter(Boolean).join(".")}class Wbe extends Hy{constructor(t){super(),this.media=t}getStorageAdapter(){return this.getStorage().getAdapter()}getStorage(){return this.media.storage}getController(){const{auth:t,permission:n}=this.middlewares,r=this.create().use(t()),s=this.getEntitiesEnum(this.media.em);r.get("/files",Zt({summary:"Get the list of files",tags:["media"]}),n(JV),async a=>{const c=await this.getStorageAdapter().listObjects();return a.json(c)}),r.get("/file/:filename",Zt({summary:"Get a file by name",tags:["media"]}),n(YV),async a=>{const{filename:c}=a.req.param();if(!c)throw new Error("No file name provided");await this.getStorage().emgr.emit(new n$({name:c}));const u=await this.getStorageAdapter().getObject(c,a.req.raw.headers),f=new Headers(u.headers);return f.set("Cache-Control","public, max-age=31536000, immutable"),new Response(u.body,{status:u.status,statusText:u.statusText,headers:f})}),r.delete("/file/:filename",Zt({summary:"Delete a file by name",tags:["media"]}),n(XV),async a=>{const{filename:c}=a.req.param();if(!c)throw new Error("No file name provided");return await this.getStorage().deleteFile(c),a.json({message:"File deleted"})});const i=this.getStorage().getConfig().body_max_size??Number.POSITIVE_INFINITY;qr()&&r.post("/inspect",Zt({summary:"Inspect a file",tags:["media"]}),async a=>{const c=await NN(a);return a.json({type:c==null?void 0:c.type,name:c==null?void 0:c.name,size:c==null?void 0:c.size})});const o={content:{"multipart/form-data":{schema:{type:"object",properties:{file:{type:"string",format:"binary"}},required:["file"]}},"application/octet-stream":{schema:{type:"string",format:"binary"}}}};return r.post("/upload/:filename?",Zt({summary:"Upload a file",tags:["media"],requestBody:o}),qt("param",ze({filename:ge().optional()})),n(xO),async a=>{const c=a.req.param("filename"),u=await NN(a);if(!u)return a.json({error:"No file provided"},gn.BAD_REQUEST);if(u.size>i)return a.json({error:`Max size (${i} bytes) exceeded`},gn.PAYLOAD_TOO_LARGE);const f=c??UI(u),h=await this.getStorage().uploadFile(u,f);return a.json(h,gn.CREATED)}),r.post("/entity/:entity/:id/:field",Zt({summary:"Add a file to an entity",tags:["media"],requestBody:o}),qt("param",ze({entity:s,id:jt(),field:ge()})),qt("query",ze({overwrite:mt().optional()})),n([U1,xO]),async a=>{const c=a.req.param("entity"),u=a.req.param("field"),f=Number.parseInt(a.req.param("id")),h=this.media.em.entity(c);if(!h)return a.json({error:`Entity "${c}" not found`},gn.NOT_FOUND);const p=h.field(u);if(!p||!(p instanceof Ug))return a.json({error:`Invalid field "${u}"`},gn.BAD_REQUEST);const y=this.media.getMediaEntity().name,v=`${c}.${u}`,x={scope:u,reference:v,entity_id:f},S=p.getMaxItems(),N=[];if(S){const{overwrite:R}=a.req.valid("query"),{data:{count:F}}=await this.media.em.repository(y).count(x);if(F>=S){if(!R)return a.json({error:`Max items (${S}) reached`},gn.BAD_REQUEST);if(F>S)return a.json({error:`Max items (${S}) exceeded already with ${F} items.`},gn.UNPROCESSABLE_ENTITY);const z=await this.media.em.repo(y).findMany({select:["path"],where:x,sort:{by:"id",dir:"asc"},limit:F-S+1});z.data&&z.data.length>0&&z.data.map(L=>N.push(L.path))}}const{data:{exists:_}}=await this.media.em.repository(h).exists({id:f});if(!_)return a.json({error:`Entity "${c}" with ID "${f}" doesn't exist found`},gn.NOT_FOUND);const C=await NN(a);if(!C)return a.json({error:"No file provided"},gn.BAD_REQUEST);if(C.size>i)return a.json({error:`Max size (${i} bytes) exceeded`},gn.PAYLOAD_TOO_LARGE);const j=UI(C),A=await this.getStorage().uploadFile(C,j,!0),$=this.media.em.mutator(y);$.__unstable_toggleSystemEntityCreation(!1);const k=await $.insertOne({...this.media.uploadedEventDataToMediaPayload(A),...x});if($.__unstable_toggleSystemEntityCreation(!0),N.length>0)for(const R of N)await this.getStorage().deleteFile(R);return a.json({ok:!0,result:k.data,...A},gn.CREATED)}),r}}class Gbe{constructor(t){K(this,"is_set",!1);K(this,"items",{});this.registerFn=t}set(t){if(this.is_set)throw new Error("Registry is already set");return this.items=t,this.is_set=!0,this}add(t,n){return this.items[t]=n,this}register(t,n){if(this.registerFn){const r=this.registerFn(n);return this.items[t]=r,this}return this.add(t,n)}get(t){return this.items[t]}has(t){return t in this.items}all(){return this.items}}/**
 * @license MIT <https://opensource.org/licenses/MIT>
 * @copyright Michael Hart 2024
 */const wO=new TextEncoder,Ybe={appstream2:"appstream",cloudhsmv2:"cloudhsm",email:"ses",marketplace:"aws-marketplace",mobile:"AWSMobileHubService",pinpoint:"mobiletargeting",queue:"sqs","git-codecommit":"codecommit","mturk-requester-sandbox":"mturk-requester","personalize-runtime":"personalize"},Jbe=new Set(["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id","range","connection"]);let Xbe=class{constructor({accessKeyId:t,secretAccessKey:n,sessionToken:r,service:s,region:i,cache:o,retries:a,initRetryMs:c}){if(t==null)throw new TypeError("accessKeyId is a required option");if(n==null)throw new TypeError("secretAccessKey is a required option");this.accessKeyId=t,this.secretAccessKey=n,this.sessionToken=r,this.service=s,this.region=i,this.cache=o||new Map,this.retries=a??10,this.initRetryMs=c||50}async sign(t,n){if(t instanceof Request){const{method:i,url:o,headers:a,body:c}=t;n=Object.assign({method:i,url:o,headers:a},n),n.body==null&&a.has("Content-Type")&&(n.body=c!=null&&a.has("X-Amz-Content-Sha256")?c:await t.clone().arrayBuffer()),t=o}const r=new Kbe(Object.assign({url:t.toString()},n,this,n&&n.aws)),s=Object.assign({},n,await r.sign());delete s.aws;try{return new Request(s.url.toString(),s)}catch(i){if(i instanceof TypeError)return new Request(s.url.toString(),Object.assign({duplex:"half"},s));throw i}}async fetch(t,n){for(let r=0;r<=this.retries;r++){const s=fetch(await this.sign(t,n));if(r===this.retries)return s;const i=await s;if(i.status<500&&i.status!==429)return i;await new Promise(o=>setTimeout(o,Math.random()*this.initRetryMs*Math.pow(2,r)))}throw new Error("An unknown error occurred, ensure retries is not negative")}};class Kbe{constructor({method:t,url:n,headers:r,body:s,accessKeyId:i,secretAccessKey:o,sessionToken:a,service:c,region:u,cache:f,datetime:h,signQuery:p,appendSessionToken:y,allHeaders:v,singleEncode:x}){if(n==null)throw new TypeError("url is a required option");if(i==null)throw new TypeError("accessKeyId is a required option");if(o==null)throw new TypeError("secretAccessKey is a required option");this.method=t||(s?"POST":"GET"),this.url=new URL(n),this.headers=new Headers(r||{}),this.body=s,this.accessKeyId=i,this.secretAccessKey=o,this.sessionToken=a;let S,N;(!c||!u)&&([S,N]=Qbe(this.url,this.headers)),this.service=c||S||"",this.region=u||N||"us-east-1",this.cache=f||new Map,this.datetime=h||new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),this.signQuery=p,this.appendSessionToken=y||this.service==="iotdevicegateway",this.headers.delete("Host"),this.service==="s3"&&!this.signQuery&&!this.headers.has("X-Amz-Content-Sha256")&&this.headers.set("X-Amz-Content-Sha256","UNSIGNED-PAYLOAD");const _=this.signQuery?this.url.searchParams:this.headers;if(_.set("X-Amz-Date",this.datetime),this.sessionToken&&!this.appendSessionToken&&_.set("X-Amz-Security-Token",this.sessionToken),this.signableHeaders=["host",...this.headers.keys()].filter(j=>v||!Jbe.has(j)).sort(),this.signedHeaders=this.signableHeaders.join(";"),this.canonicalHeaders=this.signableHeaders.map(j=>j+":"+(j==="host"?this.url.host:(this.headers.get(j)||"").replace(/\s+/g," "))).join(`
`),this.credentialString=[this.datetime.slice(0,8),this.region,this.service,"aws4_request"].join("/"),this.signQuery&&(this.service==="s3"&&!_.has("X-Amz-Expires")&&_.set("X-Amz-Expires","86400"),_.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),_.set("X-Amz-Credential",this.accessKeyId+"/"+this.credentialString),_.set("X-Amz-SignedHeaders",this.signedHeaders)),this.service==="s3")try{this.encodedPath=decodeURIComponent(this.url.pathname.replace(/\+/g," "))}catch{this.encodedPath=this.url.pathname}else this.encodedPath=this.url.pathname.replace(/\/+/g,"/");x||(this.encodedPath=encodeURIComponent(this.encodedPath).replace(/%2F/g,"/")),this.encodedPath=WI(this.encodedPath);const C=new Set;this.encodedSearch=[...this.url.searchParams].filter(([j])=>{if(!j)return!1;if(this.service==="s3"){if(C.has(j))return!1;C.add(j)}return!0}).map(j=>j.map(A=>WI(encodeURIComponent(A)))).sort(([j,A],[$,k])=>j<$?-1:j>$?1:A<k?-1:A>k?1:0).map(j=>j.join("=")).join("&")}async sign(){return this.signQuery?(this.url.searchParams.set("X-Amz-Signature",await this.signature()),this.sessionToken&&this.appendSessionToken&&this.url.searchParams.set("X-Amz-Security-Token",this.sessionToken)):this.headers.set("Authorization",await this.authHeader()),{method:this.method,url:this.url,headers:this.headers,body:this.body}}async authHeader(){return["AWS4-HMAC-SHA256 Credential="+this.accessKeyId+"/"+this.credentialString,"SignedHeaders="+this.signedHeaders,"Signature="+await this.signature()].join(", ")}async signature(){const t=this.datetime.slice(0,8),n=[this.secretAccessKey,t,this.region,this.service].join();let r=this.cache.get(n);if(!r){const s=await Mp("AWS4"+this.secretAccessKey,t),i=await Mp(s,this.region),o=await Mp(i,this.service);r=await Mp(o,"aws4_request"),this.cache.set(n,r)}return qN(await Mp(r,await this.stringToSign()))}async stringToSign(){return["AWS4-HMAC-SHA256",this.datetime,this.credentialString,qN(await qI(await this.canonicalString()))].join(`
`)}async canonicalString(){return[this.method.toUpperCase(),this.encodedPath,this.encodedSearch,this.canonicalHeaders+`
`,this.signedHeaders,await this.hexBodyHash()].join(`
`)}async hexBodyHash(){let t=this.headers.get("X-Amz-Content-Sha256")||(this.service==="s3"&&this.signQuery?"UNSIGNED-PAYLOAD":null);if(t==null){if(this.body&&typeof this.body!="string"&&!("byteLength"in this.body))throw new Error("body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header");t=qN(await qI(this.body||""))}return t}}async function Mp(e,t){const n=await crypto.subtle.importKey("raw",typeof e=="string"?wO.encode(e):e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return crypto.subtle.sign("HMAC",n,wO.encode(t))}async function qI(e){return crypto.subtle.digest("SHA-256",typeof e=="string"?wO.encode(e):e)}const HI=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function qN(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++){const s=t[r];n+=HI[s>>>4&15],n+=HI[s&15]}return n}function WI(e){return e.replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())}function Qbe(e,t){const{hostname:n,pathname:r}=e;if(n.endsWith(".on.aws")){const a=n.match(/^[^.]{1,63}\.lambda-url\.([^.]{1,63})\.on\.aws$/);return a!=null?["lambda",a[1]||""]:["",""]}if(n.endsWith(".r2.cloudflarestorage.com"))return["s3","auto"];if(n.endsWith(".backblazeb2.com")){const a=n.match(/^(?:[^.]{1,63}\.)?s3\.([^.]{1,63})\.backblazeb2\.com$/);return a!=null?["s3",a[1]||""]:["",""]}const s=n.replace("dualstack.","").match(/([^.]{1,63})\.(?:([^.]{0,63})\.)?amazonaws\.com(?:\.cn)?$/);let i=s&&s[1]||"",o=s&&s[2];if(o==="us-gov")o="us-gov-west-1";else if(o==="s3"||o==="s3-accelerate")o="us-east-1",i="s3";else if(i==="iot")n.startsWith("iot.")?i="execute-api":n.startsWith("data.jobs.iot.")?i="iot-jobs-data":i=r==="/mqtt"?"iotdevicegateway":"iotdata";else if(i==="autoscaling"){const a=(t.get("X-Amz-Target")||"").split(".")[0];a==="AnyScaleFrontendService"?i="application-autoscaling":a==="AnyScaleScalingPlannerFrontendService"&&(i="autoscaling-plans")}else o==null&&i.startsWith("s3-")?(o=i.slice(3).replace(/^fips-|^external-1/,""),i="s3"):i.endsWith("-fips")?i=i.slice(0,-5):o&&/-\d$/.test(i)&&!/-\d$/.test(o)&&([i,o]=[o,i]);return[Ybe[i]||i,o||""]}var Hu;class Zbe extends Xbe{constructor(n,r){super(n);Fe(this,Hu);Be(this,Hu,r??{responseType:"json"})}convertParams(n){switch(Y(this,Hu).convertParams){case"pascalToKebab":return jC(n);default:return n}}getUrl(n="/",r={}){const s=new URL(n),i=this.convertParams(r);return Object.entries(i).forEach(([o,a])=>{s.searchParams.append(o,a)}),s.toString()}updateKeysRecursively(n,r){return n==null?n:Array.isArray(n)?n.map(s=>this.updateKeysRecursively(s,r)):typeof n=="object"?Object.keys(n).reduce((s,i)=>{let o=i;return i.indexOf(" ")===-1&&(o=i.charAt(0)[r]()+i.slice(1)),s[o]=this.updateKeysRecursively(n[i],r),s},{}):n}async fetchJson(n,r){const s=await this.fetch(n,r);if(Y(this,Hu).responseType==="xml"){if(!s.ok){const a=await s.text();throw new Error(a)}const o=await s.text();return Fae(o)}if(!s.ok){const o=await s.json();throw new Error(o.message)}const i=await s.json();return Y(this,Hu).responseKeysToUpper?this.updateKeysRecursively(i,"toUpperCase"):i}}Hu=new WeakMap;const GI=Symbol.for("bknd:storage");class KV{constructor(){this[GI]=!0}static isAdapter(t){return t?t[GI]===!0:!1}}const YI=ze({access_key:$g(),secret_access_key:$g(),url:ge({pattern:"^https?://(?:.*)?[^/.]+$",description:"URL to S3 compatible endpoint without trailing slash",examples:["https://{account_id}.r2.cloudflarestorage.com/{bucket}","https://{bucket}.s3.{region}.amazonaws.com"]})},{title:"AWS S3",description:"AWS S3 or compatible storage"});var xh;class QV extends KV{constructor(n){super();Fe(this,xh);K(this,"client");this.client=new Zbe({accessKeyId:n.access_key,secretAccessKey:n.secret_access_key,retries:qr()?0:10},{convertParams:"pascalToKebab",responseType:"xml"}),Be(this,xh,Un(YI,n))}getName(){return"s3"}getSchema(){return YI}getUrl(n="",r={}){let s=this.getObjectUrl("").slice(0,-1);return n.length>0&&(s+=`/${n}`),this.client.getUrl(s,r)}getObjectUrl(n){return`${Y(this,xh).url}/${n}`}async listObjects(n=""){const r={ListType:2,Prefix:n},s=this.getUrl("",r),i=await this.client.fetchJson(s,{method:"GET"}),{Contents:o}=i.ListBucketResult,a=o?Array.isArray(o)?o:[o]:[];return ti(a,(u,f)=>{f.Key&&f.LastModified&&f.Size&&u.push({key:f.Key,last_modified:f.LastModified,size:f.Size})},[])}async putObject(n,r,s={}){const i=this.getUrl(n,{}),o=await this.client.fetch(i,{method:"PUT",body:r,headers:gd(r)?{"Content-Length":String(r.size)}:{}});if(!o.ok)throw new Error(`Failed to upload object: ${o.status} ${o.statusText}`);return String(o.headers.get("etag"))}async headObject(n,r={}){const s=this.getUrl(n,{});return await this.client.fetch(s,{method:"HEAD",headers:{Range:"bytes=0-1"}})}async getObjectMeta(n){var o;const r=await this.headObject(n),s=String(r.headers.get("content-type")),i=Number(String((o=r.headers.get("content-range"))==null?void 0:o.split("/")[1]));return{type:s,size:i}}async objectExists(n,r={}){return(await this.headObject(n)).ok}async getObject(n,r){const s=this.getUrl(n),i=await this.client.fetch(s,{method:"GET",headers:Voe(r,["if-none-match","accept","if-modified-since"])});return new Response(i.body,{status:i.status,statusText:i.statusText,headers:i.headers})}async deleteObject(n,r={}){const s=this.getUrl(n,r);await this.client.fetch(s,{method:"DELETE"})}toJSON(n){return{type:this.getName(),config:n?Y(this,xh):void 0}}}xh=new WeakMap;const JI=ze({cloud_name:ge(),api_key:$g(),api_secret:$g(),upload_preset:ge().optional()},{title:"Cloudinary",description:"Cloudinary media storage"});class ZV extends KV{constructor(n){super();K(this,"config");this.config=Un(JI,n)}getSchema(){return JI}getMimeType(n){switch(!0){case(n.format==="jpeg"||n.format==="jpg"):return"image/jpeg"}return`${n.resource_type}/${n.format}`}getName(){return"cloudinary"}getAuthorizationHeader(){return{Authorization:`Basic ${btoa(`${this.config.api_key}:${this.config.api_secret}`)}`}}async putObject(n,r){const s=n.replace(/\.[a-z0-9]{2,5}$/,""),i=new FormData;i.append("file",r),i.append("public_id",s),i.append("api_key",this.config.api_key),this.config.upload_preset&&i.append("upload_preset",this.config.upload_preset);const o=await fetch(`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/auto/upload`,{method:"POST",headers:{Accept:"application/json"},body:i});if(!o.ok)return;const a=await o.json();return{name:a.public_id+"."+a.format,etag:a.etag,meta:{type:this.getMimeType(a),size:a.bytes}}}async listObjects(n){const r=await fetch(`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/resources/search`,{method:"GET",headers:{Accept:"application/json","Cache-Control":"no-cache",...this.getAuthorizationHeader()}});if(!r.ok)throw new Error("Failed to list objects");return(await r.json()).resources.map(o=>({key:o.public_id,last_modified:new Date(o.uploaded_at),size:o.bytes}))}async headObject(n){const r=this.getObjectUrl(n);return await fetch(r,{method:"HEAD",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0",Range:"bytes=0-1"}})}async objectExists(n){return(await this.headObject(n)).ok}async getObjectMeta(n){var s;const r=await this.headObject(n);if(r.ok){const i=r.headers.get("content-type"),o=Number((s=r.headers.get("content-range"))==null?void 0:s.split("/")[1]);return{type:i,size:o}}throw new Error("Cannot get object meta")}guessType(n){const r={image:["jpg","jpeg","png","gif","webp","svg"],video:["mp4","webm","ogg"]},s=n.split(".").pop();return Object.keys(r).find(i=>r[i].includes(s))}getObjectUrl(n){const r=this.guessType(n)??"image";return`https://res.cloudinary.com/${this.config.cloud_name}/${r}/upload/${n}`}async generateSignature(n,r){const s=n.timestamp??Math.floor(Date.now()/1e3),i=Object.entries({...n,timestamp:s}).sort(([a],[c])=>a.localeCompare(c)).map(([a,c])=>`${a}=${c}`).join("&");return{signature:await EF.sha1(i+(r??this.config.api_secret)),timestamp:s}}filenameToPublicId(n){return n.split(".").slice(0,-1).join(".")}async getObject(n,r){const s=await fetch(this.getObjectUrl(n),{method:"GET",headers:zoe(r,["range"])});return new Response(s.body,{status:s.status,statusText:s.statusText,headers:s.headers})}async deleteObject(n){const r=this.guessType(n)??"image",s=this.filenameToPublicId(n),{timestamp:i,signature:o}=await this.generateSignature({public_id:s}),a=new FormData;a.append("public_id",s),a.append("timestamp",String(i)),a.append("signature",o),a.append("api_key",this.config.api_key);const c=`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/${r}/destroy`,u=await fetch(c,{headers:{Accept:"application/json","Cache-Control":"no-cache",...this.getAuthorizationHeader()},method:"POST",body:a});if(!u.ok)throw new Error(`Failed to delete object: ${u.status} ${u.statusText}`)}toJSON(n){return{type:"cloudinary",config:n?this.config:{cloud_name:this.config.cloud_name}}}}const eve=new Gbe(e=>({cls:e,schema:e.prototype.getSchema()})).register("s3",QV).register("cloudinary",ZV);QV.prototype.getSchema(),ZV.prototype.getSchema();const tve={media:eve},eU=tve.media;function tU(){const e=p1(eU.all(),(t,n)=>{var r,s;return He({type:si(n),config:t.schema},{title:((r=t.schema)==null?void 0:r.title)??n,description:(s=t.schema)==null?void 0:s.description})});return V1("config_media",{enabled:mt({default:!1}),basepath:ge({default:"/api/media"}),entity_name:ge({default:"media"}),storage:He({body_max_size:jt({description:"Max size of the body in bytes. Leave blank for unlimited."}).optional()},{default:{}}),adapter:Rye("config_media_adapter",nn(Object.values(e))).optional()},{default:{}})}tU();const nve={path:wa().required(),folder:Eye({default_value:!1,hidden:!0,fillable:["create"]}),mime_type:wa(),size:gI(),scope:wa({hidden:!0,fillable:["create"]}),etag:wa(),modified_at:Sye(),reference:wa(),entity_id:gI(),metadata:Nye()},Lw=class Lw extends Uy{constructor(){super(...arguments);K(this,"_storage")}async build(){if(!this.config.enabled){this.setBuilt();return}if(!this.config.adapter){console.info("No storage adapter provided, skip building media.");return}let n;try{const{type:r,config:s}=this.config.adapter,i=eU.get(r).cls;n=new i(s),this._storage=new dg(n,this.config.storage,this.ctx.emgr),this.setBuilt(),this.setupListeners(),this.ctx.guard.registerPermissions(qbe),this.ctx.server.route(this.basepath,new Wbe(this).getController());const o=this.getMediaEntity(!0);this.ctx.helper.ensureSchema(Yz({[o.name]:o},({index:a},{media:c})=>{a(c).on(["path"],!0).on(["reference"]).on(["entity_id"])}))}catch(r){throw console.error(r),new Error(`Could not build adapter with config ${JSON.stringify(this.config.adapter)}`)}}getSchema(){return tU()}get basepath(){return this.config.basepath}get storage(){return this.throwIfNotBuilt(),this._storage}uploadedEventDataToMediaPayload(n){const r={};return n.meta.width&&n.meta.height&&(r.width=n.meta.width,r.height=n.meta.height),{path:n.name,mime_type:n.meta.type,size:n.meta.size,etag:n.etag,modified_at:new Date,metadata:r}}getMediaEntity(n){const r=this.config.entity_name;return n||!this.em.hasEntity(r)?Gz(r,Lw.mediaFields,void 0,"system"):this.em.entity(r)}get em(){return this.ctx.em}setupListeners(){const{emgr:n,em:r}=this.ctx,s=this.getMediaEntity().name;n.onEvent(dg.Events.FileUploadedEvent,async i=>{const o=r.mutator(s);o.__unstable_toggleSystemEntityCreation(!1);const a=this.uploadedEventDataToMediaPayload(i.params),{data:c}=await o.insertOne(a);return o.__unstable_toggleSystemEntityCreation(!0),{data:c}},{mode:"sync",id:"add-data-media"}),n.onEvent(dg.Events.FileDeletedEvent,async i=>{const{data:o}=await r.repo(s).findOne({path:i.params.name});o&&await r.mutator(s).deleteOne(o.id),pt.log("App:storage:file deleted",i.params)},{mode:"sync",id:"delete-data-media"})}getOverwritePaths(){return[/^\.?adapter$/]}toJSON(n){return!this.isBuilt()||!this.config.enabled?this.configDefault:{...this.config,adapter:this.storage.getAdapter().toJSON(n)}}};K(Lw,"mediaFields",nve);let SO=Lw;const nU={server:Dye,data:Lbe,auth:Rx,media:SO,flows:Vbe};aF("modules_debug");function rve(){return{type:"object",...en(nU,t=>t.prototype.getSchema())}}function sve(){const e=en(nU,t=>t.prototype.getSchema().template({},{withOptional:!0,withExtendedOptional:!0}));return structuredClone(e)}class H1{constructor(t={},n){K(this,"fetcher");this._options=t,this.fetcher=n??fetch}getDefaultOptions(){return{}}get options(){return{host:"http://localhost",token:void 0,...this.getDefaultOptions(),...this._options}}key(){return this.options.basepath??""}getUrl(t){const n=this.options.basepath??"";return this.options.host+(n+"/"+t).replace(/\/{2,}/g,"/").replace(/\/$/,"")}request(t,n,r){const s=(r==null?void 0:r.method)??"GET",i=Array.isArray(t)?t.join("/"):t;let o=this.getUrl(i);n instanceof URLSearchParams?o+="?"+n.toString():typeof n=="object"&&Object.keys(n).length>0&&(o+="?"+y1(n));const a=new Headers(this.options.headers??{});for(const[f,h]of Object.entries((r==null?void 0:r.headers)??{}))a.set(f,h);a.has("Accept")||a.set("Accept","application/json"),this.options.token&&this.options.token_transport==="header"&&a.set("Authorization",`Bearer ${this.options.token}`);let c=r==null?void 0:r.body;if(r&&"body"in r&&["POST","PATCH","PUT"].includes(s)){const f=a.get("Content-Type")??void 0;(!f||f.startsWith("application/json")||Qu(c))&&(c=JSON.stringify(r.body),a.set("Content-Type","application/json"))}const u=new Request(o,{...r,method:s,body:c,headers:a});return new Mx(u,{fetcher:this.fetcher,verbose:this.options.verbose})}get(t,n,r){return this.request(t,n,{...r,method:"GET"})}post(t,n,r){return this.request(t,void 0,{...r,body:n,method:"POST"})}patch(t,n,r){return this.request(t,void 0,{...r,body:n,method:"PATCH"})}put(t,n,r){return this.request(t,void 0,{...r,body:n,method:"PUT"})}delete(t,n,r){return this.request(t,void 0,{...r,body:n,method:"DELETE"})}}function ive(e,t,n){let r=typeof n<"u"?n:t;const s=["raw","body","ok","status","res","data","toJSON"];return typeof r!="object"&&(r={}),new Proxy(r,{get(i,o,a){return o==="raw"||o==="res"?e:o==="body"?t:o==="data"?n:o==="ok"?e.ok:o==="status"?e.status:o==="toJSON"?()=>i:Reflect.get(i,o,a)},has(i,o){return s.includes(o)?!0:Reflect.has(i,o)},ownKeys(i){return Array.from(new Set([...Reflect.ownKeys(i),...s]))},getOwnPropertyDescriptor(i,o){return s.includes(o)?{configurable:!0,enumerable:!0,value:Reflect.get({raw:e,body:t,ok:e.ok,status:e.status},o)}:Reflect.getOwnPropertyDescriptor(i,o)}})}var P8;P8=Symbol.toStringTag;const G3=class G3{constructor(t,n,r){K(this,P8);this.request=t,this.options=n,this.refineData=r}get verbose(){var t;return((t=this.options)==null?void 0:t.verbose)??!1}refine(t){return new G3(this.request,this.options,t)}async execute(){var o;qr()&&await new Promise(a=>setTimeout(a,200));const t=((o=this.options)==null?void 0:o.fetcher)??fetch;this.verbose&&pt.debug("[FetchPromise] Request",{method:this.request.method,url:this.request.url});const n=await t(this.request);this.verbose&&pt.debug("[FetchPromise] Response",{res:n,ok:n.ok,status:n.status});let r,s;const i=n.headers.get("Content-Type")??"";if(i.startsWith("application/json")?(r=await n.json(),typeof r=="object"&&(s="data"in r?r.data:r)):i.startsWith("text")?r=await n.text():r=n.body,this.refineData)try{s=this.refineData(s)}catch(a){console.warn("[FetchPromise] Error in refineData",a),s=void 0}return ive(n,r,s)}then(t,n){return this.execute().then(t,n)}catch(t){return this.then(void 0,t)}finally(t){return this.then(n=>(t==null||t(),n),n=>{throw t==null||t(),n})}path(){return new URL(this.request.url).pathname}key(t){const n=new URL(this.request.url);return(t==null?void 0:t.search)!==!1?this.path()+n.search:this.path()}keyArray(t){const n=new URL(this.request.url),r=this.path().split("/");return((t==null?void 0:t.search)!==!1?[...r,n.searchParams.toString()]:r).filter(Boolean)}toString(){return this.key({search:!0})}toJSON(){return{url:this.request.url,method:this.request.method}}};let Mx=G3;class ove extends H1{getDefaultOptions(){return{basepath:"/api/auth",credentials:"include"}}async login(t,n){var s,i;const r=await this.post([t,"login"],n,{credentials:this.options.credentials});return r.ok&&r.body.token&&await((i=(s=this.options).onTokenUpdate)==null?void 0:i.call(s,r.body.token)),r}async register(t,n){var s,i;const r=await this.post([t,"register"],n,{credentials:this.options.credentials});return r.ok&&r.body.token&&await((i=(s=this.options).onTokenUpdate)==null?void 0:i.call(s,r.body.token)),r}async actionSchema(t,n){return this.get([t,"actions",n,"schema.json"])}async action(t,n,r){return this.post([t,"actions",n],r)}async loginWithPassword(t){return this.login("password",t)}async registerWithPassword(t){return this.register("password",t)}me(){return this.get(["me"])}strategies(){return this.get(["strategies"])}async logout(){var t,n;await((n=(t=this.options).onTokenUpdate)==null?void 0:n.call(t,void 0))}}class ave extends H1{getDefaultOptions(){return{basepath:"/api/data",queryLengthLimit:1e3,defaultQuery:{limit:10}}}requireObjectSet(t,n){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error(n??"object is required")}readOne(t,n,r={}){return this.get(["entity",t,n],r)}readOneBy(t,n={}){return this.readMany(t,{...n,limit:1,offset:0}).refine(r=>r[0])}readMany(t,n={}){const r=n??this.options.defaultQuery,s=this.get(["entity",t],r);return s.request.url.length<=this.options.queryLengthLimit?s:this.post(["entity",t,"query"],r)}readManyByReference(t,n,r,s={}){return this.get(["entity",t,n,r],s??this.options.defaultQuery)}createOne(t,n){return this.post(["entity",t],n)}createMany(t,n){if(!n||!Array.isArray(n)||n.length===0)throw new Error("input is required");return this.post(["entity",t],n)}updateOne(t,n,r){if(!n)throw new Error("ID is required");return this.patch(["entity",t,n],r)}updateMany(t,n,r){return this.requireObjectSet(n),this.patch(["entity",t],{update:r,where:n})}deleteOne(t,n){if(!n)throw new Error("ID is required");return this.delete(["entity",t,n])}deleteMany(t,n){return this.requireObjectSet(n),this.delete(["entity",t],n)}count(t,n={}){return this.post(["entity",t,"fn","count"],n)}exists(t,n={}){return this.post(["entity",t,"fn","exists"],n)}}class lve extends H1{getDefaultOptions(){return{basepath:"/api/media",upload_fetcher:fetch,init:{}}}listFiles(){return this.get(["files"])}getFile(t){return this.get(["file",t],void 0,{headers:{Accept:"*/*"}})}async getFileStream(t){const{res:n}=await this.getFile(t);if(!n.ok||!n.body)throw new Error("Failed to fetch file");return n.body}async download(t){const{res:n}=await this.getFile(t);if(!n.ok||!n.body)throw new Error("Failed to fetch file");return await n.blob()}getFileUploadUrl(t){return t?this.getUrl(`/upload/${t.path}`):this.getUrl("/upload")}getEntityUploadUrl(t,n,r){return this.getUrl(`/entity/${t}/${n}/${r}`)}getUploadHeaders(){return this.options.token_transport==="header"&&this.options.token?new Headers({Authorization:`Bearer ${this.options.token}`}):new Headers}uploadFile(t,n){var o;const r={"Content-Type":"application/octet-stream",...((o=n==null?void 0:n._init)==null?void 0:o.headers)||{}};let s=(n==null?void 0:n.filename)||"";try{typeof t.type<"u"&&(r["Content-Type"]=t.type),n!=null&&n.filename||(s=t.name)}catch{}s&&s.length>0&&s.includes("/")&&(s=s.split("/").pop()||"");const i={...this.options.init,...(n==null?void 0:n._init)||{},headers:r};if(n!=null&&n.path)return this.post(n.path,t,i);if(!s||s.length===0)throw new Error("Invalid filename");return this.post((n==null?void 0:n.path)??["upload",s],t,i)}async upload(t,n={}){var r;if(t instanceof Request||typeof t=="string"){const i=await(n.fetcher??this.options.upload_fetcher)(t);if(!i.ok||!i.body)throw new Error("Failed to fetch file");return this.uploadFile(i.body,n)}else if(t instanceof Response){if(!t.body)throw new Error("Invalid response");return this.uploadFile(t.body,{...n??{},_init:{...n._init??{},headers:{...((r=n._init)==null?void 0:r.headers)??{},"Content-Type":t.headers.get("Content-Type")||"application/octet-stream"}}})}return this.uploadFile(t,n)}async uploadToEntity(t,n,r,s,i){return this.upload(s,{...i,path:["entity",t,n,r]})}deleteFile(t){return this.delete(["file",t])}}class cve extends H1{getDefaultOptions(){return{basepath:"/api/system"}}readConfig(){return this.get("config")}readSchema(t){return this.get("schema",{config:t!=null&&t.config?1:0,secrets:t!=null&&t.secrets?1:0,fresh:t!=null&&t.fresh?1:0})}setConfig(t,n,r){return this.post(["config","set",t].join("/")+`?force=${r?1:0}`,n)}addConfig(t,n,r){return this.post(["config","add",t,n],r)}patchConfig(t,n,r){return this.patch(["config","patch",t,n],r)}overwriteConfig(t,n,r){return this.put(["config","overwrite",t,n],r)}removeConfig(t,n){return this.delete(["config","remove",t,n])}}class rU{constructor(t={}){K(this,"token");K(this,"user");K(this,"verified",!1);K(this,"token_transport","header");K(this,"system");K(this,"data");K(this,"auth");K(this,"media");this.options=t,this.verified=t.verified===!0,"request"in t&&t.request?(this.options.host=t.host??new URL(t.request.url).origin,this.options.headers=t.headers??t.request.headers,this.extractToken()):"token"in t&&t.token?(this.token_transport="header",this.updateToken(t.token,{trigger:!1})):"user"in t&&t.user?(this.token_transport="none",this.user=t.user,this.verified=t.verified!==!1):this.extractToken(),this.buildApis()}get fetcher(){return this.options.fetcher??fetch}get baseUrl(){return this.options.host??"http://localhost"}get tokenKey(){return this.options.key??"auth"}extractToken(){var t;if(this.verified=!1,this.options.headers){const n=uve(this.options.headers.get("cookie"),"auth");if(n){this.token_transport="cookie",this.updateToken(n);return}const r=(t=this.options.headers.get("authorization"))==null?void 0:t.replace("Bearer ","");if(r){this.token_transport="header",this.updateToken(r);return}}else this.storage&&this.storage.getItem(this.tokenKey).then(n=>{this.token_transport="header",this.updateToken(n?String(n):void 0)})}get storage(){return this.options.storage?{getItem:async t=>await this.options.storage.getItem(t),setItem:async(t,n)=>await this.options.storage.setItem(t,n),removeItem:async t=>await this.options.storage.removeItem(t)}:null}updateToken(t,n){var r,s;if(this.token=t,this.verified=!1,t?this.user=Ms(f0e(t).payload,["iat","iss","exp"]):this.user=void 0,this.storage){const i=this.tokenKey;t?this.storage.setItem(i,t).then(()=>{var o,a;(a=(o=this.options).onAuthStateChange)==null||a.call(o,this.getAuthState())}):this.storage.removeItem(i).then(()=>{var o,a;(a=(o=this.options).onAuthStateChange)==null||a.call(o,this.getAuthState())})}else(n==null?void 0:n.trigger)!==!1&&((s=(r=this.options).onAuthStateChange)==null||s.call(r,this.getAuthState()));n!=null&&n.rebuild&&this.buildApis()}markAuthVerified(t){return this.verified=t,this}isAuthVerified(){return this.verified}getAuthState(){return{token:this.token,user:this.user,verified:this.verified}}isAuthenticated(){const{token:t,user:n}=this.getAuthState();return!!t&&!!n}async getVerifiedAuthState(){return await this.verifyAuth(),this.getAuthState()}async verifyAuth(){if(!this.token){this.markAuthVerified(!1);return}try{const{ok:t,data:n}=await this.auth.me(),r=n==null?void 0:n.user;if(!t||!r)throw new Error;this.user=r,this.markAuthVerified(!0)}catch{this.markAuthVerified(!1),this.updateToken(void 0)}}getUser(){return this.user||null}getParams(){return Object.freeze({host:this.baseUrl,token:this.token,headers:this.options.headers,token_transport:this.token_transport,verbose:this.options.verbose})}buildApis(){const t=this.getParams(),n=this.options.fetcher;this.system=new cve(t,n),this.data=new ave({...t,...this.options.data},n),this.auth=new ove({...t,credentials:this.options.storage?"omit":"include",...this.options.auth,onTokenUpdate:r=>{var s,i;this.updateToken(r,{rebuild:!0}),(i=(s=this.options.auth)==null?void 0:s.onTokenUpdate)==null||i.call(s,r)}},n),this.media=new lve({...t,...this.options.media},n)}}function uve(e,t){if(!e)return null;for(const n of e.split("; ")){const[r,s]=n.split("=");if(r===t&&s)return decodeURIComponent(s)}return null}const r$=w.createContext(void 0),dve=({children:e,host:t,baseUrl:n=t,...r})=>{const s=W1(),i=sU();let o=n??(i==null?void 0:i.baseUrl)??"",a;if(s&&(a=s.user),!o)try{o=window.location.origin}catch{}const c={user:a,...r,host:o},u=w.useMemo(()=>new rU({...c,verbose:qr(),onAuthStateChange:p=>{var y;(y=r.onAuthStateChange)==null||y.call(r,p),(!(f!=null&&f.token)||p.token!==(f==null?void 0:f.token))&&h(p)}}),[JSON.stringify(c)]),[f,h]=w.useState(c.user?u.getAuthState():void 0);return m.jsx(r$.Provider,{value:{baseUrl:u.baseUrl,api:u,authState:f},children:e})},Lo=e=>{const t=w.useContext(r$);return!(t!=null&&t.api)||e?new rU({host:""}):t.api},sU=()=>w.useContext(r$);function W1(){const e={logout_route:"/api/auth/logout",admin_basepath:""};return typeof window<"u"&&window.__BKND__?{...e,...window.__BKND__}:e}var HN={exports:{}},WN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI;function fve(){if(XI)return WN;XI=1;var e=Xh();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,p){var y=p(),v=r({inst:{value:y,getSnapshot:p}}),x=v[0].inst,S=v[1];return i(function(){x.value=y,x.getSnapshot=p,c(x)&&S({inst:x})},[h,y,p]),s(function(){return c(x)&&S({inst:x}),h(function(){c(x)&&S({inst:x})})},[h]),o(y),y}function c(h){var p=h.getSnapshot;h=h.value;try{var y=p();return!n(h,y)}catch{return!0}}function u(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return WN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,WN}var KI;function iU(){return KI||(KI=1,HN.exports=fve()),HN.exports}var s$=iU();const oU=0,aU=1,lU=2,QI=3;var ZI=Object.prototype.hasOwnProperty;function EO(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&EO(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ZI.call(e,n)&&++r&&!ZI.call(t,n)||!(n in t)||!EO(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const xo=new WeakMap,fc=()=>{},ir=fc(),NO=Object,bt=e=>e===ir,Di=e=>typeof e=="function",jc=(e,t)=>({...e,...t}),cU=e=>Di(e.then),GN={},Xb={},i$="undefined",Qy=typeof window!=i$,_O=typeof document!=i$,hve=Qy&&"Deno"in window,mve=()=>Qy&&typeof window.requestAnimationFrame!=i$,Hl=(e,t)=>{const n=xo.get(e);return[()=>!bt(t)&&e.get(t)||GN,r=>{if(!bt(t)){const s=e.get(t);t in Xb||(Xb[t]=s),n[5](t,jc(s,r),s||GN)}},n[6],()=>!bt(t)&&t in Xb?Xb[t]:!bt(t)&&e.get(t)||GN]};let CO=!0;const pve=()=>CO,[OO,jO]=Qy&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[fc,fc],gve=()=>{const e=_O&&document.visibilityState;return bt(e)||e!=="hidden"},yve=e=>(_O&&document.addEventListener("visibilitychange",e),OO("focus",e),()=>{_O&&document.removeEventListener("visibilitychange",e),jO("focus",e)}),bve=e=>{const t=()=>{CO=!0,e()},n=()=>{CO=!1};return OO("online",t),OO("offline",n),()=>{jO("online",t),jO("offline",n)}},vve={isOnline:pve,isVisible:gve},xve={initFocus:yve,initReconnect:bve},eP=!je.useId,Yg=!Qy||hve,wve=e=>mve()?window.requestAnimationFrame(e):setTimeout(e,1),zv=Yg?w.useEffect:w.useLayoutEffect,YN=typeof navigator<"u"&&navigator.connection,tP=!Yg&&YN&&(["slow-2g","2g"].includes(YN.effectiveType)||YN.saveData),Kb=new WeakMap,JN=(e,t)=>NO.prototype.toString.call(e)===`[object ${t}]`;let Sve=0;const AO=e=>{const t=typeof e,n=JN(e,"Date"),r=JN(e,"RegExp"),s=JN(e,"Object");let i,o;if(NO(e)===e&&!n&&!r){if(i=Kb.get(e),i)return i;if(i=++Sve+"~",Kb.set(e,i),Array.isArray(e)){for(i="@",o=0;o<e.length;o++)i+=AO(e[o])+",";Kb.set(e,i)}if(s){i="#";const a=NO.keys(e).sort();for(;!bt(o=a.pop());)bt(e[o])||(i+=o+":"+AO(e[o])+",");Kb.set(e,i)}}else i=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Jg=e=>{if(Di(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?AO(e):"",[e,t]};let Eve=0;const TO=()=>++Eve;async function uU(...e){const[t,n,r,s]=e,i=jc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof a=="function"?a(p):a!==!1,f=i.throwOnError;if(Di(n)){const p=n,y=[],v=t.keys();for(const x of v)!/^\$(inf|sub)\$/.test(x)&&p(t.get(x)._k)&&y.push(x);return Promise.all(y.map(h))}return h(n);async function h(p){const[y]=Jg(p);if(!y)return;const[v,x]=Hl(t,y),[S,N,_,C]=xo.get(t),j=()=>{const H=S[y];return(Di(i.revalidate)?i.revalidate(v().data,p):i.revalidate!==!1)&&(delete _[y],delete C[y],H&&H[0])?H[0](lU).then(()=>v().data):v().data};if(e.length<3)return j();let A=r,$;const k=TO();N[y]=[k,0];const R=!bt(c),F=v(),z=F.data,L=F._c,B=bt(L)?z:L;if(R&&(c=Di(c)?c(B,z):c,x({data:c,_c:B})),Di(A))try{A=A(B)}catch(H){$=H}if(A&&cU(A))if(A=await A.catch(H=>{$=H}),k!==N[y][0]){if($)throw $;return A}else $&&R&&u($)&&(o=!0,x({data:B,_c:ir}));if(o&&!$)if(Di(o)){const H=o(A,B);x({data:H,error:ir,_c:ir})}else x({data:A,error:ir,_c:ir});if(N[y][1]=TO(),Promise.resolve(j()).then(()=>{x({_c:ir})}),$){if(f)throw $;return}return A}}const nP=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Nve=(e,t)=>{if(!xo.has(e)){const n=jc(xve,t),r=Object.create(null),s=uU.bind(ir,e);let i=fc;const o=Object.create(null),a=(f,h)=>{const p=o[f]||[];return o[f]=p,p.push(h),()=>p.splice(p.indexOf(h),1)},c=(f,h,p)=>{e.set(f,h);const y=o[f];if(y)for(const v of y)v(h,p)},u=()=>{if(!xo.has(e)&&(xo.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Yg)){const f=n.initFocus(setTimeout.bind(ir,nP.bind(ir,r,oU))),h=n.initReconnect(setTimeout.bind(ir,nP.bind(ir,r,aU)));i=()=>{f&&f(),h&&h(),xo.delete(e)}}};return u(),[e,s,u,i]}return[e,xo.get(e)[4]]},_ve=(e,t,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!bt(i)&&o>i||setTimeout(r,a,s)},Cve=EO,[o$,a$]=Nve(new Map),Ove=jc({onLoadingSlow:fc,onSuccess:fc,onError:fc,onErrorRetry:_ve,onDiscarded:fc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:tP?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:tP?5e3:3e3,compare:Cve,isPaused:()=>!1,cache:o$,mutate:a$,fallback:{}},vve),jve=(e,t)=>{const n=jc(e,t);if(t){const{use:r,fallback:s}=e,{use:i,fallback:o}=t;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=jc(s,o))}return n},Ave=w.createContext({}),dU="$inf$",fU=Qy&&window.__SWR_DEVTOOLS_USE__,Tve=fU?window.__SWR_DEVTOOLS_USE__:[],$ve=()=>{fU&&(window.__SWR_DEVTOOLS_REACT__=je)},hU=e=>Di(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],mU=()=>jc(Ove,w.useContext(Ave)),Rve=e=>(t,n,r)=>e(t,n&&((...i)=>{const[o]=Jg(t),[,,,a]=xo.get(o$);if(o.startsWith(dU))return n(...i);const c=a[o];return bt(c)?n(...i):(delete a[o],c)}),r),kve=Tve.concat(Rve),Mve=e=>function(...n){const r=mU(),[s,i,o]=hU(n),a=jve(r,o);let c=e;const{use:u}=a,f=(u||[]).concat(kve);for(let h=f.length;h--;)c=f[h](c);return c(s,i||a.fetcher||null,a)},Ive=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},Pve=(e,t)=>(...n)=>{const[r,s,i]=hU(n),o=(i.use||[]).concat(t);return e(r,s,{...i,use:o})};$ve();const XN=je.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),KN={dedupe:!0},Dve=(e,t,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:f,refreshWhenOffline:h,keepPreviousData:p}=n,[y,v,x,S]=xo.get(r),[N,_]=Jg(e),C=w.useRef(!1),j=w.useRef(!1),A=w.useRef(N),$=w.useRef(t),k=w.useRef(n),R=()=>k.current,F=()=>R().isVisible()&&R().isOnline(),[z,L,B,H]=Hl(r,N),I=w.useRef({}).current,V=bt(o)?bt(n.fallback)?ir:n.fallback[N]:o,T=($e,Re)=>{for(const qe in I){const et=qe;if(et==="data"){if(!s($e[et],Re[et])&&(!bt($e[et])||!s(ae,Re[et])))return!1}else if(Re[et]!==$e[et])return!1}return!0},D=w.useMemo(()=>{const $e=!N||!t?!1:bt(a)?R().isPaused()||i?!1:c!==!1:a,Re=G=>{const re=jc(G);return delete re._k,$e?{isValidating:!0,isLoading:!0,...re}:re},qe=z(),et=H(),Ce=Re(qe),Me=qe===et?Ce:Re(et);let Ie=Ce;return[()=>{const G=Re(z());return T(G,Ie)?(Ie.data=G.data,Ie.isLoading=G.isLoading,Ie.isValidating=G.isValidating,Ie.error=G.error,Ie):(Ie=G,G)},()=>Me]},[r,N]),P=s$.useSyncExternalStore(w.useCallback($e=>B(N,(Re,qe)=>{T(qe,Re)||$e()}),[r,N]),D[0],D[1]),q=!C.current,M=y[N]&&y[N].length>0,W=P.data,X=bt(W)?V&&cU(V)?XN(V):V:W,Q=P.error,oe=w.useRef(X),ae=p?bt(W)?bt(oe.current)?X:oe.current:W:X,fe=M&&!bt(Q)?!1:q&&!bt(a)?a:R().isPaused()?!1:i?bt(X)?!1:c:bt(X)||c,le=!!(N&&t&&q&&fe),ue=bt(P.isValidating)?le:P.isValidating,ve=bt(P.isLoading)?le:P.isLoading,_e=w.useCallback(async $e=>{const Re=$.current;if(!N||!Re||j.current||R().isPaused())return!1;let qe,et,Ce=!0;const Me=$e||{},Ie=!x[N]||!Me.dedupe,G=()=>eP?!j.current&&N===A.current&&C.current:N===A.current,re={isValidating:!1,isLoading:!1},te=()=>{L(re)},he=()=>{const ne=x[N];ne&&ne[1]===et&&delete x[N]},se={isValidating:!0};bt(z().data)&&(se.isLoading=!0);try{if(Ie&&(L(se),n.loadingTimeout&&bt(z().data)&&setTimeout(()=>{Ce&&G()&&R().onLoadingSlow(N,n)},n.loadingTimeout),x[N]=[Re(_),TO()]),[qe,et]=x[N],qe=await qe,Ie&&setTimeout(he,n.dedupingInterval),!x[N]||x[N][1]!==et)return Ie&&G()&&R().onDiscarded(N),!1;re.error=ir;const ne=v[N];if(!bt(ne)&&(et<=ne[0]||et<=ne[1]||ne[1]===0))return te(),Ie&&G()&&R().onDiscarded(N),!1;const ce=z().data;re.data=s(ce,qe)?ce:qe,Ie&&G()&&R().onSuccess(qe,N,n)}catch(ne){he();const ce=R(),{shouldRetryOnError:xe}=ce;ce.isPaused()||(re.error=ne,Ie&&G()&&(ce.onError(ne,N,ce),(xe===!0||Di(xe)&&xe(ne))&&(!R().revalidateOnFocus||!R().revalidateOnReconnect||F())&&ce.onErrorRetry(ne,N,ce,Ee=>{const We=y[N];We&&We[0]&&We[0](QI,Ee)},{retryCount:(Me.retryCount||0)+1,dedupe:!0})))}return Ce=!1,te(),!0},[N,r]),ke=w.useCallback((...$e)=>uU(r,A.current,...$e),[]);if(zv(()=>{$.current=t,k.current=n,bt(W)||(oe.current=W)}),zv(()=>{if(!N)return;const $e=_e.bind(ir,KN);let Re=0;R().revalidateOnFocus&&(Re=Date.now()+R().focusThrottleInterval);const et=Ive(N,y,(Ce,Me={})=>{if(Ce==oU){const Ie=Date.now();R().revalidateOnFocus&&Ie>Re&&F()&&(Re=Ie+R().focusThrottleInterval,$e())}else if(Ce==aU)R().revalidateOnReconnect&&F()&&$e();else{if(Ce==lU)return _e();if(Ce==QI)return _e(Me)}});return j.current=!1,A.current=N,C.current=!0,L({_k:_}),fe&&(bt(X)||Yg?$e():wve($e)),()=>{j.current=!0,et()}},[N]),zv(()=>{let $e;function Re(){const et=Di(u)?u(z().data):u;et&&$e!==-1&&($e=setTimeout(qe,et))}function qe(){!z().error&&(f||R().isVisible())&&(h||R().isOnline())?_e(KN).then(Re):Re()}return Re(),()=>{$e&&(clearTimeout($e),$e=-1)}},[u,f,h,N]),w.useDebugValue(ae),i&&bt(X)&&N){if(!eP&&Yg)throw new Error("Fallback data is required when using Suspense in SSR.");$.current=t,k.current=n,j.current=!1;const $e=S[N];if(!bt($e)){const Re=ke($e);XN(Re)}if(bt(Q)){const Re=_e(KN);bt(ae)||(Re.status="fulfilled",Re.value=!0),XN(Re)}else throw Q}return{mutate:ke,get data(){return I.data=!0,ae},get error(){return I.error=!0,Q},get isValidating(){return I.isValidating=!0,ue},get isLoading(){return I.isLoading=!0,ve}}},l$=Mve(Dve),Lve=()=>{},Fve=Lve(),$O=Object,rP=e=>e===Fve,Bve=e=>typeof e=="function",Qb=new WeakMap,QN=(e,t)=>$O.prototype.toString.call(e)===`[object ${t}]`;let zve=0;const RO=e=>{const t=typeof e,n=QN(e,"Date"),r=QN(e,"RegExp"),s=QN(e,"Object");let i,o;if($O(e)===e&&!n&&!r){if(i=Qb.get(e),i)return i;if(i=++zve+"~",Qb.set(e,i),Array.isArray(e)){for(i="@",o=0;o<e.length;o++)i+=RO(e[o])+",";Qb.set(e,i)}if(s){i="#";const a=$O.keys(e).sort();for(;!rP(o=a.pop());)rP(e[o])||(i+=o+":"+RO(e[o])+",");Qb.set(e,i)}}else i=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Vve=e=>{if(Bve(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?RO(e):"",[e,t]},Uve=e=>Vve(e?e(0,null):null)[0],ZN=Promise.resolve(),qve=e=>(t,n,r)=>{const s=w.useRef(!1),{cache:i,initialSize:o=1,revalidateAll:a=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:f=!1,parallel:h=!1}=r,[,,,p]=xo.get(o$);let y;try{y=Uve(t),y&&(y=dU+y)}catch{}const[v,x,S]=Hl(i,y),N=w.useCallback(()=>bt(v()._l)?o:v()._l,[i,y,o]);s$.useSyncExternalStore(w.useCallback(R=>y?S(y,()=>{R()}):()=>{},[i,y]),N,N);const _=w.useCallback(()=>{const R=v()._l;return bt(R)?o:R},[y,o]),C=w.useRef(_());zv(()=>{if(!s.current){s.current=!0;return}y&&x({_l:c?C.current:_()})},[y,i]);const j=f&&!s.current,A=e(y,async R=>{const F=v()._i,z=v()._r;x({_r:ir});const L=[],B=_(),[H]=Hl(i,R),I=H().data,V=[];let T=null;for(let D=0;D<B;++D){const[P,q]=Jg(t(D,h?null:T));if(!P)break;const[M,W]=Hl(i,P);let X=M().data;const Q=a||F||bt(X)||u&&!D&&!bt(I)||j||I&&!bt(I[D])&&!r.compare(I[D],X);if(n&&(typeof z=="function"?z(X,q):Q)){const oe=async()=>{if(!(P in p))X=await n(q);else{const fe=p[P];delete p[P],X=await fe}W({data:X,_k:q}),L[D]=X};h?V.push(oe):await oe()}else L[D]=X;h||(T=X)}return h&&await Promise.all(V.map(D=>D())),x({_i:ir}),L},r),$=w.useCallback(function(R,F){const z=typeof F=="boolean"?{revalidate:F}:F||{},L=z.revalidate!==!1;return y?(L&&(bt(R)?x({_i:!0,_r:z.revalidate}):x({_i:!1,_r:z.revalidate})),arguments.length?A.mutate(R,{...z,revalidate:L}):A.mutate()):ZN},[y,i]),k=w.useCallback(R=>{if(!y)return ZN;const[,F]=Hl(i,y);let z;if(Di(R)?z=R(_()):typeof R=="number"&&(z=R),typeof z!="number")return ZN;F({_l:z}),C.current=z;const L=[],[B]=Hl(i,y);let H=null;for(let I=0;I<z;++I){const[V]=Jg(t(I,H)),[T]=Hl(i,V),D=V?T().data:ir;if(bt(D))return $(B().data);L.push(D),H=D}return $(L)},[y,i,$,_]);return{size:_(),setSize:k,mutate:$,get data(){return A.data},get error(){return A.error},get isValidating(){return A.isValidating},get isLoading(){return A.isLoading}}},Hve=Pve(l$,qve),G1=(e,t)=>{const n=Lo(),r=e(n),s=(t==null?void 0:t.refine)??(c=>c),i=()=>r.execute().then(s),o=r.key();return{...l$((t==null?void 0:t.enabled)===!1?null:o,i,t),promise:r,key:o,api:n}},Wve=(e,t)=>{const[n,r]=w.useState(!1),s=Lo(),i=u=>e(s,u),o=(t==null?void 0:t.refine)??(u=>u),a=Hve((u,f)=>f&&!f.length?(r(!0),null):i(u).request.url,u=>new Mx(new Request(u),{fetcher:s.fetcher},o).execute(),{revalidateFirstPage:!1}),c=a.data?[].concat(...a.data):[];return{...a,_data:a.data,data:c,endReached:n,promise:i(a.size),key:i(a.size).key(),api:s}},c$=e=>{const t=mU().mutate,n=Lo();return async r=>{let s="";return typeof r=="string"?s=r:typeof r=="function"&&(s=r(n).key()),t(i=>typeof i=="string"&&i.startsWith(s))}};class Zb extends Error{constructor(t,n){let r=n;"error"in t&&(r=t.error,n&&(r=`${n}: ${r}`)),super(r??"UseEntityApiError"),this.response=t}}const Gve=(e,t)=>{const n=Lo().data;return{create:async r=>{const s=await n.createOne(e,r);if(!s.ok)throw new Zb(s,`Failed to create entity "${e}"`);return s},read:async r=>{const s=t?await n.readOne(e,t,r):await n.readMany(e,r);if(!s.ok)throw new Zb(s,`Failed to read entity "${e}"`);return s},update:async(r,s=t)=>{if(!s)throw new Error("id is required");const i=await n.updateOne(e,s,r);if(!i.ok)throw new Zb(i,`Failed to update entity "${e}"`);return i},_delete:async(r=t)=>{if(!r)throw new Error("id is required");const s=await n.deleteOne(e,r);if(!s.ok)throw new Zb(s,`Failed to delete entity "${e}"`);return s}}};function kO(e,t,n,r){var s,i;return"/"+[...((i=(s=e.options)==null?void 0:s.basepath)==null?void 0:i.split("/"))??[],t,...n?[n]:[]].filter(Boolean).join("/")+(r?"?"+y1(r):"")}const Y1=(e,t,n,r)=>{const s=Lo().data,i=kO(s,e,t,n),{read:o,...a}=Gve(e,t),c=()=>o(n??{}),u=l$((r==null?void 0:r.enabled)===!1?null:i,c,{revalidateOnFocus:!1,keepPreviousData:!0,...r}),f=async p=>{const y=kO(s,e,p);return a$(v=>typeof v=="string"&&v.startsWith(y),void 0,{revalidate:!0})},h=p1(a,p=>async(...y)=>{const v=await p(...y);return(r==null?void 0:r.revalidateOnMutate)!==!1&&await f(),v});return{...u,...h,mutate:f,mutateRaw:u.mutate,api:s,key:i}};async function Yve(e,t,n,r){function s(o,a){return typeof o<"u"&&typeof a<"u"&&"id"in o&&o.id===n?{...o,...a}:o}const i=kO(e,t);return a$(o=>typeof o=="string"&&o.startsWith(i),async o=>{if(!(typeof o>"u"))return Array.isArray(o)?o.map(a=>s(a,r)):s(o,r)},{revalidate:!1})}const Jve=(e,t,n)=>{const{data:r,...s}=Y1(e,t,void 0,{...n,enabled:!1});return{...s,mutate:(o,a)=>Yve(s.api,e,o,a)}},pU=e=>{const t=Lo(e==null?void 0:e.baseUrl),n=c$(),{authState:r}=sU(),s=(r==null?void 0:r.verified)??!1;async function i(f){return(await t.auth.login("password",f)).data}async function o(f){return(await t.auth.register("password",f)).data}function a(f){t.updateToken(f)}async function c(){t.updateToken(void 0),n()}async function u(){await t.verifyAuth()}return{data:r,user:r==null?void 0:r.user,token:r==null?void 0:r.token,verified:s,login:i,register:o,logout:c,setToken:a,verify:u}};function Xve({api:e,setSchema:t,reloadSchema:n}){async function r(s,i,o,a){const c={id:"schema-"+[s,i,a].join("-"),position:"top-right",autoClose:3e3};return o.success?(console.log("update config",s,i,a,o.body),o.body.success&&t(u=>u&&{...u,config:{...u.config,[i]:o.config}}),wc.show({...c,title:`Config updated: ${li(i)}`,color:"blue",message:`Operation ${s.toUpperCase()} at ${i}${a?"."+a:""}`})):wc.show({...c,title:`Config Update failed: ${li(i)}${a?"."+a:""}`,color:"red",withCloseButton:!0,autoClose:!1,message:o.error??"Failed to complete config update"}),o.success}return{reload:n,set:async(s,i,o)=>{const a=await e.system.setConfig(s,i,o);return await r("set",s,a)},patch:async(s,i,o)=>{const a=await e.system.patchConfig(s,i,o);return await r("patch",s,a,i)},overwrite:async(s,i,o)=>{const a=await e.system.overwriteConfig(s,i,o);return await r("overwrite",s,a,i)},add:async(s,i,o)=>{const a=await e.system.addConfig(s,i,o);return await r("add",s,a,i)},remove:async(s,i)=>{const o=await e.system.removeConfig(s,i);return await r("remove",s,o,i)}}}class Kve{constructor(t,n={}){K(this,"_entities",[]);K(this,"_relations",[]);K(this,"_flows",[]);this.appJson=t,this._options=n,this._entities=Object.entries(this.appJson.data.entities??{}).map(([r,s])=>JT(r,s)),this._relations=Object.entries(this.appJson.data.relations??{}).map(([,r])=>PV(r,this.entity.bind(this)));for(const[r,s]of Object.entries(this.appJson.flows.flows??{})){const i=Ky.fromObject(r,s,VV);this._flows.push(i)}}get entities(){return this._entities}entity(t){const n=typeof t=="string"?t:t.name,r=this._entities.find(s=>s.name===n);if(!r)throw new Error(`Entity "${n}" not found`);return r}get relations(){return new jB(this._relations)}get flows(){return this._flows}get config(){return this.appJson}get options(){return{basepath:"",logo_return_path:"/",...this._options}}getSettingsPath(t=[]){return[`~/${this.options.basepath}/settings`.replace(/\/+/g,"/"),...t].join("/")}getAbsolutePath(t){const{basepath:n}=this.options;return(t?`~/${n}/${t}`:`~/${n}`).replace(/\/+/g,"/")}getAuthConfig(){return this.appJson.auth}}/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qve={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=(e,t,n,r)=>{const s=w.forwardRef(({color:i="currentColor",size:o=24,stroke:a=2,title:c,className:u,children:f,...h},p)=>w.createElement("svg",{ref:p,...Qve[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:i}:{strokeWidth:a,stroke:i},...h},[c&&w.createElement("title",{key:"svg-title"},c),...r.map(([y,v])=>w.createElement(y,v)),...Array.isArray(f)?f:[f]]));return s.displayName=`${n}`,s};/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u$=Lt("outline","align-justified","IconAlignJustified",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l12 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zve=Lt("outline","api","IconApi",[["path",{d:"M4 13h5",key:"svg-0"}],["path",{d:"M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3",key:"svg-1"}],["path",{d:"M20 8v8",key:"svg-2"}],["path",{d:"M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var exe=Lt("outline","bolt","IconBolt",[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var txe=Lt("outline","book","IconBook",[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nxe=Lt("outline","box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rxe=Lt("outline","brand-aws","IconBrandAws",[["path",{d:"M17 18.5a15.198 15.198 0 0 1 -7.37 1.44a14.62 14.62 0 0 1 -6.63 -2.94",key:"svg-0"}],["path",{d:"M19.5 21c.907 -1.411 1.451 -3.323 1.5 -5c-1.197 -.773 -2.577 -.935 -4 -1",key:"svg-1"}],["path",{d:"M3 11v-4.5a1.5 1.5 0 0 1 3 0v4.5",key:"svg-2"}],["path",{d:"M3 9h3",key:"svg-3"}],["path",{d:"M9 5l1.2 6l1.8 -4l1.8 4l1.2 -6",key:"svg-4"}],["path",{d:"M18 10.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sxe=Lt("outline","brand-cloudflare","IconBrandCloudflare",[["path",{d:"M13.031 7.007c2.469 -.007 3.295 1.293 3.969 2.993c4 0 4.994 3.825 5 6h-20c-.001 -1.64 1.36 -2.954 3 -3c0 -1.5 1 -3 3 -3c.66 -1.942 2.562 -2.986 5.031 -2.993z",key:"svg-0"}],["path",{d:"M12 13h6",key:"svg-1"}],["path",{d:"M17 10l-2.5 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gU=Lt("outline","bug","IconBug",[["path",{d:"M9 9v-1a3 3 0 0 1 6 0v1",key:"svg-0"}],["path",{d:"M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3",key:"svg-1"}],["path",{d:"M3 13l4 0",key:"svg-2"}],["path",{d:"M17 13l4 0",key:"svg-3"}],["path",{d:"M12 20l0 -6",key:"svg-4"}],["path",{d:"M4 19l3.35 -2",key:"svg-5"}],["path",{d:"M20 19l-3.35 -2",key:"svg-6"}],["path",{d:"M4 7l3.75 2.4",key:"svg-7"}],["path",{d:"M20 7l-3.75 2.4",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ixe=Lt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oxe=Lt("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d$=Lt("outline","circles-relation","IconCirclesRelation",[["path",{d:"M9.183 6.117a6 6 0 1 0 4.511 3.986",key:"svg-0"}],["path",{d:"M14.813 17.883a6 6 0 1 0 -4.496 -3.954",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var axe=Lt("outline","cloud","IconCloud",[["path",{d:"M6.657 18c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var od=Lt("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lxe=Lt("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cxe=Lt("outline","grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uxe=Lt("outline","hierarchy-2","IconHierarchy2",[["path",{d:"M10 3h4v4h-4z",key:"svg-0"}],["path",{d:"M3 17h4v4h-4z",key:"svg-1"}],["path",{d:"M17 17h4v4h-4z",key:"svg-2"}],["path",{d:"M7 17l5 -4l5 4",key:"svg-3"}],["path",{d:"M12 7l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dxe=Lt("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fxe=Lt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hxe=Lt("outline","key-off","IconKeyOff",[["path",{d:"M10.17 6.159l2.316 -2.316a2.877 2.877 0 0 1 4.069 0l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.33 2.33",key:"svg-0"}],["path",{d:"M14.931 14.948a2.863 2.863 0 0 1 -1.486 -.79l-.301 -.302l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.863 2.863 0 0 1 -.794 -1.504",key:"svg-1"}],["path",{d:"M15 9h.01",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mxe=Lt("outline","library-plus","IconLibraryPlus",[["path",{d:"M7 3m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 7.26a2.005 2.005 0 0 0 -1.012 1.737v10c0 1.1 .9 2 2 2h10c.75 0 1.158 -.385 1.5 -1",key:"svg-1"}],["path",{d:"M11 10h6",key:"svg-2"}],["path",{d:"M14 7v6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pxe=Lt("outline","lock-access-off","IconLockAccessOff",[["path",{d:"M4 8v-2c0 -.554 .225 -1.055 .588 -1.417",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2c.55 0 1.05 -.222 1.41 -.582",key:"svg-3"}],["path",{d:"M15 11a1 1 0 0 1 1 1m-.29 3.704a1 1 0 0 1 -.71 .296h-6a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h2",key:"svg-4"}],["path",{d:"M10 11v-1m1.182 -2.826a2 2 0 0 1 2.818 1.826v1",key:"svg-5"}],["path",{d:"M3 3l18 18",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gxe=Lt("outline","minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yU=Lt("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f$=Lt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yxe=Lt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bxe=Lt("outline","server","IconServer",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xg=Lt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vxe=Lt("outline","switch-horizontal","IconSwitchHorizontal",[["path",{d:"M16 3l4 4l-4 4",key:"svg-0"}],["path",{d:"M10 7l10 0",key:"svg-1"}],["path",{d:"M8 13l-4 4l4 4",key:"svg-2"}],["path",{d:"M4 17l9 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bU=Lt("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xxe=Lt("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vU=Lt("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wxe=Lt("filled","bolt-filled","IconBoltFilled",[["path",{d:"M13 2l.018 .001l.016 .001l.083 .005l.011 .002h.011l.038 .009l.052 .008l.016 .006l.011 .001l.029 .011l.052 .014l.019 .009l.015 .004l.028 .014l.04 .017l.021 .012l.022 .01l.023 .015l.031 .017l.034 .024l.018 .011l.013 .012l.024 .017l.038 .034l.022 .017l.008 .01l.014 .012l.036 .041l.026 .027l.006 .009c.12 .147 .196 .322 .218 .513l.001 .012l.002 .041l.004 .064v6h5a1 1 0 0 1 .868 1.497l-.06 .091l-8 11c-.568 .783 -1.808 .38 -1.808 -.588v-6h-5a1 1 0 0 1 -.868 -1.497l.06 -.091l8 -11l.01 -.013l.018 -.024l.033 -.038l.018 -.022l.009 -.008l.013 -.014l.04 -.036l.028 -.026l.008 -.006a1 1 0 0 1 .402 -.199l.011 -.001l.027 -.005l.074 -.013l.011 -.001l.041 -.002z",key:"svg-0"}]]);const h$="-",Sxe=e=>{const t=Nxe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const a=o.split(h$);return a[0]===""&&a.length!==1&&a.shift(),xU(a,t)||Exe(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},xU=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?xU(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(h$);return(o=t.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},sP=/^\[(.+)\]$/,Exe=e=>{if(sP.test(e)){const t=sP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Nxe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)MO(n[s],r,s,t);return r},MO=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:iP(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(_xe(s)){MO(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{MO(o,iP(t,i),n,r)})})},iP=(e,t)=>{let n=e;return t.split(h$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_xe=e=>e.isThemeGetter,Cxe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},IO="!",PO=":",Oxe=PO.length,jxe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let o=0,a=0,c=0,u;for(let v=0;v<s.length;v++){let x=s[v];if(o===0&&a===0){if(x===PO){i.push(s.slice(c,v)),c=v+Oxe;continue}if(x==="/"){u=v;continue}}x==="["?o++:x==="]"?o--:x==="("?a++:x===")"&&a--}const f=i.length===0?s:s.substring(c),h=Axe(f),p=h!==f,y=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const s=t+PO,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},Axe=e=>e.endsWith(IO)?e.substring(0,e.length-1):e.startsWith(IO)?e.substring(1):e,Txe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},$xe=e=>({cache:Cxe(e.cacheSize),parseClassName:jxe(e),sortModifiers:Txe(e),...Sxe(e)}),Rxe=/\s+/,kxe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],a=e.trim().split(Rxe);let c="";for(let u=a.length-1;u>=0;u-=1){const f=a[u],{isExternal:h,modifiers:p,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:x}=n(f);if(h){c=f+(c.length>0?" "+c:c);continue}let S=!!x,N=r(S?v.substring(0,x):v);if(!N){if(!S){c=f+(c.length>0?" "+c:c);continue}if(N=r(v),!N){c=f+(c.length>0?" "+c:c);continue}S=!1}const _=i(p).join(":"),C=y?_+IO:_,j=C+N;if(o.includes(j))continue;o.push(j);const A=s(N,S);for(let $=0;$<A.length;++$){const k=A[$];o.push(C+k)}c=f+(c.length>0?" "+c:c)}return c};function Mxe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wU(t))&&(r&&(r+=" "),r+=n);return r}const wU=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=wU(e[r]))&&(n&&(n+=" "),n+=t);return n};function Ixe(e,...t){let n,r,s,i=o;function o(c){const u=t.reduce((f,h)=>h(f),e());return n=$xe(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const f=kxe(c,n);return s(c,f),f}return function(){return i(Mxe.apply(null,arguments))}}const Gn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},SU=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EU=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Pxe=/^\d+\/\d+$/,Dxe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lxe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fxe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Bxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Of=e=>Pxe.test(e),Et=e=>!!e&&!Number.isNaN(Number(e)),Il=e=>!!e&&Number.isInteger(Number(e)),e_=e=>e.endsWith("%")&&Et(e.slice(0,-1)),oa=e=>Dxe.test(e),Vxe=()=>!0,Uxe=e=>Lxe.test(e)&&!Fxe.test(e),NU=()=>!1,qxe=e=>Bxe.test(e),Hxe=e=>zxe.test(e),Wxe=e=>!Xe(e)&&!Ke(e),Gxe=e=>pm(e,OU,NU),Xe=e=>SU.test(e),fu=e=>pm(e,jU,Uxe),t_=e=>pm(e,Qxe,Et),oP=e=>pm(e,_U,NU),Yxe=e=>pm(e,CU,Hxe),ev=e=>pm(e,AU,qxe),Ke=e=>EU.test(e),Ip=e=>gm(e,jU),Jxe=e=>gm(e,Zxe),aP=e=>gm(e,_U),Xxe=e=>gm(e,OU),Kxe=e=>gm(e,CU),tv=e=>gm(e,AU,!0),pm=(e,t,n)=>{const r=SU.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},gm=(e,t,n=!1)=>{const r=EU.exec(e);return r?r[1]?t(r[1]):n:!1},_U=e=>e==="position"||e==="percentage",CU=e=>e==="image"||e==="url",OU=e=>e==="length"||e==="size"||e==="bg-size",jU=e=>e==="length",Qxe=e=>e==="number",Zxe=e=>e==="family-name",AU=e=>e==="shadow",ewe=()=>{const e=Gn("color"),t=Gn("font"),n=Gn("text"),r=Gn("font-weight"),s=Gn("tracking"),i=Gn("leading"),o=Gn("breakpoint"),a=Gn("container"),c=Gn("spacing"),u=Gn("radius"),f=Gn("shadow"),h=Gn("inset-shadow"),p=Gn("text-shadow"),y=Gn("drop-shadow"),v=Gn("blur"),x=Gn("perspective"),S=Gn("aspect"),N=Gn("ease"),_=Gn("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...j(),Ke,Xe],$=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],R=()=>[Ke,Xe,c],F=()=>[Of,"full","auto",...R()],z=()=>[Il,"none","subgrid",Ke,Xe],L=()=>["auto",{span:["full",Il,Ke,Xe]},Il,Ke,Xe],B=()=>[Il,"auto",Ke,Xe],H=()=>["auto","min","max","fr",Ke,Xe],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],V=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...R()],D=()=>[Of,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],P=()=>[e,Ke,Xe],q=()=>[...j(),aP,oP,{position:[Ke,Xe]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",Xxe,Gxe,{size:[Ke,Xe]}],X=()=>[e_,Ip,fu],Q=()=>["","none","full",u,Ke,Xe],oe=()=>["",Et,Ip,fu],ae=()=>["solid","dashed","dotted","double"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[Et,e_,aP,oP],ue=()=>["","none",v,Ke,Xe],ve=()=>["none",Et,Ke,Xe],_e=()=>["none",Et,Ke,Xe],ke=()=>[Et,Ke,Xe],Oe=()=>[Of,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[oa],breakpoint:[oa],color:[Vxe],container:[oa],"drop-shadow":[oa],ease:["in","out","in-out"],font:[Wxe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[oa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[oa],shadow:[oa],spacing:["px",Et],text:[oa],"text-shadow":[oa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Of,Xe,Ke,S]}],container:["container"],columns:[{columns:[Et,Xe,Ke,a]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Il,"auto",Ke,Xe]}],basis:[{basis:[Of,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Et,Of,"auto","initial","none",Xe]}],grow:[{grow:["",Et,Ke,Xe]}],shrink:[{shrink:["",Et,Ke,Xe]}],order:[{order:[Il,"first","last","none",Ke,Xe]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...V(),"normal"]}],"justify-self":[{"justify-self":["auto",...V()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...V(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...V(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...V(),"baseline"]}],"place-self":[{"place-self":["auto",...V()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[a,"screen",...D()]}],"min-w":[{"min-w":[a,"screen","none",...D()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,Ip,fu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ke,t_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e_,Xe]}],"font-family":[{font:[Jxe,Xe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ke,Xe]}],"line-clamp":[{"line-clamp":[Et,"none",Ke,t_]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",Ke,Xe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ke,Xe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Et,"from-font","auto",Ke,fu]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[Et,"auto",Ke,Xe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke,Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke,Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Il,Ke,Xe],radial:["",Ke,Xe],conic:[Il,Ke,Xe]},Kxe,Yxe]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Et,Ke,Xe]}],"outline-w":[{outline:["",Et,Ip,fu]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",f,tv,ev]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,tv,ev]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[Et,fu]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",p,tv,ev]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[Et,Ke,Xe]}],"mix-blend":[{"mix-blend":[...fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Et]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[Ke,Xe]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Et]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ke,Xe]}],filter:[{filter:["","none",Ke,Xe]}],blur:[{blur:ue()}],brightness:[{brightness:[Et,Ke,Xe]}],contrast:[{contrast:[Et,Ke,Xe]}],"drop-shadow":[{"drop-shadow":["","none",y,tv,ev]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",Et,Ke,Xe]}],"hue-rotate":[{"hue-rotate":[Et,Ke,Xe]}],invert:[{invert:["",Et,Ke,Xe]}],saturate:[{saturate:[Et,Ke,Xe]}],sepia:[{sepia:["",Et,Ke,Xe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ke,Xe]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[Et,Ke,Xe]}],"backdrop-contrast":[{"backdrop-contrast":[Et,Ke,Xe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Et,Ke,Xe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Et,Ke,Xe]}],"backdrop-invert":[{"backdrop-invert":["",Et,Ke,Xe]}],"backdrop-opacity":[{"backdrop-opacity":[Et,Ke,Xe]}],"backdrop-saturate":[{"backdrop-saturate":[Et,Ke,Xe]}],"backdrop-sepia":[{"backdrop-sepia":["",Et,Ke,Xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ke,Xe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Et,"initial",Ke,Xe]}],ease:[{ease:["linear","initial",N,Ke,Xe]}],delay:[{delay:[Et,Ke,Xe]}],animate:[{animate:["none",_,Ke,Xe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Ke,Xe]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:_e()}],"scale-x":[{"scale-x":_e()}],"scale-y":[{"scale-y":_e()}],"scale-z":[{"scale-z":_e()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[Ke,Xe,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Oe()}],"translate-x":[{"translate-x":Oe()}],"translate-y":[{"translate-y":Oe()}],"translate-z":[{"translate-z":Oe()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke,Xe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke,Xe]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[Et,Ip,fu,t_]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ue=Ixe(ewe);function twe(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,i,o=[],a="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}const nwe=D8.useInsertionEffect,rwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",swe=rwe?w.useLayoutEffect:w.useEffect,iwe=nwe||swe,TU=e=>{const t=w.useRef([e,(...n)=>t[0](...n)]).current;return iwe(()=>{t[0]=e}),t[1]},owe="popstate",m$="pushState",p$="replaceState",awe="hashchange",lP=[owe,m$,p$,awe],lwe=e=>{for(const t of lP)addEventListener(t,e);return()=>{for(const t of lP)removeEventListener(t,e)}},$U=(e,t)=>s$.useSyncExternalStore(lwe,e,t),cwe=()=>location.search,uwe=({ssrSearch:e=""}={})=>$U(cwe,()=>e),cP=()=>location.pathname,dwe=({ssrPath:e}={})=>$U(cP,e?()=>e:cP),fwe=(e,{replace:t=!1,state:n=null}={})=>history[t?p$:m$](n,"",e),hwe=(e={})=>[dwe(e),fwe],uP=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[uP]>"u"){for(const e of[m$,p$]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,uP,{value:!0})}const mwe=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",RU=(e="")=>e==="/"?"":e,pwe=(e,t)=>e[0]==="~"?e.slice(1):RU(t)+e,gwe=(e="",t)=>mwe(DO(RU(e)),DO(t)),ywe=e=>e[0]==="?"?e.slice(1):e,DO=e=>{try{return decodeURI(e)}catch{return e}},bwe=e=>DO(ywe(e)),kU={hook:hwe,searchHook:uwe,parser:twe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},MU=w.createContext(kU),Lc=()=>w.useContext(MU),IU={},PU=w.createContext(IU),g$=()=>w.useContext(PU),J1=e=>{const[t,n]=e.hook(e);return[gwe(e.base,t),TU((r,s)=>n(pwe(r,e.base),s))]},bi=()=>J1(Lc()),vwe=()=>{const e=Lc();return bwe(e.searchHook(e))},DU=(e,t,n,r)=>{const{pattern:s,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),o=s.exec(n)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((h,p)=>[h,c[p]])):o.groups;let f={...c};return u&&Object.assign(f,u),f})(),...r?[a]:[]]:[!1,null]},LU=({children:e,...t})=>{var f,h;const n=Lc(),r=t.hook?kU:n;let s=r;const[i,o]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let a=w.useRef({}),c=a.current,u=c;for(let p in r){const y=p==="base"?r[p]+(t[p]||""):t[p]||r[p];c===u&&y!==u[p]&&(a.current=u={...u}),u[p]=y,y!==r[p]&&(s=u)}return w.createElement(MU.Provider,{value:s,children:e})},dP=({children:e,component:t},n)=>t?w.createElement(t,{params:n}):typeof e=="function"?e(n):e,xwe=e=>{let t=w.useRef(IU);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,s])=>s!==n[r])?e:n},at=({path:e,nest:t,match:n,...r})=>{const s=Lc(),[i]=J1(s),[o,a,c]=n??DU(s.parser,e,i,t),u=xwe({...g$(),...a});if(!o)return null;const f=c?w.createElement(LU,{base:c},dP(r,u)):dP(r,u);return w.createElement(PU.Provider,{value:u,children:f})},X1=w.forwardRef((e,t)=>{const n=Lc(),[r,s]=J1(n),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:f,replace:h,state:p,...y}=e,v=TU(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(a==null||a(S),S.defaultPrevented||(S.preventDefault(),s(o,e)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&w.isValidElement(u)?w.cloneElement(u,{onClick:v,href:x}):w.createElement("a",{...y,onClick:v,href:x,className:f!=null&&f.call?f(r===o):f,children:u,ref:t})}),FU=e=>Array.isArray(e)?e.flatMap(t=>FU(t&&t.type===w.Fragment?t.props.children:t)):[e],qa=({children:e,location:t})=>{const n=Lc(),[r]=J1(n);for(const s of FU(e)){let i=0;if(w.isValidElement(s)&&(i=DU(n.parser,s.props.path,t||r,s.props.nest))[0])return w.cloneElement(s,{match:i})}return null},Dt=e=>(qr(),e),wwe=(e="",t="")=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",BU=(e,t="")=>e[0]==="~"?e.slice(1):t+e,Swe=e=>{try{return decodeURI(e)}catch{return e}},Ewe=e=>{const[t,n]=e.hook(e);return[Swe(wwe(e.base,t)),Dt((r,s)=>n(BU(r,e.base),s))]};function Nwe(e,t){const n=window.location.pathname;return n===e||n.endsWith(e)||n.includes(e+"/")}function In({className:e,native:t,onClick:n,...r}){const s=Lc(),[i,o]=Ewe(s);function a(y,v){if(y.startsWith(v)){const x=y.replace(v,"");return x.length===0||x[0]==="/"}return!1}const c=r.href??r.to,u=s.hrefs(c[0]==="~"?c.slice(1):s.base+c,s).replace("//","/"),f=BU(i,s.base).replace("//","/"),h=u.replace(s.base,"").length<=1?u===f:a(f,u);if(t)return m.jsx("a",{className:`${h?"active ":""}${e}`,...r});const p=y=>{n==null||n(y)};return m.jsx(X1,{className:`${h?"active ":""}${e}`,...r,onClick:p})}const _we={small:"px-2 py-1.5 rounded-md gap-1 text-sm",default:"px-3 py-2.5 rounded-md gap-1.5",large:"px-4 py-3 rounded-md gap-2.5 text-lg"},Cwe={small:12,default:16,large:20},Owe={default:"bg-primary/5 hover:bg-primary/10 link text-primary/70",primary:"bg-primary hover:bg-primary/80 link text-background",ghost:"bg-transparent hover:bg-primary/5 link text-primary/70",outline:"border border-primary/20 bg-transparent hover:bg-primary/5 link text-primary/80",red:"dark:bg-red-950 dark:hover:bg-red-900 bg-red-100 hover:bg-red-200 link text-primary/70",subtlered:"dark:text-red-700 text-red-700 dark:hover:bg-red-900 dark:hover:text-red-200 bg-transparent hover:bg-red-50 link"},zU=({children:e,size:t,variant:n,IconLeft:r,IconRight:s,iconSize:i=Cwe[t??"default"],iconProps:o,labelClassName:a,...c})=>({...c,className:Ue("flex flex-row flex-nowrap items-center !font-semibold disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed transition-[opacity,background-color,color,border-color]",_we[t??"default"],Owe[n??"default"],c.className),children:m.jsxs(m.Fragment,{children:[r&&m.jsx(r,{size:i,...o}),e&&w.Children.count(e)===1?m.jsx("span",{className:Ue("leading-none",a),children:e}):e,s&&m.jsx(s,{size:i,...o})]})}),ot=w.forwardRef((e,t)=>m.jsx("button",{type:"button",ref:t,...zU(e)})),LO=w.forwardRef((e,t)=>m.jsx(In,{ref:t,href:"#",...zU(e)})),Kn=({Icon:e=void 0,title:t=void 0,description:n="Check back later my friend.",primary:r,secondary:s,className:i,children:o})=>m.jsx("div",{className:Ue("flex flex-col h-full w-full justify-center items-center",i),children:m.jsxs("div",{className:"flex flex-col gap-3 items-center max-w-80",children:[e&&m.jsx(e,{size:48,className:"opacity-50",stroke:1}),m.jsxs("div",{className:"flex flex-col gap-1",children:[t&&m.jsx("h3",{className:"text-center text-lg font-bold",children:t}),m.jsx("p",{className:"text-center text-primary/60",children:n})]}),m.jsxs("div",{className:"mt-1.5 flex flex-row gap-2",children:[s&&m.jsx(ot,{variant:"default",...s}),r&&m.jsx(ot,{variant:"primary",...r}),o]})]})}),jwe=e=>m.jsx(Kn,{title:"Not Found",...e}),Awe=e=>m.jsx(Kn,{title:"Not Allowed",...e}),Twe=({what:e,...t})=>m.jsx(Kn,{Icon:pxe,title:"Missing Permission",description:`You're not allowed to access ${e??"this"}.`,...t}),$we=e=>m.jsx(Kn,{title:"Not Enabled",...e}),Is={NotFound:jwe,NotAllowed:Awe,NotEnabled:$we,MissingPermission:Twe},ft={data:{root:()=>"/data",entity:{list:e=>`/entity/${e}`,create:e=>`/entity/${e}/create`,edit:(e,t)=>`/entity/${e}/edit/${t}`},schema:{root:()=>"/schema",entity:e=>`/schema/entity/${e}`}},auth:{root:()=>"/auth",users:{list:()=>"/users",edit:e=>`/users/edit/${e}`},roles:{list:()=>"/roles",edit:e=>`/roles/edit/${e}`},settings:()=>"/settings",strategies:()=>"/strategies"},flows:{root:()=>"/flows",flows:{list:()=>"/",edit:e=>`/flow/${e}`}},settings:{root:()=>"/settings",path:e=>`/settings/${e.join("/")}`}};function Rwe(e,t){const n=y1(t,{encode:!1});return`${e}?${n}`}function kwe(){const[e]=Dn();return(t,n)=>{e(t(ft),n)}}function Dn(){const[e,t]=bi(),n=Lc(),{app:r}=xt(),s=r.options.basepath;return[(i,o)=>{(c=>{c()})(()=>{if(o){if("reload"in o){window.location.href=i;return}else if("target"in o){const f=window.location.origin+s+n.base+i;window.open(f,o.target);return}}const c=o!=null&&o.absolute?`~/${s}${i}`.replace(/\/+/g,"/"):i,u={...o==null?void 0:o.state,referrer:e};t(o!=null&&o.query?Rwe(c,o==null?void 0:o.query):c,{replace:o==null?void 0:o.replace,state:u})})},e,i=>{const o=window.history.state;o!=null&&o.referrer?t(o.referrer,{replace:!0}):i!=null&&i.fallback?t(i.fallback,{replace:!0}):window.history.back()}]}function Mwe(e="/",t){const{app:n}=xt(),[r]=Dn(),s=document.referrer,i=window.history.length,o=s.length===0,a=o&&i>1||!!o;function c(){o&&i>2?window.history.back():typeof e=="string"?r(e):typeof e=="function"&&e()}return{same:o,canGoBack:a,goBack:c}}const VU=w.createContext(void 0);function Iwe({includeSecrets:e=!1,options:t,children:n,fallback:r=null}){const[s,i]=w.useState(e),[o,a]=w.useState(),[c,u]=w.useState(!1),[f,h]=w.useState(),p=w.useRef(!1),y=w.useRef(0),[v,x]=w.useState(0),S=Lo();async function N(){await _(e,{force:!0,fresh:!0})}async function _(k=!1,R){const F=s?2:1;if(y.current===F||s&&(R==null?void 0:R.force)!==!0)return;y.current=F;const z=await S.system.readSchema({config:!0,secrets:k,fresh:R==null?void 0:R.fresh});if(z.ok)f&&h(!1);else if(p.current||(p.current=!0,h(!0),c&&(o!=null&&o.schema)))return;const L=z.ok?z.body:{version:0,mode:"db",schema:rve(),config:sve(),permissions:[],fallback:!0};w.startTransition(()=>{const B=()=>{a(L),i(k),u(!0),x(H=>H+1),y.current=0};"startViewTransition"in document?document.startViewTransition(B):B()})}async function C(){s||await _(!0)}if(w.useEffect(()=>{o!=null&&o.schema||_(e)},[]),!c||!o)return r;const j=new Kve(o==null?void 0:o.config,t),A=Xve({api:S,setSchema:a,reloadSchema:N}),$=s&&!f;return m.jsx(VU.Provider,{value:{...o,actions:A,requireSecrets:C,app:j,options:j.options,hasSecrets:$},children:f?m.jsx(Pwe,{}):n},v)}function Pwe(){const[e]=Dn();return m.jsx(Is.MissingPermission,{what:"the Admin UI",primary:{children:"Login",onClick:()=>e("/auth/login")}})}function xt({withSecrets:e}={}){const t=w.useContext(VU);return e&&t.requireSecrets(),t}function K1({children:e}){const{readonly:t}=xt();return t?null:e}const Dwe={},fP=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const y=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,y))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Dwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},y$=e=>e?fP(e):fP;var n_={exports:{}},r_={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP;function Lwe(){if(hP)return r_;hP=1;var e=Xh(),t=iU();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return r_.useSyncExternalStoreWithSelector=function(u,f,h,p,y){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function N($){if(!_){if(_=!0,C=$,$=p($),y!==void 0&&x.hasValue){var k=x.value;if(y(k,$))return j=k}return j=$}if(k=j,r(C,$))return k;var R=p($);return y!==void 0&&y(k,R)?(C=$,k):(C=$,j=R)}var _=!1,C,j,A=h===void 0?null:h;return[function(){return N(f())},A===null?void 0:function(){return N(A())}]},[f,h,p,y]);var S=s(u,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=S},[S]),c(S),S},r_}var mP;function Fwe(){return mP||(mP=1,n_.exports=Lwe()),n_.exports}var UU=Fwe();const qU=Zi(UU),HU={},{useDebugValue:Bwe}=je,{useSyncExternalStoreWithSelector:zwe}=qU;let pP=!1;const Vwe=e=>e;function es(e,t=Vwe,n){(HU?"production":void 0)!=="production"&&n&&!pP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),pP=!0);const r=zwe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Bwe(r),r}const gP=e=>{(HU?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?y$(e):e,n=(r,s)=>es(t,r,s);return Object.assign(n,t),n},Q1=e=>e?gP(e):gP,Uwe={},Zy=(e,t)=>(...n)=>Object.assign({},e,t(...n));function qwe(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Kg=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Kg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Kg(r)(n)}}}},Hwe=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,N)=>({...N,...S}),...t},o=!1;const a=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...S)},r,s);const f=Kg(i.serialize),h=()=>{const S=i.partialize({...r()});let N;const _=f({state:S,version:i.version}).then(C=>u.setItem(i.name,C)).catch(C=>{N=C});if(N)throw N;return _},p=s.setState;s.setState=(S,N)=>{p(S,N),h()};const y=e((...S)=>{n(...S),h()},r,s);let v;const x=()=>{var S;if(!u)return;o=!1,a.forEach(_=>_(r()));const N=((S=i.onRehydrateStorage)==null?void 0:S.call(i,r()))||void 0;return Kg(u.getItem.bind(u))(i.name).then(_=>{if(_)return i.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return i.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var C;return v=i.merge(_,(C=r())!=null?C:y),n(v,!0),h()}).then(()=>{N==null||N(v,void 0),o=!0,c.forEach(_=>_(v))}).catch(_=>{N==null||N(void 0,_)})};return s.persist={setOptions:S=>{i={...i,...S},S.getStorage&&(u=S.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},x(),v||y},Wwe=(e,t)=>(n,r,s)=>{let i={storage:qwe(()=>localStorage),partialize:x=>x,version:0,merge:(x,S)=>({...S,...x}),...t},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...x)},r,s);const f=()=>{const x=i.partialize({...r()});return u.setItem(i.name,{state:x,version:i.version})},h=s.setState;s.setState=(x,S)=>{h(x,S),f()};const p=e((...x)=>{n(...x),f()},r,s);s.getInitialState=()=>p;let y;const v=()=>{var x,S;if(!u)return;o=!1,a.forEach(_=>{var C;return _((C=r())!=null?C:p)});const N=((S=i.onRehydrateStorage)==null?void 0:S.call(i,(x=r())!=null?x:p))||void 0;return Kg(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var C;const[j,A]=_;if(y=i.merge(A,(C=r())!=null?C:p),n(y,!0),j)return f()}).then(()=>{N==null||N(y,void 0),y=r(),o=!0,c.forEach(_=>_(y))}).catch(_=>{N==null||N(void 0,_)})};return s.persist={setOptions:x=>{i={...i,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||v(),y||p},Gwe=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Uwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Hwe(e,t)):Wwe(e,t),WU=Gwe,GU=["dark","light","system"],yP=Q1(WU(Zy({theme:null},e=>({setTheme:t=>{GU.includes(t)&&document.startViewTransition(()=>{e({theme:t})})}})),{name:"bknd-admin-theme"}));function Fc(e="system"){var a;const t=xt(),n=yP(c=>c.theme),r=yP(c=>c.setTheme),s=(a=t==null?void 0:t.options)==null?void 0:a.theme,i=typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches,o=s??n??e;return{theme:o==="system"?i?"dark":"light":o,value:o,themes:GU,setTheme:r,state:n,prefersDark:i,override:s}}function Z1({scale:e=.2,fill:t,...n}){const r=Fc(),s=n.theme??r.theme,i=t||(s==="light"?"black":"white"),o={width:Math.round(578*e),height:Math.round(188*e)};return m.jsx("div",{style:o,children:m.jsxs("svg",{width:o.width,height:o.height,viewBox:"0 0 578 188",fill:i,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M41.5 34C37.0817 34 33.5 37.5817 33.5 42V146C33.5 150.418 37.0817 154 41.5 154H158.5C162.918 154 166.5 150.418 166.5 146V42C166.5 37.5817 162.918 34 158.5 34H41.5ZM123.434 113.942C124.126 111.752 124.5 109.42 124.5 107C124.5 94.2975 114.203 84 101.5 84C99.1907 84 96.9608 84.3403 94.8579 84.9736L87.2208 65.1172C90.9181 63.4922 93.5 59.7976 93.5 55.5C93.5 49.701 88.799 45 83 45C77.201 45 72.5 49.701 72.5 55.5C72.5 61.299 77.201 66 83 66C83.4453 66 83.8841 65.9723 84.3148 65.9185L92.0483 86.0256C87.1368 88.2423 83.1434 92.1335 80.7957 96.9714L65.4253 91.1648C65.4746 90.7835 65.5 90.3947 65.5 90C65.5 85.0294 61.4706 81 56.5 81C51.5294 81 47.5 85.0294 47.5 90C47.5 94.9706 51.5294 99 56.5 99C60.0181 99 63.0648 96.9814 64.5449 94.0392L79.6655 99.7514C78.9094 102.03 78.5 104.467 78.5 107C78.5 110.387 79.2321 113.603 80.5466 116.498L69.0273 123.731C67.1012 121.449 64.2199 120 61 120C55.201 120 50.5 124.701 50.5 130.5C50.5 136.299 55.201 141 61 141C66.799 141 71.5 136.299 71.5 130.5C71.5 128.997 71.1844 127.569 70.6158 126.276L81.9667 119.149C86.0275 125.664 93.2574 130 101.5 130C110.722 130 118.677 124.572 122.343 116.737L132.747 120.899C132.585 121.573 132.5 122.276 132.5 123C132.5 127.971 136.529 132 141.5 132C146.471 132 150.5 127.971 150.5 123C150.5 118.029 146.471 114 141.5 114C138.32 114 135.525 115.649 133.925 118.139L123.434 113.942Z"}),m.jsx("path",{d:"M243.9 151.5C240.4 151.5 237 151 233.7 150C230.4 149 227.4 147.65 224.7 145.95C222 144.15 219.75 142.15 217.95 139.95C216.15 137.65 215 135.3 214.5 132.9L219.3 131.1L218.25 149.7H198.15V39H219.45V89.25L215.4 87.6C216 85.2 217.15 82.9 218.85 80.7C220.55 78.4 222.7 76.4 225.3 74.7C227.9 72.9 230.75 71.5 233.85 70.5C236.95 69.5 240.15 69 243.45 69C250.35 69 256.5 70.8 261.9 74.4C267.3 77.9 271.55 82.75 274.65 88.95C277.85 95.15 279.45 102.25 279.45 110.25C279.45 118.25 277.9 125.35 274.8 131.55C271.7 137.75 267.45 142.65 262.05 146.25C256.75 149.75 250.7 151.5 243.9 151.5ZM238.8 133.35C242.8 133.35 246.25 132.4 249.15 130.5C252.15 128.5 254.5 125.8 256.2 122.4C257.9 118.9 258.75 114.85 258.75 110.25C258.75 105.75 257.9 101.75 256.2 98.25C254.6 94.75 252.3 92.05 249.3 90.15C246.3 88.25 242.8 87.3 238.8 87.3C234.8 87.3 231.3 88.25 228.3 90.15C225.3 92.05 222.95 94.75 221.25 98.25C219.55 101.75 218.7 105.75 218.7 110.25C218.7 114.85 219.55 118.9 221.25 122.4C222.95 125.8 225.3 128.5 228.3 130.5C231.3 132.4 234.8 133.35 238.8 133.35ZM308.312 126.15L302.012 108.6L339.512 70.65H367.562L308.312 126.15ZM288.062 150V39H309.362V150H288.062ZM341.762 150L313.262 114.15L328.262 102.15L367.412 150H341.762ZM371.675 150V70.65H392.075L392.675 86.85L388.475 88.65C389.575 85.05 391.525 81.8 394.325 78.9C397.225 75.9 400.675 73.5 404.675 71.7C408.675 69.9 412.875 69 417.275 69C423.275 69 428.275 70.2 432.275 72.6C436.375 75 439.425 78.65 441.425 83.55C443.525 88.35 444.575 94.3 444.575 101.4V150H423.275V103.05C423.275 99.45 422.775 96.45 421.775 94.05C420.775 91.65 419.225 89.9 417.125 88.8C415.125 87.6 412.625 87.1 409.625 87.3C407.225 87.3 404.975 87.7 402.875 88.5C400.875 89.2 399.125 90.25 397.625 91.65C396.225 93.05 395.075 94.65 394.175 96.45C393.375 98.25 392.975 100.2 392.975 102.3V150H382.475C380.175 150 378.125 150 376.325 150C374.525 150 372.975 150 371.675 150ZM488.536 151.5C481.636 151.5 475.436 149.75 469.936 146.25C464.436 142.65 460.086 137.8 456.886 131.7C453.786 125.5 452.236 118.35 452.236 110.25C452.236 102.35 453.786 95.3 456.886 89.1C460.086 82.9 464.386 78 469.786 74.4C475.286 70.8 481.536 69 488.536 69C492.236 69 495.786 69.6 499.186 70.8C502.686 71.9 505.786 73.45 508.486 75.45C511.286 77.45 513.536 79.7 515.236 82.2C516.936 84.6 517.886 87.15 518.086 89.85L512.686 90.75V39H533.986V150H513.886L512.986 131.7L517.186 132.15C516.986 134.65 516.086 137.05 514.486 139.35C512.886 141.65 510.736 143.75 508.036 145.65C505.436 147.45 502.436 148.9 499.036 150C495.736 151 492.236 151.5 488.536 151.5ZM493.336 133.8C497.336 133.8 500.836 132.8 503.836 130.8C506.836 128.8 509.186 126.05 510.886 122.55C512.586 119.05 513.436 114.95 513.436 110.25C513.436 105.65 512.586 101.6 510.886 98.1C509.186 94.5 506.836 91.75 503.836 89.85C500.836 87.85 497.336 86.85 493.336 86.85C489.336 86.85 485.836 87.85 482.836 89.85C479.936 91.75 477.636 94.5 475.936 98.1C474.336 101.6 473.536 105.65 473.536 110.25C473.536 114.95 474.336 119.05 475.936 122.55C477.636 126.05 479.936 128.8 482.836 130.8C485.836 132.8 489.336 133.8 493.336 133.8Z"})]})})}function bP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function YU(...e){return t=>{let n=!1;const r=e.map(s=>{const i=bP(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():bP(e[s],null)}}}}function Bc(...e){return w.useCallback(YU(...e),e)}var JU=w.forwardRef((e,t)=>{const{children:n,...r}=e,s=w.Children.toArray(n),i=s.find(Jwe);if(i){const o=i.props.children,a=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return m.jsx(FO,{...r,ref:t,children:w.isValidElement(o)?w.cloneElement(o,void 0,a):null})}return m.jsx(FO,{...r,ref:t,children:n})});JU.displayName="Slot";var FO=w.forwardRef((e,t)=>{const{children:n,...r}=e;if(w.isValidElement(n)){const s=Kwe(n),i=Xwe(r,n.props);return n.type!==w.Fragment&&(i.ref=t?YU(t,s):s),w.cloneElement(n,i)}return w.Children.count(n)>1?w.Children.only(null):null});FO.displayName="SlotClone";var Ywe=({children:e})=>m.jsx(m.Fragment,{children:e});function Jwe(e){return w.isValidElement(e)&&e.type===Ywe}function Xwe(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Kwe(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Qwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Sd=Qwe.reduce((e,t)=>{const n=w.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?JU:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function XU(e,t=[]){let n=[];function r(i,o){const a=w.createContext(o),c=n.length;n=[...n,o];const u=h=>{var N;const{scope:p,children:y,...v}=h,x=((N=p==null?void 0:p[e])==null?void 0:N[c])||a,S=w.useMemo(()=>v,Object.values(v));return m.jsx(x.Provider,{value:S,children:y})};u.displayName=i+"Provider";function f(h,p){var x;const y=((x=p==null?void 0:p[e])==null?void 0:x[c])||a,v=w.useContext(y);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(a){const c=(a==null?void 0:a[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[r,Zwe(s,...t)]}function Zwe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function pc(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Sa(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function e1e({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=t1e({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,a=Sa(n),c=w.useCallback(u=>{if(i){const h=typeof u=="function"?u(e):u;h!==e&&a(h)}else s(u)},[i,e,s,a]);return[o,c]}function t1e({defaultProp:e,onChange:t}){const n=w.useState(e),[r]=n,s=w.useRef(r),i=Sa(t);return w.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var Ix=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function n1e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var e0=e=>{const{present:t,children:n}=e,r=r1e(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=Bc(r.ref,s1e(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};e0.displayName="Presence";function r1e(e){const[t,n]=w.useState(),r=w.useRef({}),s=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[a,c]=n1e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=nv(r.current);i.current=a==="mounted"?u:"none"},[a]),Ix(()=>{const u=r.current,f=s.current;if(f!==e){const p=i.current,y=nv(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Ix(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,h=y=>{const x=nv(r.current).includes(y.animationName);if(y.target===t&&x&&(c("ANIMATION_END"),!s.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},p=y=>{y.target===t&&(i.current=nv(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function nv(e){return(e==null?void 0:e.animationName)||"none"}function s1e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var i1e=w.createContext(void 0);function o1e(e){const t=w.useContext(i1e);return e||t||"ltr"}function a1e(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function l1e(e){const[t,n]=w.useState(void 0);return Ix(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function c1e(e,[t,n]){return Math.min(n,Math.max(t,e))}function u1e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var b$="ScrollArea",[KU,L9e]=XU(b$),[d1e,vi]=KU(b$),QU=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=e,[a,c]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(null),[y,v]=w.useState(null),[x,S]=w.useState(null),[N,_]=w.useState(0),[C,j]=w.useState(0),[A,$]=w.useState(!1),[k,R]=w.useState(!1),F=Bc(t,L=>c(L)),z=o1e(s);return m.jsx(d1e,{scope:n,type:r,dir:z,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:f,content:h,onContentChange:p,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:$,scrollbarY:x,onScrollbarYChange:S,scrollbarYEnabled:k,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:j,children:m.jsx(Sd.div,{dir:z,...o,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});QU.displayName=b$;var ZU="ScrollAreaViewport",eq=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,o=vi(ZU,n),a=w.useRef(null),c=Bc(t,a,o.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),m.jsx(Sd.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:m.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});eq.displayName=ZU;var Fo="ScrollAreaScrollbar",tq=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=vi(Fo,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=e.orientation==="horizontal";return w.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?m.jsx(f1e,{...r,ref:t,forceMount:n}):s.type==="scroll"?m.jsx(h1e,{...r,ref:t,forceMount:n}):s.type==="auto"?m.jsx(nq,{...r,ref:t,forceMount:n}):s.type==="always"?m.jsx(v$,{...r,ref:t}):null});tq.displayName=Fo;var f1e=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=vi(Fo,e.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),m.jsx(e0,{present:n||i,children:m.jsx(nq,{"data-state":i?"visible":"hidden",...r,ref:t})})}),h1e=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=vi(Fo,e.__scopeScrollArea),i=e.orientation==="horizontal",o=tS(()=>c("SCROLL_END"),100),[a,c]=u1e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),w.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let h=u[f];const p=()=>{const y=u[f];h!==y&&(c("SCROLL"),o()),h=y};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,o]),m.jsx(e0,{present:n||a!=="hidden",children:m.jsx(v$,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:pc(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:pc(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),nq=w.forwardRef((e,t)=>{const n=vi(Fo,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,o]=w.useState(!1),a=e.orientation==="horizontal",c=tS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:f)}},10);return Ph(n.viewport,c),Ph(n.content,c),m.jsx(e0,{present:r||i,children:m.jsx(v$,{"data-state":i?"visible":"hidden",...s,ref:t})})}),v$=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=vi(Fo,e.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[a,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=oq(a.viewport,a.content),f={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,y){return x1e(p,o.current,a,y)}return n==="horizontal"?m.jsx(m1e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,y=vP(p,a,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):n==="vertical"?m.jsx(p1e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,y=vP(p,a);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),m1e=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=vi(Fo,e.__scopeScrollArea),[o,a]=w.useState(),c=w.useRef(null),u=Bc(t,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),m.jsx(sq,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eS(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),lq(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Dx(o.paddingLeft),paddingEnd:Dx(o.paddingRight)}})}})}),p1e=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=vi(Fo,e.__scopeScrollArea),[o,a]=w.useState(),c=w.useRef(null),u=Bc(t,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),m.jsx(sq,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eS(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),lq(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Dx(o.paddingTop),paddingEnd:Dx(o.paddingBottom)}})}})}),[g1e,rq]=KU(Fo),sq=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:h,...p}=e,y=vi(Fo,n),[v,x]=w.useState(null),S=Bc(t,F=>x(F)),N=w.useRef(null),_=w.useRef(""),C=y.viewport,j=r.content-r.viewport,A=Sa(f),$=Sa(c),k=tS(h,10);function R(F){if(N.current){const z=F.clientX-N.current.left,L=F.clientY-N.current.top;u({x:z,y:L})}}return w.useEffect(()=>{const F=z=>{const L=z.target;(v==null?void 0:v.contains(L))&&A(z,j)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[C,v,j,A]),w.useEffect($,[r,$]),Ph(v,k),Ph(y.content,k),m.jsx(g1e,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:Sa(i),onThumbPointerUp:Sa(o),onThumbPositionChange:$,onThumbPointerDown:Sa(a),children:m.jsx(Sd.div,{...p,ref:S,style:{position:"absolute",...p.style},onPointerDown:pc(e.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),N.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),R(F))}),onPointerMove:pc(e.onPointerMove,R),onPointerUp:pc(e.onPointerUp,F=>{const z=F.target;z.hasPointerCapture(F.pointerId)&&z.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=_.current,y.viewport&&(y.viewport.style.scrollBehavior=""),N.current=null})})})}),Px="ScrollAreaThumb",iq=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=rq(Px,e.__scopeScrollArea);return m.jsx(e0,{present:n||s.hasThumb,children:m.jsx(y1e,{ref:t,...r})})}),y1e=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=vi(Px,n),o=rq(Px,n),{onThumbPositionChange:a}=o,c=Bc(t,h=>o.onThumbChange(h)),u=w.useRef(void 0),f=tS(()=>{u.current&&(u.current(),u.current=void 0)},100);return w.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(f(),!u.current){const y=w1e(h,a);u.current=y,a()}};return a(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,f,a]),m.jsx(Sd.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pc(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),v=h.clientX-y.left,x=h.clientY-y.top;o.onThumbPointerDown({x:v,y:x})}),onPointerUp:pc(e.onPointerUp,o.onThumbPointerUp)})});iq.displayName=Px;var x$="ScrollAreaCorner",b1e=w.forwardRef((e,t)=>{const n=vi(x$,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(v1e,{...e,ref:t}):null});b1e.displayName=x$;var v1e=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=vi(x$,n),[i,o]=w.useState(0),[a,c]=w.useState(0),u=!!(i&&a);return Ph(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Ph(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),u?m.jsx(Sd.div,{...r,ref:t,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Dx(e){return e?parseInt(e,10):0}function oq(e,t){const n=e/t;return isNaN(n)?0:n}function eS(e){const t=oq(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function x1e(e,t,n,r="ltr"){const s=eS(n),i=s/2,o=t||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return aq([c,u],h)(e)}function vP(e,t,n="ltr"){const r=eS(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=c1e(e,c);return aq([0,o],[0,a])(u)}function aq(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lq(e,t){return e>0&&e<t}var w1e=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function tS(e,t){const n=Sa(e),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ph(e,t){const n=Sa(t);Ix(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var cq=QU,uq=eq,Lx=tq,Fx=iq,w$="Switch",[S1e,F9e]=XU(w$),[E1e,N1e]=S1e(w$),dq=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:f,...h}=e,[p,y]=w.useState(null),v=Bc(t,C=>y(C)),x=w.useRef(!1),S=p?f||!!p.closest("form"):!0,[N=!1,_]=e1e({prop:s,defaultProp:i,onChange:u});return m.jsxs(E1e,{scope:n,checked:N,disabled:a,children:[m.jsx(Sd.button,{type:"button",role:"switch","aria-checked":N,"aria-required":o,"data-state":mq(N),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:v,onClick:pc(e.onClick,C=>{_(j=>!j),S&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),S&&m.jsx(_1e,{control:p,bubbles:!x.current,name:r,value:c,checked:N,required:o,disabled:a,form:f,style:{transform:"translateX(-100%)"}})]})});dq.displayName=w$;var fq="SwitchThumb",hq=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=N1e(fq,n);return m.jsx(Sd.span,{"data-state":mq(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});hq.displayName=fq;var _1e=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=w.useRef(null),o=a1e(n),a=l1e(t);return w.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&h){const p=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(p)}},[o,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mq(e){return e?"checked":"unchecked"}var C1e=dq,O1e=hq;const j1e={xs:{className:"p-0.5",size:13},sm:{className:"p-0.5",size:15},md:{className:"p-1",size:18},lg:{className:"p-1.5",size:22}},Nt=w.forwardRef(({Icon:e,size:t,variant:n="ghost",onClick:r,disabled:s,iconProps:i,...o},a)=>{const c=j1e[t??"md"];return m.jsx(ot,{ref:a,variant:n,iconSize:c.size,iconProps:i,IconLeft:e,className:Ue(c.className,o.className),onClick:r,disabled:s})});function pq(e){const t=e.match(/:(\w+)\??/);return(t==null?void 0:t[1])??""}function xP(e,t){return t?e.replace(/:\w+\??/,t):e.replace(/\/:\w+\??/,"")}function S$(e,t){const n=T1e(e??""),r=e??(n==null?void 0:n.path)??"",s=pq(r),i=g$()[s],[o,a]=w.useState(i===t),c=n?t===n.activeIdentifier:o,[,u]=bi();function f(h){const p=h??!o;n&&n.setActiveIdentifier(t),r?u(p?xP(r,t):xP(r)):a(p)}return w.useEffect(()=>{!n&&e&&t&&a(i===t)},[i,t,e]),{active:c,toggle:f}}const gq=w.createContext(void 0);function A1e({children:e,defaultIdentifier:t,path:n}){const r=pq(n),s=g$()[r],[i,o]=w.useState(s??t);return m.jsx(gq.Provider,{value:{defaultIdentifier:t,path:n,activeIdentifier:i,setActiveIdentifier:o},children:e})}function T1e(e){const t=w.use(gq);if(t&&(!e||t.path===e))return t}const yq=w.createContext(void 0);function $1e({children:e}){const{width:t}=GQ(),[n,r]=Qh(t>768);return m.jsx(yq.Provider,{value:{sidebar:{open:n,handler:r}},children:e})}function R1e(){return w.useContext(yq)}const Ra=Q1(WU(Zy({sidebars:{default:{open:!1,width:350}}},e=>({toggleSidebar:t=>()=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,open:!r.open}}}:n}),closeSidebar:t=>()=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,open:!1}}}:n}),setSidebarWidth:t=>n=>e(r=>{const s=r.sidebars[t];return s?{sidebars:{...r.sidebars,[t]:{...s,width:n}}}:{sidebars:{...r.sidebars,[t]:{open:!1,width:n}}}}),resetSidebarWidth:t=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,width:350}}}:n}),setSidebarState:(t,n)=>e(r=>({sidebars:{...r.sidebars,[t]:n}}))})),{name:"appshell",version:1,migrate:()=>({sidebars:{default:{open:!1,width:350}}})}));var bq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wP=je.createContext&&je.createContext(bq),k1e=["attr","size","title"];function M1e(e,t){if(e==null)return{};var n=I1e(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bx.apply(this,arguments)}function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){P1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P1e(e,t,n){return t=D1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D1e(e){var t=L1e(e,"string");return typeof t=="symbol"?t:t+""}function L1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vq(e){return e&&e.map((t,n)=>je.createElement(t.tag,zx({key:n},t.attr),vq(t.child)))}function Ye(e){return t=>je.createElement(F1e,Bx({attr:zx({},e.attr)},t),vq(e.child))}function F1e(e){var t=n=>{var{attr:r,size:s,title:i}=e,o=M1e(e,k1e),a=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),je.createElement("svg",Bx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:zx(zx({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&je.createElement("title",null,i),e.children)};return wP!==void 0?je.createElement(wP.Consumer,null,n=>t(n)):t(bq)}function B1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.079 5.999l.239 .012c1.43 .097 3.434 1.013 4.508 2.586a1 1 0 0 1 -.344 1.44c-.05 .028 -.372 .158 -.497 .217a4.15 4.15 0 0 0 -.722 .431c-.614 .461 -.948 1.009 -.942 1.694c.01 .885 .339 1.454 .907 1.846c.208 .143 .436 .253 .666 .33c.126 .043 .426 .116 .444 .122a1 1 0 0 1 .662 .942c0 2.621 -3.04 6.381 -5.286 6.381c-.79 0 -1.272 -.091 -1.983 -.315l-.098 -.031c-.463 -.146 -.702 -.192 -1.133 -.192c-.52 0 -.863 .06 -1.518 .237l-.197 .053c-.575 .153 -.964 .226 -1.5 .248c-2.749 0 -5.285 -5.093 -5.285 -9.072c0 -3.87 1.786 -6.92 5.286 -6.92c.297 0 .598 .045 .909 .128c.403 .107 .774 .26 1.296 .508c.787 .374 .948 .44 1.009 .44h.016c.03 -.003 .128 -.047 1.056 -.457c1.061 -.467 1.864 -.685 2.746 -.616l-.24 -.012z"},child:[]},{tag:"path",attr:{d:"M14 1a1 1 0 0 1 1 1a3 3 0 0 1 -3 3a1 1 0 0 1 -1 -1a3 3 0 0 1 3 -3z"},child:[]}]})(e)}function z1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14.983 3l.123 .006c2.014 .214 3.527 .672 4.966 1.673a1 1 0 0 1 .371 .488c1.876 5.315 2.373 9.987 1.451 12.28c-1.003 2.005 -2.606 3.553 -4.394 3.553c-.732 0 -1.693 -.968 -2.328 -2.045a21.512 21.512 0 0 0 2.103 -.493a1 1 0 1 0 -.55 -1.924c-3.32 .95 -6.13 .95 -9.45 0a1 1 0 0 0 -.55 1.924c.717 .204 1.416 .37 2.103 .494c-.635 1.075 -1.596 2.044 -2.328 2.044c-1.788 0 -3.391 -1.548 -4.428 -3.629c-.888 -2.217 -.39 -6.89 1.485 -12.204a1 1 0 0 1 .371 -.488c1.439 -1.001 2.952 -1.459 4.966 -1.673a1 1 0 0 1 .935 .435l.063 .107l.651 1.285l.137 -.016a12.97 12.97 0 0 1 2.643 0l.134 .016l.65 -1.284a1 1 0 0 1 .754 -.54l.122 -.009zm-5.983 7a2 2 0 0 0 -1.977 1.697l-.018 .154l-.005 .149l.005 .15a2 2 0 1 0 1.995 -2.15zm6 0a2 2 0 0 0 -1.977 1.697l-.018 .154l-.005 .149l.005 .15a2 2 0 1 0 1.995 -2.15z"},child:[]}]})(e)}function V1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 2a1 1 0 0 1 .993 .883l.007 .117v4a1 1 0 0 1 -.883 .993l-.117 .007h-3v1h3a1 1 0 0 1 .991 1.131l-.02 .112l-1 4a1 1 0 0 1 -.858 .75l-.113 .007h-2v6a1 1 0 0 1 -.883 .993l-.117 .007h-4a1 1 0 0 1 -.993 -.883l-.007 -.117v-6h-2a1 1 0 0 1 -.993 -.883l-.007 -.117v-4a1 1 0 0 1 .883 -.993l.117 -.007h2v-1a6 6 0 0 1 5.775 -5.996l.225 -.004h3z"},child:[]}]})(e)}function U1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.315 2.1c.791 -.113 1.9 .145 3.333 .966l.272 .161l.16 .1l.397 -.083a13.3 13.3 0 0 1 4.59 -.08l.456 .08l.396 .083l.161 -.1c1.385 -.84 2.487 -1.17 3.322 -1.148l.164 .008l.147 .017l.076 .014l.05 .011l.144 .047a1 1 0 0 1 .53 .514a5.2 5.2 0 0 1 .397 2.91l-.047 .267l-.046 .196l.123 .163c.574 .795 .93 1.728 1.03 2.707l.023 .295l.007 .272c0 3.855 -1.659 5.883 -4.644 6.68l-.245 .061l-.132 .029l.014 .161l.008 .157l.004 .365l-.002 .213l-.003 3.834a1 1 0 0 1 -.883 .993l-.117 .007h-6a1 1 0 0 1 -.993 -.883l-.007 -.117v-.734c-1.818 .26 -3.03 -.424 -4.11 -1.878l-.535 -.766c-.28 -.396 -.455 -.579 -.589 -.644l-.048 -.019a1 1 0 0 1 .564 -1.918c.642 .188 1.074 .568 1.57 1.239l.538 .769c.76 1.079 1.36 1.459 2.609 1.191l.001 -.678l-.018 -.168a5.03 5.03 0 0 1 -.021 -.824l.017 -.185l.019 -.12l-.108 -.024c-2.976 -.71 -4.703 -2.573 -4.875 -6.139l-.01 -.31l-.004 -.292a5.6 5.6 0 0 1 .908 -3.051l.152 -.222l.122 -.163l-.045 -.196a5.2 5.2 0 0 1 .145 -2.642l.1 -.282l.106 -.253a1 1 0 0 1 .529 -.514l.144 -.047l.154 -.03z"},child:[]}]})(e)}function q1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z"},child:[]}]})(e)}function H1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"},child:[]}]})(e)}function W1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"},child:[]}]})(e)}function G1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.333 2c1.96 0 3.56 1.537 3.662 3.472l.005 .195v12.666c0 1.96 -1.537 3.56 -3.472 3.662l-.195 .005h-12.666a3.667 3.667 0 0 1 -3.662 -3.472l-.005 -.195v-12.666c0 -1.96 1.537 -3.56 3.472 -3.662l.195 -.005h12.666zm-2.626 7.293a1 1 0 0 0 -1.414 0l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.32 1.497l2 2l.094 .083a1 1 0 0 0 1.32 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"},child:[]}]})(e)}function xq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 8v4"},child:[]},{tag:"path",attr:{d:"M12 16h.01"},child:[]}]})(e)}function Y1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M18 13l-6 6"},child:[]},{tag:"path",attr:{d:"M6 13l6 6"},child:[]}]})(e)}function E$(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]},{tag:"path",attr:{d:"M5 12l6 6"},child:[]},{tag:"path",attr:{d:"M5 12l6 -6"},child:[]}]})(e)}function J1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]},{tag:"path",attr:{d:"M13 18l6 -6"},child:[]},{tag:"path",attr:{d:"M13 6l6 6"},child:[]}]})(e)}function X1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M18 11l-6 -6"},child:[]},{tag:"path",attr:{d:"M6 11l6 -6"},child:[]}]})(e)}function K1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"},child:[]},{tag:"path",attr:{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28"},child:[]}]})(e)}function Q1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5"},child:[]},{tag:"path",attr:{d:"M12 12l8 -4.5"},child:[]},{tag:"path",attr:{d:"M12 12l0 9"},child:[]},{tag:"path",attr:{d:"M12 12l-8 -4.5"},child:[]}]})(e)}function Z1e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 4a2 2 0 0 0 -2 2v3a2 3 0 0 1 -2 3a2 3 0 0 1 2 3v3a2 2 0 0 0 2 2"},child:[]},{tag:"path",attr:{d:"M17 4a2 2 0 0 1 2 2v3a2 3 0 0 0 2 3a2 3 0 0 0 -2 3v3a2 2 0 0 1 -2 2"},child:[]}]})(e)}function eSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"},child:[]},{tag:"path",attr:{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]},{tag:"path",attr:{d:"M16.5 7.5l0 .01"},child:[]}]})(e)}function tSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0 -20 0"},child:[]},{tag:"path",attr:{d:"M12.556 6c.65 0 1.235 .373 1.508 .947l2.839 7.848a1.646 1.646 0 0 1 -1.01 2.108a1.673 1.673 0 0 1 -2.068 -.851l-.46 -1.052h-2.73l-.398 .905a1.67 1.67 0 0 1 -1.977 1.045l-.153 -.047a1.647 1.647 0 0 1 -1.056 -1.956l2.824 -7.852a1.664 1.664 0 0 1 1.409 -1.087l1.272 -.008z"},child:[]}]})(e)}function nSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4l11.733 16h4.267l-11.733 -16z"},child:[]},{tag:"path",attr:{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"},child:[]}]})(e)}function wq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"},child:[]},{tag:"path",attr:{d:"M16 3v4"},child:[]},{tag:"path",attr:{d:"M8 3v4"},child:[]},{tag:"path",attr:{d:"M4 11h16"},child:[]},{tag:"path",attr:{d:"M11 15h1"},child:[]},{tag:"path",attr:{d:"M12 15v3"},child:[]}]})(e)}function rSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l5 5l10 -10"},child:[]}]})(e)}function Sq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 9l6 6l6 -6"},child:[]}]})(e)}function sSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 6l-6 6l6 6"},child:[]}]})(e)}function iSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 6l6 6l-6 6"},child:[]}]})(e)}function oSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 15l6 -6l6 6"},child:[]}]})(e)}function aSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 7l-5 5l5 5"},child:[]},{tag:"path",attr:{d:"M17 7l-5 5l5 5"},child:[]}]})(e)}function lSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7l5 5l-5 5"},child:[]},{tag:"path",attr:{d:"M13 7l5 5l-5 5"},child:[]}]})(e)}function cSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"},child:[]}]})(e)}function N$(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.183 6.117a6 6 0 1 0 4.511 3.986"},child:[]},{tag:"path",attr:{d:"M14.813 17.883a6 6 0 1 0 -4.496 -3.954"},child:[]}]})(e)}function uSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 12h6"},child:[]},{tag:"path",attr:{d:"M12 9v6"},child:[]},{tag:"path",attr:{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2"},child:[]},{tag:"path",attr:{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2"},child:[]}]})(e)}function Eq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"},child:[]},{tag:"path",attr:{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"},child:[]}]})(e)}function Nq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3"},child:[]},{tag:"path",attr:{d:"M4 6v6c0 1.657 3.582 3 8 3c1.075 0 2.1 -.08 3.037 -.224"},child:[]},{tag:"path",attr:{d:"M20 12v-6"},child:[]},{tag:"path",attr:{d:"M4 12v6c0 1.657 3.582 3 8 3c.166 0 .331 -.002 .495 -.006"},child:[]},{tag:"path",attr:{d:"M16 19h6"},child:[]},{tag:"path",attr:{d:"M19 16v6"},child:[]}]})(e)}function dSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0"},child:[]},{tag:"path",attr:{d:"M4 6v6a8 3 0 0 0 16 0v-6"},child:[]},{tag:"path",attr:{d:"M4 12v6a8 3 0 0 0 16 0v-6"},child:[]}]})(e)}function B9e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.831 20.413l-5.375 -6.91c-.608 -.783 -.608 -2.223 0 -3l5.375 -6.911a1.457 1.457 0 0 1 2.338 0l5.375 6.91c.608 .783 .608 2.223 0 3l-5.375 6.911a1.457 1.457 0 0 1 -2.338 0z"},child:[]}]})(e)}function fSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function zc(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function hSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"},child:[]},{tag:"path",attr:{d:"M11 13l9 -9"},child:[]},{tag:"path",attr:{d:"M15 4h5v5"},child:[]}]})(e)}function mSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"},child:[]},{tag:"path",attr:{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(e)}function _q(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"},child:[]}]})(e)}function Cq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3"},child:[]},{tag:"path",attr:{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6"},child:[]},{tag:"path",attr:{d:"M12 11v2a14 14 0 0 0 2.5 8"},child:[]},{tag:"path",attr:{d:"M8 15a18 18 0 0 0 1.8 6"},child:[]},{tag:"path",attr:{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95"},child:[]}]})(e)}function pSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function gSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 3h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M3 17h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M17 17h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M7 17l5 -4l5 4"},child:[]},{tag:"path",attr:{d:"M12 7l0 6"},child:[]}]})(e)}function ySe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.05 11a8.975 8.975 0 0 1 2.54 -5.403m2.314 -1.697a9 9 0 0 1 12.113 12.112m-1.695 2.312a9 9 0 0 1 -14.772 -3.324m-.5 5v-5h5"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(e)}function bSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 8l0 4l2 2"},child:[]},{tag:"path",attr:{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"},child:[]}]})(e)}function vSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 9h.01"},child:[]},{tag:"path",attr:{d:"M11 12h1v4h1"},child:[]}]})(e)}function z9e(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z"},child:[]},{tag:"path",attr:{d:"M15 9h.01"},child:[]}]})(e)}function xSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 8v-2a2 2 0 0 1 2 -2h2"},child:[]},{tag:"path",attr:{d:"M4 16v2a2 2 0 0 0 2 2h2"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v2"},child:[]},{tag:"path",attr:{d:"M16 20h2a2 2 0 0 0 2 -2v-2"},child:[]}]})(e)}function wSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6l16 0"},child:[]},{tag:"path",attr:{d:"M4 12l16 0"},child:[]},{tag:"path",attr:{d:"M4 18l16 0"},child:[]}]})(e)}function SSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]}]})(e)}function ESe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 10l2 -2v8"},child:[]},{tag:"path",attr:{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3"},child:[]},{tag:"path",attr:{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5"},child:[]}]})(e)}function t0(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 8h.01"},child:[]},{tag:"path",attr:{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"},child:[]},{tag:"path",attr:{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"},child:[]},{tag:"path",attr:{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"},child:[]}]})(e)}function Oq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M5 12l14 0"},child:[]}]})(e)}function jq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"},child:[]},{tag:"path",attr:{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"},child:[]}]})(e)}function _$(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 9l4 -4l4 4"},child:[]},{tag:"path",attr:{d:"M16 15l-4 4l-4 -4"},child:[]}]})(e)}function ym(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"},child:[]},{tag:"path",attr:{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]}]})(e)}function BO(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M15 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M6 15v-1a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v1"},child:[]},{tag:"path",attr:{d:"M12 9l0 3"},child:[]}]})(e)}function NSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"},child:[]}]})(e)}function EP(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15h16"},child:[]},{tag:"path",attr:{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M4 20h12"},child:[]}]})(e)}function _Se(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z"},child:[]}]})(e)}function Aq(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 7l16 0"},child:[]},{tag:"path",attr:{d:"M10 11l0 6"},child:[]},{tag:"path",attr:{d:"M14 11l0 6"},child:[]},{tag:"path",attr:{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"},child:[]},{tag:"path",attr:{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"},child:[]}]})(e)}function CSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"},child:[]},{tag:"path",attr:{d:"M7 9l5 -5l5 5"},child:[]},{tag:"path",attr:{d:"M12 4l0 12"},child:[]}]})(e)}function OSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"},child:[]},{tag:"path",attr:{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"},child:[]}]})(e)}function jSe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 4c-2.5 5 -2.5 10 0 16m14 -16c2.5 5 2.5 10 0 16m-10 -11h1c1 0 1 1 2.016 3.527c.984 2.473 .984 3.473 1.984 3.473h1"},child:[]},{tag:"path",attr:{d:"M8 16c1.5 0 3 -2 4 -3.5s2.5 -3.5 4 -3.5"},child:[]}]})(e)}function ASe(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M3.6 9h16.8"},child:[]},{tag:"path",attr:{d:"M3.6 15h16.8"},child:[]},{tag:"path",attr:{d:"M11.5 3a17 17 0 0 0 0 18"},child:[]},{tag:"path",attr:{d:"M12.5 3a17 17 0 0 1 0 18"},child:[]}]})(e)}function C$(e){return Ye({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6l-12 12"},child:[]},{tag:"path",attr:{d:"M6 6l12 12"},child:[]}]})(e)}function Ur({children:e,defaultOpen:t=!1,openEvent:n="onClick",position:r="bottom-start",dropdownWrapperProps:s,items:i,title:o,hideOnEmpty:a=!0,onClickItem:c,renderItem:u,itemsClassName:f,className:h}){const[p,y]=w.useState(t),[v,x]=w.useState(r),S=jy(()=>y(!1)),N=i.filter(Boolean),[_,C]=w.useState(0),j=Dt((B=50)=>setTimeout(()=>y(H=>!H),typeof B=="number"?B:0)),A=n==="onClick"?B=>{B.stopPropagation(),j()}:void 0,$=Dt(B=>{var T;if(n!=="onContextMenu")return;if(B.preventDefault(),p){j(0),setTimeout(()=>{x(r),C(0)},10);return}const H=B.clientX-B.currentTarget.getBoundingClientRect().left,{left:I=0,right:V=0}=((T=S.current)==null?void 0:T.getBoundingClientRect())??{};if(I>0&&V>0){const D=CF(H,I,V);H<(I+V)/2?(x("bottom-start"),C(D)):(x("bottom-end"),C(V-D))}else x(r),C(0);j()}),k=4,R={"bottom-start":{top:"100%",left:_,marginTop:k},"bottom-end":{right:_,top:"100%",marginTop:k},"top-start":{bottom:"100%",marginBottom:k},"top-end":{bottom:"100%",right:_,marginBottom:k}}[v],F=Dt(B=>{B.onClick&&B.onClick(),c&&c(B),j(50)});if(N.length===0&&a)return null;const z=N.some(B=>"icon"in B&&B.icon),L=u||((B,{key:H,onClick:I})=>typeof B=="function"?m.jsx(w.Fragment,{children:B()},H):m.jsxs("button",{type:"button",disabled:B.disabled,className:Ue("flex flex-row flex-nowrap text-nowrap items-center outline-none cursor-pointer px-2.5 rounded-md link leading-none h-8",f,B.disabled?"opacity-50 cursor-not-allowed":"hover:bg-primary/10",B.destructive&&"text-red-500 hover:bg-red-600 hover:text-white"),onClick:I,title:B.title,children:[z&&m.jsx("div",{className:"size-[16px] text-left mr-1.5 opacity-80",children:B.icon&&m.jsx(B.icon,{className:"size-[16px]"})}),m.jsx("div",{className:"flex flex-grow truncate text-nowrap",children:B.label})]},H));return m.jsxs("div",{role:"dropdown",className:Ue("relative flex",h),ref:S,onContextMenu:$,children:[w.cloneElement(e,{onClick:A}),p&&m.jsxs("div",{...s,className:Ue("absolute z-30 flex flex-col bg-background border border-muted px-1 py-1 rounded-lg shadow-lg min-w-full",s==null?void 0:s.className),style:R,children:[o&&m.jsx("div",{className:"text-sm font-bold px-2.5 mb-1 mt-1 opacity-50 truncate",children:o}),N.map((B,H)=>L(B,{key:H,onClick:I=>{I.stopPropagation(),F(B)}}))]})]})}const Tq=()=>m.jsxs("svg",{fill:"currentColor",fillRule:"evenodd",height:"1em",style:{flex:"none",lineHeight:"1"},viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"ModelContextProtocol"}),m.jsx("path",{d:"M15.688 2.343a2.588 2.588 0 00-3.61 0l-9.626 9.44a.863.863 0 01-1.203 0 .823.823 0 010-1.18l9.626-9.44a4.313 4.313 0 016.016 0 4.116 4.116 0 011.204 3.54 4.3 4.3 0 013.609 1.18l.05.05a4.115 4.115 0 010 5.9l-8.706 8.537a.274.274 0 000 .393l1.788 1.754a.823.823 0 010 1.18.863.863 0 01-1.203 0l-1.788-1.753a1.92 1.92 0 010-2.754l8.706-8.538a2.47 2.47 0 000-3.54l-.05-.049a2.588 2.588 0 00-3.607-.003l-7.172 7.034-.002.002-.098.097a.863.863 0 01-1.204 0 .823.823 0 010-1.18l7.273-7.133a2.47 2.47 0 00-.003-3.537z"}),m.jsx("path",{d:"M14.485 4.703a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a4.115 4.115 0 000 5.9 4.314 4.314 0 006.016 0l7.12-6.982a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a2.588 2.588 0 01-3.61 0 2.47 2.47 0 010-3.54l7.12-6.982z"})]});function TSe(){const[e,t]=bi(),n=[{label:"Data",href:"/data",Icon:dSe},{label:"Auth",href:"/auth",Icon:Cq},{label:"Media",href:"/media",Icon:t0},{label:"Flows",href:"/flows",Icon:gSe}],r=n.find(o=>o.exact?e===o.href:e.startsWith(o.href)),s=Dt(o=>{t(o.href)}),i=(o,{key:a,onClick:c})=>m.jsx(fg,{onClick:c,as:"button",className:"rounded-md",children:m.jsxs("div",{"data-active":(r==null?void 0:r.label)===o.label,className:"flex flex-row items-center gap-2.5 data-[active=true]:opacity-50",children:[m.jsx(o.Icon,{size:18}),m.jsx("span",{className:"text-lg",children:o.label})]})},a);return m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:"hidden md:flex flex-row gap-2.5 pl-0 p-2.5 items-center",children:n.map(o=>m.jsx(fg,{as:In,href:o.href,Icon:o.Icon,disabled:o.disabled,children:o.label},o.href))}),m.jsx("nav",{className:"flex md:hidden flex-row items-center",children:r&&m.jsx(Ur,{items:n,onClickItem:s,renderItem:i,children:m.jsx(fg,{as:"button",Icon:r.Icon,className:"active pl-6 pr-3.5",children:m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("span",{className:"text-lg",children:r.label}),m.jsx(_$,{size:18,className:"opacity-70"})]})})})})]})}function $Se({name:e="default"}){const t=Ra(r=>r.toggleSidebar(e)),n=Ra(r=>{var s;return(s=r.sidebars[e])==null?void 0:s.open});return m.jsx(Nt,{id:"toggle-sidebar",size:"lg",Icon:n?C$:wSe,onClick:t})}function RSe({hasSidebar:e=!0}){const{app:t}=xt(),{theme:n}=Fc(),{logo_return_path:r="/"}=t.options;return m.jsxs("header",{id:"header","data-shell":"header",className:"flex flex-row w-full h-16 gap-2.5 border-muted border-b justify-start bg-muted/10",children:[m.jsx(In,{href:r,native:r!=="/",className:"max-h-full flex hover:bg-primary/5 link p-2.5 w-[134px] outline-none",children:m.jsx(Z1,{theme:n})}),m.jsx(TSe,{}),m.jsx("div",{className:"flex flex-grow"}),m.jsxs("div",{className:"flex md:hidden flex-row items-center pr-2 gap-2",children:[m.jsx($Se,{name:"default"}),m.jsx(NP,{})]}),m.jsx("div",{className:"hidden md:flex flex-row items-center px-4 gap-2",children:m.jsx(NP,{})})]})}function NP(){var c;const{config:e,options:t}=xt(),n=pU(),[r]=Dn(),{logout_route:s}=W1();async function i(){await n.logout(),r(s,{reload:!0})}async function o(){r("/auth/login")}const a=[{label:"Settings",onClick:()=>r("/settings"),icon:Xg},{label:"OpenAPI",onClick:()=>window.open("/api/system/swagger","_blank"),icon:Zve},{label:"Docs",onClick:()=>window.open("https://docs.bknd.io","_blank"),icon:txe}];return e.server.mcp.enabled&&a.push({label:"MCP",onClick:()=>r("/tools/mcp"),icon:Tq}),e.auth.enabled&&(n.user?a.push({label:"Logout",title:`Logout ${n.user.email}`,onClick:i,icon:hxe}):a.push({label:"Login",onClick:o,icon:xxe})),a.push(()=>m.jsx(kSe,{})),a.push(()=>m.jsx("div",{className:"font-mono leading-none text-xs text-primary/50 text-center pb-1 pt-2 mt-1 border-t border-primary/5",children:yoe()})),m.jsx(m.Fragment,{children:m.jsx(Ur,{items:a,position:"bottom-end",children:n.user?m.jsx(ot,{className:"rounded-full w-12 h-12 justify-center p-0 text-lg",children:(c=n.user.email[0])==null?void 0:c.toUpperCase()}):m.jsx(ot,{className:"rounded-full w-12 h-12 justify-center p-0",IconLeft:OSe})})})}function kSe(){const{value:e,themes:t,setTheme:n}=Fc();return m.jsx("div",{className:"flex flex-col items-center mt-1 pt-1 border-t border-primary/5",children:m.jsx(md,{withItemsBorders:!1,className:"w-full",data:t.map(r=>({value:r,label:Ku(r)})),value:e,onChange:n,size:"xs"})})}function $q({children:e}){const t=Ra(r=>r.sidebars),n=en(t,r=>r.width);return m.jsx($1e,{children:m.jsx("div",{id:"app-shell","data-shell":"root",className:"flex flex-1 flex-col select-none h-dvh",style:Object.fromEntries(Object.entries(n).map(([r,s])=>[`--sidebar-width-${r}`,`${s}px`])),children:e})})}const fg=({children:e,as:t,className:n,Icon:r,disabled:s,...i})=>{const o=t||"a";return m.jsxs(o,{...i,className:Ue("px-6 py-2 [&.active]:bg-muted [&.active]:hover:bg-primary/15 hover:bg-primary/5 flex flex-row items-center rounded-full gap-2.5 link transition-colors",s&&"opacity-50 cursor-not-allowed",n),children:[r&&m.jsx(r,{size:18}),typeof e=="string"?m.jsx("span",{className:"text-lg",children:e}):e]})};function Rq({children:e,center:t}){return m.jsx("main",{"data-shell":"content",className:Ue("flex flex-1 flex-row max-w-screen h-full",t&&"justify-center items-center"),children:e})}function n0({children:e}){const{sidebar:t}=R1e();return m.jsx("div",{"data-shell":"main",className:Ue("flex flex-col flex-grow w-1 flex-shrink-1",t.open&&"md:max-w-[calc(100%-var(--sidebar-width))]"),children:e})}function Ed({children:e,name:t="default",handle:n="right",minWidth:r,maxWidth:s}){const i=Ra(p=>{var y;return(y=p.sidebars[t])==null?void 0:y.open}),o=Ra(p=>p.closeSidebar(t)),a=Ra(p=>{var y;return((y=p.sidebars[t])==null?void 0:y.width)??350}),c=jy(o,["mouseup","touchend"]),u=w.useRef(null),[f]=bi(),h=()=>{i&&o()};return w.useEffect(h,[f]),Uj([["Escape",h]]),m.jsxs(m.Fragment,{children:[n==="left"&&m.jsx(_P,{name:t,handle:n,sidebarRef:u,minWidth:r,maxWidth:s}),m.jsx("aside",{"data-shell":"sidebar",ref:u,className:"hidden md:flex flex-col flex-shrink-0 flex-grow-0 h-full bg-muted/10",style:{width:a},children:e}),n==="right"&&m.jsx(_P,{name:t,handle:n,sidebarRef:u,minWidth:r,maxWidth:s}),m.jsx("div",{"data-open":i,className:"absolute w-full md:hidden data-[open=true]:translate-x-0 translate-x-[-100%] transition-transform z-10 backdrop-blur-sm max-w-[90%]",children:m.jsx("aside",{ref:c,"data-shell":"sidebar",className:"flex-col w-[var(--sidebar-width)] flex-shrink-0 flex-grow-0 h-full border-muted border-r bg-background",children:m.jsx(ISe,{className:"overflow-y-scroll md:overflow-y-hidden",children:e})})})]})}const _P=({name:e="default",handle:t="right",sidebarRef:n,minWidth:r=250,maxWidth:s=window.innerWidth*.5})=>{var x;const i=Ra(S=>S.setSidebarWidth(e)),[o,a]=w.useState(!1),[c,u]=w.useState(0),[f,h]=w.useState(((x=n.current)==null?void 0:x.offsetWidth)??0),p=S=>{var N;S.preventDefault(),a(!0),u(S.clientX),h(((N=n.current)==null?void 0:N.offsetWidth)??0)},y=S=>{if(!o)return;const N=t==="right"?S.clientX-c:c-S.clientX,_=CF(f+N,r,s);i(_)},v=()=>{a(!1)};return w.useEffect(()=>(o&&(window.addEventListener("mousemove",y),window.addEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v)}),[o,c,f,r,s]),m.jsx("div",{"data-shell":"sidebar-resize","data-active":o?1:void 0,className:"w-px h-full hidden md:flex bg-muted after:transition-colors relative after:absolute after:inset-0 after:-left-px after:w-[2px] select-none data-[active]:after:bg-sky-400 data-[active]:cursor-col-resize hover:after:bg-sky-400 hover:cursor-col-resize after:z-2",onMouseDown:p,style:{touchAction:"none"}})};function r0({children:e,className:t,...n}){return m.jsx("h2",{...n,className:Ue("text-lg dark:font-bold font-semibold select-text",t),children:e})}function An({children:e,right:t,className:n,scrollable:r,sticky:s}={}){return m.jsxs("div",{className:Ue("flex flex-row h-14 flex-shrink-0 py-2 pl-5 pr-3 border-muted border-b items-center justify-between bg-muted/10",s&&"sticky top-0 bottom-10 z-10",n),children:[m.jsx("div",{className:Ue("",r&&"overflow-x-scroll overflow-y-visible app-scrollbar"),children:typeof e=="string"?m.jsx(r0,{children:e}):e}),t&&!r&&m.jsx("div",{className:"flex flex-row gap-2.5",children:t}),t&&r&&m.jsxs("div",{className:"flex flex-row sticky z-10 right-0 h-full",children:[m.jsx("div",{className:"h-full w-5 bg-gradient-to-l from-background"}),m.jsx("div",{className:"flex flex-row gap-2.5 bg-background",children:t})]})]})}const ns=({children:e,as:t,className:n,disabled:r=!1,...s})=>{const i=t||"a";return m.jsx(i,{...s,className:Ue("flex flex-row px-4 items-center gap-2 h-12",!r&&"cursor-pointer rounded-md [&.active]:bg-primary/10 [&.active]:hover:bg-primary/15 [&.active]:font-medium hover:bg-primary/5 focus:bg-primary/5 link",r&&"opacity-50 cursor-not-allowed pointer-events-none",n),children:e})},MSe=({children:e,as:t,className:n,disabled:r=!1,active:s=!1,badge:i,...o})=>{const a=t||"a";return m.jsxs(a,{...o,className:Ue("hover:bg-primary/5 flex flex-row items-center justify-center gap-2.5 px-5 h-12 leading-none font-medium text-primary/80 rounded-tr-lg rounded-tl-lg",s?"bg-background hover:bg-background text-primary border border-muted border-b-0":"link",i&&"pr-4",n),children:[e,i?m.jsx("span",{className:"px-3 py-1 rounded-full font-mono bg-primary/5 text-sm leading-none",children:i}):null]})},kq=({title:e,items:t})=>m.jsx(An,{className:"mt-10 border-t pl-3 pb-0 items-end",children:m.jsxs("div",{className:"flex flex-row items-center gap-6 -mb-px",children:[e&&m.jsx(r0,{className:"pl-2 hidden md:block",children:e}),m.jsx("div",{className:"flex flex-row items-center gap-3",children:t==null?void 0:t.map(({label:n,...r},s)=>m.jsx(MSe,{...r,children:n},s))})]})});function ISe(e){const t=w.useRef(null),[n,r]=w.useState(0),[s,i]=w.useState(window.innerHeight);function o(){if(t.current){const a=t.current.getBoundingClientRect().top,c=window.innerHeight;r(a),i(c)}}return w.useEffect(()=>{o();const a=MT(o,500);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),m.jsx("div",{ref:t,style:{height:`${s-n}px`},...e,children:e.children})}function Zn({children:e,initialOffset:t=64}){const n=w.useRef(null),[r,s]=w.useState(t);function i(){if(n.current){const o=n.current.getBoundingClientRect().top;s(o)}}return w.useEffect(i,[]),typeof window<"u"&&window.addEventListener("resize",MT(i,500)),m.jsxs(cq,{style:{height:`calc(100dvh - ${r}px`},ref:n,children:[m.jsx(uq,{className:"w-full h-full",children:e}),m.jsx(Lx,{forceMount:!0,className:"flex select-none touch-none bg-transparent w-0.5",orientation:"vertical",children:m.jsx(Fx,{className:"flex-1 bg-primary/50"})}),m.jsx(Lx,{forceMount:!0,className:"flex select-none touch-none bg-muted flex-col h-0.5",orientation:"horizontal",children:m.jsx(Fx,{className:"flex-1 bg-primary/50 "})})]})}const O$=({title:e,open:t,toggle:n,ActiveIcon:r=oxe,children:s,renderHeaderRight:i})=>m.jsxs("div",{style:{minHeight:49},className:Ue("flex flex-col flex-animate overflow-hidden",t?"flex-open border-b border-b-muted":"flex-initial cursor-pointer hover:bg-primary/5"),children:[m.jsxs("div",{className:Ue("flex flex-row bg-muted/10 border-muted border-b h-14 py-4 pr-4 pl-2 items-center gap-2"),onClick:n,children:[m.jsx(Nt,{Icon:t?r:ixe,disabled:t}),m.jsx("h2",{className:"text-lg dark:font-bold font-semibold select-text",children:e}),m.jsx("div",{className:"flex flex-grow"}),i==null?void 0:i({open:t})]}),m.jsx("div",{className:Ue("overflow-y-scroll transition-all",t?" flex-grow":"h-0 opacity-0"),children:s})]}),Vx=({routePattern:e,identifier:t,...n})=>{const{active:r,toggle:s}=S$(e,t);return m.jsx(O$,{...n,open:r,toggle:s})},zO=({className:e,...t})=>m.jsx("hr",{...t,className:Ue("border-muted my-3",e)});function PSe(e){const t=e==="light",n={offset:2,transitionProps:{transition:"pop",duration:75}},r="!bg-muted/40 border-transparent disabled:bg-muted/50 disabled:text-primary/50 focus:!border-zinc-500";return{theme:{components:{Button:Xu.extend({vars:(s,i)=>({root:{"--button-height":"auto"}}),classNames:(s,i)=>({root:Ue("px-3 py-2 rounded-md h-auto")}),defaultProps:{size:"md",variant:t?"filled":"white"}}),Switch:Ka.extend({defaultProps:{size:"md",color:t?"dark":"blue"}}),Select:h1.extend({classNames:(s,i)=>({input:r,dropdown:`bknd-admin ${e} bg-background border-primary/20`}),defaultProps:{checkIconPosition:"right",comboboxProps:n}}),TagsInput:tT.extend({defaultProps:{comboboxProps:n}}),Radio:jo.extend({defaultProps:{classNames:{body:"items-center"}}}),TextInput:On.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),NumberInput:u1.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),Textarea:My.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),Modal:Ls.extend({classNames:(s,i)=>({...i.classNames,root:`bknd-admin ${e} ${i.className??""}`,content:"!bg-background !rounded-lg !select-none",overlay:"!backdrop-blur-sm"})}),Tabs:wn.extend({vars:(s,i)=>({root:{"--tabs-color":"border-primary"}})}),Menu:Os.extend({defaultProps:{offset:2},classNames:(s,i)=>({dropdown:"!rounded-lg !px-1",item:"!rounded-md !text-[14px]"})}),SegmentedControl:md.extend({classNames:(s,i)=>({root:t?"bg-primary/5":"bg-lightest/60",indicator:t?"bg-background":"bg-primary/15"})}),Notifications:Po.extend({classNames:(s,i)=>({notification:"-top-4 -right-4"})})},primaryColor:"dark",primaryShade:9},forceColorScheme:e}}const DSe="modulepreload",LSe=function(e){return"/"+e},CP={},s0=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(u=>{if(u=LSe(u),u in CP)return;CP[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":DSe,f||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),f)return new Promise((y,v)=>{p.addEventListener("load",y),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function Vc(){const{config:e,schema:t,actions:n,app:r}=xt(),s={config:{set:async a=>(console.log("--set",a),await n.set("auth",a,!0)?(await n.reload(),!0):!1)},roles:{add:async(a,c={})=>(console.log("add role",a,c),await n.add("auth",`roles.${a}`,c)),patch:async(a,c)=>(console.log("patch role",a,c),await n.patch("auth",`roles.${a}`,c)),delete:async a=>(console.log("delete role",a),window.confirm(`Are you sure you want to delete the role "${a}"?`)?await n.remove("auth",`roles.${a}`):!1)}},i=["system.access.admin","system.access.api","system.config.read","system.config.read.secrets","system.build"];return{$auth:{roles:{none:Object.keys(e.auth.roles??{}).length===0,minimum_permissions:i,has_admin:Object.entries(e.auth.roles??{}).some(([a,c])=>c.implicit_allow||i.every(u=>{var f;return(f=c.permissions)==null?void 0:f.includes(u)}))},routes:{settings:r.getSettingsPath(["auth"]),listUsers:r.getAbsolutePath("/data/"+ft.data.entity.list(e.auth.entity_name))}},config:e.auth,schema:t.auth,actions:s}}const FSe=({className:e,...t})=>m.jsx(xq,{...t,className:Ue("dark:text-amber-300 text-amber-700 cursor-help",e)}),BSe=({className:e,...t})=>m.jsx(xq,{...t,className:Ue("dark:text-red-300 text-red-700 cursor-help",e)}),nS={Warning:FSe,Err:BSe};function Wr(e=[]){w.useLayoutEffect(()=>{const t="BKND";document.title=[t,...e].join(" / ")})}function zSe({children:e}){const{config:t,$auth:n}=Vc();return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:n.routes.settings,children:m.jsx(Nt,{Icon:ym})}),children:"Auth"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsx(ns,{as:In,href:"/",children:"Overview"}),m.jsxs(ns,{as:In,href:n.routes.listUsers,disabled:!t.enabled,className:"justify-between",children:["Users",!t.enabled&&m.jsx(Pp,{title:"Auth is not enabled."})]}),m.jsxs(ns,{as:In,href:ft.auth.roles.list(),disabled:!t.enabled,className:"justify-between",children:["Roles & Permissions",t.enabled?n.roles.none?m.jsx(Pp,{title:"No roles defined."}):n.roles.has_admin?null:m.jsx(Pp,{title:"No admin role defined."}):m.jsx(Pp,{title:"Auth is not enabled."})]}),m.jsxs(ns,{as:In,href:ft.auth.strategies(),disabled:!t.enabled,className:"justify-between",children:["Strategies",!t.enabled&&m.jsx(Pp,{title:"Auth is not enabled."})]}),m.jsx(ns,{as:In,href:ft.auth.settings(),className:"justify-between",children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}const Pp=({title:e})=>m.jsx(nS.Warning,{title:e,className:"size-5 pointer-events-auto"}),rS=({visible:e=!0,title:t,message:n,className:r,children:s,...i})=>e?m.jsx("div",{...i,className:Ue("flex flex-row items-center p-4",r),children:m.jsxs("p",{children:[t&&m.jsxs("b",{children:[t,": "]}),n||s]})}):null,VSe=({className:e,...t})=>m.jsx(rS,{...t,className:Ue("bg-warning text-warning-foreground",e)}),USe=({className:e,...t})=>m.jsx(rS,{...t,className:Ue("bg-error text-error-foreground",e)}),qSe=({className:e,...t})=>m.jsx(rS,{...t,className:Ue("bg-success text-success-foreground",e)}),HSe=({className:e,...t})=>m.jsx(rS,{...t,className:Ue("bg-info text-info-foreground",e)}),So={Warning:VSe,Exception:USe,Success:qSe,Info:HSe};function WSe(){var y;const{app:e}=xt(),{config:{roles:t,strategies:n,entity_name:r,enabled:s}}=Vc(),i=r,a=((y=G1(v=>v.data.count(i),{enabled:s}).data)==null?void 0:y.count)??0,c=Object.keys(t??{}).length??0,u=Object.keys(n??{}).length??0,f=e.getAbsolutePath("/data/"+ft.data.entity.list(i)),h=ft.auth.roles.list(),p=ft.auth.strategies();return m.jsxs(m.Fragment,{children:[m.jsx(An,{children:"Overview"}),m.jsxs(Zn,{children:[m.jsx(So.Warning,{visible:!s,title:"Auth not enabled",message:"To use authentication features, please enable it in the settings."}),m.jsxs("div",{className:"flex flex-col md:flex-row flex-1 p-3 gap-3",children:[m.jsxs("div",{className:"flex flex-col border border-primary/20 self-stretch md:self-start",children:[m.jsxs("div",{className:"flex flex-row gap-3 py-3 px-4 border-b border-b-muted font-medium bg-muted items-center justify-between",children:["Getting started",m.jsx(Cq,{className:"size-5"})]}),m.jsx(rv,{title:"Enable authentication",done:s,to:ft.auth.settings()}),m.jsx(rv,{title:"Create Roles",done:c>0,to:h}),m.jsx(rv,{title:"Create an user",done:a>0,to:f}),m.jsx(rv,{title:"Enable a second strategy",done:u>1,to:p})]}),m.jsxs("div",{className:"grid xs:grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5 flex-grow",children:[m.jsx(s_,{title:"Users registered",value:s?a:0,actions:[{label:"View all",href:f},{label:"Add new",variant:"default",href:f}]}),m.jsx(s_,{title:"Roles",value:s?c:0,actions:[{label:"View all",href:h},{label:"Manage",variant:"default",href:h}]}),m.jsx(s_,{title:"Strategies enabled",value:s?u:0,actions:[{label:"View all",href:p},{label:"Manage",variant:"default",href:p}]})]})]})]})]})}const s_=({title:e,value:t,actions:n})=>m.jsxs("div",{className:"flex flex-col border border-muted h-auto self-start",children:[m.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-3.5 pb-4 border-b border-b-muted",children:[m.jsx("div",{children:m.jsx("span",{className:"opacity-50",children:e})}),m.jsx("div",{className:"text-4xl font-medium",children:t})]}),m.jsx("div",{className:"flex flex-row gap-3 p-3 justify-between",children:n.map((r,s)=>m.jsx(LO,{size:"small",variant:"ghost",href:"#",...r,children:r.label},s))})]}),rv=({title:e,done:t=!1,to:n})=>{const[r]=Dn();return m.jsx("div",{className:"flex border-b border-b-muted",children:m.jsxs("div",{className:yn("flex flex-1 flex-row gap-3 py-3 px-4",t&&"opacity-50"),children:[m.jsxs("div",{className:"flex flex-row flex-1 gap-3 items-center",children:[t?m.jsx(H1e,{className:"size-5"}):m.jsx(cSe,{className:"size-5"}),m.jsx("p",{className:yn("font-medium text-primary/80 leading-none",t?"line-through":""),children:e})]}),n&&m.jsx(Nt,{Icon:J1e,onClick:()=>r(n)})]})})},j$=w.createContext(null);j$.displayName="@mantine/modals/ModalsContext";function GSe(){const e=w.useContext(j$);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function YSe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:s=!0,closeOnCancel:i=!0,groupProps:o,onCancel:a,onConfirm:c,children:u}){const{cancel:f,confirm:h}=r,p=GSe(),y=x=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(x)),typeof a=="function"&&a(),i&&p.closeModal(e)},v=x=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(x)),typeof c=="function"&&c(),s&&p.closeModal(e)};return m.jsxs(m.Fragment,{children:[u&&m.jsx(Ve,{mb:"md",children:u}),m.jsxs(gA,{mt:u?0:"md",justify:"flex-end",...o,children:[m.jsx(Xu,{variant:"default",...t,onClick:y,children:(t==null?void 0:t.children)||f}),m.jsx(Xu,{...n,onClick:v,children:(n==null?void 0:n.children)||h})]})]})}const[JSe,A$]=sZ("mantine-modals"),XSe=e=>{const t=e.modalId||Wf();return A$("openContextModal")({...e,modalId:t}),t},KSe=A$("closeModal"),QSe=A$("closeAllModals"),Mq={closeAll:QSe};function OP(e,t){var n,r,s,i;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(i=(s=e.props).onClose)==null||i.call(s)}function ZSe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(i=>i.id===t.modalId);if(!r)return e;OP(r,t.canceled);const s=e.modals.filter(i=>i.id!==t.modalId);return{current:s[s.length-1]||e.current,modals:s}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{OP(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:s}=t,i=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...s}}:a.type==="context"?{...a,props:{...a.props,...s,innerProps:{...a.props.innerProps,...s.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&i.find(a=>a.id===r)||e.current;return{...e,modals:i,current:o}}default:return e}}function eEe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:o,cancelProps:a,confirmProps:c,groupProps:u,labels:f,...h}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:o,cancelProps:a,confirmProps:c,groupProps:u,labels:f},modalProps:{id:t,...h}}}function tEe({children:e,modalProps:t,labels:n,modals:r}){const[s,i]=w.useReducer(ZSe,{modals:[],current:null}),o=w.useRef(s);o.current=s;const a=w.useCallback(_=>{i({type:"CLOSE_ALL",canceled:_})},[o,i]),c=w.useCallback(({modalId:_,...C})=>{const j=_||Wf();return i({type:"OPEN",modal:{id:j,type:"content",props:C}}),j},[i]),u=w.useCallback(({modalId:_,...C})=>{const j=_||Wf();return i({type:"OPEN",modal:{id:j,type:"confirm",props:C}}),j},[i]),f=w.useCallback((_,{modalId:C,...j})=>{const A=C||Wf();return i({type:"OPEN",modal:{id:A,type:"context",props:j,ctx:_}}),A},[i]),h=w.useCallback((_,C)=>{i({type:"CLOSE",modalId:_,canceled:C})},[o,i]),p=w.useCallback(({modalId:_,...C})=>{i({type:"UPDATE",modalId:_,newProps:C})},[i]),y=w.useCallback(({modalId:_,...C})=>{i({type:"UPDATE",modalId:_,newProps:C})},[i]);JSe({openModal:c,openConfirmModal:u,openContextModal:({modal:_,...C})=>f(_,C),closeModal:h,closeContextModal:h,closeAllModals:a,updateModal:p,updateContextModal:y});const v={modalProps:t||{},modals:s.modals,openModal:c,openConfirmModal:u,openContextModal:f,closeModal:h,closeContextModal:h,closeAll:a,updateModal:p,updateContextModal:y},x=()=>{const _=o.current.current;switch(_==null?void 0:_.type){case"context":{const{innerProps:C,...j}=_.props,A=r[_.ctx];return{modalProps:j,content:m.jsx(A,{innerProps:C,context:v,id:_.id})}}case"confirm":{const{modalProps:C,confirmProps:j}=eEe(_.props);return{modalProps:C,content:m.jsx(YSe,{...j,id:_.id,labels:_.props.labels||n})}}case"content":{const{children:C,...j}=_.props;return{modalProps:j,content:C}}default:return{modalProps:{},content:null}}},{modalProps:S,content:N}=x();return m.jsxs(j$.Provider,{value:v,children:[m.jsx(Ls,{zIndex:eo("modal")+1,...t,...S,opened:s.modals.length>0,onClose:()=>{var _;return h((_=s.current)==null?void 0:_.id)},children:N}),e]})}function T$({context:e,id:t,innerProps:{content:n}}){return n}T$.defaultTitle=void 0;T$.modalProps={withCloseButton:!1,classNames:{size:"md",root:"bknd-admin",content:"text-center justify-center",title:"font-bold !text-md",body:"py-3 px-5 gap-4 flex flex-col"}};const nEe=e=>typeof e=="boolean"||e instanceof Boolean,rEe=e=>typeof e=="number"||e instanceof Number,sEe=e=>typeof e=="bigint"||e instanceof BigInt,Iq=e=>!!e&&e instanceof Date,iEe=e=>typeof e=="string"||e instanceof String,oEe=e=>Array.isArray(e),aEe=e=>typeof e=="object"&&e!==null,Pq=e=>!!e&&e instanceof Object&&typeof e=="function";function Ux(e,t){return t===void 0&&(t=!1),!e||t?`"${e}"`:e}function lEe(e,t,n){return n?JSON.stringify(e):t?`"${e}"`:e}function Dq(e){let{field:t,value:n,data:r,lastElement:s,openBracket:i,closeBracket:o,level:a,style:c,shouldExpandNode:u,clickToExpandNode:f,outerRef:h,beforeExpandChange:p}=e;const y=w.useRef(!1),[v,x]=w.useState(()=>u(a,n,t)),S=w.useRef(null);w.useEffect(()=>{y.current?x(u(a,n,t)):y.current=!0},[u]);const N=w.useId();if(r.length===0)return cEe({field:t,openBracket:i,closeBracket:o,lastElement:s,style:c});const _=v?c.collapseIcon:c.expandIcon,C=v?c.ariaLables.collapseJson:c.ariaLables.expandJson,j=a+1,A=r.length-1,$=F=>{v!==F&&(!p||p({level:a,value:n,field:t,newExpandValue:F}))&&x(F)},k=F=>{if(F.key==="ArrowRight"||F.key==="ArrowLeft")F.preventDefault(),$(F.key==="ArrowRight");else if(F.key==="ArrowUp"||F.key==="ArrowDown"){F.preventDefault();const z=F.key==="ArrowUp"?-1:1;if(!h.current)return;const L=h.current.querySelectorAll("[role=button]");let B=-1;for(let I=0;I<L.length;I++)if(L[I].tabIndex===0){B=I;break}if(B<0)return;const H=(B+z+L.length)%L.length;L[B].tabIndex=-1,L[H].tabIndex=0,L[H].focus()}},R=()=>{var F;$(!v);const z=S.current;if(!z)return;const L=(F=h.current)===null||F===void 0?void 0:F.querySelector('[role=button][tabindex="0"]');L&&(L.tabIndex=-1),z.tabIndex=0,z.focus()};return w.createElement("div",{className:c.basicChildStyle,role:"treeitem","aria-expanded":v,"aria-selected":void 0},w.createElement("span",{className:_,onClick:R,onKeyDown:k,role:"button","aria-label":C,"aria-expanded":v,"aria-controls":v?N:void 0,ref:S,tabIndex:a===0?0:-1}),(t||t==="")&&(f?w.createElement("span",{className:c.clickableLabel,onClick:R,onKeyDown:k},Ux(t,c.quotesForFieldNames),":"):w.createElement("span",{className:c.label},Ux(t,c.quotesForFieldNames),":")),w.createElement("span",{className:c.punctuation},i),v?w.createElement("ul",{id:N,role:"group",className:c.childFieldsContainer},r.map((F,z)=>w.createElement(Lq,{key:F[0]||z,field:F[0],value:F[1],style:c,lastElement:z===A,level:j,shouldExpandNode:u,clickToExpandNode:f,outerRef:h}))):w.createElement("span",{className:c.collapsedContent,onClick:R,onKeyDown:k}),w.createElement("span",{className:c.punctuation},o),!s&&w.createElement("span",{className:c.punctuation},","))}function cEe(e){let{field:t,openBracket:n,closeBracket:r,lastElement:s,style:i}=e;return w.createElement("div",{className:i.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||t==="")&&w.createElement("span",{className:i.label},Ux(t,i.quotesForFieldNames),":"),w.createElement("span",{className:i.punctuation},n),w.createElement("span",{className:i.punctuation},r),!s&&w.createElement("span",{className:i.punctuation},","))}function uEe(e){let{field:t,value:n,style:r,lastElement:s,shouldExpandNode:i,clickToExpandNode:o,level:a,outerRef:c,beforeExpandChange:u}=e;return Dq({field:t,value:n,lastElement:s||!1,level:a,openBracket:"{",closeBracket:"}",style:r,shouldExpandNode:i,clickToExpandNode:o,data:Object.keys(n).map(f=>[f,n[f]]),outerRef:c,beforeExpandChange:u})}function dEe(e){let{field:t,value:n,style:r,lastElement:s,level:i,shouldExpandNode:o,clickToExpandNode:a,outerRef:c,beforeExpandChange:u}=e;return Dq({field:t,value:n,lastElement:s||!1,level:i,openBracket:"[",closeBracket:"]",style:r,shouldExpandNode:o,clickToExpandNode:a,data:n.map(f=>[void 0,f]),outerRef:c,beforeExpandChange:u})}function fEe(e){let{field:t,value:n,style:r,lastElement:s}=e,i,o=r.otherValue;return n===null?(i="null",o=r.nullValue):n===void 0?(i="undefined",o=r.undefinedValue):iEe(n)?(i=lEe(n,!r.noQuotesForStringValues,r.stringifyStringValues),o=r.stringValue):nEe(n)?(i=n?"true":"false",o=r.booleanValue):rEe(n)?(i=n.toString(),o=r.numberValue):sEe(n)?(i=`${n.toString()}n`,o=r.numberValue):Iq(n)?i=n.toISOString():Pq(n)?i="function() { }":i=n.toString(),w.createElement("div",{className:r.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||t==="")&&w.createElement("span",{className:r.label},Ux(t,r.quotesForFieldNames),":"),w.createElement("span",{className:o},i),!s&&w.createElement("span",{className:r.punctuation},","))}function Lq(e){const t=e.value;return oEe(t)?w.createElement(dEe,Object.assign({},e)):aEe(t)&&!Iq(t)&&!Pq(t)?w.createElement(uEe,Object.assign({},e)):w.createElement(fEe,Object.assign({},e))}var Tr={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const hEe={collapseJson:"collapse JSON",expandJson:"expand JSON"},jP={container:Tr["container-light"],basicChildStyle:Tr["basic-element-style"],childFieldsContainer:Tr["child-fields-container"],label:Tr["label-light"],clickableLabel:Tr["clickable-label-light"],nullValue:Tr["value-null-light"],undefinedValue:Tr["value-undefined-light"],stringValue:Tr["value-string-light"],booleanValue:Tr["value-boolean-light"],numberValue:Tr["value-number-light"],otherValue:Tr["value-other-light"],punctuation:Tr["punctuation-light"],collapseIcon:Tr["collapse-icon-light"],expandIcon:Tr["expand-icon-light"],collapsedContent:Tr["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:hEe,stringifyStringValues:!1},mEe=()=>!0,pEe=e=>{let{data:t,style:n=jP,shouldExpandNode:r=mEe,clickToExpandNode:s=!1,beforeExpandChange:i,...o}=e;const a=w.useRef(null);return w.createElement("div",Object.assign({"aria-label":"JSON view"},o,{className:n.container,ref:a,role:"tree"}),w.createElement(Lq,{value:t,style:{...jP,...n},lastElement:!0,level:0,shouldExpandNode:r,clickToExpandNode:s,outerRef:a,beforeExpandChange:i}))};let bm=class extends w.Component{constructor(n){super(n);K(this,"resetError",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1,error:void 0}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){const s=this.props.suppressError?"warn":"error";console[s]("ErrorBoundary caught an error:",n,r)}renderFallback(){var n;return this.props.fallback?typeof this.props.fallback=="function"?this.props.fallback({error:this.state.error,resetError:this.resetError}):m.jsx(AP,{children:this.props.fallback}):m.jsx(AP,{children:((n=this.state.error)==null?void 0:n.message)??"Unknown error"})}render(){if(this.state.hasError)return this.renderFallback();if(this.props.suppressError)try{return this.props.children}catch{return this.renderFallback()}return this.props.children}};const AP=({children:e})=>m.jsx("div",{className:"bg-red-700 text-white py-1 px-2 rounded-md leading-tight font-mono",children:e}),gEe={basicChildStyle:"pl-5 ml-1 border-l border-muted hover:border-primary/20",container:"ml-[-10px]",label:"text-primary/90 font-bold font-mono mr-2",stringValue:"text-emerald-600 dark:text-emerald-500 font-mono select-text text-wrap whitespace-wrap break-words",numberValue:"text-sky-500 dark:text-sky-400 font-mono select-text",nullValue:"text-zinc-400 font-mono",undefinedValue:"text-zinc-400 font-mono",otherValue:"text-zinc-400 font-mono",booleanValue:"text-orange-500 dark:text-orange-400 font-mono",punctuation:"text-zinc-400 font-bold font-mono m-0.5",collapsedContent:"text-zinc-400 font-mono after:content-['...']",collapseIcon:"text-zinc-400 font-mono font-bold text-lg after:content-['▾'] mr-1.5",expandIcon:"text-zinc-400 font-mono font-bold text-lg after:content-['▸'] mr-1.5",noQuotesForStringValues:!1},fs=({json:e,title:t,expand:n=0,showSize:r=!1,showCopy:s=!1,copyIconProps:i={},className:o})=>{const a=r?e?JSON.stringify(e).length:0:void 0,c=aT.fileSize(a??0),u=a||t||s;function f(){var h;(h=navigator.clipboard)==null||h.writeText(JSON.stringify(e,null,2))}return m.jsxs("div",{className:Ue("bg-primary/5 py-3 relative overflow-hidden",o),children:[u&&m.jsxs("div",{className:"absolute right-4 top-3 font-mono text-zinc-400 flex flex-row gap-2 items-center",children:[(t||a!==void 0)&&m.jsxs("div",{className:"flex flex-row",children:[t&&m.jsx("span",{children:t})," ",a!==void 0&&m.jsxs("span",{children:["(",c,")"]})]}),s&&m.jsx("div",{children:m.jsx(Nt,{Icon:Eq,onClick:f,...i})})]}),m.jsx(bm,{children:m.jsx(pEe,{data:e,shouldExpandNode:h=>h<n,style:gEe})})]})},yEe=w.forwardRef(({tabs:e,...t},n)=>{const r=Object.fromEntries(Object.entries(e).filter(([o,a])=>a.enabled!==!1)),[s,i]=w.useState(t.selected??Object.keys(r)[0]);return w.useImperativeHandle(n,()=>({setSelected:i})),m.jsxs("div",{className:"flex flex-col bg-primary/5 rounded-md flex-shrink-0",children:[m.jsx("div",{className:"flex flex-row gap-4 border-b px-3 border-primary/10 min-w-0",children:Object.keys(r).map(o=>m.jsx("button",{type:"button",className:Ue("flex flex-row text-sm cursor-pointer py-3 pt-3.5 px-1 border-b border-transparent -mb-px transition-opacity flex-shrink-0",s===o?"border-primary":"opacity-50 hover:opacity-70"),onClick:()=>i(o),children:m.jsx("span",{className:"font-mono leading-none truncate",children:o})},o))}),m.jsx(fs,{className:"bg-transparent overflow-x-auto",...t,...r[s],title:void 0})]})}),bEe=w.forwardRef(({classNames:e,children:t,opened:n,closeOnClickOutside:r=!1,...s},i)=>{const[o,{open:a,close:c}]=Qh(n);return w.useImperativeHandle(i,()=>({open:a,close:c})),m.jsx(Ls,{withCloseButton:!1,padding:0,size:"xl",opened:o,...s,closeOnClickOutside:r,onClose:c,classNames:{...e,root:"bknd-admin",content:"rounded-lg select-none"},children:t})}),bu=({path:e,onClose:t})=>m.jsxs("div",{className:"py-3 px-5 font-bold bg-lightest flex flex-row justify-between items-center sticky top-0 left-0 right-0 z-10 border-none",children:[m.jsx("div",{className:"flex flex-row gap-1",children:e.map((n,r)=>{const s=r+1===e.length;return m.jsxs(w.Fragment,{children:[m.jsx("span",{className:Ue("",!s&&"opacity-70"),children:n},r),!s&&m.jsx("span",{className:"opacity-40",children:"/"})]},r)})}),m.jsx(Nt,{Icon:C$,onClick:t})]}),Nd=({children:e,className:t})=>m.jsxs(cq,{className:Ue("flex flex-col min-h-96",t),style:{maxHeight:"calc(80vh)"},children:[m.jsx(uq,{className:"w-full h-full",children:m.jsx("div",{className:"py-3 px-5 gap-4 flex flex-col",children:e})}),m.jsx(Lx,{forceMount:!0,className:"flex select-none touch-none bg-transparent w-0.5",orientation:"vertical",children:m.jsx(Fx,{className:"flex-1 bg-primary/50"})}),m.jsx(Lx,{forceMount:!0,className:"flex select-none touch-none bg-muted flex-col h-0.5",orientation:"horizontal",children:m.jsx(Fx,{className:"flex-1 bg-primary/50 "})})]}),_d=({next:e,prev:t,nextLabel:n="Next",prevLabel:r="Back",debug:s})=>{const[i,o]=Qh(!1);return m.jsx("div",{className:"flex flex-col border-t border-t-muted",children:m.jsxs("div",{className:"flex flex-row justify-between items-center py-3 px-4",children:[m.jsx("div",{children:s&&m.jsxs(as,{position:"right-start",shadow:"md",opened:i,classNames:{dropdown:"!px-1 !pr-2.5 !py-2 text-sm"},children:[m.jsx(as.Target,{children:m.jsx(Nt,{onClick:o.toggle,Icon:gU,variant:i?"default":"ghost"})}),m.jsx(as.Dropdown,{children:m.jsx(fs,{json:s,expand:6,className:"p-0"})})]})}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(ot,{className:"w-24 justify-center",...t,children:r}),m.jsx(ot,{className:"w-24 justify-center",variant:"primary",...e,children:n})]})]})})},Fq=w.createContext(void 0);function Bq({children:e,initialPath:t=[],initialState:n={},lastBack:r}){const[s,i]=w.useState(n),[o,a]=w.useState(t),c=w.Children.toArray(e).filter(p=>p.props.disabled!==!0);function u(){o.length===0?r==null||r():a(p=>p.slice(0,-1))}const f=p=>()=>{a(y=>[...y,p])},h=c.find(p=>p.props.id===o[o.length-1])||c[0];return m.jsx(Fq.Provider,{value:{nextStep:f,stepBack:u,state:s,path:o,setState:i,close:r},children:h})}function Cd(){return w.useContext(Fq)}function vu({children:e,disabled:t=!1,path:n=[],id:r,...s}){return m.jsx("div",{...s,children:e})}function Fs(){const{config:e,app:t,schema:n,actions:r}=xt(),s=en(e.data.entities??{},(a,c)=>JT(c,a)),i={entity:{add:async(a,c)=>{const u=Un(GT,c,{skipMark:!0,forceParse:!0});return await r.add("data",`entities.${a}`,u)},patch:a=>{if(!s[a])throw new Error(`Entity "${a}" not found`);return{config:async u=>await r.overwrite("data",`entities.${a}.config`,u),fields:xEe(r,a)}}},relations:{add:async a=>{const c=crypto.randomUUID(),u=Un(nn(YT),a,{skipMark:!0,forceParse:!0});return await r.add("data",`relations.${c}`,u)}}};return{$data:{entity:a=>s[a],modals:vEe,system:a=>{var c;return{any:((c=s[a])==null?void 0:c.type)==="system",users:a===e.auth.entity_name,media:a===e.media.entity_name}}},entities:s,relations:t.relations,config:e.data,schema:n.data,actions:i}}const vEe={createAny:()=>Nr.open(Nr.ids.dataCreate,{}),createEntity:()=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","entity"],initialState:{action:"entity"}}),createRelation:e=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","relation"],initialState:{action:"relation",relations:{create:[{source:e,type:"n:1"}]}}}),createMedia:e=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","template-media"],initialState:{action:"template-media",initial:{entity:e}}})};function xEe(e,t){return{add:async(n,r)=>{const s=Un(WT,r,{skipMark:!0,forceParse:!0});return await e.add("data",`entities.${t}.fields.${n}`,s)},patch:()=>null,set:async n=>{try{const r=Un(IV,n,{skipMark:!0,forceParse:!0}),s=await e.overwrite("data",`entities.${t}.fields`,r)}catch(r){console.error("error",r),r instanceof S1?alert("Error updating fields: "+r.firstToString()):alert("An error occured, check console. There will be nice error handling soon.")}}}}function wEe(){var h,p,y;const{stepBack:e,state:t,close:n}=Cd(),[r,s]=w.useState([]),[i,o]=w.useState(!1),a=Fs(),c=xt(),u=[];(h=t.entities)!=null&&h.create&&u.push(...t.entities.create.map(v=>({action:"add",Icon:nxe,type:"Entity",name:v.name,json:v,run:async()=>await a.actions.entity.add(v.name,v)}))),(p=t.fields)!=null&&p.create&&u.push(...t.fields.create.map(v=>({action:"add",Icon:u$,type:"Field",name:v.name,json:v,run:async()=>await a.actions.entity.patch(v.entity).fields.add(v.name,v.field)}))),(y=t.relations)!=null&&y.create&&u.push(...t.relations.create.map(v=>({action:"add",Icon:d$,type:"Relation",name:`${v.source} -> ${v.target} (${v.type})`,json:v,run:async()=>await a.actions.relations.add(v)})));async function f(){o(!0);for(const v of u)try{const x=await v.run();if(s(S=>[...S,x]),x!==!0)break}catch(x){s(S=>[...S,x.message])}}return w.useEffect(()=>{console.log("states",r,u,r.length,u.length,r.every(v=>v===!0)),u.length===r.length&&r.every(v=>v===!0)?c.actions.reload().then(n):o(!1)},[r]),m.jsxs(m.Fragment,{children:[m.jsxs(Nd,{children:[m.jsx("div",{children:'This is what will be created. Please confirm by clicking "Next".'}),m.jsx("div",{className:"flex flex-col gap-1",children:u.map((v,x)=>m.jsx(SEe,{...v,state:r[x]},x))})]}),m.jsx(_d,{nextLabel:"Create",next:{onClick:f,disabled:i},prev:{onClick:e,disabled:i},debug:{state:t}})]})}const SEe=({Icon:e,type:t,name:n,json:r,state:s,action:i,initialExpanded:o=!1})=>{const[a,c]=Qh(o),u=typeof s<"u"&&s!==!0,f=s===!0;return m.jsxs("div",{className:Ue("flex flex-col border border-muted rounded bg-background mb-2",u&&"bg-red-500/20",f&&"bg-green-500/20"),children:[m.jsxs("div",{className:"flex flex-row gap-4 px-2 py-2 items-center",children:[m.jsx("div",{className:"flex flex-row items-center p-1 bg-primary/5 rounded",children:m.jsx(e,{className:"w-6 h-6"})}),m.jsxs("div",{className:"flex flex-row flex-grow gap-5",children:[m.jsx(i_,{type:"action",name:i}),m.jsx(i_,{type:"type",name:t}),m.jsx(i_,{type:"name",name:n})]}),r&&m.jsx(Nt,{Icon:fxe,variant:a?"default":"ghost",onClick:c.toggle})]}),r&&a&&m.jsx("div",{className:"flex flex-col border-t border-t-muted",children:m.jsx(fs,{json:r,expand:8,className:"text-sm"})}),u&&typeof s=="string"&&m.jsx("div",{className:"text-sm text-red-500",children:s})]})},i_=({type:e,name:t})=>m.jsxs("div",{className:"flex flex-row text-sm font-mono gap-2",children:[m.jsx("div",{className:"opacity-50",children:li(e)}),m.jsx("div",{className:"font-semibold",children:t})]});var i0=e=>e.type==="checkbox",Au=e=>e instanceof Date,Fr=e=>e==null;const zq=e=>typeof e=="object";var Pn=e=>!Fr(e)&&!Array.isArray(e)&&zq(e)&&!Au(e),Vq=e=>Pn(e)&&e.target?i0(e.target)?e.target.checked:e.target.value:e,EEe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Uq=(e,t)=>e.has(EEe(t)),NEe=e=>{const t=e.constructor&&e.constructor.prototype;return Pn(t)&&t.hasOwnProperty("isPrototypeOf")},$$=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!($$&&(e instanceof Blob||r))&&(n||Pn(e)))if(t=n?[]:{},!n&&!NEe(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=cn(e[s]));else return e;return t}var sS=e=>/^\w*$/.test(e),dn=e=>e===void 0,iS=e=>Array.isArray(e)?e.filter(Boolean):[],R$=e=>iS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(e,t,n)=>{if(!t||!Pn(e))return n;const r=(sS(t)?[t]:R$(t)).reduce((s,i)=>Fr(s)?s:s[i],e);return dn(r)||r===e?dn(e[t])?n:e[t]:r},Ns=e=>typeof e=="boolean",Bt=(e,t,n)=>{let r=-1;const s=sS(t)?[t]:R$(t),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let c=n;if(r!==o){const u=e[a];c=Pn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=c,e=e[a]}};const qx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ei={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},aa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qq=je.createContext(null);qq.displayName="HookFormContext";const oS=()=>je.useContext(qq);var Hq=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ei.all&&(t._proxyFormState[o]=!r||ei.all),n&&(n[o]=!0),e[o]}});return s};const aS=typeof window<"u"?je.useLayoutEffect:je.useEffect;function _Ee(e){const t=oS(),{control:n=t.control,disabled:r,name:s,exact:i}=e||{},[o,a]=je.useState(n._formState),c=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return aS(()=>n._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&a({...n._formState,...u})}}),[s,r,i]),je.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),je.useMemo(()=>Hq(o,n,c.current,!1),[o,n])}var Eo=e=>typeof e=="string",Wq=(e,t,n,r,s)=>Eo(e)?(r&&t.watch.add(e),Le(n,e,s)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),Le(n,i))):(r&&(t.watchAll=!0),n),VO=e=>Fr(e)||!zq(e);function Ea(e,t,n=new WeakSet){if(VO(e)||VO(t))return e===t;if(Au(e)&&Au(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Au(o)&&Au(a)||Pn(o)&&Pn(a)||Array.isArray(o)&&Array.isArray(a)?!Ea(o,a,n):o!==a)return!1}}return!0}function CEe(e){const t=oS(),{control:n=t.control,name:r,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},c=je.useRef(s),u=je.useRef(a),f=je.useRef(void 0);u.current=a;const h=je.useMemo(()=>n._getWatch(r,c.current),[n,r]),[p,y]=je.useState(u.current?u.current(h):h);return aS(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!i){const x=Wq(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const S=u.current(x);Ea(S,f.current)||(y(S),f.current=S)}else y(x)}}}),[n,i,r,o]),je.useEffect(()=>n._removeUnmounted()),p}function Od(e){const t=oS(),{name:n,disabled:r,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=Uq(s._names.array,n),c=je.useMemo(()=>Le(s._formValues,n,Le(s._defaultValues,n,o)),[s,n,o]),u=CEe({control:s,name:n,defaultValue:c,exact:!0}),f=_Ee({control:s,name:n,exact:!0}),h=je.useRef(e),p=je.useRef(s.register(n,{...e.rules,value:u,...Ns(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const y=je.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Le(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Le(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Le(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Le(f.validatingFields,n)},error:{enumerable:!0,get:()=>Le(f.errors,n)}}),[f,n]),v=je.useCallback(_=>p.current.onChange({target:{value:Vq(_),name:n},type:qx.CHANGE}),[n]),x=je.useCallback(()=>p.current.onBlur({target:{value:Le(s._formValues,n),name:n},type:qx.BLUR}),[n,s._formValues]),S=je.useCallback(_=>{const C=Le(s._fields,n);C&&_&&(C._f.ref={focus:()=>_.focus&&_.focus(),select:()=>_.select&&_.select(),setCustomValidity:j=>_.setCustomValidity(j),reportValidity:()=>_.reportValidity()})},[s._fields,n]),N=je.useMemo(()=>({name:n,value:u,...Ns(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:v,onBlur:x,ref:S}),[n,r,f.disabled,v,x,S,u]);return je.useEffect(()=>{const _=s._options.shouldUnregister||i;s.register(n,{...h.current.rules,...Ns(h.current.disabled)?{disabled:h.current.disabled}:{}});const C=(j,A)=>{const $=Le(s._fields,j);$&&$._f&&($._f.mount=A)};if(C(n,!0),_){const j=cn(Le(s._options.defaultValues,n));Bt(s._defaultValues,n,j),dn(Le(s._formValues,n))&&Bt(s._formValues,n,j)}return!a&&s.register(n),()=>{(a?_&&!s._state.action:_)?s.unregister(n):C(n,!1)}},[n,s,a,i]),je.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),je.useMemo(()=>({field:N,formState:f,fieldState:y}),[N,f,y])}var OEe=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},ss=e=>Array.isArray(e)?e:[e],TP=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},Lr=e=>Pn(e)&&!Object.keys(e).length,k$=e=>e.type==="file",Li=e=>typeof e=="function",Hx=e=>{if(!$$)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Gq=e=>e.type==="select-multiple",M$=e=>e.type==="radio",jEe=e=>M$(e)||i0(e),o_=e=>Hx(e)&&e.isConnected;function AEe(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=dn(e)?r++:e[t[r++]];return e}function TEe(e){for(const t in e)if(e.hasOwnProperty(t)&&!dn(e[t]))return!1;return!0}function kn(e,t){const n=Array.isArray(t)?t:sS(t)?[t]:R$(t),r=n.length===1?e:AEe(e,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Pn(r)&&Lr(r)||Array.isArray(r)&&TEe(r))&&kn(e,n.slice(0,-1)),e}var Yq=e=>{for(const t in e)if(Li(e[t]))return!0;return!1};function Wx(e,t={}){const n=Array.isArray(e);if(Pn(e)||n)for(const r in e)Array.isArray(e[r])||Pn(e[r])&&!Yq(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Wx(e[r],t[r])):Fr(e[r])||(t[r]=!0);return t}function Jq(e,t,n){const r=Array.isArray(e);if(Pn(e)||r)for(const s in e)Array.isArray(e[s])||Pn(e[s])&&!Yq(e[s])?dn(t)||VO(n[s])?n[s]=Array.isArray(e[s])?Wx(e[s],[]):{...Wx(e[s])}:Jq(e[s],Fr(t)?{}:t[s],n[s]):n[s]=!Ea(e[s],t[s]);return n}var Dp=(e,t)=>Jq(e,t,Wx(t));const $P={value:!1,isValid:!1},RP={value:!0,isValid:!0};var Xq=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!dn(e[0].attributes.value)?dn(e[0].value)||e[0].value===""?RP:{value:e[0].value,isValid:!0}:RP:$P}return $P},Kq=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>dn(e)?e:t?e===""?NaN:e&&+e:n&&Eo(e)?new Date(e):r?r(e):e;const kP={isValid:!1,value:null};var Qq=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,kP):kP;function MP(e){const t=e.ref;return k$(t)?t.files:M$(t)?Qq(e.refs).value:Gq(t)?[...t.selectedOptions].map(({value:n})=>n):i0(t)?Xq(e.refs).value:Kq(dn(t.value)?e.ref.value:t.value,e)}var $Ee=(e,t,n,r)=>{const s={};for(const i of e){const o=Le(t,i);o&&Bt(s,i,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Gx=e=>e instanceof RegExp,Lp=e=>dn(e)?e:Gx(e)?e.source:Pn(e)?Gx(e.value)?e.value.source:e.value:e,Vf=e=>({isOnSubmit:!e||e===ei.onSubmit,isOnBlur:e===ei.onBlur,isOnChange:e===ei.onChange,isOnAll:e===ei.all,isOnTouch:e===ei.onTouched});const IP="AsyncFunction";var REe=e=>!!e&&!!e.validate&&!!(Li(e.validate)&&e.validate.constructor.name===IP||Pn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===IP)),kEe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),UO=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Xf=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const i=Le(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Xf(a,t))break}else if(Pn(a)&&Xf(a,t))break}}};function PP(e,t,n){const r=Le(e,n);if(r||sS(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=Le(t,i),a=Le(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var MEe=(e,t,n,r)=>{n(e);const{name:s,...i}=e;return Lr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||ei.all))},IEe=(e,t,n)=>!e||!t||e===t||ss(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),PEe=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,DEe=(e,t)=>!iS(Le(e,t)).length&&kn(e,t),Zq=(e,t,n)=>{const r=ss(Le(e,n));return Bt(r,"root",t[n]),Bt(e,n,r),e},Vv=e=>Eo(e);function DP(e,t,n="validate"){if(Vv(e)||Array.isArray(e)&&e.every(Vv)||Ns(e)&&!e)return{type:n,message:Vv(e)?e:"",ref:t}}var jf=e=>Pn(e)&&!Gx(e)?e:{value:e,message:""},qO=async(e,t,n,r,s,i)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:f,min:h,max:p,pattern:y,validate:v,name:x,valueAsNumber:S,mount:N}=e._f,_=Le(n,x);if(!N||t.has(x))return{};const C=a?a[0]:o,j=B=>{s&&C.reportValidity&&(C.setCustomValidity(Ns(B)?"":B||""),C.reportValidity())},A={},$=M$(o),k=i0(o),R=$||k,F=(S||k$(o))&&dn(o.value)&&dn(_)||Hx(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,z=OEe.bind(null,x,r,A),L=(B,H,I,V=aa.maxLength,T=aa.minLength)=>{const D=B?H:I;A[x]={type:B?V:T,message:D,ref:o,...z(B?V:T,D)}};if(i?!Array.isArray(_)||!_.length:c&&(!R&&(F||Fr(_))||Ns(_)&&!_||k&&!Xq(a).isValid||$&&!Qq(a).isValid)){const{value:B,message:H}=Vv(c)?{value:!!c,message:c}:jf(c);if(B&&(A[x]={type:aa.required,message:H,ref:C,...z(aa.required,H)},!r))return j(H),A}if(!F&&(!Fr(h)||!Fr(p))){let B,H;const I=jf(p),V=jf(h);if(!Fr(_)&&!isNaN(_)){const T=o.valueAsNumber||_&&+_;Fr(I.value)||(B=T>I.value),Fr(V.value)||(H=T<V.value)}else{const T=o.valueAsDate||new Date(_),D=M=>new Date(new Date().toDateString()+" "+M),P=o.type=="time",q=o.type=="week";Eo(I.value)&&_&&(B=P?D(_)>D(I.value):q?_>I.value:T>new Date(I.value)),Eo(V.value)&&_&&(H=P?D(_)<D(V.value):q?_<V.value:T<new Date(V.value))}if((B||H)&&(L(!!B,I.message,V.message,aa.max,aa.min),!r))return j(A[x].message),A}if((u||f)&&!F&&(Eo(_)||i&&Array.isArray(_))){const B=jf(u),H=jf(f),I=!Fr(B.value)&&_.length>+B.value,V=!Fr(H.value)&&_.length<+H.value;if((I||V)&&(L(I,B.message,H.message),!r))return j(A[x].message),A}if(y&&!F&&Eo(_)){const{value:B,message:H}=jf(y);if(Gx(B)&&!_.match(B)&&(A[x]={type:aa.pattern,message:H,ref:o,...z(aa.pattern,H)},!r))return j(H),A}if(v){if(Li(v)){const B=await v(_,n),H=DP(B,C);if(H&&(A[x]={...H,...z(aa.validate,H.message)},!r))return j(H.message),A}else if(Pn(v)){let B={};for(const H in v){if(!Lr(B)&&!r)break;const I=DP(await v[H](_,n),C,H);I&&(B={...I,...z(H,I.message)},j(I.message),r&&(A[x]=B))}if(!Lr(B)&&(A[x]={ref:C,...B},!r))return A}}return j(!0),A};const LEe={mode:ei.onSubmit,reValidateMode:ei.onChange,shouldFocusError:!0};function FEe(e={}){let t={...LEe,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Li(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Pn(t.defaultValues)||Pn(t.values)?cn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:cn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...f};const p={array:TP(),state:TP()},y=t.criteriaMode===ei.all,v=G=>re=>{clearTimeout(u),u=setTimeout(G,re)},x=async G=>{if(!t.disabled&&(f.isValid||h.isValid||G)){const re=t.resolver?Lr((await k()).errors):await F(r,!0);re!==n.isValid&&p.state.next({isValid:re})}},S=(G,re)=>{!t.disabled&&(f.isValidating||f.validatingFields||h.isValidating||h.validatingFields)&&((G||Array.from(a.mount)).forEach(te=>{te&&(re?Bt(n.validatingFields,te,re):kn(n.validatingFields,te))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Lr(n.validatingFields)}))},N=(G,re=[],te,he,se=!0,ne=!0)=>{if(he&&te&&!t.disabled){if(o.action=!0,ne&&Array.isArray(Le(r,G))){const ce=te(Le(r,G),he.argA,he.argB);se&&Bt(r,G,ce)}if(ne&&Array.isArray(Le(n.errors,G))){const ce=te(Le(n.errors,G),he.argA,he.argB);se&&Bt(n.errors,G,ce),DEe(n.errors,G)}if((f.touchedFields||h.touchedFields)&&ne&&Array.isArray(Le(n.touchedFields,G))){const ce=te(Le(n.touchedFields,G),he.argA,he.argB);se&&Bt(n.touchedFields,G,ce)}(f.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Dp(s,i)),p.state.next({name:G,isDirty:L(G,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Bt(i,G,re)},_=(G,re)=>{Bt(n.errors,G,re),p.state.next({errors:n.errors})},C=G=>{n.errors=G,p.state.next({errors:n.errors,isValid:!1})},j=(G,re,te,he)=>{const se=Le(r,G);if(se){const ne=Le(i,G,dn(te)?Le(s,G):te);dn(ne)||he&&he.defaultChecked||re?Bt(i,G,re?ne:MP(se._f)):I(G,ne),o.mount&&x()}},A=(G,re,te,he,se)=>{let ne=!1,ce=!1;const xe={name:G};if(!t.disabled){if(!te||he){(f.isDirty||h.isDirty)&&(ce=n.isDirty,n.isDirty=xe.isDirty=L(),ne=ce!==xe.isDirty);const Ee=Ea(Le(s,G),re);ce=!!Le(n.dirtyFields,G),Ee?kn(n.dirtyFields,G):Bt(n.dirtyFields,G,!0),xe.dirtyFields=n.dirtyFields,ne=ne||(f.dirtyFields||h.dirtyFields)&&ce!==!Ee}if(te){const Ee=Le(n.touchedFields,G);Ee||(Bt(n.touchedFields,G,te),xe.touchedFields=n.touchedFields,ne=ne||(f.touchedFields||h.touchedFields)&&Ee!==te)}ne&&se&&p.state.next(xe)}return ne?xe:{}},$=(G,re,te,he)=>{const se=Le(n.errors,G),ne=(f.isValid||h.isValid)&&Ns(re)&&n.isValid!==re;if(t.delayError&&te?(c=v(()=>_(G,te)),c(t.delayError)):(clearTimeout(u),c=null,te?Bt(n.errors,G,te):kn(n.errors,G)),(te?!Ea(se,te):se)||!Lr(he)||ne){const ce={...he,...ne&&Ns(re)?{isValid:re}:{},errors:n.errors,name:G};n={...n,...ce},p.state.next(ce)}},k=async G=>{S(G,!0);const re=await t.resolver(i,t.context,$Ee(G||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S(G),re},R=async G=>{const{errors:re}=await k(G);if(G)for(const te of G){const he=Le(re,te);he?Bt(n.errors,te,he):kn(n.errors,te)}else n.errors=re;return re},F=async(G,re,te={valid:!0})=>{for(const he in G){const se=G[he];if(se){const{_f:ne,...ce}=se;if(ne){const xe=a.array.has(ne.name),Ee=se._f&&REe(se._f);Ee&&f.validatingFields&&S([he],!0);const We=await qO(se,a.disabled,i,y,t.shouldUseNativeValidation&&!re,xe);if(Ee&&f.validatingFields&&S([he]),We[ne.name]&&(te.valid=!1,re))break;!re&&(Le(We,ne.name)?xe?Zq(n.errors,We,ne.name):Bt(n.errors,ne.name,We[ne.name]):kn(n.errors,ne.name))}!Lr(ce)&&await F(ce,re,te)}}return te.valid},z=()=>{for(const G of a.unMount){const re=Le(r,G);re&&(re._f.refs?re._f.refs.every(te=>!o_(te)):!o_(re._f.ref))&&le(G)}a.unMount=new Set},L=(G,re)=>!t.disabled&&(G&&re&&Bt(i,G,re),!Ea(M(),s)),B=(G,re,te)=>Wq(G,a,{...o.mount?i:dn(re)?s:Eo(G)?{[G]:re}:re},te,re),H=G=>iS(Le(o.mount?i:s,G,t.shouldUnregister?Le(s,G,[]):[])),I=(G,re,te={})=>{const he=Le(r,G);let se=re;if(he){const ne=he._f;ne&&(!ne.disabled&&Bt(i,G,Kq(re,ne)),se=Hx(ne.ref)&&Fr(re)?"":re,Gq(ne.ref)?[...ne.ref.options].forEach(ce=>ce.selected=se.includes(ce.value)):ne.refs?i0(ne.ref)?ne.refs.forEach(ce=>{(!ce.defaultChecked||!ce.disabled)&&(Array.isArray(se)?ce.checked=!!se.find(xe=>xe===ce.value):ce.checked=se===ce.value||!!se)}):ne.refs.forEach(ce=>ce.checked=ce.value===se):k$(ne.ref)?ne.ref.value="":(ne.ref.value=se,ne.ref.type||p.state.next({name:G,values:cn(i)})))}(te.shouldDirty||te.shouldTouch)&&A(G,se,te.shouldTouch,te.shouldDirty,!0),te.shouldValidate&&q(G)},V=(G,re,te)=>{for(const he in re){if(!re.hasOwnProperty(he))return;const se=re[he],ne=G+"."+he,ce=Le(r,ne);(a.array.has(G)||Pn(se)||ce&&!ce._f)&&!Au(se)?V(ne,se,te):I(ne,se,te)}},T=(G,re,te={})=>{const he=Le(r,G),se=a.array.has(G),ne=cn(re);Bt(i,G,ne),se?(p.array.next({name:G,values:cn(i)}),(f.isDirty||f.dirtyFields||h.isDirty||h.dirtyFields)&&te.shouldDirty&&p.state.next({name:G,dirtyFields:Dp(s,i),isDirty:L(G,ne)})):he&&!he._f&&!Fr(ne)?V(G,ne,te):I(G,ne,te),UO(G,a)&&p.state.next({...n,name:G}),p.state.next({name:o.mount?G:void 0,values:cn(i)})},D=async G=>{o.mount=!0;const re=G.target;let te=re.name,he=!0;const se=Le(r,te),ne=Ee=>{he=Number.isNaN(Ee)||Au(Ee)&&isNaN(Ee.getTime())||Ea(Ee,Le(i,te,Ee))},ce=Vf(t.mode),xe=Vf(t.reValidateMode);if(se){let Ee,We;const Vt=re.type?MP(se._f):Vq(G),wt=G.type===qx.BLUR||G.type===qx.FOCUS_OUT,io=!kEe(se._f)&&!t.resolver&&!Le(n.errors,te)&&!se._f.deps||PEe(wt,Le(n.touchedFields,te),n.isSubmitted,xe,ce),Ut=UO(te,a,wt);Bt(i,te,Vt),wt?(se._f.onBlur&&se._f.onBlur(G),c&&c(0)):se._f.onChange&&se._f.onChange(G);const hn=A(te,Vt,wt),ur=!Lr(hn)||Ut;if(!wt&&p.state.next({name:te,type:G.type,values:cn(i)}),io)return(f.isValid||h.isValid)&&(t.mode==="onBlur"?wt&&x():wt||x()),ur&&p.state.next({name:te,...Ut?{}:hn});if(!wt&&Ut&&p.state.next({...n}),t.resolver){const{errors:xi}=await k([te]);if(ne(Vt),he){const Bs=PP(n.errors,r,te),oo=PP(xi,r,Bs.name||te);Ee=oo.error,te=oo.name,We=Lr(xi)}}else S([te],!0),Ee=(await qO(se,a.disabled,i,y,t.shouldUseNativeValidation))[te],S([te]),ne(Vt),he&&(Ee?We=!1:(f.isValid||h.isValid)&&(We=await F(r,!0)));he&&(se._f.deps&&q(se._f.deps),$(te,We,Ee,hn))}},P=(G,re)=>{if(Le(n.errors,re)&&G.focus)return G.focus(),1},q=async(G,re={})=>{let te,he;const se=ss(G);if(t.resolver){const ne=await R(dn(G)?G:se);te=Lr(ne),he=G?!se.some(ce=>Le(ne,ce)):te}else G?(he=(await Promise.all(se.map(async ne=>{const ce=Le(r,ne);return await F(ce&&ce._f?{[ne]:ce}:ce)}))).every(Boolean),!(!he&&!n.isValid)&&x()):he=te=await F(r);return p.state.next({...!Eo(G)||(f.isValid||h.isValid)&&te!==n.isValid?{}:{name:G},...t.resolver||!G?{isValid:te}:{},errors:n.errors}),re.shouldFocus&&!he&&Xf(r,P,G?se:a.mount),he},M=G=>{const re={...o.mount?i:s};return dn(G)?re:Eo(G)?Le(re,G):G.map(te=>Le(re,te))},W=(G,re)=>({invalid:!!Le((re||n).errors,G),isDirty:!!Le((re||n).dirtyFields,G),error:Le((re||n).errors,G),isValidating:!!Le(n.validatingFields,G),isTouched:!!Le((re||n).touchedFields,G)}),X=G=>{G&&ss(G).forEach(re=>kn(n.errors,re)),p.state.next({errors:G?n.errors:{}})},Q=(G,re,te)=>{const he=(Le(r,G,{_f:{}})._f||{}).ref,se=Le(n.errors,G)||{},{ref:ne,message:ce,type:xe,...Ee}=se;Bt(n.errors,G,{...Ee,...re,ref:he}),p.state.next({name:G,errors:n.errors,isValid:!1}),te&&te.shouldFocus&&he&&he.focus&&he.focus()},oe=(G,re)=>Li(G)?p.state.subscribe({next:te=>"values"in te&&G(B(void 0,re),te)}):B(G,re,!0),ae=G=>p.state.subscribe({next:re=>{IEe(G.name,re.name,G.exact)&&MEe(re,G.formState||f,Ce,G.reRenderRoot)&&G.callback({values:{...i},...n,...re,defaultValues:s})}}).unsubscribe,fe=G=>(o.mount=!0,h={...h,...G.formState},ae({...G,formState:h})),le=(G,re={})=>{for(const te of G?ss(G):a.mount)a.mount.delete(te),a.array.delete(te),re.keepValue||(kn(r,te),kn(i,te)),!re.keepError&&kn(n.errors,te),!re.keepDirty&&kn(n.dirtyFields,te),!re.keepTouched&&kn(n.touchedFields,te),!re.keepIsValidating&&kn(n.validatingFields,te),!t.shouldUnregister&&!re.keepDefaultValue&&kn(s,te);p.state.next({values:cn(i)}),p.state.next({...n,...re.keepDirty?{isDirty:L()}:{}}),!re.keepIsValid&&x()},ue=({disabled:G,name:re})=>{(Ns(G)&&o.mount||G||a.disabled.has(re))&&(G?a.disabled.add(re):a.disabled.delete(re))},ve=(G,re={})=>{let te=Le(r,G);const he=Ns(re.disabled)||Ns(t.disabled);return Bt(r,G,{...te||{},_f:{...te&&te._f?te._f:{ref:{name:G}},name:G,mount:!0,...re}}),a.mount.add(G),te?ue({disabled:Ns(re.disabled)?re.disabled:t.disabled,name:G}):j(G,!0,re.value),{...he?{disabled:re.disabled||t.disabled}:{},...t.progressive?{required:!!re.required,min:Lp(re.min),max:Lp(re.max),minLength:Lp(re.minLength),maxLength:Lp(re.maxLength),pattern:Lp(re.pattern)}:{},name:G,onChange:D,onBlur:D,ref:se=>{if(se){ve(G,re),te=Le(r,G);const ne=dn(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,ce=jEe(ne),xe=te._f.refs||[];if(ce?xe.find(Ee=>Ee===ne):ne===te._f.ref)return;Bt(r,G,{_f:{...te._f,...ce?{refs:[...xe.filter(o_),ne,...Array.isArray(Le(s,G))?[{}]:[]],ref:{type:ne.type,name:G}}:{ref:ne}}}),j(G,!1,void 0,ne)}else te=Le(r,G,{}),te._f&&(te._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(Uq(a.array,G)&&o.action)&&a.unMount.add(G)}}},_e=()=>t.shouldFocusError&&Xf(r,P,a.mount),ke=G=>{Ns(G)&&(p.state.next({disabled:G}),Xf(r,(re,te)=>{const he=Le(r,te);he&&(re.disabled=he._f.disabled||G,Array.isArray(he._f.refs)&&he._f.refs.forEach(se=>{se.disabled=he._f.disabled||G}))},0,!1))},Oe=(G,re)=>async te=>{let he;te&&(te.preventDefault&&te.preventDefault(),te.persist&&te.persist());let se=cn(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:ne,values:ce}=await k();n.errors=ne,se=cn(ce)}else await F(r);if(a.disabled.size)for(const ne of a.disabled)kn(se,ne);if(kn(n.errors,"root"),Lr(n.errors)){p.state.next({errors:{}});try{await G(se,te)}catch(ne){he=ne}}else re&&await re({...n.errors},te),_e(),setTimeout(_e);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Lr(n.errors)&&!he,submitCount:n.submitCount+1,errors:n.errors}),he)throw he},$e=(G,re={})=>{Le(r,G)&&(dn(re.defaultValue)?T(G,cn(Le(s,G))):(T(G,re.defaultValue),Bt(s,G,cn(re.defaultValue))),re.keepTouched||kn(n.touchedFields,G),re.keepDirty||(kn(n.dirtyFields,G),n.isDirty=re.defaultValue?L(G,cn(Le(s,G))):L()),re.keepError||(kn(n.errors,G),f.isValid&&x()),p.state.next({...n}))},Re=(G,re={})=>{const te=G?cn(G):s,he=cn(te),se=Lr(G),ne=se?s:he;if(re.keepDefaultValues||(s=te),!re.keepValues){if(re.keepDirtyValues){const ce=new Set([...a.mount,...Object.keys(Dp(s,i))]);for(const xe of Array.from(ce))Le(n.dirtyFields,xe)?Bt(ne,xe,Le(i,xe)):T(xe,Le(ne,xe))}else{if($$&&dn(G))for(const ce of a.mount){const xe=Le(r,ce);if(xe&&xe._f){const Ee=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(Hx(Ee)){const We=Ee.closest("form");if(We){We.reset();break}}}}if(re.keepFieldsRef)for(const ce of a.mount)T(ce,Le(ne,ce));else r={}}i=t.shouldUnregister?re.keepDefaultValues?cn(s):{}:cn(ne),p.array.next({values:{...ne}}),p.state.next({values:{...ne}})}a={mount:re.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:se?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!Ea(G,s)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:se?{}:re.keepDirtyValues?re.keepDefaultValues&&i?Dp(s,i):n.dirtyFields:re.keepDefaultValues&&G?Dp(s,G):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(G,re)=>Re(Li(G)?G(i):G,re),et=(G,re={})=>{const te=Le(r,G),he=te&&te._f;if(he){const se=he.refs?he.refs[0]:he.ref;se.focus&&(se.focus(),re.shouldSelect&&Li(se.select)&&se.select())}},Ce=G=>{n={...n,...G}},Ie={control:{register:ve,unregister:le,getFieldState:W,handleSubmit:Oe,setError:Q,_subscribe:ae,_runSchema:k,_focusError:_e,_getWatch:B,_getDirty:L,_setValid:x,_setFieldArray:N,_setDisabledField:ue,_setErrors:C,_getFieldArray:H,_reset:Re,_resetDefaultValues:()=>Li(t.defaultValues)&&t.defaultValues().then(G=>{qe(G,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:ke,_subjects:p,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(G){o=G},get _defaultValues(){return s},get _names(){return a},set _names(G){a=G},get _formState(){return n},get _options(){return t},set _options(G){t={...t,...G}}},subscribe:fe,trigger:q,register:ve,handleSubmit:Oe,watch:oe,setValue:T,getValues:M,reset:qe,resetField:$e,clearErrors:X,unregister:le,setError:Q,setFocus:et,getFieldState:W};return{...Ie,formControl:Ie}}var Pl=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},a_=(e,t,n={})=>n.shouldFocus||dn(n.shouldFocus)?n.focusName||`${e}.${dn(n.focusIndex)?t:n.focusIndex}.`:"",l_=(e,t)=>[...e,...ss(t)],c_=e=>Array.isArray(e)?e.map(()=>{}):void 0;function u_(e,t,n){return[...e.slice(0,t),...ss(n),...e.slice(t)]}var d_=(e,t,n)=>Array.isArray(e)?(dn(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],f_=(e,t)=>[...ss(t),...ss(e)];function BEe(e,t){let n=0;const r=[...e];for(const s of t)r.splice(s-n,1),n++;return iS(r).length?r:[]}var h_=(e,t)=>dn(t)?[]:BEe(e,ss(t).sort((n,r)=>n-r)),m_=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},LP=(e,t,n)=>(e[t]=n,e);function zEe(e){const t=oS(),{control:n=t.control,name:r,keyName:s="id",shouldUnregister:i,rules:o}=e,[a,c]=je.useState(n._getFieldArray(r)),u=je.useRef(n._getFieldArray(r).map(Pl)),f=je.useRef(a),h=je.useRef(!1);f.current=a,n._names.array.add(r),je.useMemo(()=>o&&n.register(r,o),[n,o,r]),aS(()=>n._subjects.array.subscribe({next:({values:A,name:$})=>{if($===r||!$){const k=Le(A,r);Array.isArray(k)&&(c(k),u.current=k.map(Pl))}}}).unsubscribe,[n,r]);const p=je.useCallback(A=>{h.current=!0,n._setFieldArray(r,A)},[n,r]),y=(A,$)=>{const k=ss(cn(A)),R=l_(n._getFieldArray(r),k);n._names.focus=a_(r,R.length-1,$),u.current=l_(u.current,k.map(Pl)),p(R),c(R),n._setFieldArray(r,R,l_,{argA:c_(A)})},v=(A,$)=>{const k=ss(cn(A)),R=f_(n._getFieldArray(r),k);n._names.focus=a_(r,0,$),u.current=f_(u.current,k.map(Pl)),p(R),c(R),n._setFieldArray(r,R,f_,{argA:c_(A)})},x=A=>{const $=h_(n._getFieldArray(r),A);u.current=h_(u.current,A),p($),c($),!Array.isArray(Le(n._fields,r))&&Bt(n._fields,r,void 0),n._setFieldArray(r,$,h_,{argA:A})},S=(A,$,k)=>{const R=ss(cn($)),F=u_(n._getFieldArray(r),A,R);n._names.focus=a_(r,A,k),u.current=u_(u.current,A,R.map(Pl)),p(F),c(F),n._setFieldArray(r,F,u_,{argA:A,argB:c_($)})},N=(A,$)=>{const k=n._getFieldArray(r);m_(k,A,$),m_(u.current,A,$),p(k),c(k),n._setFieldArray(r,k,m_,{argA:A,argB:$},!1)},_=(A,$)=>{const k=n._getFieldArray(r);d_(k,A,$),d_(u.current,A,$),p(k),c(k),n._setFieldArray(r,k,d_,{argA:A,argB:$},!1)},C=(A,$)=>{const k=cn($),R=LP(n._getFieldArray(r),A,k);u.current=[...R].map((F,z)=>!F||z===A?Pl():u.current[z]),p(R),c([...R]),n._setFieldArray(r,R,LP,{argA:A,argB:k},!0,!1)},j=A=>{const $=ss(cn(A));u.current=$.map(Pl),p([...$]),c([...$]),n._setFieldArray(r,[...$],k=>k,{},!0,!1)};return je.useEffect(()=>{if(n._state.action=!1,UO(r,n._names)&&n._subjects.state.next({...n._formState}),h.current&&(!Vf(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Vf(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([r]).then(A=>{const $=Le(A.errors,r),k=Le(n._formState.errors,r);(k?!$&&k.type||$&&(k.type!==$.type||k.message!==$.message):$&&$.type)&&($?Bt(n._formState.errors,r,$):kn(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const A=Le(n._fields,r);A&&A._f&&!(Vf(n._options.reValidateMode).isOnSubmit&&Vf(n._options.mode).isOnSubmit)&&qO(A,n._names.disabled,n._formValues,n._options.criteriaMode===ei.all,n._options.shouldUseNativeValidation,!0).then($=>!Lr($)&&n._subjects.state.next({errors:Zq(n._formState.errors,$,r)}))}n._subjects.state.next({name:r,values:cn(n._formValues)}),n._names.focus&&Xf(n._fields,(A,$)=>{if(n._names.focus&&$.startsWith(n._names.focus)&&A.focus)return A.focus(),1}),n._names.focus="",n._setValid(),h.current=!1},[a,r,n]),je.useEffect(()=>(!Le(n._formValues,r)&&n._setFieldArray(r),()=>{const A=($,k)=>{const R=Le(n._fields,$);R&&R._f&&(R._f.mount=k)};n._options.shouldUnregister||i?n.unregister(r):A(r,!1)}),[r,n,s,i]),{swap:je.useCallback(N,[p,r,n]),move:je.useCallback(_,[p,r,n]),prepend:je.useCallback(v,[p,r,n]),append:je.useCallback(y,[p,r,n]),remove:je.useCallback(x,[p,r,n]),insert:je.useCallback(S,[p,r,n]),update:je.useCallback(C,[p,r,n]),replace:je.useCallback(j,[p,r,n]),fields:je.useMemo(()=>a.map((A,$)=>({...A,[s]:u.current[$]||Pl()})),[a,s])}}function nl(e={}){const t=je.useRef(void 0),n=je.useRef(void 0),[r,s]=je.useState({isDirty:!1,isValidating:!1,isLoading:Li(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Li(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Li(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=FEe(e);t.current={...a,formState:r}}const i=t.current.control;return i._options=e,aS(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),je.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),je.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),je.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),je.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),je.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),je.useEffect(()=>{e.values&&!Ea(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),je.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Hq(r,i),t.current}const FP=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Le(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},eH=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?FP(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>FP(s,n,e))}},VEe=(e,t)=>{t.shouldUseNativeValidation&&eH(e,t);const n={};for(const r in e){const s=Le(t.fields,r),i=Object.assign(e[r]||{},{ref:s&&s.ref});if(UEe(t.names||Object.keys(e),r)){const o=Object.assign({},Le(n,r));Bt(o,"root",i),Bt(n,r,o)}else Bt(n,r,i)}return n},UEe=(e,t)=>{const n=BP(t);return e.some(r=>BP(r).match(`^${n}\\.\\d+`))};function BP(e){return e.replace(/\]|\[/g,"")}function qEe(e){var t;if((t=e.path)!=null&&t.length){let n="";for(const r of e.path){const s=typeof r=="object"?r.key:r;if(typeof s=="string"||typeof s=="number")n?n+=`.${s}`:n+=s;else return null}return n}return null}function HO(){return HO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HO.apply(null,arguments)}function rl(e,t){return t===void 0&&(t={}),function(n,r,s){try{var i=function(){if(o.issues){var c=function(u,f){for(var h={},p=0;p<u.length;p++){var y=u[p],v=qEe(y);if(v&&(h[v]||(h[v]={message:y.message,type:""}),f)){var x,S=h[v].types||{};h[v].types=HO({},S,((x={})[Object.keys(S).length]=y.message,x))}}return h}(o.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all");return{values:{},errors:VEe(c,s)}}return s.shouldUseNativeValidation&&eH({},s),{values:t.raw?Object.assign({},n):o.value,errors:{}}},o=e["~standard"].validate(n),a=function(){if(o instanceof Promise)return Promise.resolve(o).then(function(c){o=c})}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(c){return Promise.reject(c)}}}const Yx=ze({...GT.properties,name:ge()}),HEe=nn([ge({enum:["entity","relation","media"]}),ge({pattern:"^template-"})]),WEe=ze({entity:ge(),name:ge(),field:Sn(WT)});He({action:HEe,initial:Ji().optional(),entities:ze({create:Sn(Yx).optional()}).optional(),relations:ze({create:Sn(nn(YT)).optional()}).optional(),fields:ze({create:Sn(WEe).optional()}).optional()});const GEe=ze({name:Yx.properties.name,config:Yx.properties.config.partial().optional()});function YEe(){var h,p,y,v,x,S,N,_,C;const e=zw(),{nextStep:t,stepBack:n,state:r,setState:s}=Cd(),{register:i,handleSubmit:o,formState:a,watch:c,control:u}=nl({mode:"onChange",resolver:rl(GF(GEe)),defaultValues:((p=(h=r.entities)==null?void 0:h.create)==null?void 0:p[0])??{}});function f(j){console.log("onSubmit",j),s(A=>{var k,R;const $=(R=(k=A.entities)==null?void 0:k.create)==null?void 0:R[0];return $&&$.name!==j.name?{...A,entities:{create:[{...j,fields:$.fields}]}}:{...A,entities:{create:[j]}}}),a.isValid&&(console.log("would go next"),t("entity-fields")())}return m.jsx(m.Fragment,{children:m.jsxs("form",{onSubmit:o(f),ref:e,children:[m.jsxs(Nd,{children:[m.jsx("input",{type:"hidden",...i("type"),defaultValue:"regular"}),m.jsx(On,{"data-autofocus":!0,required:!0,error:(y=a.errors.name)==null?void 0:y.message,...i("name"),placeholder:"posts",size:"md",label:"What's the name of the entity?",description:"Use plural form, and all lowercase. It will be used as the database table."}),m.jsx(On,{...i("config.name"),error:(x=(v=a.errors.config)==null?void 0:v.name)==null?void 0:x.message,placeholder:"Posts",size:"md",label:"How should it be called?",description:"Use plural form. This will be used to display in the UI."}),m.jsx(On,{...i("config.name_singular"),error:(N=(S=a.errors.config)==null?void 0:S.name_singular)==null?void 0:N.message,placeholder:"Post",size:"md",label:"What's the singular form of it?"}),m.jsx(My,{placeholder:"This is a post (optional)",error:(C=(_=a.errors.config)==null?void 0:_.description)==null?void 0:C.message,...i("config.description"),size:"md",label:"Description"})]}),m.jsx(_d,{next:{type:"submit",disabled:!a.isValid},prev:{onClick:n},debug:{state:r}})]})})}function ka({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(h1,{value:a,onChange:async p=>{await c({...new Event("change",{bubbles:!0,cancelable:!0}),target:{value:p,name:u.name}}),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}function hg({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(Ka,{value:a,checked:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}const JEe=w.lazy(()=>s0(()=>import("./JsonSchemaForm-BHzkvUIy.js"),__vite__mapDeps([0,1])).then(e=>({default:e.JsonSchemaForm}))),vm=w.forwardRef((e,t)=>m.jsx(w.Suspense,{children:m.jsx(JEe,{ref:t,...e})}));function Mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var XEe=typeof Symbol=="function"&&Symbol.observable||"@@observable",zP=XEe,VP=()=>Math.random().toString(36).substring(7).split("").join("."),KEe={INIT:`@@redux/INIT${VP()}`,REPLACE:`@@redux/REPLACE${VP()}`},UP=KEe;function QEe(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tH(e,t,n){if(typeof e!="function")throw new Error(Mr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mr(1));return n(tH)(e,t)}let r=e,s=t,i=new Map,o=i,a=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((S,N)=>{o.set(N,S)}))}function f(){if(c)throw new Error(Mr(3));return s}function h(S){if(typeof S!="function")throw new Error(Mr(4));if(c)throw new Error(Mr(5));let N=!0;u();const _=a++;return o.set(_,S),function(){if(N){if(c)throw new Error(Mr(6));N=!1,u(),o.delete(_),i=null}}}function p(S){if(!QEe(S))throw new Error(Mr(7));if(typeof S.type>"u")throw new Error(Mr(8));if(typeof S.type!="string")throw new Error(Mr(17));if(c)throw new Error(Mr(9));try{c=!0,s=r(s,S)}finally{c=!1}return(i=o).forEach(_=>{_()}),S}function y(S){if(typeof S!="function")throw new Error(Mr(10));r=S,p({type:UP.REPLACE})}function v(){const S=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Mr(11));function _(){const j=N;j.next&&j.next(f())}return _(),{unsubscribe:S(_)}},[zP](){return this}}}return p({type:UP.INIT}),{dispatch:p,subscribe:h,getState:f,replaceReducer:y,[zP]:v}}function qP(e,t){return function(...n){return t(e.apply(this,n))}}function HP(e,t){if(typeof e=="function")return qP(e,t);if(typeof e!="object"||e===null)throw new Error(Mr(16));const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=qP(s,t))}return n}function nH(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ZEe(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(Mr(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},a=e.map(c=>c(o));return i=nH(...a)(s.dispatch),{...s,dispatch:i}}}var p_={exports:{}},g_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP;function e2e(){if(WP)return g_;WP=1;var e=Xh();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return g_.useSyncExternalStoreWithSelector=function(c,u,f,h,p){var y=s(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=o(function(){function S(A){if(!N){if(N=!0,_=A,A=h(A),p!==void 0&&v.hasValue){var $=v.value;if(p($,A))return C=$}return C=A}if($=C,n(_,A))return $;var k=h(A);return p!==void 0&&p($,k)?(_=A,$):(_=A,C=k)}var N=!1,_,C,j=f===void 0?null:f;return[function(){return S(u())},j===null?void 0:function(){return S(j())}]},[u,f,h,p]);var x=r(c,y[0],y[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},g_}var GP;function t2e(){return GP||(GP=1,p_.exports=e2e()),p_.exports}t2e();var n2e=w.version.startsWith("19"),r2e=Symbol.for(n2e?"react.transitional.element":"react.element"),s2e=Symbol.for("react.portal"),i2e=Symbol.for("react.fragment"),o2e=Symbol.for("react.strict_mode"),a2e=Symbol.for("react.profiler"),l2e=Symbol.for("react.consumer"),c2e=Symbol.for("react.context"),rH=Symbol.for("react.forward_ref"),u2e=Symbol.for("react.suspense"),d2e=Symbol.for("react.suspense_list"),I$=Symbol.for("react.memo"),f2e=Symbol.for("react.lazy"),h2e=rH,m2e=I$;function p2e(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case r2e:switch(e=e.type,e){case i2e:case a2e:case o2e:case u2e:case d2e:return e;default:switch(e=e&&e.$$typeof,e){case c2e:case rH:case f2e:case I$:return e;case l2e:return e;default:return t}}case s2e:return t}}}function g2e(e){return p2e(e)===I$}function y2e(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let a=!1,c,u,f,h,p;function y(_,C){return c=_,u=C,f=e(c,u),h=t(r,u),p=n(f,h,u),a=!0,p}function v(){return f=e(c,u),t.dependsOnOwnProps&&(h=t(r,u)),p=n(f,h,u),p}function x(){return e.dependsOnOwnProps&&(f=e(c,u)),t.dependsOnOwnProps&&(h=t(r,u)),p=n(f,h,u),p}function S(){const _=e(c,u),C=!o(_,f);return f=_,C&&(p=n(f,h,u)),p}function N(_,C){const j=!i(C,u),A=!s(_,c,C,u);return c=_,u=C,j&&A?v():j?x():A?S():p}return function(C,j){return a?N(C,j):y(C,j)}}function b2e(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=t(e,s),o=n(e,s),a=r(e,s);return y2e(i,o,a,e,s)}function v2e(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...i)=>t(s(...i)))}return n}function WO(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function YP(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function sH(e,t){return function(r,{displayName:s}){const i=function(a,c){return i.dependsOnOwnProps?i.mapToProps(a,c):i.mapToProps(a,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(a,c){i.mapToProps=e,i.dependsOnOwnProps=YP(e);let u=i(a,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=YP(u),u=i(a,c)),u},i}}function P$(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function x2e(e){return e&&typeof e=="object"?WO(t=>v2e(e,t)):e?typeof e=="function"?sH(e):P$(e,"mapDispatchToProps"):WO(t=>({dispatch:t}))}function w2e(e){return e?typeof e=="function"?sH(e):P$(e,"mapStateToProps"):WO(()=>({}))}function S2e(e,t,n){return{...n,...e,...t}}function E2e(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,o;return function(c,u,f){const h=e(c,u,f);return i?s(h,o)||(o=h):(i=!0,o=h),o}}}function N2e(e){return e?typeof e=="function"?E2e(e):P$(e,"mergeProps"):()=>S2e}function _2e(e){e()}function C2e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){_2e(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var JP={notify(){},get:()=>[]};function iH(e,t){let n,r=JP,s=0,i=!1;function o(x){f();const S=r.subscribe(x);let N=!1;return()=>{N||(N=!0,S(),h())}}function a(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return i}function f(){s++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=C2e())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=JP)}function p(){i||(i=!0,f())}function y(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return v}var O2e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j2e=O2e(),A2e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",T2e=A2e(),$2e=()=>j2e||T2e?w.useLayoutEffect:w.useEffect,Jx=$2e();function XP(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function y_(e,t){if(XP(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!XP(e[n[s]],t[n[s]]))return!1;return!0}var R2e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},k2e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},M2e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},I2e={[h2e]:M2e,[m2e]:oH};function KP(e){return g2e(e)?oH:I2e[e.$$typeof]||R2e}var P2e=Object.defineProperty,D2e=Object.getOwnPropertyNames,QP=Object.getOwnPropertySymbols,L2e=Object.getOwnPropertyDescriptor,F2e=Object.getPrototypeOf,ZP=Object.prototype;function GO(e,t){if(typeof t!="string"){if(ZP){const i=F2e(t);i&&i!==ZP&&GO(e,i)}let n=D2e(t);QP&&(n=n.concat(QP(t)));const r=KP(e),s=KP(t);for(let i=0;i<n.length;++i){const o=n[i];if(!k2e[o]&&!(s&&s[o])&&!(r&&r[o])){const a=L2e(t,o);try{P2e(e,o,a)}catch{}}}}return e}var b_=Symbol.for("react-redux-context"),v_=typeof globalThis<"u"?globalThis:{};function B2e(){if(!w.createContext)return{};const e=v_[b_]??(v_[b_]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var aH=B2e(),z2e=[null,null];function V2e(e,t,n){Jx(()=>e(...t),n)}function U2e(e,t,n,r,s,i){e.current=r,n.current=!1,s.current&&(s.current=null,i())}function q2e(e,t,n,r,s,i,o,a,c,u,f){if(!e)return()=>{};let h=!1,p=null;const y=()=>{if(h||!a.current)return;const x=t.getState();let S,N;try{S=r(x,s.current)}catch(_){N=_,p=_}N||(p=null),S===i.current?o.current||u():(i.current=S,c.current=S,o.current=!0,f())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function H2e(e,t){return e===t}function W2e(e,t,n,{pure:r,areStatesEqual:s=H2e,areOwnPropsEqual:i=y_,areStatePropsEqual:o=y_,areMergedPropsEqual:a=y_,forwardRef:c=!1,context:u=aH}={}){const f=u,h=w2e(e),p=x2e(t),y=N2e(n),v=!!e;return S=>{const N=S.displayName||S.name||"Component",_=`Connect(${N})`,C={shouldHandleStateChanges:v,displayName:_,wrappedComponentName:N,WrappedComponent:S,initMapStateToProps:h,initMapDispatchToProps:p,initMergeProps:y,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:a};function j(k){const[R,F,z]=w.useMemo(()=>{const{reactReduxForwardedRef:Oe,...$e}=k;return[k.context,Oe,$e]},[k]),L=w.useMemo(()=>{let Oe=f;return R!=null&&R.Consumer,Oe},[R,f]),B=w.useContext(L),H=!!k.store&&!!k.store.getState&&!!k.store.dispatch,I=!!B&&!!B.store,V=H?k.store:B.store,T=I?B.getServerState:V.getState,D=w.useMemo(()=>b2e(V.dispatch,C),[V]),[P,q]=w.useMemo(()=>{if(!v)return z2e;const Oe=iH(V,H?void 0:B.subscription),$e=Oe.notifyNestedSubs.bind(Oe);return[Oe,$e]},[V,H,B]),M=w.useMemo(()=>H?B:{...B,subscription:P},[H,B,P]),W=w.useRef(void 0),X=w.useRef(z),Q=w.useRef(void 0),oe=w.useRef(!1),ae=w.useRef(!1),fe=w.useRef(void 0);Jx(()=>(ae.current=!0,()=>{ae.current=!1}),[]);const le=w.useMemo(()=>()=>Q.current&&z===X.current?Q.current:D(V.getState(),z),[V,z]),ue=w.useMemo(()=>$e=>P?q2e(v,V,P,D,X,W,oe,ae,Q,q,$e):()=>{},[P]);V2e(U2e,[X,W,oe,z,Q,q]);let ve;try{ve=w.useSyncExternalStore(ue,le,T?()=>D(T(),z):le)}catch(Oe){throw fe.current&&(Oe.message+=`
The error may be correlated with this previous error:
${fe.current.stack}

`),Oe}Jx(()=>{fe.current=void 0,Q.current=void 0,W.current=ve});const _e=w.useMemo(()=>w.createElement(S,{...ve,ref:F}),[F,S,ve]);return w.useMemo(()=>v?w.createElement(L.Provider,{value:M},_e):_e,[L,_e,M])}const $=w.memo(j);if($.WrappedComponent=S,$.displayName=j.displayName=_,c){const R=w.forwardRef(function(z,L){return w.createElement($,{...z,reactReduxForwardedRef:L})});return R.displayName=_,R.WrappedComponent=S,GO(R,S)}return GO($,S)}}var lH=W2e;function G2e(e){const{children:t,context:n,serverState:r,store:s}=e,i=w.useMemo(()=>{const c=iH(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),o=w.useMemo(()=>s.getState(),[s]);Jx(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const a=n||aH;return w.createElement(a.Provider,{value:i},t)}var Y2e=G2e,J2e="Invariant failed";function X2e(e,t){throw new Error(J2e)}var Ui=function(t){var n=t.top,r=t.right,s=t.bottom,i=t.left,o=r-i,a=s-n,c={top:n,right:r,bottom:s,left:i,width:o,height:a,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return c},D$=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},eD=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},K2e=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},x_={top:0,right:0,bottom:0,left:0},L$=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?x_:r,i=t.border,o=i===void 0?x_:i,a=t.padding,c=a===void 0?x_:a,u=Ui(D$(n,s)),f=Ui(eD(n,o)),h=Ui(eD(f,c));return{marginBox:u,borderBox:Ui(n),paddingBox:f,contentBox:h,margin:s,border:o,padding:c}},Js=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&X2e(),s},Q2e=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Xx=function(t,n){var r=t.borderBox,s=t.border,i=t.margin,o=t.padding,a=K2e(r,n);return L$({borderBox:a,border:s,margin:i,padding:o})},Kx=function(t,n){return n===void 0&&(n=Q2e()),Xx(t,n)},cH=function(t,n){var r={top:Js(n.marginTop),right:Js(n.marginRight),bottom:Js(n.marginBottom),left:Js(n.marginLeft)},s={top:Js(n.paddingTop),right:Js(n.paddingRight),bottom:Js(n.paddingBottom),left:Js(n.paddingLeft)},i={top:Js(n.borderTopWidth),right:Js(n.borderRightWidth),bottom:Js(n.borderBottomWidth),left:Js(n.borderLeftWidth)};return L$({borderBox:t,margin:r,padding:s,border:i})},uH=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return cH(n,r)},Qg=function(t){var n=[],r=null,s=function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function dH(e,t){}dH.bind(null,"warn");dH.bind(null,"error");function gc(){}function Z2e(e,t){return{...e,...t}}function ni(e,t,n){const r=t.map(s=>{const i=Z2e(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const eNe="Invariant failed";class Qx extends Error{}Qx.prototype.toString=function(){return this.message};function De(e,t){throw new Qx(eNe)}class tNe extends je.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=gc,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Qx&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ni(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Qx){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const nNe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Zx=e=>e+1,rNe=e=>`
  You have lifted an item in position ${Zx(e.source.index)}
`,fH=(e,t)=>{const n=e.droppableId===t.droppableId,r=Zx(e.index),s=Zx(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},hH=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,sNe=e=>{const t=e.destination;if(t)return fH(e.source,t);const n=e.combine;return n?hH(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},tD=e=>`
  The item has returned to its starting position
  of ${Zx(e.index)}
`,iNe=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${tD(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${fH(e.source,t)}
    `:n?`
      You have dropped the item.
      ${hH(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${tD(e.source)}
  `},Uv={dragHandleUsageInstructions:nNe,onDragStart:rNe,onDragUpdate:sNe,onDragEnd:iNe};function oNe(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function mH(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!oNe(e[n],t[n]))return!1;return!0}function Tt(e,t){const n=w.useState(()=>({inputs:t,result:e()}))[0],r=w.useRef(!0),s=w.useRef(n),o=r.current||!!(t&&s.current.inputs&&mH(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function rt(e,t){return Tt(()=>e,t)}const cr={x:0,y:0},yr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),js=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),yc=(e,t)=>e.x===t.x&&e.y===t.y,xm=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ad=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Zg=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),nD=(e,t)=>Math.min(...t.map(n=>Zg(e,n))),pH=e=>t=>({x:e(t.x),y:e(t.y)});var aNe=(e,t)=>{const n=Ui({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const o0=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),rD=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],lNe={top:0,right:0,bottom:0,left:0},cNe=(e,t)=>t?o0(e,t.scroll.diff.displacement):e,uNe=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,dNe=(e,t)=>t&&t.shouldClipSubject?aNe(t.pageMarginBox,e):Ui(e);var Dh=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=cNe(e.marginBox,r),i=uNe(s,n,t),o=dNe(i,r);return{page:e,withPlaceholder:t,active:o}},F$=(e,t)=>{e.frame||De();const n=e.frame,r=js(t,n.scroll.initial),s=xm(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},o=Dh({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function ar(e,t=mH){let n=null;function r(...s){if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;const i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const gH=ar(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),yH=ar(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),lS=ar(e=>Object.values(e)),fNe=ar(e=>Object.values(e));var wm=ar((e,t)=>fNe(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function B$(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function cS(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var uS=ar((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),hNe=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!B$(s))return null;function o(y){const v={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...s,at:v}}const a=s.displaced.all,c=a.length?a[0]:null;if(e)return c?o(c):null;const u=uS(t,r);if(!c){if(!u.length)return null;const y=u[u.length-1];return o(y.descriptor.id)}const f=u.findIndex(y=>y.descriptor.id===c);f===-1&&De();const h=f-1;if(h<0)return null;const p=u[h];return o(p.descriptor.id)},Sm=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const bH={point:cr,value:0},ey={invisible:{},visible:{},all:[]},mNe={displaced:ey,displacedBy:bH,at:null};var ii=(e,t)=>n=>e<=n&&n<=t,vH=e=>{const t=ii(e.top,e.bottom),n=ii(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;const c=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return c&&u?!0:c&&o||u&&i}},pNe=e=>{const t=ii(e.top,e.bottom),n=ii(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const z$={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xH={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var gNe=e=>t=>{const n=ii(t.top,t.bottom),r=ii(t.left,t.right);return s=>e===z$?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const yNe=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:cr;return o0(e,n)},bNe=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,vNe=(e,t,n)=>n(t)(e),V$=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?yNe(e,t):e;return bNe(i,t,s)&&vNe(i,n,s)},xNe=e=>V$({...e,isVisibleThroughFrameFn:vH}),wH=e=>V$({...e,isVisibleThroughFrameFn:pNe}),wNe=e=>V$({...e,isVisibleThroughFrameFn:gNe(e.destination.axis)}),SNe=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function ENe(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ui(D$(n,r))}function ty({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return e.reduce(function(a,c){const u=ENe(c,n),f=c.descriptor.id;if(a.all.push(f),!xNe({target:u,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[c.descriptor.id]=!0,a;const p=SNe(f,i,s),y={draggableId:f,shouldAnimate:p};return a.visible[f]=y,a},{all:[],visible:{},invisible:{}})}function NNe(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function sD({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=NNe(e,{inHomeList:t});return{displaced:ey,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function ew({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:i,index:o,forceShouldAnimate:a}){const c=Sm(e,n);if(o==null)return sD({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const u=t.find(v=>v.descriptor.index===o);if(!u)return sD({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const f=uS(e,t),h=t.indexOf(u),p=f.slice(h);return{displaced:ty({afterDragging:p,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ac(e,t){return!!t.effected[e]}var _Ne=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,a=n[i].descriptor.index;return Ac(i,s)?e?a:a-1:e?a+1:a},CNe=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=e?s+1:s-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,c=t?a:a+1;return i<o||i>c?null:i},ONe=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:o,viewport:a,afterCritical:c})=>{const u=o.at;if(u||De(),u.type==="REORDER"){const h=CNe({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:ew({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:h})}const f=_Ne({isMovingForward:e,destination:s,displaced:o.displaced,draggables:r,combine:u.combine,afterCritical:c});return f==null?null:ew({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:f})},jNe=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return Ac(n,t)?s?cr:xm(r.point):s?r.point:cr},ANe=({afterCritical:e,impact:t,draggables:n})=>{const r=cS(t);r||De();const s=r.draggableId,i=n[s].page.borderBox.center,o=jNe({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return yr(i,o)};const SH=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,TNe=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,U$=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,iD=({axis:e,moveRelativeTo:t,isMoving:n})=>ad(e.line,t.marginBox[e.end]+SH(e,n),U$(e,t.marginBox,n)),oD=({axis:e,moveRelativeTo:t,isMoving:n})=>ad(e.line,t.marginBox[e.start]-TNe(e,n),U$(e,t.marginBox,n)),$Ne=({axis:e,moveInto:t,isMoving:n})=>ad(e.line,t.contentBox[e.start]+SH(e,n),U$(e,t.contentBox,n));var RNe=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const i=wm(r.descriptor.id,n),o=t.page,a=r.axis;if(!i.length)return $Ne({axis:a,moveInto:r.page,isMoving:o});const{displaced:c,displacedBy:u}=e,f=c.all[0];if(f){const p=n[f];if(Ac(f,s))return oD({axis:a,moveRelativeTo:p.page,isMoving:o});const y=Xx(p.page,u.point);return oD({axis:a,moveRelativeTo:y,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ac(h.descriptor.id,s)){const p=Xx(h.page,xm(s.displacedBy.point));return iD({axis:a,moveRelativeTo:p,isMoving:o})}return iD({axis:a,moveRelativeTo:h.page,isMoving:o})},YO=(e,t)=>{const n=e.frame;return n?yr(t,n.scroll.diff.displacement):t};const kNe=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?RNe({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):ANe({impact:e,draggables:r,afterCritical:s})};var dS=e=>{const t=kNe(e),n=e.droppable;return n?YO(n,t):t},EH=(e,t)=>{const n=js(t,e.scroll.initial),r=xm(n);return{frame:Ui({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function aD(e,t){return e.map(n=>t[n])}function MNe(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var INe=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const i=EH(t,yr(t.scroll.current,s)),o=n.frame?F$(n,yr(n.frame.scroll.current,s)):n,a=e.displaced,c=ty({afterDragging:aD(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:a,forceShouldAnimate:!1}),u=ty({afterDragging:aD(a.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),f={},h={},p=[a,c,u];return a.all.forEach(v=>{const x=MNe(v,p);if(x){h[v]=x;return}f[v]=!0}),{...e,displaced:{all:a.all,invisible:f,visible:h}}},PNe=(e,t)=>yr(e.scroll.diff.displacement,t),q$=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=PNe(n,e),s=js(r,t.page.borderBox.center);return yr(t.client.borderBox.center,s)},NH=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=js(n,e.page.borderBox.center),c={target:o0(e.page.borderBox,o),destination:t,withDroppableDisplacement:s,viewport:r};return i?wNe(c):wH(c)},DNe=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:c})=>{if(!n.isEnabled)return null;const u=wm(n.descriptor.id,r),f=Sm(t,n),h=hNe({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:s})||ONe({isMovingForward:e,isInHomeList:f,draggable:t,draggables:r,destination:n,insideDestination:u,previousImpact:s,viewport:i,afterCritical:c});if(!h)return null;const p=dS({impact:h,draggable:t,droppable:n,draggables:r,afterCritical:c});if(NH({draggable:t,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:q$({pageBorderBoxCenter:p,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const v=js(p,o),x=INe({impact:h,viewport:i,destination:n,draggables:r,maxScrollChange:v});return{clientSelection:a,impact:x,scrollJumpRequest:v}};const $r=e=>{const t=e.subject.active;return t||De(),t};var LNe=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,a=ii(i[o.start],i[o.end]),c=lS(r).filter(f=>f!==n).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>vH(s.frame)($r(f))).filter(f=>{const h=$r(f);return e?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(f=>{const h=$r(f),p=ii(h[o.start],h[o.end]);return a(h[o.start])||a(h[o.end])||p(i[o.start])||p(i[o.end])}).sort((f,h)=>{const p=$r(f)[o.crossAxisStart],y=$r(h)[o.crossAxisStart];return e?p-y:y-p}).filter((f,h,p)=>$r(f)[o.crossAxisStart]===$r(p[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(f=>ii($r(f)[o.start],$r(f)[o.end])(t[o.line]));return u.length===1?u[0]:u.length>1?u.sort((f,h)=>$r(f)[o.start]-$r(h)[o.start])[0]:c.sort((f,h)=>{const p=nD(t,rD($r(f))),y=nD(t,rD($r(h)));return p!==y?p-y:$r(f)[o.start]-$r(h)[o.start]})[0]};const lD=(e,t)=>{const n=e.page.borderBox.center;return Ac(e.descriptor.id,t)?js(n,t.displacedBy.point):n},FNe=(e,t)=>{const n=e.page.borderBox;return Ac(e.descriptor.id,t)?o0(n,xm(t.displacedBy.point)):n};var BNe=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>wH({target:FNe(o,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const c=Zg(e,YO(n,lD(o,s))),u=Zg(e,YO(n,lD(a,s)));return c<u?-1:u<c?1:o.descriptor.index-a.descriptor.index})[0]||null,a0=ar(function(t,n){const r=n[t.line];return{value:r,point:ad(t.line,r)}});const zNe=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return ad(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],c=wm(e.descriptor.id,n).reduce((u,f)=>u+f.client.marginBox[r.size],0)+t[r.line]-s;return c<=0?null:ad(r.line,c)},_H=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),CH=(e,t,n)=>{const r=e.frame;Sm(t,e)&&De(),e.subject.withPlaceholder&&De();const s=a0(e.axis,t.displaceBy).point,i=zNe(e,s,n),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const f=Dh({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:f}}const a=i?yr(r.scroll.max,i):r.scroll.max,c=_H(r,a),u=Dh({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},VNe=e=>{const t=e.subject.withPlaceholder;t||De();const n=e.frame;if(!n){const o=Dh({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||De();const s=_H(n,r),i=Dh({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var UNe=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:o,afterCritical:a})=>{if(!t){if(n.length)return null;const h={displaced:ey,displacedBy:bH,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},p=dS({impact:h,draggable:r,droppable:i,draggables:s,afterCritical:a}),y=Sm(r,i)?i:CH(i,r,s);return NH({draggable:r,destination:y,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?h:h+1})(),f=a0(i.axis,r.displaceBy);return ew({draggable:r,insideDestination:n,destination:i,viewport:o,displacedBy:f,last:ey,index:u})},qNe=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:i,viewport:o,afterCritical:a})=>{const c=LNe({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:o});if(!c)return null;const u=wm(c.descriptor.id,s),f=BNe({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:u,afterCritical:a}),h=UNe({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:s,moveRelativeTo:f,insideDestination:u,viewport:o,afterCritical:a});if(!h)return null;const p=dS({impact:h,draggable:n,droppable:c,draggables:s,afterCritical:a});return{clientSelection:q$({pageBorderBoxCenter:p,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null}},$s=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const HNe=(e,t)=>{const n=$s(e);return n?t[n]:null};var WNe=({state:e,type:t})=>{const n=HNe(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],i=n||s,o=i.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:h,droppables:p}=e.dimensions;return a?DNe({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):qNe({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,isOver:i,draggables:h,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function xu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function OH(e){const t=ii(e.top,e.bottom),n=ii(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function GNe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function YNe({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(i=>{const o=i.axis,a=ad(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:Zg(r,a)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function JNe({pageBorderBox:e,draggable:t,droppables:n}){const r=lS(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!GNe(e,i))return!1;if(OH(i)(e.center))return!0;const o=s.axis,a=i.center[o.crossAxisLine],c=e[o.crossAxisStart],u=e[o.crossAxisEnd],f=ii(i[o.crossAxisStart],i[o.crossAxisEnd]),h=f(c),p=f(u);return!h&&!p?!0:h?c<a:u>a});return r.length?r.length===1?r[0].descriptor.id:YNe({pageBorderBox:e,draggable:t,candidates:r}):null}const jH=(e,t)=>Ui(o0(e,t));var XNe=(e,t)=>{const n=e.frame;return n?jH(t,n.scroll.diff.value):t};function AH({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function KNe({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var QNe=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:o})=>{const a=n.axis,c=a0(n.axis,t.displaceBy),u=c.value,f=e[a.start],h=e[a.end],y=uS(t,r).find(x=>{const S=x.descriptor.id,N=x.page.borderBox.center[a.line],_=Ac(S,o),C=AH({displaced:s,id:S});return _?C?h<=N:f<N-u:C?h<=N+u:f<N})||null,v=KNe({draggable:t,closest:y,inHomeList:Sm(t,n)});return ew({draggable:t,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:c,index:v})};const ZNe=4;var e_e=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=a0(r.axis,e.displaceBy),c=a.value,u=t[o.start],f=t[o.end],p=uS(e,s).find(v=>{const x=v.descriptor.id,S=v.page.borderBox,_=S[o.size]/ZNe,C=Ac(x,i),j=AH({displaced:n.displaced,id:x});return C?j?f>S[o.start]+_&&f<S[o.end]-_:u>S[o.start]-c+_&&u<S[o.end]-c-_:j?f>S[o.start]+c+_&&f<S[o.end]+c-_:u>S[o.start]+_&&u<S[o.end]-_});return p?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null},TH=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:o})=>{const a=jH(t.page.borderBox,e),c=JNe({pageBorderBox:a,draggable:t,droppables:r});if(!c)return mNe;const u=r[c],f=wm(u.descriptor.id,n),h=XNe(u,a);return e_e({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:s,destination:u,insideDestination:f,afterCritical:o})||QNe({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:f,last:s.displaced,viewport:i,afterCritical:o})},H$=(e,t)=>({...e,[t.descriptor.id]:t});const t_e=({previousImpact:e,impact:t,droppables:n})=>{const r=$s(e),s=$s(t);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const o=VNe(i);return H$(n,o)};var n_e=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const i=t_e({previousImpact:r,impact:s,droppables:n}),o=$s(s);if(!o)return i;const a=n[o];if(Sm(e,a)||a.subject.withPlaceholder)return i;const c=CH(a,e,t);return H$(i,c)},mg=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const o=r||e.viewport,a=n||e.dimensions,c=t||e.current.client.selection,u=js(c,e.initial.client.selection),f={offset:u,selection:c,borderBoxCenter:yr(e.initial.client.borderBoxCenter,u)},h={selection:yr(f.selection,o.scroll.current),borderBoxCenter:yr(f.borderBoxCenter,o.scroll.current),offset:yr(f.offset,o.scroll.diff.value)},p={client:f,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:p};const y=a.draggables[e.critical.draggable.id],v=s||TH({pageOffset:h.offset,draggable:y,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),x=n_e({draggable:y,impact:v,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:p,dimensions:{draggables:a.draggables,droppables:x},impact:v,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function r_e(e,t){return e.map(n=>t[n])}var $H=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=e.displaced,o=r_e(i.all,n),a=ty({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:a}},RH=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const o=dS({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return q$({pageBorderBoxCenter:o,draggable:t,viewport:s})},kH=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&De();const r=e.impact,s=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:a}=i,c=o[e.critical.draggable.id],u=$s(r);u||De();const f=a[u],h=$H({impact:r,viewport:s,destination:f,draggables:o}),p=RH({impact:h,draggable:c,droppable:f,draggables:o,viewport:s,afterCritical:e.afterCritical});return mg({impact:h,clientSelection:p,state:e,dimensions:i,viewport:s})},s_e=e=>({index:e.index,droppableId:e.droppableId}),MH=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=a0(t.axis,e.displaceBy),i=wm(t.descriptor.id,n),o=i.indexOf(e);o===-1&&De();const a=i.slice(o+1),c=a.reduce((p,y)=>(p[y.descriptor.id]=!0,p),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:ty({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:s_e(e.descriptor)}},afterCritical:u}},i_e=(e,t)=>({draggables:e.draggables,droppables:H$(e.droppables,t)}),o_e=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Xx(e.client,t),s=Kx(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},a_e=e=>{const t=e.frame;return t||De(),t},l_e=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,o=t[i],c=a_e(o).scroll.diff.value,u=yr(r,c);return o_e({draggable:s,offset:u,initialWindowScroll:n.scroll.initial})})},c_e=({state:e,published:t})=>{const n=t.modified.map(N=>{const _=e.dimensions.droppables[N.droppableId];return F$(_,N.scroll)}),r={...e.dimensions.droppables,...gH(n)},s=yH(l_e({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(N=>{delete i[N]});const o={droppables:r,draggables:i},a=$s(e.impact),c=a?o.droppables[a]:null,u=o.draggables[e.critical.draggable.id],f=o.droppables[e.critical.droppable.id],{impact:h,afterCritical:p}=MH({draggable:u,home:f,draggables:i,viewport:e.viewport}),y=c&&c.isCombineEnabled?e.impact:h,v=TH({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:p}),x={...e,phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:o,afterCritical:p,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const JO=e=>e.movementMode==="SNAP",w_=(e,t,n)=>{const r=i_e(e.dimensions,t);return!JO(e)||n?mg({state:e,dimensions:r}):kH({state:e,dimensions:r})};function S_(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const cD={phase:"IDLE",completed:null,shouldFlush:!1};var u_e=(e=cD,t)=>{if(t.type==="FLUSH")return{...cD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&De();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:o}=t.payload,a=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:a.client.borderBox.center,offset:cr},f={client:u,page:{selection:yr(u.selection,s.scroll.initial),borderBoxCenter:yr(u.selection,s.scroll.initial),offset:yr(u.selection,s.scroll.diff.value)}},h=lS(i.droppables).every(x=>!x.isFixedOnPage),{impact:p,afterCritical:y}=MH({draggable:a,home:c,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:f,current:f,isWindowScrollAllowed:h,impact:p,afterCritical:y,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&De(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||De(),c_e({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{client:n}=t.payload;return yc(n,e.current.client.selection)?e:mg({state:e,clientSelection:n,impact:JO(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return S_(e);xu(e)||De();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const i=F$(s,r);return w_(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||De(),s.isEnabled===r&&De();const i={...s,isEnabled:r};return w_(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||De(),s.isCombineEnabled===r&&De();const i={...s,isCombineEnabled:r};return w_(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;xu(e)||De(),e.isWindowScrollAllowed||De();const n=t.payload.newScroll;if(yc(e.viewport.scroll.current,n))return S_(e);const r=EH(e.viewport,n);return JO(e)?kH({state:e,viewport:r}):mg({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!xu(e))return e;const n=t.payload.maxScroll;if(yc(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&De();const n=WNe({state:e,type:t.type});return n?mg({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&De(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||De(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ht(e,t){return e instanceof Object&&"type"in e&&e.type===t}const d_e=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),f_e=e=>({type:"LIFT",payload:e}),h_e=e=>({type:"INITIAL_PUBLISH",payload:e}),m_e=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),p_e=()=>({type:"COLLECTION_STARTING",payload:null}),g_e=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),y_e=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),b_e=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),IH=e=>({type:"MOVE",payload:e}),v_e=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),x_e=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),w_e=()=>({type:"MOVE_UP",payload:null}),S_e=()=>({type:"MOVE_DOWN",payload:null}),E_e=()=>({type:"MOVE_RIGHT",payload:null}),N_e=()=>({type:"MOVE_LEFT",payload:null}),W$=()=>({type:"FLUSH",payload:null}),__e=e=>({type:"DROP_ANIMATE",payload:e}),G$=e=>({type:"DROP_COMPLETE",payload:e}),PH=e=>({type:"DROP",payload:e}),C_e=e=>({type:"DROP_PENDING",payload:e}),DH=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var O_e=e=>({getState:t,dispatch:n})=>r=>s=>{if(!Ht(s,"LIFT")){r(s);return}const{id:i,clientSelection:o,movementMode:a}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&n(G$({completed:c.completed})),t().phase!=="IDLE"&&De(),n(W$()),n(d_e({draggableId:i,movementMode:a}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:h,dimensions:p,viewport:y}=e.startPublishing(f);n(h_e({critical:h,dimensions:p,clientSelection:o,movementMode:a,viewport:y}))},j_e=e=>()=>t=>n=>{Ht(n,"INITIAL_PUBLISH")&&e.dragging(),Ht(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ht(n,"FLUSH")||Ht(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Y$={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ny={opacity:{drop:0,combining:.7},scale:{drop:.75}},LH={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hu=`${LH.outOfTheWay}s ${Y$.outOfTheWay}`,pg={fluid:`opacity ${hu}`,snap:`transform ${hu}, opacity ${hu}`,drop:e=>{const t=`${e}s ${Y$.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${hu}`,placeholder:`height ${hu}, width ${hu}, margin ${hu}`},uD=e=>yc(e,cr)?void 0:`translate(${e.x}px, ${e.y}px)`,XO={moveTo:uD,drop:(e,t)=>{const n=uD(e);if(n)return t?`${n} scale(${ny.scale.drop})`:n}},{minDropTime:KO,maxDropTime:FH}=LH,A_e=FH-KO,dD=1500,T_e=.6;var $_e=({current:e,destination:t,reason:n})=>{const r=Zg(e,t);if(r<=0)return KO;if(r>=dD)return FH;const s=r/dD,i=KO+A_e*s,o=n==="CANCEL"?i*T_e:i;return Number(o.toFixed(2))},R_e=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:o}=n,a=$s(e),c=a?o[a]:null,u=o[t.descriptor.droppableId],f=RH({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:c||u,viewport:r});return js(f,t.client.borderBox.center)},k_e=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:$H({draggables:e,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:ey},didDropInsideDroppable:!0};const M_e=({getState:e,dispatch:t})=>n=>r=>{if(!Ht(r,"DROP")){n(r);return}const s=e(),i=r.payload.reason;if(s.phase==="COLLECTING"){t(C_e({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&De(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||De();const a=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:f,didDropInsideDroppable:h}=k_e({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=h?B$(f):null,y=h?cS(f):null,v={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:v,reason:i,mode:s.movementMode,destination:p,combine:y},S=R_e({impact:f,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),N={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:f};if(!(!yc(s.current.client.offset,S)||!!x.combine)){t(G$({completed:N}));return}const C=$_e({current:s.current.client.offset,destination:S,reason:i});t(__e({newHomeClientOffset:S,dropDuration:C,completed:N}))};var BH=()=>({x:window.pageXOffset,y:window.pageYOffset});function I_e(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function P_e({onWindowScroll:e}){function t(){e(BH())}const n=Qg(t),r=I_e(n);let s=gc;function i(){return s!==gc}function o(){i()&&De(),s=ni(window,[r])}function a(){i()||De(),n.cancel(),s(),s=gc}return{start:o,stop:a,isActive:i}}const D_e=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH"),L_e=e=>{const t=P_e({onWindowScroll:n=>{e.dispatch(v_e({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ht(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&D_e(r)&&t.stop(),n(r)}};var F_e=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return s.wasCalled=()=>t,s},B_e=()=>{const e=[],t=s=>{const i=e.findIndex(a=>a.timerId===s);i===-1&&De();const[o]=e.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:s};e.push(o)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const z_e=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,V_e=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,U_e=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Fp=(e,t)=>{t()},sv=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function E_(e,t,n,r){if(!e){n(r(t));return}const s=F_e(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var q_e=(e,t)=>{const n=B_e();let r=null;const s=(h,p)=>{r&&De(),Fp("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:h,mode:p})})},i=(h,p)=>{r&&De(),Fp("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(sv(h,p))})},o=(h,p)=>{r&&De();const y=sv(h,p);r={mode:p,lastCritical:h,lastLocation:y.source,lastCombine:null},n.add(()=>{Fp("onDragStart",()=>E_(e().onDragStart,y,t,Uv.onDragStart))})},a=(h,p)=>{const y=B$(p),v=cS(p);r||De();const x=!U_e(h,r.lastCritical);x&&(r.lastCritical=h);const S=!z_e(r.lastLocation,y);S&&(r.lastLocation=y);const N=!V_e(r.lastCombine,v);if(N&&(r.lastCombine=v),!x&&!S&&!N)return;const _={...sv(h,r.mode),combine:v,destination:y};n.add(()=>{Fp("onDragUpdate",()=>E_(e().onDragUpdate,_,t,Uv.onDragUpdate))})},c=()=>{r||De(),n.flush()},u=h=>{r||De(),r=null,Fp("onDragEnd",()=>E_(e().onDragEnd,h,t,Uv.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:a,flush:c,drop:u,abort:()=>{if(!r)return;const h={...sv(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},H_e=(e,t)=>{const n=q_e(e,t);return r=>s=>i=>{if(Ht(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ht(i,"INITIAL_PUBLISH")){const a=i.payload.critical;n.beforeStart(a,i.payload.movementMode),s(i),n.start(a,i.payload.movementMode);return}if(Ht(i,"DROP_COMPLETE")){const a=i.payload.completed.result;n.flush(),s(i),n.drop(a);return}if(s(i),Ht(i,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const W_e=e=>t=>n=>{if(!Ht(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&De(),e.dispatch(G$({completed:r.completed}))},G_e=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>i=>{if((Ht(i,"FLUSH")||Ht(i,"DROP_COMPLETE")||Ht(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!Ht(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(DH())}};n=requestAnimationFrame(()=>{n=null,t=ni(window,[o])})}};var Y_e=e=>()=>t=>n=>{(Ht(n,"DROP_COMPLETE")||Ht(n,"FLUSH")||Ht(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},J_e=e=>{let t=!1;return()=>n=>r=>{if(Ht(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ht(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ht(r,"DROP_COMPLETE")){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const X_e=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH");var K_e=e=>t=>n=>r=>{if(X_e(r)){e.stop(),n(r);return}if(Ht(r,"INITIAL_PUBLISH")){n(r);const s=t.getState();s.phase!=="DRAGGING"&&De(),e.start(s);return}n(r),e.scroll(t.getState())};const Q_e=e=>t=>n=>{if(t(n),!Ht(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(PH({reason:r.reason})))},Z_e=nH;var eCe=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>tH(u_e,Z_e(ZEe(j_e(n),Y_e(e),O_e(e),M_e,W_e,G_e,Q_e,K_e(i),L_e,J_e(t),H_e(r,s))));const N_=()=>({additions:{},removals:{},modified:{}});function tCe({registry:e,callbacks:t}){let n=N_(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:f}=n,h=Object.keys(c).map(v=>e.draggable.getById(v).getDimension(cr)).sort((v,x)=>v.descriptor.index-x.descriptor.index),p=Object.keys(f).map(v=>{const S=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:S}}),y={additions:h,removals:Object.keys(u),modified:p};n=N_(),t.publish(y)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],s()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=N_())}}}var zH=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=js({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},VH=()=>{const e=document.documentElement;return e||De(),e},UH=()=>{const e=VH();return zH({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},nCe=()=>{const e=BH(),t=UH(),n=e.y,r=e.x,s=VH(),i=s.clientWidth,o=s.clientHeight,a=r+i,c=n+o;return{frame:Ui({top:n,left:r,right:a,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:cr,displacement:cr}}}},rCe=({critical:e,scrollOptions:t,registry:n})=>{const r=nCe(),s=r.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(s,t)),a=n.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(s));return{dimensions:{draggables:yH(a),droppables:gH(o)},critical:e,viewport:r}};function fD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var sCe=(e,t)=>{let n=null;const r=tCe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(p,y)=>{e.droppable.exists(p)||De(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:y})},i=(p,y)=>{n&&(e.droppable.exists(p)||De(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:y}))},o=(p,y)=>{n&&(e.droppable.exists(p)||De(),t.updateDroppableScroll({id:p,newScroll:y}))},a=(p,y)=>{n&&e.droppable.getById(p).callbacks.scroll(y)},c=()=>{if(!n)return;r.stop();const p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},u=p=>{n||De();const y=n.critical.draggable;p.type==="ADDITION"&&fD(e,y,p.value)&&r.add(p.value),p.type==="REMOVAL"&&fD(e,y,p.value)&&r.remove(p.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:a,updateDroppableScroll:o,startPublishing:p=>{n&&De();const y=e.draggable.getById(p.draggableId),v=e.droppable.getById(y.descriptor.droppableId),x={draggable:y.descriptor,droppable:v.descriptor},S=e.subscribe(u);return n={critical:x,unsubscribe:S},rCe({critical:x,registry:e,scrollOptions:p.scrollOptions})},stopPublishing:c}},qH=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",iCe=e=>{window.scrollBy(e.x,e.y)};const oCe=ar(e=>lS(e).filter(t=>!(!t.isEnabled||!t.frame))),aCe=(e,t)=>oCe(t).find(r=>(r.frame||De(),OH(r.frame.pageMarginBox)(e)))||null;var lCe=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return aCe(e,n)};const ry={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var cCe=(e,t,n=()=>ry)=>{const r=n(),s=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},HH=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},J$=1,uCe=(e,t,n=()=>ry)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return J$;const i=1-HH({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},dCe=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=t,a=i,u=Date.now()-o;if(u>=i)return e;if(u<s)return J$;const f=HH({startOfRange:s,endOfRange:a,current:u}),h=e*r.ease(f);return Math.ceil(h)},hD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=uCe(e,t,s);return i===0?0:r?Math.max(dCe(i,n,s),J$):i},mD=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=cCe(e,r,i);return t[r.end]<t[r.start]?hD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*hD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},fCe=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const hCe=pH(e=>e===0?0:e);var WH=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=mD({container:t,distanceToEdges:o,dragStartTime:e,axis:z$,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=mD({container:t,distanceToEdges:o,dragStartTime:e,axis:xH,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),u=hCe({x:c,y:a});if(yc(u,cr))return null;const f=fCe({container:t,subject:n,proposedScroll:u});return f?yc(f,cr)?null:f:null};const mCe=pH(e=>e===0?0:e>0?1:-1),X$=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=yr(t,r),i={x:e(s.x,n.x),y:e(s.y,n.y)};return yc(i,cr)?null:i}})(),GH=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=mCe(n),i=X$({max:r,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},K$=(e,t)=>GH({current:e.scroll.current,max:e.scroll.max,change:t}),pCe=(e,t)=>{if(!K$(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return X$({current:r,max:n,change:t})},Q$=(e,t)=>{const n=e.frame;return n?GH({current:n.scroll.current,max:n.scroll.max,change:t}):!1},gCe=(e,t)=>{const n=e.frame;return!n||!Q$(e,t)?null:X$({current:n.scroll.current,max:n.scroll.max,change:t})};var yCe=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=WH({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&K$(e,o)?o:null},bCe=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const a=WH({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&Q$(e,a)?a:null},pD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,p=yCe({dragStartTime:t,viewport:h,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(p){r(p);return}}const u=lCe({center:o,destination:$s(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=bCe({dragStartTime:t,droppable:u,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});f&&s(u.descriptor.id,f)},vCe=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ry})=>{const r=Qg(e),s=Qg(t);let i=null;const o=u=>{i||De();const{shouldUseTimeDampening:f,dragStartTime:h}=i;pD({state:u,scrollWindow:r,scrollDroppable:s,dragStartTime:h,shouldUseTimeDampening:f,getAutoScrollerOptions:n})};return{start:u=>{i&&De();const f=Date.now();let h=!1;const p=()=>{h=!0};pD({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&o(u)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:o}},xCe=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,c)=>{const u=yr(a.current.client.selection,c);e({client:u})},s=(a,c)=>{if(!Q$(a,c))return c;const u=gCe(a,c);if(!u)return t(a.descriptor.id,c),null;const f=js(c,u);return t(a.descriptor.id,f),js(c,f)},i=(a,c,u)=>{if(!a||!K$(c,u))return u;const f=pCe(c,u);if(!f)return n(u),null;const h=js(u,f);return n(h),js(u,h)};return a=>{const c=a.scrollJumpRequest;if(!c)return;const u=$s(a.impact);u||De();const f=s(a.dimensions.droppables[u],c);if(!f)return;const h=a.viewport,p=i(a.isWindowScrollAllowed,h,f);p&&r(a,p)}},wCe=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=vCe({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=xCe({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:s.start,stop:s.stop}};const Lh="data-rfd",Fh=(()=>{const e=`${Lh}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),QO=(()=>{const e=`${Lh}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),SCe=(()=>{const e=`${Lh}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),gD={contextId:`${Lh}-scroll-container-context-id`},ECe=e=>t=>`[${t}="${e}"]`,Bp=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),NCe="pointer-events: none;";var _Ce=e=>{const t=ECe(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Fh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:NCe,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${pg.outOfTheWay};
    `;return{selector:t(QO.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(SCe.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Bp(o,"always"),resting:Bp(o,"resting"),dragging:Bp(o,"dragging"),dropAnimating:Bp(o,"dropAnimating"),userCancel:Bp(o,"userCancel")}};const Rs=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,__=()=>{const e=document.querySelector("head");return e||De(),e},yD=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function CCe(e,t){const n=Tt(()=>_Ce(e),[e]),r=w.useRef(null),s=w.useRef(null),i=rt(ar(h=>{const p=s.current;p||De(),p.textContent=h}),[]),o=rt(h=>{const p=r.current;p||De(),p.textContent=h},[]);Rs(()=>{!r.current&&!s.current||De();const h=yD(t),p=yD(t);return r.current=h,s.current=p,h.setAttribute(`${Lh}-always`,e),p.setAttribute(`${Lh}-dynamic`,e),__().appendChild(h),__().appendChild(p),o(n.always),i(n.resting),()=>{const y=v=>{const x=v.current;x||De(),__().removeChild(x),v.current=null};y(r),y(s)}},[t,o,i,n.always,n.resting,e]);const a=rt(()=>i(n.dragging),[i,n.dragging]),c=rt(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=rt(()=>{s.current&&i(n.resting)},[i,n.resting]);return Tt(()=>({dragging:a,dropping:c,resting:u}),[a,c,u])}function YH(e,t){return Array.from(e.querySelectorAll(t))}var JH=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function fS(e){return e instanceof JH(e).HTMLElement}function OCe(e,t){const n=`[${Fh.contextId}="${e}"]`,r=YH(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(Fh.draggableId)===t);return!s||!fS(s)?null:s}function jCe(e){const t=w.useRef({}),n=w.useRef(null),r=w.useRef(null),s=w.useRef(!1),i=rt(function(p,y){const v={id:p,focus:y};return t.current[p]=v,function(){const S=t.current;S[p]!==v&&delete S[p]}},[]),o=rt(function(p){const y=OCe(e,p);y&&y!==document.activeElement&&y.focus()},[e]),a=rt(function(p,y){n.current===p&&(n.current=y)},[]),c=rt(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const p=n.current;p&&o(p)}))},[o]),u=rt(function(p){n.current=null;const y=document.activeElement;y&&y.getAttribute(Fh.draggableId)===p&&(n.current=p)},[]);return Rs(()=>(s.current=!0,function(){s.current=!1;const p=r.current;p&&cancelAnimationFrame(p)}),[]),Tt(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:a}),[i,u,c,a])}function ACe(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const y=t.indexOf(h);y!==-1&&t.splice(y,1)}}function r(h){t.length&&t.forEach(p=>p(h))}function s(h){return e.draggables[h]||null}function i(h){const p=s(h);return p||De(),p}const o={register:h=>{e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:(h,p)=>{const y=e.draggables[p.descriptor.id];y&&y.uniqueId===h.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const p=h.descriptor.id,y=s(p);y&&h.uniqueId===y.uniqueId&&(delete e.draggables[p],e.droppables[h.descriptor.droppableId]&&r({type:"REMOVAL",value:h}))},getById:i,findById:s,exists:h=>!!s(h),getAllByType:h=>Object.values(e.draggables).filter(p=>p.descriptor.type===h)};function a(h){return e.droppables[h]||null}function c(h){const p=a(h);return p||De(),p}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const p=a(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:a,exists:h=>!!a(h),getAllByType:h=>Object.values(e.droppables).filter(p=>p.descriptor.type===h)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:n,clean:f}}function TCe(){const e=Tt(ACe,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var Z$=je.createContext(null),tw=()=>{const e=document.body;return e||De(),e};const $Ce={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},RCe=e=>`rfd-announcement-${e}`;function kCe(e){const t=Tt(()=>RCe(e),[e]),n=w.useRef(null);return w.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),_h(i.style,$Ce),tw().appendChild(i),function(){setTimeout(function(){const c=tw();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),rt(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const MCe={separator:"::"};function e3(e,t=MCe){const n=je.useId();return Tt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function ICe({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function PCe({contextId:e,text:t}){const n=e3("hidden-text",{separator:"-"}),r=Tt(()=>ICe({contextId:e,uniqueId:n}),[n,e]);return w.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",tw().appendChild(i),function(){const a=tw();a.contains(i)&&a.removeChild(i)}},[r,t]),r}var hS=je.createContext(null);function XH(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function DCe(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&De();const a={abandon:o};return e=a,a}function s(){e||De(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:i}}function sy(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const LCe=9,FCe=13,t3=27,KH=32,BCe=33,zCe=34,VCe=35,UCe=36,qCe=37,HCe=38,WCe=39,GCe=40,YCe={[FCe]:!0,[LCe]:!0};var QH=e=>{YCe[e.keyCode]&&e.preventDefault()};const mS=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),ZH=0,bD=5;function JCe(e,t){return Math.abs(t.x-e.x)>=bD||Math.abs(t.y-e.y)>=bD}const vD={type:"IDLE"};function XCe({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:a}=s;if(i!==ZH)return;const c={x:o,y:a},u=n();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&De();const f=u.point;if(!JCe(f,c))return;s.preventDefault();const h=u.actions.fluidLift(c);r({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===t3){s.preventDefault(),e();return}QH(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&De(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:mS,fn:e}]}function KCe(e){const t=w.useRef(vD),n=w.useRef(gc),r=Tt(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==ZH||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const p=e.findClosestDraggableId(h);if(!p)return;const y=e.tryGetLock(p,o,{sourceEvent:h});if(!y)return;h.preventDefault();const v={x:h.clientX,y:h.clientY};n.current(),u(y,v)}}),[e]),s=Tt(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}),[e]),i=rt(function(){const h={passive:!1,capture:!0};n.current=ni(window,[s,r],h)},[s,r]),o=rt(()=>{t.current.type!=="IDLE"&&(t.current=vD,n.current(),i())},[i]),a=rt(()=>{const f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=rt(function(){const h={capture:!0,passive:!1},p=XCe({cancel:a,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ni(window,p,h)},[a,o]),u=rt(function(h,p){t.current.type!=="IDLE"&&De(),t.current={type:"PENDING",point:p,actions:h},c()},[c]);Rs(function(){return i(),function(){n.current()}},[i])}function QCe(){}const ZCe={[zCe]:!0,[BCe]:!0,[UCe]:!0,[VCe]:!0};function eOe(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===t3){s.preventDefault(),n();return}if(s.keyCode===KH){s.preventDefault(),r();return}if(s.keyCode===GCe){s.preventDefault(),e.moveDown();return}if(s.keyCode===HCe){s.preventDefault(),e.moveUp();return}if(s.keyCode===WCe){s.preventDefault(),e.moveRight();return}if(s.keyCode===qCe){s.preventDefault(),e.moveLeft();return}if(ZCe[s.keyCode]){s.preventDefault();return}QH(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:mS,fn:n}]}function tOe(e){const t=w.useRef(QCe),n=Tt(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==KH)return;const o=e.findClosestDraggableId(i);if(!o)return;const a=e.tryGetLock(o,f,{sourceEvent:i});if(!a)return;i.preventDefault();let c=!0;const u=a.snapLift();t.current();function f(){c||De(),c=!1,t.current(),r()}t.current=ni(window,eOe(u,f),{capture:!0,passive:!1})}}),[e]),r=rt(function(){const i={passive:!1,capture:!0};t.current=ni(window,[n],i)},[n]);Rs(function(){return r(),function(){t.current()}},[r])}const C_={type:"IDLE"},nOe=120,rOe=.15;function sOe({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===t3&&n.preventDefault(),e()}},{eventName:mS,fn:e}]}function iOe({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],a={x:i,y:o};r.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&De();const i=r.touches[0];if(!i||!(i.force>=rOe))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:mS,fn:e}]}function oOe(e){const t=w.useRef(C_),n=w.useRef(gc),r=rt(function(){return t.current},[]),s=rt(function(y){t.current=y},[]),i=Tt(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const v=e.findClosestDraggableId(y);if(!v)return;const x=e.tryGetLock(v,a,{sourceEvent:y});if(!x)return;const S=y.touches[0],{clientX:N,clientY:_}=S,C={x:N,y:_};n.current(),h(x,C)}}),[e]),o=rt(function(){const y={capture:!0,passive:!1};n.current=ni(window,[i],y)},[i]),a=rt(()=>{const p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(C_),n.current(),o())},[o,s]),c=rt(()=>{const p=t.current;a(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[a]),u=rt(function(){const y={capture:!0,passive:!1},v={cancel:c,completed:a,getPhase:r},x=ni(window,iOe(v),y),S=ni(window,sOe(v),y);n.current=function(){x(),S()}},[c,r,a]),f=rt(function(){const y=r();y.type!=="PENDING"&&De();const v=y.actions.fluidLift(y.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[r,s]),h=rt(function(y,v){r().type!=="IDLE"&&De();const x=setTimeout(f,nOe);s({type:"PENDING",point:v,actions:y,longPressTimerId:x}),u()},[u,r,s,f]);Rs(function(){return o(),function(){n.current();const v=r();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(C_))}},[r,o,s]),Rs(function(){return ni(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const aOe=["input","button","textarea","select","option","optgroup","video","audio"];function eW(e,t){if(t==null)return!1;if(aOe.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:eW(e,t.parentElement)}function lOe(e,t){const n=t.target;return fS(n)?eW(e,n):!1}var cOe=e=>Ui(e.getBoundingClientRect()).center;function uOe(e){return e instanceof JH(e).Element}const dOe=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function tW(e,t){return e==null?null:e[dOe](t)?e:tW(e.parentElement,t)}function fOe(e,t){return e.closest?e.closest(t):tW(e,t)}function hOe(e){return`[${Fh.contextId}="${e}"]`}function mOe(e,t){const n=t.target;if(!uOe(n))return null;const r=hOe(e),s=fOe(n,r);return!s||!fS(s)?null:s}function pOe(e,t){const n=mOe(e,t);return n?n.getAttribute(Fh.draggableId):null}function gOe(e,t){const n=`[${QO.contextId}="${e}"]`,s=YH(document,n).find(i=>i.getAttribute(QO.id)===t);return!s||!fS(s)?null:s}function yOe(e){e.preventDefault()}function iv({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function nW({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!qH(t.getState(),r))}function bOe({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!nW({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const c=r.draggable.getById(s),u=gOe(t,c.descriptor.id);if(!u||o&&!c.options.canDragInteractiveElements&&lOe(u,o))return null;const f=e.claim(i||gc);let h="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function y(){return e.isActive(f)}function v(A,$){iv({expected:A,phase:h,isLockActive:y,shouldWarn:!0})&&n.dispatch($())}const x=v.bind(null,"DRAGGING");function S(A){function $(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&($(),De()),n.dispatch(f_e(A.liftActionArgs)),h="DRAGGING";function k(R,F={shouldBlockNextClick:!1}){if(A.cleanup(),F.shouldBlockNextClick){const z=ni(window,[{eventName:"click",fn:yOe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}$(),n.dispatch(PH({reason:R}))}return{isActive:()=>iv({expected:"DRAGGING",phase:h,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:p,drop:R=>k("DROP",R),cancel:R=>k("CANCEL",R),...A.actions}}function N(A){const $=Qg(R=>{x(()=>IH({client:R}))});return{...S({liftActionArgs:{id:s,clientSelection:A,movementMode:"FLUID"},cleanup:()=>$.cancel(),actions:{move:$}}),move:$}}function _(){const A={moveUp:()=>x(w_e),moveRight:()=>x(E_e),moveDown:()=>x(S_e),moveLeft:()=>x(N_e)};return S({liftActionArgs:{id:s,clientSelection:cOe(u),movementMode:"SNAP"},cleanup:gc,actions:A})}function C(){iv({expected:"PRE_DRAG",phase:h,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>iv({expected:"PRE_DRAG",phase:h,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:N,snapLift:_,abort:C}}const vOe=[KCe,tOe,oOe];function xOe({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?vOe:[],...r||[]],o=w.useState(()=>DCe())[0],a=rt(function(S,N){sy(S)&&!sy(N)&&o.tryAbandon()},[o]);Rs(function(){let S=t.getState();return t.subscribe(()=>{const _=t.getState();a(S,_),S=_})},[o,t,a]),Rs(()=>o.tryAbandon,[o.tryAbandon]);const c=rt(x=>nW({lockAPI:o,registry:n,store:t,draggableId:x}),[o,n,t]),u=rt((x,S,N)=>bOe({lockAPI:o,registry:n,contextId:e,store:t,draggableId:x,forceSensorStop:S||null,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null}),[e,o,n,t]),f=rt(x=>pOe(e,x),[e]),h=rt(x=>{const S=n.draggable.findById(x);return S?S.options:null},[n.draggable]),p=rt(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(W$()))},[o,t]),y=rt(()=>o.isClaimed(),[o]),v=Tt(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:y}),[c,u,f,h,p,y]);for(let x=0;x<i.length;x++)i[x](v)}const wOe=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ty.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),SOe=e=>({...ry,...e.autoScrollerOptions,durationDampening:{...ry.durationDampening,...e.autoScrollerOptions}});function zp(e){return e.current||De(),e.current}function EOe(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=e,o=w.useRef(null),a=XH(e),c=rt(()=>wOe(a.current),[a]),u=rt(()=>SOe(a.current),[a]),f=kCe(t),h=PCe({contextId:t,text:i}),p=CCe(t,s),y=rt(z=>{zp(o).dispatch(z)},[]),v=Tt(()=>HP({publishWhileDragging:m_e,updateDroppableScroll:g_e,updateDroppableIsEnabled:y_e,updateDroppableIsCombineEnabled:b_e,collectionStarting:p_e},y),[y]),x=TCe(),S=Tt(()=>sCe(x,v),[x,v]),N=Tt(()=>wCe({scrollWindow:iCe,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:u,...HP({move:IH},y)}),[S.scrollDroppable,y,u]),_=jCe(t),C=Tt(()=>eCe({announce:f,autoScroller:N,dimensionMarshal:S,focusMarshal:_,getResponders:c,styleMarshal:p}),[f,N,S,_,c,p]);o.current=C;const j=rt(()=>{const z=zp(o);z.getState().phase!=="IDLE"&&z.dispatch(W$())},[]),A=rt(()=>{const z=zp(o).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),$=Tt(()=>({isDragging:A,tryAbort:j}),[A,j]);n($);const k=rt(z=>qH(zp(o).getState(),z),[]),R=rt(()=>xu(zp(o).getState()),[]),F=Tt(()=>({marshal:S,focus:_,contextId:t,canLift:k,isMovementAllowed:R,dragHandleUsageInstructionsId:h,registry:x}),[t,S,h,_,k,R,x]);return xOe({contextId:t,store:C,registry:x,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>j,[j]),je.createElement(hS.Provider,{value:F},je.createElement(Y2e,{context:Z$,store:C},e.children))}function NOe(){return je.useId()}function _Oe(e){const t=NOe(),n=e.dragHandleUsageInstructions||Uv.dragHandleUsageInstructions;return je.createElement(tNe,null,r=>je.createElement(EOe,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const xD={dragging:5e3,dropAnimating:4500},COe=(e,t)=>t?pg.drop(t.duration):e?pg.snap:pg.fluid,OOe=(e,t)=>{if(e)return t?ny.opacity.drop:ny.opacity.combining},jOe=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function AOe(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:i}=e,o=!!s,a=jOe(e),c=!!i,u=c?XO.drop(r,o):XO.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:COe(a,i),transform:u,opacity:OOe(o,c),zIndex:c?xD.dropAnimating:xD.dragging,pointerEvents:"none"}}function TOe(e){return{transform:XO.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function $Oe(e){return e.type==="DRAGGING"?AOe(e):TOe(e)}function ROe(e,t,n=cr){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=cH(s,r),o=Kx(i,n),a={client:i,tagName:t.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:c,client:i,page:o}}function kOe(e){const t=e3("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}=e,c=Tt(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}),[i,a,o]),u=rt(y=>{const v=s();return v||De(),ROe(n,v,y)},[n,s]),f=Tt(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=w.useRef(f),p=w.useRef(!0);Rs(()=>(r.draggable.register(h.current),()=>r.draggable.unregister(h.current)),[r.draggable]),Rs(()=>{if(p.current){p.current=!1;return}const y=h.current;h.current=f,r.draggable.update(f,y)},[f,r.draggable])}var n3=je.createContext(null);function nw(e){const t=w.useContext(e);return t||De(),t}function MOe(e){e.preventDefault()}const IOe=e=>{const t=w.useRef(null),n=rt(($=null)=>{t.current=$},[]),r=rt(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=nw(hS),{type:a,droppableId:c}=nw(n3),u=Tt(()=>({id:e.draggableId,index:e.index,type:a,droppableId:c}),[e.draggableId,e.index,a,c]),{children:f,draggableId:h,isEnabled:p,shouldRespectForcePress:y,canDragInteractiveElements:v,isClone:x,mapped:S,dropAnimationFinished:N}=e;if(!x){const $=Tt(()=>({descriptor:u,registry:o,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:p}),[u,o,r,v,y,p]);kOe($)}const _=Tt(()=>p?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:MOe}:null,[s,i,h,p]),C=rt($=>{S.type==="DRAGGING"&&S.dropping&&$.propertyName==="transform"&&Ty.flushSync(N)},[N,S]),j=Tt(()=>{const $=$Oe(S),k=S.type==="DRAGGING"&&S.dropping?C:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":h,style:$,onTransitionEnd:k},dragHandleProps:_}},[s,_,h,S,C,n]),A=Tt(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return je.createElement(je.Fragment,null,f(j,S.snapshot,A))};var rW=(e,t)=>e===t,sW=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const POe=e=>e.combine?e.combine.draggableId:null,DOe=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function LOe(){const e=ar((s,i)=>({x:s,y:i})),t=ar((s,i,o=null,a=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:o,combineWith:a,combineTargetFor:null})),n=ar((s,i,o,a,c=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:s,dimension:o,forceShouldAnimate:f,snapshot:t(i,a,c,u,null)}}));return(s,i)=>{if(sy(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,a=s.dimensions.draggables[i.draggableId],c=$s(s.impact),u=DOe(s.impact),f=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,a,i.isClone,c,u,f)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const a=i.isClone,c=s.dimensions.draggables[i.draggableId],u=o.result,f=u.mode,h=sW(u),p=POe(u),v={duration:s.dropDuration,curve:Y$.drop,moveTo:s.newHomeClientOffset,opacity:p?ny.opacity.drop:null,scale:p?ny.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:v,draggingOver:h,combineWith:p,mode:f,forceShouldAnimate:null,snapshot:t(f,a,h,p,v)}}}return null}}function iW(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const FOe={mapped:{type:"SECONDARY",offset:cr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:iW(null)}};function BOe(){const e=ar((o,a)=>({x:o,y:a})),t=ar(iW),n=ar((o,a=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:c,snapshot:t(a)}})),r=o=>o?n(cr,o,!0):null,s=(o,a,c,u)=>{const f=c.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),p=cS(c),y=p&&p.draggableId===o?a:null;if(!f){if(!h)return r(y);if(c.displaced.invisible[o])return null;const S=xm(u.displacedBy.point),N=e(S.x,S.y);return n(N,y,!0)}if(h)return r(y);const v=c.displacedBy.point,x=e(v.x,v.y);return n(x,y,f.shouldAnimate)};return(o,a)=>{if(sy(o))return o.critical.draggable.id===a.draggableId?null:s(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===a.draggableId?null:s(a.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const zOe=()=>{const e=LOe(),t=BOe();return(r,s)=>e(r,s)||t(r,s)||FOe},VOe={dropAnimationFinished:DH},UOe=lH(zOe,VOe,null,{context:Z$,areStatePropsEqual:rW})(IOe);function oW(e){return nw(n3).isUsingCloneFor===e.draggableId&&!e.isClone?null:je.createElement(UOe,e)}function qOe(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return je.createElement(oW,_h({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const aW=e=>t=>e===t,HOe=aW("scroll"),WOe=aW("auto"),wD=(e,t)=>t(e.overflowX)||t(e.overflowY),GOe=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return wD(n,HOe)||wD(n,WOe)},YOe=()=>!1,lW=e=>e==null?null:e===document.body?YOe()?e:null:e===document.documentElement?null:GOe(e)?e:lW(e.parentElement);var ZO=e=>({x:e.scrollLeft,y:e.scrollTop});const cW=e=>e?window.getComputedStyle(e).position==="fixed"?!0:cW(e.parentElement):!1;var JOe=e=>{const t=lW(e),n=cW(e);return{closestScrollable:t,isFixedOnPage:n}},XOe=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:o,closest:a})=>{const c=(()=>{if(!a)return null;const{scrollSize:p,client:y}=a,v=zH({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:y,scrollSize:p,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:v,diff:{value:cr,displacement:cr}}}})(),u=s==="vertical"?z$:xH,f=Dh({page:o,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:t,client:i,page:o,frame:c,subject:f}};const KOe=(e,t)=>{const n=uH(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,o=s+t.scrollWidth,c=D$({top:r,right:o,bottom:i,left:s},n.border);return L$({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var QOe=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:a})=>{const c=n.closestScrollable,u=KOe(e,c),f=Kx(u,r),h=(()=>{if(!c)return null;const y=uH(c),v={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:y,page:Kx(y,r),scroll:ZO(c),scrollSize:v,shouldClipSubject:a}})();return XOe({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:u,page:f,closest:h})};const ZOe={passive:!1},eje={passive:!0};var SD=e=>e.shouldPublishImmediately?ZOe:eje;const ov=e=>e&&e.env.closestScrollable||null;function tje(e){const t=w.useRef(null),n=nw(hS),r=e3("droppable"),{registry:s,marshal:i}=n,o=XH(e),a=Tt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=w.useRef(a),u=Tt(()=>ar((j,A)=>{t.current||De();const $={x:j,y:A};i.updateDroppableScroll(a.id,$)}),[a.id,i]),f=rt(()=>{const j=t.current;return!j||!j.env.closestScrollable?cr:ZO(j.env.closestScrollable)},[]),h=rt(()=>{const j=f();u(j.x,j.y)},[f,u]),p=Tt(()=>Qg(h),[h]),y=rt(()=>{const j=t.current,A=ov(j);if(j&&A||De(),j.scrollOptions.shouldPublishImmediately){h();return}p()},[p,h]),v=rt((j,A)=>{t.current&&De();const $=o.current,k=$.getDroppableRef();k||De();const R=JOe(k),F={ref:k,descriptor:a,env:R,scrollOptions:A};t.current=F;const z=QOe({ref:k,descriptor:a,env:R,windowScroll:j,direction:$.direction,isDropDisabled:$.isDropDisabled,isCombineEnabled:$.isCombineEnabled,shouldClipSubject:!$.ignoreContainerClipping}),L=R.closestScrollable;return L&&(L.setAttribute(gD.contextId,n.contextId),L.addEventListener("scroll",y,SD(F.scrollOptions))),z},[n.contextId,a,y,o]),x=rt(()=>{const j=t.current,A=ov(j);return j&&A||De(),ZO(A)},[]),S=rt(()=>{const j=t.current;j||De();const A=ov(j);t.current=null,A&&(p.cancel(),A.removeAttribute(gD.contextId),A.removeEventListener("scroll",y,SD(j.scrollOptions)))},[y,p]),N=rt(j=>{const A=t.current;A||De();const $=ov(A);$||De(),$.scrollTop+=j.y,$.scrollLeft+=j.x},[]),_=Tt(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:x,dragStopped:S,scroll:N}),[S,v,x,N]),C=Tt(()=>({uniqueId:r,descriptor:a,callbacks:_}),[_,a,r]);Rs(()=>(c.current=C.descriptor,s.droppable.register(C),()=>{t.current&&S(),s.droppable.unregister(C)}),[_,a,S,C,i,s.droppable]),Rs(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Rs(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function O_(){}const ED={width:0,height:0,margin:lNe},nje=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?ED:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},rje=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=nje({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?pg.placeholder:null}},sje=e=>{const t=w.useRef(null),n=rt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:o}=e,[a,c]=w.useState(e.animate==="open");w.useEffect(()=>a?r!=="open"?(n(),c(!1),O_):t.current?O_:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):O_,[r,a,n]);const u=rt(h=>{h.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),f=rje({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return je.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})};var ije=je.memo(sje);class oje extends je.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const aje=e=>{const t=w.useContext(hS);t||De();const{contextId:n,isMovementAllowed:r}=t,s=w.useRef(null),i=w.useRef(null),{children:o,droppableId:a,type:c,mode:u,direction:f,ignoreContainerClipping:h,isDropDisabled:p,isCombineEnabled:y,snapshot:v,useClone:x,updateViewportMaxScroll:S,getContainerForClone:N}=e,_=rt(()=>s.current,[]),C=rt((L=null)=>{s.current=L},[]);rt(()=>i.current,[]);const j=rt((L=null)=>{i.current=L},[]),A=rt(()=>{r()&&S({maxScroll:UH()})},[r,S]);tje({droppableId:a,type:c,mode:u,direction:f,isDropDisabled:p,isCombineEnabled:y,ignoreContainerClipping:h,getDroppableRef:_});const $=Tt(()=>je.createElement(oje,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:L,data:B,animate:H})=>je.createElement(ije,{placeholder:B,onClose:L,innerRef:j,animate:H,contextId:n,onTransitionEnd:A})),[n,A,e.placeholder,e.shouldAnimatePlaceholder,j]),k=Tt(()=>({innerRef:C,placeholder:$,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,$,C]),R=x?x.dragging.draggableId:null,F=Tt(()=>({droppableId:a,type:c,isUsingCloneFor:R}),[a,R,c]);function z(){if(!x)return null;const{dragging:L,render:B}=x,H=je.createElement(oW,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(I,V)=>B(I,V,L));return Df.createPortal(H,N())}return je.createElement(n3.Provider,{value:F},o(k,v),z())};function lje(){return document.body||De(),document.body}const ND={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:lje},uW=e=>{let t={...e},n;for(n in ND)e[n]===void 0&&(t={...t,[n]:ND[n]});return t},j_=(e,t)=>e===t.droppable.type,_D=(e,t)=>t.draggables[e.draggable.id],cje=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=ar(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=ar((i,o,a,c,u,f)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const v=f?{render:f,dragging:n(u.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:v}}if(!o)return t;if(!c)return e;const y={isDraggingOver:a,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(i,o)=>{const a=uW(o),c=a.droppableId,u=a.type,f=!a.isDropDisabled,h=a.renderClone;if(sy(i)){const p=i.critical;if(!j_(u,p))return t;const y=_D(p,i.dimensions),v=$s(i.impact)===c;return r(c,f,v,v,y,h)}if(i.phase==="DROP_ANIMATING"){const p=i.completed;if(!j_(u,p.critical))return t;const y=_D(p.critical,i.dimensions);return r(c,f,sW(p.result)===c,$s(p.impact)===c,y,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const p=i.completed;if(!j_(u,p.critical))return t;const y=$s(p.impact)===c,v=!!(p.impact.at&&p.impact.at.type==="COMBINE"),x=p.critical.droppable.id===c;return y?v?e:t:x?e:t}return t}},uje={updateViewportMaxScroll:x_e},dje=lH(cje,uje,(e,t,n)=>({...uW(n),...e,...t}),{context:Z$,areStatePropsEqual:rW})(aje);function fje({data:e=[],extractId:t,renderItem:n,dndProps:r={droppableId:"sortable-list",direction:"vertical"},onReordered:s,onChange:i,disableIndices:o=[],...a}){function c({destination:f,source:h}){if(o.includes(h.index)||o.includes(f.index))return;const p={from:h.index,to:(f==null?void 0:f.index)||0};s==null||s(p.from,p.to)}const u=e.map((f,h)=>{const p=t?t(f):w.useId();return m.jsx(qOe,{index:h,draggableId:p,isDragDisabled:o.includes(h),children:(y,v,x)=>n?n({...f,dnd:{provided:y,snapshot:v,rubic:x}},h):m.jsxs("div",{className:"flex flex-row gap-2 p-2 border border-gray-200 rounded-md mb-3 bg-white items-center",ref:y.innerRef,...y.draggableProps,children:[m.jsx("div",{...y.dragHandleProps,children:m.jsx(cxe,{className:"size-5",stroke:1.5})}),m.jsx("p",{children:JSON.stringify(f)})]})},p)});return m.jsx(_Oe,{onDragEnd:c,children:m.jsx(dje,{...r,children:f=>m.jsxs("div",{...a,...f.droppableProps,ref:f.innerRef,children:[u,f.placeholder]})})})}function r3({children:e,target:t,defaultOpen:n=!1,backdrop:r=!1,position:s="bottom-start",overlayProps:i,className:o}){const[a,c]=w.useState(n),u=jy(()=>c(!1)),f=Dt((p=50)=>setTimeout(()=>c(y=>!y),typeof p=="number"?p:0)),h={"bottom-start":"mt-1 top-[100%]","bottom-end":"right-0 top-[100%] mt-1","top-start":"bottom-[100%] mb-1","top-end":"bottom-[100%] right-0 mb-1"}[s];return m.jsxs(m.Fragment,{children:[a&&r&&m.jsx("div",{className:"animate-fade-in w-full h-full absolute top-0 bottom-0 right-0 left-0 bg-background/60"}),m.jsxs("div",{role:"dropdown",className:Ue("relative flex",o),ref:u,children:[w.cloneElement(e,{onClick:f}),a&&m.jsx("div",{...i,className:Ue("animate-fade-in absolute z-20 flex flex-col bg-background border border-muted px-1 py-1 rounded-lg shadow-lg backdrop-blur-sm min-w-full max-w-20",h,i==null?void 0:i.className),children:t({toggle:f})})]})]})}const pS=[{type:"primary",label:"Primary",icon:EP,addable:!1,disabled:["name"],hidden:["virtual"]},{type:"text",label:"Text",icon:EP},{type:"number",label:"Number",icon:ESe},{type:"boolean",label:"Boolean",icon:_Se},{type:"date",label:"Date",icon:wq},{type:"enum",label:"Enum",icon:_$},{type:"json",label:"JSON",icon:Z1e},{type:"jsonschema",label:"JSON Schema",icon:uSe},{type:"relation",label:"Relation",icon:N$,addable:!1,hidden:["virtual"]},{type:"media",label:"Media",icon:t0,addable:!1,hidden:["virtual"]}],CD=()=>{const[e,t]=Q8([!1,!0]),n=e?G1e:NSe;return m.jsx("button",{role:"checkbox",type:"button",className:"flex px-3 py-3",onClick:()=>t(),children:m.jsx(n,{size:18})})};function gS({data:e=[],columns:t,checkable:n,onClickRow:r,onClickPage:s,onClickSort:i,total:o,sort:a,page:c=1,perPage:u=10,perPageOptions:f,onClickPerPage:h,classNames:p,renderHeader:y,rowActions:v,renderValue:x,onClickNew:S}){o=o||(e==null?void 0:e.length)||0,c=c||1;const N=t&&t.length>0?t:Object.keys((e==null?void 0:e[0])||{}),_=Math.max(Math.ceil(o/u),1),C=x||yS;return m.jsxs("div",{className:"flex flex-col gap-3",children:[S&&m.jsx("div",{className:"flex flex-row space-between",children:S&&m.jsx(ot,{onClick:S,children:"Create new"})}),m.jsx("div",{className:"border-muted border rounded-md shadow-sm w-full max-w-full overflow-x-scroll overflow-y-hidden",children:m.jsxs("table",{className:"w-full text-md",children:[N.length>0?m.jsx("thead",{className:"sticky top-0 bg-muted/10",children:m.jsxs("tr",{children:[n&&m.jsx("th",{align:"center",className:"w-[40px]",children:m.jsx(CD,{})}),N.map((j,A)=>{const $=(y==null?void 0:y(j))??li(j);return m.jsx("th",{children:m.jsx("div",{className:"flex flex-row py-1 px-1 font-normal text-primary/55",children:m.jsxs("button",{type:"button",className:Ue("py-1.5 rounded-md inline-flex flex-row justify-start items-center gap-1",i?"link hover:bg-primary/5 pl-2.5 pr-1":"px-2.5"),onClick:()=>i==null?void 0:i(j),children:[m.jsx("span",{className:"text-left text-nowrap whitespace-nowrap",children:$}),(i||a&&a.by===j)&&m.jsx(hje,{sort:a,field:j})]})})},A)}),v&&v.length>0&&m.jsx("th",{className:"w-10"})]})}):null,m.jsx("tbody",{children:!e||!Array.isArray(e)||e.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:N.length+(n?1:0),children:m.jsx("div",{className:"flex flex-col gap-2 p-8 justify-center items-center border-t border-muted",children:m.jsx("i",{className:"opacity-50",children:Array.isArray(e)?"No data to show":e?m.jsx("pre",{children:JSON.stringify(e,null,2)}):"Loading..."})})})}):e.map((j,A)=>{const $=()=>r==null?void 0:r(j);return m.jsxs("tr",{"data-border":A>0,className:"hover:bg-primary/5 active:bg-muted border-muted data-[border]:border-t cursor-pointer transition-colors",children:[n&&m.jsx("td",{align:"center",children:m.jsx(CD,{})}),Object.entries(j).map(([k,R],F)=>m.jsx("td",{onClick:$,children:m.jsx("div",{className:"flex flex-row items-start py-3 px-3.5 font-normal ",children:m.jsx(C,{property:k,value:R})})},F)),v&&v.length>0&&m.jsx("td",{children:m.jsx("div",{className:"flex flex-row justify-end pr-2",children:m.jsxs(Os,{position:"bottom-end",children:[m.jsx(Os.Target,{children:m.jsx(Nt,{Icon:fSe})}),m.jsx(Os.Dropdown,{children:v.map(k=>m.jsx(Os.Item,{onClick:()=>k.onClick(j,A),leftSection:k.icon&&m.jsx(k.icon,{}),children:k.label},k.label))})]})})})]},A)})})]})}),m.jsxs("div",{className:"flex flex-row items-center justify-between",children:[m.jsx("div",{className:"hidden md:flex text-primary/40",children:m.jsx(mje,{perPage:u,page:c,items:(e==null?void 0:e.length)||0,total:o})}),m.jsxs("div",{className:"flex flex-row gap-2 md:gap-10 items-center",children:[f&&m.jsxs("div",{className:"hidden md:flex flex-row items-center gap-2 text-primary/40",children:["Per Page"," ",m.jsx(Ur,{items:f.map(j=>({label:String(j),perPage:j})),position:"top-end",onClickItem:j=>h==null?void 0:h(j.perPage),children:m.jsx(ot,{children:u})})]}),m.jsxs("div",{className:"text-primary/40",children:["Page ",c," of ",_]}),s&&m.jsx("div",{className:"flex flex-row gap-1.5",children:m.jsx(pje,{current:c,total:_,onClick:s})})]})]})]})}const yS=({value:e,property:t})=>{let n=!1;return e!==null&&typeof e=="object"&&(e=JSON.stringify(e),n=!0),e!==null&&typeof e<"u"?m.jsx("span",{className:Ue("line-clamp-2",n&&"font-mono break-all"),children:e}):m.jsx("span",{className:"opacity-10 font-mono",children:"null"})},hje=({sort:e,field:t})=>!e||e.by!==t?m.jsx(_$,{size:18,className:"mt-[1px]"}):e.dir==="asc"?m.jsx(X1e,{size:18,className:"mt-[1px]"}):m.jsx(Y1e,{size:18,className:"mt-[1px]"}),mje=({perPage:e,page:t,items:n,total:r})=>r===0?m.jsx(m.Fragment,{children:"No rows to show"}):r===1?m.jsx(m.Fragment,{children:"Showing 1 row"}):m.jsxs(m.Fragment,{children:["Showing ",e*(t-1)+1,"-",e*(t-1)+n," of ",r," rows"]}),pje=({current:e,total:t,onClick:n})=>[{value:1,Icon:aSe,disabled:e===1},{value:e-1,Icon:sSe,disabled:e===1},{value:e+1,Icon:iSe,disabled:e===t},{value:t,Icon:lSe,disabled:e===t}].map((s,i)=>m.jsx("button",{role:"button",type:"button",disabled:s.disabled,className:"px-2 py-2 border-muted border rounded-md enabled:link text-lg enabled:hover:bg-primary/5 text-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{const o=s.value,a=o<1?1:o>t?t:o;n==null||n(a)},children:m.jsx(s.Icon,{})},i)),gje=({path:e,backTo:t,onBack:n})=>{const[r,s]=bi(),i=window.location.pathname,o=Array.isArray(e)?e:[e],a=i.split("/").filter(h=>h!==""),c=o.length>1,u=n||Dt(()=>{if(t){s(t,{replace:!0});return}const h=a.slice(0,o.length+1).join("/");s(`~/${h}`,{replace:!0})}),f=w.useMemo(()=>o.map((h,p)=>{const y=p===o.length-1,v=a.indexOf(h),x=a.slice(0,v+1).join("/"),S=Dy(h);return{last:y,href:x,string:S}}),[o,a]);return m.jsxs("div",{className:"flex flex-row flex-grow items-center gap-2 text-lg",children:[c&&m.jsx(Nt,{onClick:u,Icon:E$,variant:"default",size:"lg",className:"mr-1"}),m.jsx("div",{className:"hidden md:flex gap-2",children:m.jsx(dW,{crumbs:f})}),m.jsx("div",{className:"flex md:hidden gap-2",children:m.jsx(yje,{crumbs:f})})]})},dW=({crumbs:e})=>e.map((t,n)=>t.last?m.jsx(fW,{...t},n):m.jsx(hW,{...t},n)),yje=({crumbs:e})=>{const[,t]=bi();if(e.length<=2)return m.jsx(dW,{crumbs:e});const n=e[0],r=e[e.length-1],s=w.useMemo(()=>e.slice(1,-1).map(o=>({label:o.string,href:o.href})),[e]),i=Dt(o=>t(`~/${o.href}`));return m.jsxs(m.Fragment,{children:[m.jsx(hW,{...n}),m.jsx(Ur,{onClickItem:i,items:s,children:m.jsx(Nt,{Icon:zc,variant:"ghost"})}),m.jsx("span",{className:"opacity-25 dark:font-bold font-semibold",children:"/"}),m.jsx(fW,{...r})]})},fW=({string:e})=>m.jsx("span",{className:"text-nowrap dark:font-bold font-semibold",children:e}),hW=({href:e,string:t})=>m.jsxs("div",{className:"opacity-50 flex flex-row gap-2 dark:font-bold font-semibold",children:[m.jsx(X1,{to:`~/${e}`,className:"text-nowrap",children:t}),m.jsx("span",{className:"opacity-50",children:"/"})]});function mW(e,t,n){if(!e.properties)return[{...e.toJSON()},t,{}];const r=JSON.parse(JSON.stringify(e)),s={...r,properties:Ms(r.properties,n)};s.required&&(s.required=s.required.filter(a=>!n.includes(a)));const i={};for(const a of n)i[a]={config:t[a],schema:r.properties[a]};const o=Ms(t,n);return[s,o,i]}const bje=w.forwardRef((e,t)=>{const[n,r]=w.useState(!!(e.value??e.defaultValue));w.useEffect(()=>{console.log("value change",e.value),r(!!e.value)},[e.value]);function s(i){var o;r(i.target.checked),(o=e.onChange)==null||o.call(e,i.target.checked)}return m.jsx("div",{className:"flex flex-row",children:m.jsx(Ka,{ref:t,checked:n,onChange:s,disabled:e.disabled,id:e.id})})}),Qi=({error:e,as:t,...n})=>{const r=t||"div";return m.jsx(r,{...n,className:Ue("flex flex-col gap-1.5",t==="fieldset"&&"border border-primary/10 p-3 rounded-md",t==="fieldset"&&e&&"border-red-500",e&&"text-red-500",n.className)})},Ro=({as:e,...t})=>{const n=e||"label";return m.jsx(n,{...t})},vje=({className:e,...t})=>m.jsx("div",{...t,className:Ue("text-sm text-primary/50",e)}),xje=({className:e,...t})=>m.jsx("div",{...t,className:Ue("text-sm text-red-500",e)}),s3=({field:e,...t})=>{const n=e.getDescription();return m.jsxs(Ro,{...t,title:n,className:"flex flex-row gap-1 items-center",children:[e.getLabel(),e.isRequired()&&m.jsx("span",{className:"font-medium opacity-30",children:"*"}),n&&m.jsx(vSe,{className:"opacity-50"})]})},sl=w.forwardRef((e,t)=>{const n=e.disabled||e.readOnly;return m.jsx("input",{type:"text",...e,ref:t,className:Ue("bg-muted/40 h-11 rounded-md py-2.5 px-4 outline-none w-full",n&&"bg-muted/50 text-primary/50",!n&&"focus:bg-muted focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all",e.className)})}),wje=w.forwardRef((e,t)=>e.type==="password"?m.jsx(pW,{...e,ref:t}):m.jsx(sl,{...e,ref:t})),pW=w.forwardRef((e,t)=>{const[n,r]=w.useState(!1);function s(){r(i=>!i)}return m.jsxs("div",{className:"relative w-full",children:[m.jsx(sl,{...e,type:n?"text":"password",className:"w-full",ref:t}),m.jsx("div",{className:"absolute right-3 top-0 bottom-0 flex items-center",children:m.jsx(Nt,{Icon:n?mSe:_q,onClick:s,variant:"ghost",className:"opacity-70"})})]})}),Sje=w.forwardRef((e,t)=>m.jsx("textarea",{rows:3,...e,ref:t,className:Ue("bg-muted/40 min-h-11 rounded-md py-2.5 px-4 focus:bg-muted outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50",e.className)})),ej=w.forwardRef((e,t)=>{const n=w.useRef(null),r=woe();w.useImperativeHandle(t,()=>n.current);const s=Dt(()=>{n!=null&&n.current&&(n.current.focus(),["Safari"].includes(r)?n.current.click():n.current.showPicker())});return m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute h-full right-3 top-0 bottom-0 flex items-center",children:m.jsx(Nt,{Icon:wq,onClick:s})}),m.jsx(sl,{...e,type:e.type??"date",ref:n,className:"w-full appearance-none"})]})}),U9e=w.forwardRef((e,t)=>{const[n,r]=w.useState(!!e.value);w.useEffect(()=>{r(!!e.value)},[e.value]);function s(i){var o;r(i.target.checked),(o=e.onChange)==null||o.call(e,i.target.checked)}return m.jsx("div",{className:"h-11 flex items-center",children:m.jsx("input",{...e,type:"checkbox",ref:t,className:"outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500  transition-all disabled:opacity-70 scale-150 ml-1",checked:n,onChange:s,disabled:e.disabled})})}),OD={xs:{root:"h-5 w-8",thumb:"data-[state=checked]:left-[calc(100%-1rem)]"},sm:{root:"h-6 w-10",thumb:"data-[state=checked]:left-[calc(100%-1.25rem)]"},md:{root:"h-7 w-12",thumb:"data-[state=checked]:left-[calc(100%-1.5rem)]"}},Eje=w.forwardRef(({type:e,required:t,...n},r)=>m.jsx(C1e,{className:yn("relative cursor-pointer rounded-full bg-muted border-2 border-transparent outline-none ring-1 dark:ring-primary/10 ring-primary/20 data-[state=checked]:ring-primary/60 data-[state=checked]:bg-primary/60 appearance-none transition-colors hover:bg-muted/80",OD[n.size??"md"].root,n.disabled&&"opacity-50 !cursor-not-allowed"),onCheckedChange:s=>{var i;console.log("setting",s),(i=n.onChange)==null||i.call(n,{target:{value:s}})},...n,checked:typeof n.checked<"u"?n.checked:typeof n.value<"u"?!!n.value:void 0,ref:r,children:m.jsx(O1e,{className:yn("absolute top-0 left-0 h-full aspect-square rounded-full bg-primary/30 data-[state=checked]:bg-background transition-[left,right] duration-100 border border-muted",OD[n.size??"md"].thumb)})})),gW=w.forwardRef(({children:e,options:t,...n},r)=>m.jsxs("div",{className:"flex w-full relative",children:[m.jsx("select",{...n,ref:r,className:Ue("bg-muted/40 focus:bg-muted rounded-md py-2.5 px-4 outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50","appearance-none h-11 w-full",!n.multiple&&"border-r-8 border-r-transparent",n.className),children:t?m.jsxs(m.Fragment,{children:[!n.required&&m.jsx("option",{value:""}),t.map(s=>typeof s!="object"?{value:s,label:String(s)}:s).map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))]}):e}),!n.multiple&&m.jsx(Sq,{className:"absolute right-3 top-0 bottom-0 h-full opacity-70 pointer-events-none",size:18})]})),Nje=(e,t)=>{switch(e){case"date":return ej;case"boolean":return bje;case"textarea":return Sje;default:return sl}};function yW({open:e=!1,children:t,onClose:n=()=>null,allowBackdropClose:r=!0,className:s,stickToTop:i}){const o=jy(()=>{r&&n()});return m.jsx(m.Fragment,{children:e&&m.jsx("div",{className:Ue("w-full h-full fixed bottom-0 top-0 right-0 left-0 bg-background/60 flex justify-center backdrop-blur-sm z-10",i?"items-start":"items-center"),children:m.jsx("div",{className:Ue("z-20 flex flex-col bg-background rounded-lg shadow-lg",s),ref:o,children:t})})})}const _je=({schema:e,uiSchema:t={},anyOfValues:n,path:r,prefixPath:s,generateKey:i})=>{const[o,a]=bi(),[c,u]=w.useState(e),[f,h]=w.useState(!1),{actions:p}=xt(),[y,{open:v,close:x}]=Qh(!1),S=i!==void 0,N=typeof i=="string",[_,C]=w.useState(N?i:""),j=zw(!S),A=w.useRef(null),$="anyOf"in e;function k(L){i&&typeof i=="function"&&R({target:{value:i(L)}}),console.log("form change",L)}function R(L){const B=String(L.target.value);if(B.length>0&&!/^[a-zA-Z_][a-zA-Z0-9_ ]*$/.test(B)){console.log("no match",B);return}C(B.toLowerCase().replace(/ /g,"_").replace(/__+/g,"_"))}async function F(){var L,B,H,I;if((L=A.current)!=null&&L.validateForm()){h(!0);const V=(B=A.current)==null?void 0:B.formData(),[T,...D]=r,P=[...D,_].join(".");await p.add(T,P,V)?setTimeout(()=>{a(s+_,{replace:!0})},500):h(!1)}console.log("valid?",(H=A.current)==null?void 0:H.validateForm()),console.log("data",_,(I=A.current)==null?void 0:I.formData())}const z=$?e.anyOf.map(L=>{var V,T;const B=L.title,H=((V=n==null?void 0:n[B])==null?void 0:V.label)||B,I=(T=n==null?void 0:n[B])==null?void 0:T.icon;return{label:H,icon:I,onClick:()=>{u(L),v()}}}):[];return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex flex-row",children:$?m.jsx(Ur,{position:"top-start",items:z,itemsClassName:"gap-3",children:m.jsx(ot,{children:"Add new"})}):m.jsx(ot,{onClick:v,children:"Add new"})}),m.jsx(yW,{open:y,allowBackdropClose:!1,onClose:x,className:"min-w-96 w-6/12 mt-[30px] mb-[20px]",stickToTop:!0,children:m.jsxs("div",{className:"border border-muted rounded-lg flex flex-col overflow-y-scroll font-normal",style:{maxHeight:"calc(100dvh - 100px)"},children:[m.jsx("div",{className:"bg-muted py-2 px-4 text-primary/70 font-mono flex flex-row gap-2 items-center",children:[...r,_].join(".")}),m.jsxs("div",{className:"flex flex-row gap-10 sticky top-0 bg-background z-10 p-4 border-b border-muted",children:[m.jsxs("div",{className:"flex flex-row flex-grow items-center relative",children:[m.jsx(sl,{ref:j,className:"w-full",placeholder:"New unique key...",onChange:R,value:_,disabled:S}),S&&m.jsx("div",{className:"absolute h-full flex items-center z-10 right-3.5 top-0 bottom-0 font-mono font-sm opacity-50",children:"generated"})]}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(ot,{onClick:x,disabled:f,children:"Cancel"}),m.jsx(ot,{variant:"primary",onClick:F,disabled:f||_.length===0,children:"Create"})]})]}),m.jsx("div",{className:"flex flex-col p-4",children:m.jsx(vm,{ref:A,schema:$h(c,["title"]),uiSchema:t,onChange:k,className:"legacy hide-required-mark fieldset-alternative mute-root"})})]})})]})},jD=w.forwardRef(({tabs:e,title:t},n)=>{const[r,{open:s,close:i}]=Qh(!1),[o,a]=w.useState(0),c=e[o];return w.useImperativeHandle(n,()=>({open:s,close:i,isOpen:r})),c?m.jsx(yW,{open:r,onClose:i,className:"min-w-96 w-9/12 mt-[80px] mb-[20px]",stickToTop:!0,children:m.jsxs("div",{className:"border border-primary rounded-lg flex flex-col overflow-scroll font-normal",style:{maxHeight:"calc(100dvh - 100px)"},children:[t&&m.jsxs("div",{className:"bg-primary py-2 px-4 text-background font-mono flex flex-row gap-2 items-center",children:[m.jsx(jSe,{size:20,className:"opacity-50"}),t]}),m.jsxs("div",{className:"flex flex-row justify-between sticky top-0 bg-background z-10 py-4 px-5",children:[m.jsx("div",{className:"flex flex-row gap-3",children:e.map((u,f)=>m.jsx("button",{onClick:()=>a(f),"data-active":f===o?1:void 0,className:"font-mono data-[active]:font-bold",children:u.title},f))}),m.jsx(Nt,{Icon:C$,onClick:i})]}),m.jsx("div",{className:"",children:m.jsx(fs,{json:c.json,expand:6,showSize:!0,showCopy:!0})})]})}):null});function rs({schema:e,uiSchema:t,config:n,prefix:r="/",options:s,path:i=[],properties:o}){var H,I,V;const[a,c]=w.useState(!1),{actions:u,readonly:f}=xt(),h=w.useRef(null),p=w.useRef(null),y=w.useRef(null),[v,x]=w.useState(!1);Uj([["mod+s",T=>(T.preventDefault(),L(),!1)],["e",()=>{v||z()}],["Escape",()=>{v&&z()}]]);const S=w.useMemo(()=>o?Object.entries(o).filter(([,T])=>T.hide||T.extract).map(([T])=>T):[],[o]),N=Dt(T=>{const D=window.location.href.split("/").slice(0,-1).join("/");T?window.location.replace(D):window.history.back()}),_=((H=s==null?void 0:s.allowDelete)==null?void 0:H.call(s,n))??!0,C=((I=s==null?void 0:s.allowEdit)==null?void 0:I.call(s,n))??!0,j=((V=s==null?void 0:s.showAlert)==null?void 0:V.call(s,n))??void 0;console.log("--setting",{schema:e,config:n,prefix:r,path:i,exclude:S});const[A,$,k]=mW(e,n,S);console.log({reducedSchema:A,reducedConfig:$,extracted:k});const R=Object.keys(k),F=R.find(T=>window.location.pathname.endsWith(T))??R[0],z=Dt(()=>{!C||f||x(T=>!T)}),L=Dt(async()=>{var T,D;if(!(!C||!v||f)&&(T=h.current)!=null&&T.validateForm()){c(!0);const P=(D=h.current)==null?void 0:D.formData(),[q,...M]=i;let W;console.log("save:data",{module:q,restOfPath:M},P),M.length>0?(console.log("-> patch",{module:q,path:M.join(".")},P),W=await u.patch(q,M.join("."),P)):(console.log("-> set",{module:q},P),W=await u.set(q,P,!0)),console.log("save:success",W),W?s!=null&&s.reloadOnSave&&(await u.reload(),c(!1)):c(!1)}}),B=Dt(async()=>{if(!_)return;const[T,...D]=i;window.confirm(`Are you sure you want to delete ${i.join(".")}`)&&await u.remove(T,D.join("."))&&N(!0)});return n?m.jsxs(m.Fragment,{children:[m.jsx(An,{className:i.length>1?"pl-3":"",scrollable:!0,right:m.jsxs(m.Fragment,{children:[m.jsx(Ur,{items:[{label:"Inspect local schema",onClick:()=>{var T;(T=p.current)==null||T.open()}},{label:"Inspect schema",onClick:()=>{var T;(T=y.current)==null||T.open()}},_&&{label:"Delete",destructive:!0,onClick:B}],position:"bottom-end",children:m.jsx(Nt,{Icon:ym})}),m.jsx(ot,{onClick:z,disabled:!C||f,children:v?"Cancel":"Edit"}),v&&m.jsx(ot,{variant:"primary",onClick:L,disabled:a||!C||f,children:a?"Save...":"Save"})]}),children:m.jsx(gje,{path:i})}),m.jsxs(Zn,{children:[typeof j<"u"&&m.jsx(So.Warning,{message:j}),m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(vm,{ref:h,readonly:!v,schema:$h(A,["title"]),formData:$,uiSchema:t,onChange:console.log,className:"legacy hide-required-mark fieldset-alternative mute-root"})}),R.length>0&&m.jsxs("div",{className:"flex flex-col max-w-full",children:[m.jsx(kq,{items:R.map(T=>{var D;return{as:X1,label:li(T),href:`${r}/${T}`.replace(/\/+/g,"/"),active:F===T,badge:Object.keys(((D=k[T])==null?void 0:D.config)??{}).length}})}),m.jsx("div",{className:"flex flex-grow flex-col gap-3 p-3",children:m.jsx(at,{path:"/:prop?",component:({params:T})=>{var X,Q,oe,ae;const[,D]=bi(),P=T.prop??F,q=((X=k[P])==null?void 0:X.config)??{},M=(Q=o==null?void 0:o[P])!=null&&Q.tableValues?(oe=o==null?void 0:o[P])==null?void 0:oe.tableValues(q):Object.entries(q).map(([fe,le])=>{if(!le||typeof le!="object")return{key:fe,value:le};const ue=Object.keys(le)[0],ve=le[ue],_e=$h(le,[ue]);return{key:fe,[ue]:ve,value:_e}}),W=(ae=o==null?void 0:o[P])==null?void 0:ae.new;return P?m.jsxs(m.Fragment,{children:[W&&m.jsx(_je,{schema:W.schema,uiSchema:W.uiSchema,anyOfValues:W.anyOfValues,prefixPath:`/${P}/`,path:[...i,P],generateKey:W.generateKey}),m.jsx(gS,{data:M,onClickRow:fe=>{const le=Object.values(fe)[0];D(`/${P}/${le}`)}})]}):m.jsx("div",{className:"h-80 flex justify-center align-center",children:m.jsx(Kn,{title:"No sub-setting selected",description:"Select one from the tab bar"})})}})})]})]},i.join("-")),m.jsx(jD,{ref:p,title:i.join("."),tabs:[{title:"Schema",json:A},{title:"Config",json:$}]}),m.jsx(jD,{ref:y,title:i.join("."),tabs:[{title:"Schema",json:e},{title:"Config",json:n}]})]}):m.jsx(Kn,{title:"Not found",description:`Configuration at path ${i.join(".")} doesn't exist.`,primary:{children:"Go back",onClick:()=>N()}})}const tj={config:{fillable:{"ui:options":{wrap:!0},anyOf:[{},{"ui:widget":"checkboxes"}]},hidden:{"ui:options":{wrap:!0},anyOf:[{},{"ui:widget":"checkboxes"}]},schema:{"ui:field":"JsonField"},ui_schema:{"ui:field":"JsonField"}}},Cje=pS.filter(e=>e.type!=="primary").reduce((e,t)=>(e[t.type]={label:t.label,icon:t.icon},e),{}),Oje={"1:1":{label:"One-to-One"},"n:1":{label:"Many-to-One"},"m:n":{label:"Many-to-Many"},poly:{label:"Polymorphic"}},jje=({schema:e,config:t})=>{const{app:n}=xt(),r=n.getAbsolutePath("settings"),s=Object.keys(t.entities??{});function i(o,a="entity"){s.length!==0&&(o.properties&&a in o.properties&&(o.properties[a].enum=s),"anyOf"in o&&o.anyOf.forEach(c=>i(c,a)))}return m.jsx(at,{path:"/data",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/entities/:entity/fields/:field",component:({params:{entity:o,field:a}})=>{var h,p,y,v,x;const c=(y=(p=(h=t.entities)==null?void 0:h[o])==null?void 0:p.fields)==null?void 0:y[a],u=(x=(v=e.properties.entities.additionalProperties)==null?void 0:v.properties)==null?void 0:x.fields.additionalProperties,f=u.anyOf.find(S=>S.properties.type.const===(c==null?void 0:c.type));return m.jsx(rs,{schema:f??u,config:c,prefix:`${r}/data/entities/${o}/fields/${a}`,path:["data","entities",o,"fields",a],options:{showAlert:S=>{if((S==null?void 0:S.type)==="primary")return"Modifying the primary field may result in strange behaviors."}},uiSchema:tj})},nest:!0}),m.jsx(at,{path:"/entities/:entity",component:({params:{entity:o}})=>{var f;const a=e.properties.entities.additionalProperties,c=F1(a);c.properties.type.readOnly=!0;const u={anyOf:c.properties.fields.additionalProperties.anyOf.filter(h=>h.properties.type.const!=="primary")};return m.jsx(rs,{schema:c,config:(f=t.entities)==null?void 0:f[o],options:{showAlert:h=>{if(h.type==="system")return"Modifying the system entities may result in strange behaviors."}},properties:{fields:{extract:!0,tableValues:h=>ti(h,(p,y,v)=>{var x;p.push({property:v,type:y.type,required:(x=y.config)!=null&&x.required?"Yes":"No"})},[]),new:{schema:u,uiSchema:tj,anyOfValues:Cje}}},path:["data","entities",o],prefix:`${r}/data/entities/${o}`})},nest:!0}),m.jsx(at,{path:"/indices/:index",component:({params:{index:o}})=>{var c;const a=e.properties.indices.additionalProperties;return s.length>0&&i(a,"entity"),m.jsx(rs,{schema:e.properties.indices.additionalProperties,config:(c=t.indices)==null?void 0:c[o],path:["data","indices",o],prefix:`${r}/data/indices/${o}`})},nest:!0}),m.jsx(at,{path:"/relations/:relation",component:({params:{relation:o}})=>{var f;const a=(f=t.relations)==null?void 0:f[o],u=e.properties.relations.additionalProperties.anyOf.find(h=>h.properties.type.const===(a==null?void 0:a.type));return s.length>0&&(i(u,"source"),i(u,"target")),m.jsx(rs,{schema:u,config:a,path:["data","relations",o],prefix:`${r}/data/relations/${o}`})},nest:!0}),m.jsx(at,{path:"/",component:()=>{const o=e.properties.indices.additionalProperties,a=e.properties.relations.additionalProperties;return i(o,"entity"),i(a,"source"),i(a,"target"),m.jsx(rs,{schema:e,config:t,properties:{entities:{extract:!0,tableValues:c=>ti(c,(u,f,h)=>{u.push({name:h,type:f.type,fields:Object.keys(f.fields??{}).length})},[]),new:{schema:e.properties.entities.additionalProperties,uiSchema:{fields:{"ui:widget":"hidden"},type:{"ui:widget":"hidden"}}}},relations:{extract:!0,new:{schema:e.properties.relations.additionalProperties,generateKey:c=>{var f,h,p,y;const u=[c.type.replace(":",""),c.source,c.target,(f=c.config)==null?void 0:f.mappedBy,(h=c.config)==null?void 0:h.inversedBy,(p=c.config)==null?void 0:p.connectionTable,(y=c.config)==null?void 0:y.connectionTableMappedName].filter(Boolean);return[...new Set(u)].join("_")},anyOfValues:Oje},tableValues:c=>ti(c,(u,f,h)=>{u.push({name:h,type:f.type,source:f.source,target:f.target})},[])},indices:{extract:!0,tableValues:c=>ti(c,(u,f,h)=>{u.push({name:h,entity:f.entity,fields:f.fields.join(", "),unique:f.unique?"Yes":"No"})},[]),new:{schema:o,uiSchema:{fields:{"ui:options":{orderable:!1}}},generateKey:c=>["idx",c.entity,c.unique&&"unique",...c.fields.filter(Boolean)].filter(Boolean).join("_")}}},prefix:`${r}/data`,path:["data"]})},nest:!0})]})})},bS=MV,Aje=nn(Object.values(bS)),Tje=He({name:td,new:mt({const:!0}).optional(),field:Aje}),$je=He({fields:Sn(Tje)}),Rje=Object.keys(bS);Rje[0];const i3=["label","description","required","fillable","hidden","virtual"];function kje(e){var t;return ze(Ms((t=bS[e])==null?void 0:t.properties.config.properties,i3))}const bW=w.forwardRef(function({fields:t,sortable:n,additionalFieldTypes:r,routePattern:s,isNew:i,readonly:o,...a},c){const u=Object.entries(t).map(([z,L])=>({name:z,field:L})),{control:f,formState:{isValid:h,errors:p},getValues:y,watch:v,register:x,setValue:S,setError:N,reset:_}=nl({mode:"all",resolver:rl($je),defaultValues:{fields:u}}),{fields:C,append:j,remove:A,move:$}=zEe({control:f,name:"fields"});function k(z){return Object.fromEntries(z.fields.map(L=>[L.name,Tg(L.field)]))}w.useEffect(()=>{a!=null&&a.onChange&&v(z=>{var L;(L=a==null?void 0:a.onChange)==null||L.call(a,k(z))})},[]),w.useImperativeHandle(c,()=>({reset:_,getValues:()=>y(),getData:()=>k(y()),isValid:()=>h,getErrors:()=>p}));function R(z){var L;j({name:"",new:!0,field:{type:z,config:(L=bS[z])==null?void 0:L.properties.config.template()}})}const F={watch:v,register:x,setValue:S,getValues:y,control:f,setError:N};return m.jsx(m.Fragment,{children:m.jsx("div",{className:"flex flex-col gap-6",children:m.jsx("div",{className:"flex flex-col gap-3",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[n?m.jsx(fje,{data:C,onReordered:$,extractId:z=>z.id,disableIndices:[0],renderItem:({dnd:z,...L},B)=>m.jsx(Ije,{readonly:o,field:L,index:B,form:F,errors:p,remove:A,dnd:z,routePattern:s,primary:{defaultFormat:L.defaultPrimaryFormat,editable:i}},L.id)},C.length):m.jsx("div",{children:C.map((z,L)=>m.jsx(vW,{readonly:o,field:z,index:L,form:F,errors:p,remove:A,routePattern:s,primary:{defaultFormat:a.defaultPrimaryFormat,editable:i}},z.id))}),m.jsx(K1,{children:m.jsx(r3,{className:"flex flex-col w-full",target:({toggle:z})=>m.jsx(Mje,{additionalFieldTypes:r,onSelected:z,onSelect:L=>{R(L)}}),children:m.jsx(ot,{className:"justify-center",children:"Add Field"})})})]})})})})}),Mje=({onSelect:e,additionalFieldTypes:t=[],onSelected:n})=>{const r=pS.filter(s=>s.addable!==!1);return t&&r.push(...t),m.jsx("div",{className:"flex flex-row gap-2 justify-center flex-wrap",children:r.map(s=>m.jsx(ot,{IconLeft:s.icon,variant:"ghost",onClick:()=>{var i;s.addable!==!1?e(s.type):(i=s.onClick)==null||i.call(s),n==null||n()},children:s.label},s.type))})},Ije=w.memo(vW,(e,t)=>e.field.id!==t.field.id);function vW({field:e,index:t,form:{watch:n,register:r,setValue:s,getValues:i,control:o,setError:a},remove:c,errors:u,dnd:f,routePattern:h,primary:p,readonly:y}){var L,B,H,I,V;const v=`fields.${t}.field`,x=e.field.type,S=n(`fields.${t}.name`),{active:N,toggle:_}=S$(h??"",S),C=pS.find(T=>T.type===x);$h(e.field.config,i3);const j=C.disabled||[],A=C.hidden||[],$=t===0,k=!!((L=u==null?void 0:u.fields)!=null&&L[t]),R=x==="primary";function F(T){return()=>{(S.length===0||window.confirm(`Sure to delete "${S}"?`))&&(c(T),_())}}const z=f?{...f.provided.draggableProps,ref:f.provided.innerRef}:{};return m.jsxs("div",{className:Ue("flex flex-col border border-muted rounded bg-background mb-2",N&&"mb-6",k&&"border-red-500 "),...z,children:[m.jsxs("div",{className:"flex flex-row gap-2 px-2 py-2",children:[f?m.jsx("div",{className:"flex items-center",...f.provided.dragHandleProps,children:m.jsx(Nt,{Icon:pSe,className:"mt-1",disabled:$})}):null,m.jsxs("div",{className:"flex flex-row flex-grow gap-4 items-center md:mr-6",children:[m.jsx(hd,{label:C.label,children:m.jsx("div",{className:"flex flex-row items-center p-2 bg-primary/5 rounded",children:m.jsx(C.icon,{className:"size-5"})})}),e.new?m.jsx(On,{error:!!((H=(B=u==null?void 0:u.fields)==null?void 0:B[t])!=null&&H.name.message),placeholder:"Enter a property name...",classNames:{root:"w-full h-full",wrapper:"font-mono h-full",input:"pt-px !h-full"},...r(`fields.${t}.name`),disabled:!e.new}):m.jsxs("div",{className:"font-mono flex-grow flex flex-row gap-3",children:[m.jsx("span",{children:S}),((I=e.field.config)==null?void 0:I.label)&&m.jsx("span",{className:"opacity-50",children:(V=e.field.config)==null?void 0:V.label})]}),m.jsx("div",{className:"flex-col gap-1 hidden md:flex",children:R?m.jsx(m.Fragment,{children:m.jsx(ka,{data:["integer","uuid"],defaultValue:p==null?void 0:p.defaultFormat,disabled:!(p!=null&&p.editable),placeholder:"Select format",name:`${v}.config.format`,allowDeselect:!1,control:o,size:"xs",className:"w-22"})}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-xs text-primary/50 leading-none",children:"Required"}),m.jsx(hg,{size:"sm",disabled:y,name:`${v}.config.required`,control:o})]})})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("div",{className:"flex flex-row gap-4",children:m.jsx(Nt,{size:"lg",Icon:ym,disabled:R,iconProps:{strokeWidth:1.5},onClick:()=>_(),variant:N?"primary":"ghost"})})})]}),N&&m.jsx("div",{className:"flex flex-col border-t border-t-muted px-3 py-2 bg-lightest/50",children:m.jsxs(wn,{defaultValue:"general",children:[m.jsxs(wn.List,{className:"flex flex-row",children:[m.jsx(wn.Tab,{value:"general",children:"General"}),m.jsx(wn.Tab,{value:"specific",children:Dy(x)}),m.jsx(wn.Tab,{value:"visibility",disabled:!0,children:"Visiblity"}),m.jsx("div",{className:"flex flex-grow"}),m.jsx(wn.Tab,{value:"code",className:"!self-end",children:"Code"})]}),m.jsx(wn.Panel,{value:"general",children:m.jsxs("div",{className:"flex flex-col gap-2 pt-3 pb-1",children:[m.jsx("div",{className:"flex flex-row",children:m.jsx(hg,{label:"Required",disabled:y,name:`${v}.config.required`,control:o})}),m.jsx(On,{label:"Label",placeholder:"Label",disabled:y,...r(`${v}.config.label`)}),m.jsx(My,{label:"Description",placeholder:"Description",disabled:y,...r(`${v}.config.description`)}),!A.includes("virtual")&&m.jsx(hg,{label:"Virtual",name:`${v}.config.virtual`,control:o,disabled:j.includes("virtual")||y})]},`${v}_${x}`)}),m.jsx(wn.Panel,{value:"specific",children:m.jsx("div",{className:"flex flex-col gap-2 pt-3 pb-1",children:m.jsx(bm,{fallback:`Error rendering JSON Schema for ${x}`,children:m.jsx(Pje,{field:e,onChange:T=>{s(`${v}.config`,{...i([`fields.${t}.config`])[0],...T})},readonly:y})})})}),m.jsx(wn.Panel,{value:"code",children:(()=>{const{id:T,...D}=e;return m.jsx(fs,{json:D,expand:4})})()}),!y&&m.jsx("div",{className:"flex flex-row justify-end",children:m.jsx(ot,{IconLeft:Aq,onClick:F(t),size:"small",variant:"subtlered",children:"Delete"})})]})})]},e.id)}const Pje=({field:e,onChange:t,readonly:n})=>{var i;const r=e.field.type,s=$h(e.field.config,i3);return m.jsx(vm,{schema:(i=kje(r))==null?void 0:i.toJSON(),formData:s,uiSchema:tj.config,className:"legacy hide-required-mark fieldset-alternative mute-root",onChange:t,readonly:n},r)},Dje=Yx;function Lje(){var C,j;const{nextStep:e,stepBack:t,state:n,setState:r}=Cd(),{config:s}=Fs(),i=(j=(C=n.entities)==null?void 0:C.create)==null?void 0:j[0],o={id:{type:"primary",name:"id"}},a=w.useRef(null),c=Tg(Sge(i,{fields:o,config:{sort_field:"id",sort_dir:"asc"}})),{control:u,formState:{isValid:f,errors:h},getValues:p,handleSubmit:y,watch:v,setValue:x}=nl({mode:"onTouched",resolver:rl(Dje),defaultValues:c}),S=v(),N=Dt(A=>{x("fields",A)});function _(){var A,$;f&&((A=a.current)!=null&&A.isValid())?(r(k=>{var F,z;return((z=(F=k.entities)==null?void 0:F.create)==null?void 0:z[0])?{...k,entities:{create:[p()]}}:k}),console.log("valid"),e("create")()):console.warn("not valid",($=a.current)==null?void 0:$.getErrors())}return m.jsxs("form",{onSubmit:y(_),children:[m.jsx(Nd,{children:m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("p",{children:["Add fields to ",m.jsx("strong",{children:i.name}),":"]}),m.jsx("div",{className:"flex flex-col gap-1",children:m.jsx(bW,{ref:a,fields:c.fields,onChange:N,defaultPrimaryFormat:s==null?void 0:s.default_primary_format,isNew:!0})})]}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx("p",{children:"How should it be sorted by default?"}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(ka,{label:"Field",data:Object.keys(S.fields??{}).filter(A=>A.length>0),placeholder:"Select field",name:"config.sort_field",allowDeselect:!1,control:u}),m.jsx(ka,{label:"Direction",data:["asc","desc"],defaultValue:"asc",placeholder:"Select direction",name:"config.sort_dir",allowDeselect:!1,control:u})]})]}),m.jsx("div",{children:Object.entries(h).map(([A,$])=>m.jsxs("p",{children:[A,": ",$.message]},A))})]})}),m.jsx(_d,{next:{disabled:!f,type:"submit"},prev:{onClick:t},debug:{state:n,values:S}})]})}function rw({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(u1,{value:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}const nj=[{type:zr.ManyToOne,label:"Many to One",component:zje},{type:zr.OneToOne,label:"One to One",component:Vje},{type:zr.ManyToMany,label:"Many to Many",component:Uje},{type:zr.Polymorphic,label:"Polymorphic",component:qje}],Fje=He({type:ge({enum:nj.map(e=>e.type)}),source:td,target:td,config:ze({})});function Bje(){var N,_,C;const{config:e}=xt(),t=e.data.entities,n=Object.keys(t??{}).length,{nextStep:r,stepBack:s,state:i,path:o,setState:a}=Cd(),{register:c,handleSubmit:u,formState:{isValid:f},setValue:h,watch:p,control:y}=nl({resolver:rl(Fje),defaultValues:((_=(N=i.relations)==null?void 0:N.create)==null?void 0:_[0])??{}}),v=p();function x(){f&&(a(j=>({...j,relations:{create:[v]}})),console.log("data",v),r("create")())}const S=Dt(()=>{const{source:j,target:A}=v;j&&A?(h("source",A),h("target",j)):j?(h("target",j),h("source",null)):(h("source",A),h("target",null))});return m.jsxs(m.Fragment,{children:[n<2&&m.jsx("div",{className:"px-5 py-4 bg-red-100 text-red-900",children:"Not enough entities to create a relation."}),m.jsxs("form",{onSubmit:u(x),children:[m.jsxs(Nd,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx(ka,{control:y,name:"source",label:"Source",allowDeselect:!1,data:Object.entries(t??{}).map(([j,A])=>{var $;return{value:j,label:(($=A.config)==null?void 0:$.name)??j,disabled:v.target===j}})}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx(ka,{control:y,name:"type",onChange:()=>h("config",{}),label:"Relation Type",data:nj.map(j=>({value:j.type,label:j.label})),allowDeselect:!1}),v.type&&m.jsx("div",{className:"flex justify-center mt-1",children:m.jsx(ot,{size:"small",IconLeft:jq,onClick:S,children:"Flip entities"})})]}),m.jsx(ka,{control:y,allowDeselect:!1,name:"target",label:"Target",data:Object.entries(t??{}).map(([j,A])=>{var $;return{value:j,label:(($=A.config)==null?void 0:$.name)??j,disabled:v.source===j}})})]}),m.jsx("div",{children:v.type&&((C=nj.find(j=>j.type===v.type))==null?void 0:C.component({register:c,control:y,data:v}))})]}),m.jsx(_d,{next:{type:"submit",disabled:!f,onClick:x},prev:{onClick:s},debug:{state:i,path:o,data:v}})]})]})}const Kt=({children:e})=>m.jsx("b",{className:"font-mono select-text",children:e}),vS=({children:e})=>m.jsx("div",{className:"bg-primary/5 py-4 px-5 rounded-lg mt-10",children:e});function zje({register:e,control:t,data:{source:n,target:r,config:s}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:r}),m.jsx(rw,{label:"Cardinality",name:"config.sourceCardinality",control:t,placeholder:"n"}),m.jsx(rw,{label:"WITH limit",name:"config.with_limit",control:t,placeholder:String(Oc.DEFAULTS.with_limit)})]}),m.jsx("div",{}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:n}),m.jsx(Ka,{label:"Required",...e("config.required")})]})]}),n&&r&&s&&m.jsx(vS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n,".",s.mappedBy||r,"_id ","→"," ",r]}),m.jsxs("p",{children:["Many ",m.jsx(Kt,{children:n})," will each have one reference to ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A property ",m.jsxs(Kt,{children:[s.mappedBy||r,"_id"]})," will be added to"," ",m.jsx(Kt,{children:n})," (which references ",m.jsx(Kt,{children:r}),")."]}),m.jsxs("p",{children:["When creating ",m.jsx(Kt,{children:n}),", a reference to ",m.jsx(Kt,{children:r})," is"," ",m.jsx("i",{children:s.required?"required":"optional"}),"."]}),s.sourceCardinality?m.jsxs("p",{children:[m.jsx(Kt,{children:r})," should not have more than"," ",m.jsx(Kt,{children:s.sourceCardinality})," referencing entr",s.sourceCardinality===1?"y":"ies"," to ",m.jsx(Kt,{children:n}),"."]}):null]})})]})}function Vje({register:e,control:t,data:{source:n,target:r,config:{mappedBy:s,required:i}}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:r}),m.jsx(Ka,{label:"Required",...e("config.required")})]}),m.jsx("div",{}),m.jsx("div",{className:"flex flex-col gap-4",children:m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:n})})]}),n&&r&&m.jsx(vS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n,".",s||r,"_id ","↔"," ",r]}),m.jsxs("p",{children:["A single entry of ",m.jsx(Kt,{children:n})," will have a reference to"," ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A property ",m.jsxs(Kt,{children:[s||r,"_id"]})," will be added to"," ",m.jsx(Kt,{children:n})," (which references ",m.jsx(Kt,{children:r}),")."]}),m.jsxs("p",{children:["When creating ",m.jsx(Kt,{children:n}),", a reference to ",m.jsx(Kt,{children:r})," is"," ",m.jsx("i",{children:i?"required":"optional"}),"."]})]})})]})}function Uje({register:e,control:t,data:{source:n,target:r,config:s}}){const i=s.connectionTable?s.connectionTable:n&&r?`${n}_${r}`:"";return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-4"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Connection Table",...e("config.connectionTable"),placeholder:i}),m.jsx(On,{label:"Connection Mapping",...e("config.connectionTableMappedName"),placeholder:i})]}),m.jsx("div",{className:"flex flex-col gap-4"})]}),n&&r&&m.jsx(vS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n," ","→"," ",i," ","←"," ",r]}),m.jsxs("p",{children:["Many ",m.jsx(Kt,{children:n})," will have many ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A connection table ",m.jsx(Kt,{children:i})," will be created to store the relations."]})]})})]})}function qje({register:e,control:t,data:{type:n,source:r,target:s,config:i}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-4",children:m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:s})}),m.jsx("div",{}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:r}),m.jsx(rw,{label:"Cardinality",name:"config.targetCardinality",control:t,placeholder:"n"})]})]},n),r&&s&&m.jsx(vS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),r," ","←"," ",s]}),m.jsxs("p",{children:[m.jsx(Kt,{children:r})," will have many ",m.jsx(Kt,{children:s}),"."]}),m.jsxs("p",{children:[m.jsx(Kt,{children:s})," will get additional properties ",m.jsx(Kt,{children:"reference"})," and"," ",m.jsx(Kt,{children:"entity_id"})," to make the (polymorphic) reference."]}),i.targetCardinality?m.jsxs("p",{children:[m.jsx(Kt,{children:r})," should not have more than"," ",m.jsx(Kt,{children:i.targetCardinality})," reference",i.targetCardinality===1?"":"s"," to ",m.jsx(Kt,{children:s}),"."]}):null]})})]})}function o3({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){const{field:{value:a,onChange:c,...u}}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(jo,{value:a,onChange:f=>{c(f),i==null||i(f)},...u,...o})}function Hje({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(d1,{value:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}o3.Group=Hje;o3.Item=jo;const AD=ze({entity:td,cardinality_type:ge({enum:["single","multiple"],default:"multiple"}),cardinality:jt({minimum:1}).optional(),name:td});function Wje(){var j,A,$,k;const{stepBack:e,setState:t,state:n,path:r,nextStep:s}=Cd(),{register:i,handleSubmit:o,formState:{isValid:a,errors:c},watch:u,control:f}=nl({mode:"onChange",resolver:rl(AD),defaultValues:AD.template(n.initial??{})}),[h,p]=w.useState(!1),{config:y}=xt(),v=y.media.enabled??!1,x=y.media.entity_name??"media",S=en(y.data.entities??{},(R,F)=>F!==x?R:void 0),N=u(),_=Object.keys(((A=(j=y.data.entities)==null?void 0:j[N.entity])==null?void 0:A.fields)??{});w.useEffect(()=>{p(_.includes(N.name))},[_,N.name]);async function C(){if(a&&!h){const{field:R,relation:F}=Gje(x,N);t(z=>({...z,fields:{create:[R]},relations:{create:[F]}})),s("create")()}}return m.jsxs(m.Fragment,{children:[!v&&m.jsx("div",{className:"px-5 py-4 bg-red-100 text-red-900",children:"Media is not enabled in the configuration. Please enable it to use this template."}),m.jsxs("form",{onSubmit:o(C),children:[m.jsx(Nd,{children:m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsx(ka,{name:"entity",allowDeselect:!1,control:f,size:"md",label:"Choose which entity to add media to",required:!0,data:Object.entries(S).map(([R,F])=>{var z;return{value:R,label:((z=F.config)==null?void 0:z.name)??R}})}),m.jsx(o3.Group,{name:"cardinality_type",control:f,label:"How many items can be attached?",size:"md",children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx(jo,{label:"Multiple items",value:"multiple"}),m.jsx(jo,{label:"Single item",value:"single"})]})}),N.cardinality_type==="multiple"&&m.jsx(rw,{name:"cardinality",control:f,size:"md",label:"How many exactly?",placeholder:"n",description:"Leave empty for unlimited",inputWrapperOrder:["label","input","description","error"]}),m.jsx(On,{size:"md",label:"Set a name for the property",required:!0,description:`A virtual property will be added to ${N.entity?N.entity:"the entity"}.`,...i("name"),error:($=c.name)!=null&&$.message?(k=c.name)==null?void 0:k.message:h?`Property "${N.name}" already exists on entity ${N.entity}`:void 0})]})}),m.jsx(_d,{next:{type:"submit",disabled:!a||!v||h},prev:{onClick:e},debug:{state:n,path:r,data:N}})]})]})}function Gje(e,t){const n={name:t.name,entity:t.entity,field:{type:"media",config:{required:!1,fillable:["update"],hidden:!1,mime_types:[],virtual:!0,entity:t.entity}}},r={type:"poly",source:t.entity,target:e,config:{mappedBy:t.name,targetCardinality:t.cardinality_type==="single"?1:void 0}};return t.cardinality_type==="multiple"?t.cardinality&&t.cardinality>1&&(n.field.config.max_items=t.cardinality,r.config.targetCardinality=t.cardinality):(n.field.config.max_items=1,r.config.targetCardinality=1),{field:n,relation:r}}const Yje={id:"template-media",title:"Attach Media",description:"Attach media to an entity",Icon:t0},xW=[[Wje,Yje]];function Jje(){const{nextStep:e,stepBack:t,state:n,path:r,setState:s}=Cd(),i=n.action??null;function o(a){if(i===a){e(a)();return}s({action:a})}return m.jsxs(m.Fragment,{children:[m.jsxs(Nd,{children:[m.jsx("p",{children:"Choose what type to add."}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx(A_,{Icon:Q1e,title:"Entity",description:"Create a new entity with fields",onClick:()=>o("entity"),selected:i==="entity"}),m.jsx(A_,{Icon:N$,title:"Relation",description:"Create a new relation between entities",onClick:()=>o("relation"),selected:i==="relation"})]}),m.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[m.jsx("h3",{className:"font-bold",children:"Quick templates"}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:xW.map(([,a])=>m.jsx(A_,{compact:!0,Icon:t0,title:a.title,description:a.description,onClick:()=>o(a.id),selected:i===a.id},a.id))})]})]}),m.jsx(_d,{next:{onClick:i&&e(i),disabled:!i},prev:{onClick:t},prevLabel:"Cancel",debug:{state:n,path:r}})]})}const A_=({Icon:e,title:t,description:n,onClick:r,selected:s,compact:i=!1,disabled:o=!1})=>m.jsxs("div",{onClick:o!==!0?r:void 0,className:Ue("flex gap-3 border border-primary/10 rounded cursor-pointer",i?"flex-row p-4 items-center":"flex-col p-5",s?"bg-primary/10 border-primary/50":"hover:bg-primary/5",o&&"opacity-50"),children:[m.jsx(e,{className:"size-10"}),m.jsxs("div",{className:"flex flex-col leading-tight",children:[m.jsx("p",{className:"text-lg font-bold",children:t}),m.jsx("p",{children:n})]})]});function a3({context:e,id:t,innerProps:{initialPath:n=[],initialState:r}}){const[s,i]=w.useState(n);function o(){e.closeModal(t)}return m.jsxs(Bq,{path:s,lastBack:o,initialPath:n,initialState:r,children:[m.jsxs(vu,{id:"select",children:[m.jsx(bu,{path:["Create New"],onClose:o}),m.jsx(Jje,{})]}),m.jsxs(vu,{id:"entity",path:["action"],children:[m.jsx(bu,{path:["Create New","Entity"],onClose:o}),m.jsx(YEe,{})]}),m.jsxs(vu,{id:"entity-fields",path:["action","entity"],children:[m.jsx(bu,{path:["Create New","Entity","Fields"],onClose:o}),m.jsx(Lje,{})]}),m.jsxs(vu,{id:"relation",path:["action"],children:[m.jsx(bu,{path:["Create New","Relation"],onClose:o}),m.jsx(Bje,{})]}),m.jsxs(vu,{id:"create",path:["action"],children:[m.jsx(bu,{path:["Create New","Creation"],onClose:o}),m.jsx(wEe,{})]}),xW.map(([a,c])=>m.jsxs(vu,{id:c.id,path:["action"],children:[m.jsx(bu,{path:["Create New","Template",c.title],onClose:o}),m.jsx(a,{})]},c.id))]})}a3.defaultTitle=void 0;a3.modalProps={withCloseButton:!1,size:"xl",padding:0};function l3({innerProps:e}){const{data:t,...n}=e,r=en(t,(o,a)=>typeof o=="object"&&"label"in o?o:{label:m.jsx("span",{className:"font-mono",children:a}),value:o,expand:10,showCopy:!0,...n}),s=Object.keys(r).length;function i({value:o,label:a,className:c,...u}){return m.jsx(fs,{json:o,className:yn("text-sm",c),...u})}return m.jsx("div",{className:"bg-background",children:s>1?m.jsxs(wn,{defaultValue:Object.keys(r)[0],children:[m.jsx("div",{className:"sticky top-0 bg-background z-10",children:m.jsx(wn.List,{children:Object.entries(r).map(([o,a])=>m.jsx(wn.Tab,{value:o,children:a.label},o))})}),Object.entries(r).map(([o,a])=>m.jsx(wn.Panel,{value:o,children:i(a)},o))]}):i({...r[Object.keys(r)[0]],title:r[Object.keys(r)[0]].label})})}l3.defaultTitle=!1;l3.modalProps={withCloseButton:!1,size:"lg",classNames:{body:"!p-0"}};function c3({context:e,id:t,innerProps:{schema:n,uiSchema:r,onSubmit:s,autoCloseAfterSubmit:i}}){const[o,a]=w.useState(!1),c=w.useRef(null),[u,f]=w.useState(!1),h=w.useRef(!1),[p,y]=w.useState();function v(N,_){const C=_();console.log("Data changed",N,C),a(C)}function x(){e.closeModal(t)}async function S(){var N,_;h.current=!0,(N=c.current)!=null&&N.validateForm()&&(f(!0),await(s==null?void 0:s((_=c.current)==null?void 0:_.formData(),{close:x,setError:y})),f(!1),i!==!1&&x())}return m.jsxs(m.Fragment,{children:[p&&m.jsx(So.Exception,{message:p}),m.jsxs("div",{className:"pt-3 pb-3 px-4 gap-4 flex flex-col",children:[m.jsx(vm,{tagName:"form",ref:c,schema:JSON.parse(JSON.stringify(n)),uiSchema:r,className:"legacy hide-required-mark fieldset-alternative mute-root",onChange:v,onSubmit:S}),m.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[m.jsx(ot,{onClick:x,children:"Cancel"}),m.jsx(ot,{variant:"primary",onClick:S,disabled:!o||u,children:"Create"})]})]})]})}c3.defaultTitle="JSON Schema Form Modal";c3.modalProps={size:"md",classNames:{root:"bknd-admin",header:"!bg-lightest !py-3 px-5 !h-auto !min-h-px",content:"rounded-lg select-none",title:"!font-bold !text-md",body:"!p-0"}};function u3({context:e,id:t,innerProps:n}){return m.jsxs(m.Fragment,{children:[m.jsx("span",{children:n.modalBody}),m.jsx("button",{onClick:()=>e.closeModal(t),children:"Close modal"})]})}u3.defaultTitle="Test Modal";u3.modalProps={classNames:{size:"md",root:"bknd-admin",header:"!bg-primary/5 border-b border-b-muted !py-3 px-5 !h-auto !min-h-px",content:"rounded-lg select-none",title:"font-bold !text-md",body:"py-3 px-5 gap-4 flex flex-col"}};const Xje={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0.9)"},transitionProperty:"transform, opacity"},Kje=e=>{const[t,n]=w.useState(),r=Lo(e==null?void 0:e.baseUrl);return w.useEffect(()=>{(async()=>{const s=await r.auth.strategies();s.res.ok&&n(s.body)})()},[e==null?void 0:e.baseUrl]),{strategies:t==null?void 0:t.strategies,basepath:t==null?void 0:t.basepath,loading:!t}};function wW(e,t){const n=(e==null?void 0:e.tagName.toLowerCase())??"",r=["input","select","textarea"];return!e||!(t!=null&&t.contains(e))||!r.includes(n)||!("name"in e)||e.hasAttribute("data-ignore")||e.closest("[data-ignore]")}function Qje(e){const t=e.currentTarget,n=e.target;return wW(n,t)?null:n}function Zje(e,t){const n=e.querySelectorAll(`[name="${t}"]`);return Array.from(n).filter(r=>wW(r))}function eAe(e,t){if(!e)return t;const n=e.required;if(!(!t&&!n))if(e.type==="number"){const r=Number(t);if(Number.isNaN(r)&&!n)return;const s="min"in e&&e.min.length>0?Number(e.min):void 0,i="max"in e&&e.max.length>0?Number(e.max):void 0,o="step"in e&&e.step.length>0?Number(e.step):void 0;return s&&r<s?s:i&&r>i?i:o&&o!==1?Math.round(r/o)*o:r}else if(e.type==="text"){const r="maxLength"in e&&e.maxLength>-1?Number(e.maxLength):void 0,s="pattern"in e?new RegExp(e.pattern):void 0;return r&&t.length>r?t.slice(0,r):s&&!s.test(t)?"":t}else return e.type==="checkbox"?"checked"in e?!!e.checked:["on","1","true",1,!0].includes(t):t}function rj(e,t){if(!e)return e;const n=[null,void 0,""],r={empty:(t==null?void 0:t.empty)??n,emptyInArray:(t==null?void 0:t.emptyInArray)??n,keepEmptyArray:(t==null?void 0:t.keepEmptyArray)??!1};return Object.entries(e).reduce((s,[i,o])=>{if(o&&Array.isArray(o)&&o.some(a=>typeof a=="object")){const a=o.map(c=>rj(c,r));(a.length>0||r!=null&&r.keepEmptyArray)&&(s[i]=a)}else if(o&&typeof o=="object"&&!Array.isArray(o)){const a=rj(o,r);Object.keys(a).length>0&&(s[i]=a)}else if(Array.isArray(o)){const a=o.filter(c=>!r.emptyInArray.includes(c));(a.length>0||r!=null&&r.keepEmptyArray)&&(s[i]=a)}else r.empty.includes(o)||(s[i]=o);return s},{})}function SW(e,t,n){let r=t;if(typeof r=="string"){const o=a=>a[0]==='"'&&a.at(-1)==='"';r=r.split(/[.\[\]]+/).filter(a=>a).map(a=>Number.isNaN(Number(a))?a:Number(a)).map(a=>typeof a=="string"&&o(a)?a.slice(1,-1):a)}if(r.length===0)throw new Error("The path must have at least one entry in it");const[s,...i]=r;return i.length===0?(e[s]=n,e):(s in e||(e[s]=typeof i[0]=="number"?[]:{}),SW(e[s],i,n),e)}function tAe({children:e,validateOn:t="submit",hiddenSubmit:n=!1,errorFieldSelector:r,reportValidity:s,onSubmit:i,onSubmitInvalid:o,onError:a,clean:c,disableSubmitOnError:u=!0,...f}){const h=w.useRef(null),[p,y]=w.useState([]);w.useEffect(()=>{!h.current||f.noValidate||x()},[]),w.useEffect(()=>{if(!h.current||f.noValidate)return;const j=p.length>0;h.current.querySelectorAll("[type=submit]").forEach(A=>{!A||!("type"in A)||A.type!=="submit"||(A.disabled=j)}),a==null||a(p)},[p]);const v=(j,A)=>{var k;if(f.noValidate||!j||!("name"in j))return;const $=(k=h.current)==null?void 0:k.querySelector((r==null?void 0:r(j.name))??`[data-role="input-error"][data-name="${j.name}"]`);if(j.checkValidity())y(R=>R.filter(F=>F.name!==j.name)),$&&($.textContent="");else{const R={name:j.name,message:j.validationMessage};return y(F=>[...F.filter(z=>z.name!==j.name),R]),A!=null&&A.report&&($?$.textContent=R.message:s&&j.reportValidity()),R}},x=j=>{if(!h.current||f.noValidate)return[];const A=[];return h.current.querySelectorAll("input, select, textarea").forEach($=>{const R=v($,j);R&&A.push(R)}),u&&h.current.querySelectorAll("[type=submit]").forEach($=>{A.length>0?$.setAttribute("disabled","disabled"):$.removeAttribute("disabled")}),A},S=()=>{if(!h.current)return{};const j=new FormData(h.current),A={};return j.forEach(($,k)=>{const R=Zje(h.current,k);if(R.length===0){console.warn(`No target found for key: ${k}`);return}const z=R.length>1;R.forEach((L,B)=>{let H=k;z&&(H=`${k}[${B}]`),SW(A,H,eAe(L,L.value))})}),typeof c>"u"?A:rj(A,c===!0?void 0:c)},N=async j=>{if(!h.current)return;const $=Qje(j);$&&((t==="change"||p.length>0)&&v($,{report:!0}),f.onChange&&await f.onChange(S(),{event:j,key:$.name,value:$.value,errors:p}))},_=async j=>{j.preventDefault();const A=h.current;if(!A)return;const $=x({report:!0});if($.length>0){o==null||o($,{event:j});return}i?await i(S(),{event:j}):A.submit()},C=j=>{h.current&&j.keyCode===13&&p.length>0&&!f.noValidate&&s&&h.current.reportValidity()};return m.jsxs("form",{...f,onChange:N,onSubmit:_,ref:h,onKeyDown:C,children:[e,n&&m.jsx("input",{type:"submit",style:{visibility:"hidden"}})]})}function nAe({label:e,provider:t,icon:n,action:r,method:s="POST",basepath:i="/api/auth",children:o}){const a=[i,t,r].join("/");return m.jsxs("form",{method:s,action:a,className:"w-full",children:[m.jsxs(ot,{type:"submit",size:"large",variant:"outline",className:"justify-center w-full",IconLeft:n,children:["Continue with ",e??Dy(t)]}),o]})}function rAe({formData:e,className:t,method:n="POST",action:r,auth:s,buttonLabel:i=r==="login"?"Sign in":"Sign up",...o}){var h,p;const a=(s==null?void 0:s.basepath)??"/api/auth",c={action:`${a}/password/${r}`,strategy:((h=s==null?void 0:s.strategies)==null?void 0:h.password)??{}},u=ti((s==null?void 0:s.strategies)??{},(y,v,x)=>{v.type!=="password"&&(y[x]=v.config)},{}),f=Object.keys(u).length>0;return m.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[f&&m.jsxs(m.Fragment,{children:[m.jsx("div",{children:(p=Object.entries(u))==null?void 0:p.map(([y,v],x)=>m.jsx(nAe,{provider:y,method:n,basepath:a,action:r},x))}),m.jsx(sAe,{})]}),m.jsxs(tAe,{method:n,action:c.action,...o,validateOn:"change",className:yn("flex flex-col gap-3 w-full",t),children:[m.jsxs(Qi,{children:[m.jsx(Ro,{htmlFor:"email",children:"Email address"}),m.jsx(sl,{type:"email",name:"email",required:!0})]}),m.jsxs(Qi,{children:[m.jsx(Ro,{htmlFor:"password",children:"Password"}),m.jsx(pW,{name:"password",required:!0,minLength:8})]}),m.jsx(ot,{type:"submit",variant:"primary",size:"large",className:"w-full mt-2 justify-center",children:i})]})]})}const sAe=()=>m.jsxs("div",{className:"w-full flex flex-row items-center",children:[m.jsx("div",{className:"relative flex grow",children:m.jsx("div",{className:"h-px bg-primary/10 w-full absolute top-[50%] z-0"})}),m.jsx("div",{className:"mx-5",children:"or"}),m.jsx("div",{className:"relative flex grow",children:m.jsx("div",{className:"h-px bg-primary/10 w-full absolute top-[50%] z-0"})})]});function iAe({method:e="POST",action:t="login",logo:n,intro:r,formOnly:s}){const{strategies:i,basepath:o,loading:a}=Kje(),c=m.jsx(rAe,{auth:{basepath:o,strategies:i},method:e,action:t});return s?a?null:c:m.jsx("div",{className:"flex flex-1 flex-col select-none h-dvh w-dvw justify-center items-center bknd-admin",children:!a&&m.jsxs("div",{className:"flex flex-col gap-4 items-center w-96 px-6 py-7",children:[n||null,w.isValidElement(r)?r:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("h1",{className:"text-xl font-bold",children:["Sign ",t==="login"?"in":"up"," to your admin panel"]}),m.jsx("p",{className:"text-primary/50",children:"Enter your credentials below to get access."})]}),c]})})}const EW={Screen:iAe};function oAe(){const e=w.useRef(0);return e.current++,e.current}const aAe=[".DS_Store","Thumbs.db"];function l0(e,t){const n=lAe(e);if(typeof n.path!="string"){const{webkitRelativePath:r}=e;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function lAe(e){const{name:t}=e,n=t&&t.lastIndexOf(".")!==-1;if(console.log("withMimeType",t,n),n&&!e.type){const r=gF(t);console.log("guessed",r),r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}async function av(e){return sw(e)&&cAe(e.dataTransfer)?hAe(e.dataTransfer,e.type):uAe(e)?dAe(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?fAe(e):[]}function cAe(e){return sw(e)}function uAe(e){return sw(e)&&sw(e.target)}function sw(e){return typeof e=="object"&&e!==null}function dAe(e){return sj(e.target.files).map(t=>l0(t))}async function fAe(e){return(await Promise.all(e.map(n=>n.getFile()))).map(n=>l0(n))}async function hAe(e,t){if(e.items){const n=sj(e.items).filter(s=>s.kind==="file");if(t!=="drop")return n;const r=await Promise.all(n.map(mAe));return TD(NW(r))}return TD(sj(e.files).map(n=>l0(n)))}function TD(e){return e.filter(t=>aAe.indexOf(t.name)===-1)}function sj(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function mAe(e){if(typeof e.webkitGetAsEntry!="function")return $D(e);const t=e.webkitGetAsEntry();return t!=null&&t.isDirectory?_W(t):$D(e)}function NW(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?NW(n):[n]],[])}function $D(e){const t=e.getAsFile();if(!t)return Promise.reject(`${e} is not a File`);const n=l0(t);return Promise.resolve(n)}async function pAe(e){return e.isDirectory?_W(e):gAe(e)}function _W(e){const t=e.createReader();return new Promise((n,r)=>{const s=[];function i(){t.readEntries(async o=>{if(o.length){const a=Promise.all(o.map(pAe));s.push(a),i()}else try{const a=await Promise.all(s);n(a)}catch(a){r(a)}},o=>{r(o)})}i()})}async function gAe(e){return new Promise((t,n)=>{e.file(r=>{const s=l0(r,e.fullPath);t(s)},r=>{n(r)})})}const ij={enter:["dragenter","dragover","dragstart"],leave:["dragleave","drop"]},RD=[...ij.enter,...ij.leave];function yAe({onDropped:e,onOver:t,onLeave:n}){const[r,s]=w.useState(!1),i=w.useRef(null),o=w.useRef(!1),a=w.useCallback(h=>{h.preventDefault(),h.stopPropagation()},[]),c=w.useCallback(async h=>{const p=ij.enter.includes(h.type);t&&p!==r&&!o.current&&(t(await av(h),h),o.current=!0),s(p),p===!1&&o.current&&(o.current=!1,n==null||n())},[]),u=w.useCallback(async h=>{const p=await av(h);e==null||e(p),o.current=!1},[e]),f=w.useCallback(async h=>{const p=await av(h);e==null||e(p)},[e]);return w.useEffect(()=>{const h=i.current;return RD.forEach(p=>{h.addEventListener(p,a),h.addEventListener(p,c)}),h.addEventListener("drop",u),()=>{RD.forEach(p=>{h.removeEventListener(p,a),h.removeEventListener(p,c)}),h.removeEventListener("drop",u)}},[]),{ref:i,isOver:r,fromEvent:av,onDropped:e,handleFileInputChange:f}}function bAe(e,t={overrides:{},baseUrl:""}){return{body:`${t.baseUrl}/api/media/file/${e.path}`,path:e.path,name:e.path,size:e.size??0,type:e.mime_type??"",state:"uploaded",progress:0,...t.overrides}}function vAe(e,t={overrides:{},baseUrl:""}){return e.map(n=>bAe(n,t))}function kD({maxItems:e,current:t=0,overwrite:n,added:r}){if(!e)return{reject:!1,to_drop:0};const s=e-t,i=r>s?r:r-s>0?r-s:0;return{reject:n?r>e:s-r<0,to_drop:i}}const xAe=()=>y$(Zy({files:[],isOver:!1,isOverAccepted:!1,uploading:!1},(e,t)=>({setFiles:n=>e(({files:r})=>({files:n(r)})),getFilesLength:()=>t().files.length,setIsOver:(n,r)=>e({isOver:n,isOverAccepted:r}),setUploading:n=>e({uploading:n}),setIsOverAccepted:n=>e({isOverAccepted:n}),reset:()=>e({files:[],isOver:!1,isOverAccepted:!1}),addFile:n=>e(r=>({files:[...r.files,n]})),removeFile:n=>e(r=>({files:r.files.filter(s=>s.path!==n)})),removeAllFiles:()=>e({files:[]}),setFileProgress:(n,r)=>e(s=>({files:s.files.map(i=>i.path===n?{...i,progress:r}:i)})),setFileState:(n,r,s)=>e(i=>({files:i.files.map(o=>o.path===n?{...o,state:r,progress:s??o.progress}:o)}))})));function wAe(e){if(e&&e instanceof XMLHttpRequest){const t=JSON.parse(e.responseText);alert(`Upload failed with code ${e.status}: ${t.error}`)}else alert("Upload failed")}function SAe({getUploadInfo:e,handleDelete:t,initialItems:n=[],flow:r="start",allowedMimeTypes:s,maxItems:i,overwrite:o,autoUpload:a,placeholder:c,onRejected:u,onDeleted:f,onUploadedAll:h,onUploaded:p,children:y,onClick:v,footer:x}){const S=w.useRef(xAe()).current,N=es(S,M=>M.files),_=es(S,M=>M.setFiles),C=es(S,M=>M.getFilesLength),j=es(S,M=>M.setUploading),A=es(S,M=>M.setIsOver),$=es(S,M=>M.uploading),k=es(S,M=>M.setFileState),R=es(S,M=>M.removeFile),F=w.useRef(null);w.useEffect(()=>{_(()=>n)},[n.length]);function z(M){return(Array.isArray(M)?M:[M]).map(Q=>({kind:"kind"in Q?Q.kind:"file",type:Q.type,size:"size"in Q?Q.size:0})).every(Q=>Q.kind!=="file"?!1:!(s&&!s.includes(Q.type)))}const L=w.useCallback(M=>{if(console.log("onDropped",M),!z(M))return;const W=M.length;_(X=>{let Q=0;if(i){const ue=kD({maxItems:i,overwrite:o,added:W,current:X.length});if(ue.reject)return u?u(M):console.warn("maxItems reached"),X;Q=ue.to_drop}const oe=X.slice(Q),ae=oe.map(ue=>ue.path),fe=M.filter(ue=>!("path"in ue)||ue.path&&!ae.includes(ue.path)).map(ue=>({body:ue,path:"path"in ue?ue.path:ue.name,name:ue.name,size:ue.size,type:ue.type,state:"pending",progress:0})),le=r==="start"?[...fe,...oe]:[...oe,...fe];return a&&fe.length>0&&setTimeout(()=>j(!0),0),le})},[a,r,i,o]),{handleFileInputChange:B,ref:H}=yAe({onDropped:M=>{console.log("onDropped",M),L(M)},onOver:M=>{if(!z(M)){A(!0,!1);return}const W=C(),X=kD({maxItems:i,overwrite:o,added:M.length,current:W});console.log("--files in onOver",W,X),A(!0,!X.reject)},onLeave:()=>{A(!1,!1)}});w.useEffect(()=>{console.log("files updated")},[N]),w.useEffect(()=>{$&&(async()=>{const M=N.filter(W=>W.state==="pending");if(M.length===0){j(!1);return}else{const W=[];for(const X of M)try{const Q=await I(X);W.push(Q),p==null||p(Q)}catch(Q){wAe(Q)}j(!1),h==null||h(W)}})()},[$]);function I(M){return new Promise((W,X)=>{if(M.body){if(M.state!=="pending"){console.error("File is not pending"),X();return}else if(!(M.body instanceof File)){console.error("File body is not a File instance"),X();return}}else{console.error("File has no body"),X();return}const Q=e({path:M.body.path});console.log("dropzone:uploadInfo",Q);const{url:oe,headers:ae,method:fe="POST"}=Q,le=new XMLHttpRequest;console.log("xhr:url",oe);const ue=new URLSearchParams;o&&ue.append("overwrite","1"),le.open(fe,String(oe)+"?"+String(ue),!0),ae&&ae.forEach((ve,_e)=>{le.setRequestHeader(_e,ve)}),le.upload.addEventListener("progress",ve=>{if(console.log("progress",ve.loaded,ve.total),ve.lengthComputable){k(M.path,"uploading",ve.loaded/ve.total);const _e=ve.loaded/ve.total*100;console.log(`Progress: ${_e.toFixed(2)}%`)}else console.log("Unable to compute progress information since the total size is unknown")}),le.onload=()=>{if(console.log("onload",M.path,le.status),le.status>=200&&le.status<300){console.log("Upload complete");try{const ve=JSON.parse(le.responseText);console.log("Response:",M,ve);const _e={...ve.state,progress:1,state:"uploaded"};k(M.path,_e.state),W({...ve,...M,..._e})}catch(ve){k(M.path,"uploaded",1),console.error("Error parsing response",ve),X(ve)}}else k(M.path,"failed",1),console.error("Upload failed with status: ",le.status,le.statusText),X(le)},le.onerror=()=>{console.error("Error during the upload process.")},le.onloadstart=()=>{k(M.path,"uploading",0),console.log("loadstart")},le.setRequestHeader("Accept","application/json"),le.send(M.body)})}const V=w.useCallback(async M=>{switch(console.log("deleteFile",M),M.state){case"uploaded":case"initial":window.confirm("Are you sure you want to delete this file?")&&(console.log('setting state to "deleting"',M),k(M.path,"deleting"),await t(M),R(M.path),f==null||f(M));break}},[]),T=w.useCallback(async M=>{const W=await I(M);h==null||h([W]),p==null||p(W)},[]),D=w.useCallback(()=>{var M;return(M=F.current)==null?void 0:M.click()},[F]),P=w.useMemo(()=>!!((c==null?void 0:c.show)===!0||!i||i&&N.length<i),[c,i,N.length]),q=w.useMemo(()=>({store:S,wrapperRef:H,inputProps:{ref:F,type:"file",multiple:!i||i>1,onChange:B},showPlaceholder:P,actions:{uploadFile:T,deleteFile:V,openFileInput:D,addFiles:L},dropzoneProps:{maxItems:i,placeholder:c,autoUpload:a,flow:r},onClick:v,footer:x}),[i,r,c,a,x]);return m.jsx(CW.Provider,{value:q,children:y?typeof y=="function"?y(q):y:m.jsx(NAe,{...q})})}const CW=w.createContext(void 0);function d3(){return w.useContext(CW)}const OW=()=>{const{store:e}=d3(),t=es(e,i=>i.files),n=es(e,i=>i.isOver),r=es(e,i=>i.isOverAccepted),s=es(e,i=>i.uploading);return{files:t,isOver:n,isOverAccepted:r,uploading:s}},c0=(e,t)=>{const{store:n}=d3();return es(n,r=>{const s=typeof e=="string"?r.files.find(i=>i.path===e):r.files.find(i=>i.path===e.path);return s?t(s):void 0})};function EAe(e){if(e&&e instanceof XMLHttpRequest){const t=JSON.parse(e.responseText);alert(`Upload failed with code ${e.status}: ${t.error}`)}else alert("Upload failed")}const NAe=({wrapperRef:e,inputProps:t,showPlaceholder:n,actions:{uploadFile:r,deleteFile:s,openFileInput:i},dropzoneProps:{placeholder:o,flow:a},onClick:c,footer:u})=>{const{files:f,isOver:h,isOverAccepted:p}=OW(),y=n&&m.jsx(_Ae,{onClick:i,text:o==null?void 0:o.text}),v=w.useCallback(async x=>{try{return await r(x)}catch(S){EAe(S)}},[r]);return m.jsxs("div",{ref:e,className:Ue("dropzone w-full h-full align-start flex flex-col select-none",h&&p&&"bg-green-200/10",h&&!p&&"bg-red-200/40 cursor-not-allowed"),children:[m.jsx("div",{className:"hidden",children:m.jsx("input",{...t})}),m.jsx("div",{className:"flex flex-1 flex-col",children:m.jsxs("div",{className:"flex flex-row flex-wrap gap-2 md:gap-3",children:[a==="start"&&y,f.map(x=>m.jsx(OAe,{file:x,handleUpload:v,handleDelete:s,onClick:c},x.path)),a==="end"&&y,u]})})]})},_Ae=({onClick:e,text:t="Upload files"})=>m.jsx("div",{className:"w-[49%] aspect-square md:w-60 flex flex-col border-2 border-dashed border-muted relative justify-center items-center text-primary/30 hover:border-primary/30 hover:text-primary/50 hover:cursor-pointer hover:bg-muted/20 transition-colors duration-200",onClick:e,children:m.jsx("span",{className:"",children:t})}),CAe=({file:e,fallback:t,...n})=>e.type.startsWith("image/")?m.jsx($Ae,{...n,file:e}):e.type.startsWith("video/")?m.jsx(RAe,{...n,file:e}):t?t({file:e}):null,jW=w.memo(CAe,(e,t)=>e.file.path===t.file.path),OAe=w.memo(({file:e,handleUpload:t,handleDelete:n,onClick:r})=>{oAe();const s=c0(e,o=>{const{progress:a,...c}=o;return c});if(!s)return null;const i=w.useCallback(()=>{r&&r(s)},[r,s.path]);return m.jsxs("div",{className:Ue("w-[49%] md:w-60 aspect-square flex flex-col border border-muted relative hover:bg-primary/5 cursor-pointer transition-colors",s.state==="failed"&&"border-red-500 bg-red-200/20",s.state==="deleting"&&"opacity-70"),onClick:i,children:[m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx(AAe,{file:s,handleDelete:n,handleUpload:t})}),m.jsx(jAe,{file:s}),m.jsx("div",{className:"flex bg-primary/5 aspect-[1/0.78] overflow-hidden items-center justify-center",children:m.jsx(jW,{file:s,fallback:kAe,className:"max-w-full max-h-full"})}),m.jsxs("div",{className:"flex flex-col px-1.5 py-1",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("p",{className:"truncate select-text w-[calc(100%-10px)]",children:s.name}),m.jsx(TAe,{file:s})]}),m.jsxs("div",{className:"flex flex-row justify-between text-sm font-mono opacity-50 text-nowrap gap-2",children:[m.jsx("span",{className:"truncate select-text",children:s.type}),m.jsx("span",{children:aT.fileSize(s.size)})]})]})]})},(e,t)=>e.file.path===t.file.path&&e.file.state===t.file.state),jAe=({file:e})=>{const t=c0(e.path,n=>({state:n.state,progress:n.progress}));return!t||t.state!=="uploading"?null:m.jsx("div",{className:"absolute w-full top-0 left-0 right-0 h-1",children:m.jsx("div",{className:"bg-blue-600 h-1 transition-all duration-75",style:{width:(t.progress*100).toFixed(0)+"%"}})})},AAe=w.memo(({file:e,handleDelete:t,handleUpload:n})=>{const r=c0(e.path,i=>{const{progress:o,...a}=i;return a});if(!r)return null;const s=w.useMemo(()=>[r.state==="uploaded"&&typeof r.body=="string"&&{label:"Open",icon:hSe,onClick:()=>{window.open(r.body,"_blank")}},["initial","uploaded"].includes(r.state)&&{label:"Delete",destructive:!0,icon:Aq,onClick:()=>t(r)},["initial","pending"].includes(r.state)&&{label:"Upload",icon:CSe,onClick:()=>n(r)}],[r,t,n]);return m.jsx(Ur,{items:s,position:"bottom-end",children:m.jsx(Nt,{Icon:zc})})},(e,t)=>e.file.path===t.file.path),TAe=({file:e})=>{const t=c0(e.path,r=>r.state);if(!t||t==="uploaded")return null;const n={failed:"bg-red-500",deleting:"bg-orange-500 animate-pulse",uploading:"bg-blue-500 animate-pulse"}[t]??"bg-primary/50";return m.jsx("div",{className:"w-2 h-2 rounded-full mt-px "+n,title:t})},$Ae=({file:e,...t})=>{const n=typeof e.body=="string"?e.body:URL.createObjectURL(e.body);return m.jsx("img",{...t,src:n})},RAe=({file:e,...t})=>{const n=typeof e.body=="string"?e.body:URL.createObjectURL(e.body);return m.jsx("video",{...t,src:n})},kAe=({file:e})=>m.jsx("div",{className:"text-xs text-primary/50 text-center",children:e.type});function MAe({initialItems:e,media:t,entity:n,query:r,randomFilename:s,infinite:i=!1,...o}){var A,$;const a=w.useId(),c=Lo(),u=c$(),f=c.baseUrl,h=(r==null?void 0:r.limit)??o.maxItems??50,p=k=>({limit:h,offset:k*h}),y=(t==null?void 0:t.entity_name)??"media",v=(k,R=0)=>n?k.data.readManyByReference(n.name,n.id,n.field,{...p(R),...r}):k.data.readMany(y,{...p(R),...r}),x=i?Wve(v,{}):G1(v,{enabled:e!==!1&&!e,revalidateOnFocus:!1}),S=Dt(k=>({url:n?c.media.getEntityUploadUrl(n.name,n.id,n.field):c.media.getFileUploadUrl(s?void 0:k),headers:c.media.getUploadHeaders(),method:"POST"}));Dt(async()=>{await u(x.promise.key({search:!1}))});const N=Dt(async k=>c.media.deleteFile(k.path)),_=e??(Array.isArray(x.data)?x.data:[])??[],C=vAe(_,{baseUrl:f}),j=a+JSON.stringify(C);return m.jsx(SAe,{getUploadInfo:S,handleDelete:N,autoUpload:!0,initialItems:C,footer:i&&"setSize"in x&&m.jsx(IAe,{items:C.length,length:Math.min((($=(A=x._data)==null?void 0:A[0])==null?void 0:$.body.meta.count)??0,C.length+h),onFirstVisible:()=>x.setSize(x.size+1)}),...o},a+j)}const IAe=({items:e=0,length:t=0,onFirstVisible:n})=>{const{ref:r,inViewport:s}=eZ(),[i,o]=w.useState(0),a=w.useRef(-1);return w.useEffect(()=>{s&&e>a.current&&(a.current=e,o(u=>u+1),n())},[s]),t-e<=0?null:new Array(Math.max(t-e,0)).fill(0).map((u,f)=>m.jsx("div",{ref:f===0?r:void 0,className:"w-[49%] md:w-60 bg-muted aspect-square"},f))},f3={Dropzone:MAe,Preview:jW,useDropzone:d3,useDropzoneState:OW,useDropzoneFileState:c0};function AW(){const{config:e,schema:t,actions:n}=xt(),r={config:{patch:async i=>await n.set("media",i,!0)?(await n.reload(),!0):!1}};return{$media:{},config:e.media,schema:t.media,actions:r}}const Kp={},MD=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,ID=e=>"init"in e,T_=e=>!!e.write,PD=e=>"v"in e||"e"in e,lv=e=>{if("e"in e)throw e.e;if((Kp?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},iw=new WeakMap,DD=e=>{var t;return ow(e)&&!!((t=iw.get(e))!=null&&t[0])},PAe=e=>{const t=iw.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(n=>n()))},TW=(e,t)=>{let n=iw.get(e);if(!n){n=[!0,new Set],iw.set(e,n);const r=()=>{n[0]=!1};e.then(r,r)}n[1].add(t)},ow=e=>typeof(e==null?void 0:e.then)=="function",$W=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},$_=(e,t,n)=>{const r=n(e),s="v"in r,i=r.v;if(ow(t))for(const o of r.d.keys())$W(e,t,n(o));r.v=t,delete r.e,(!s||!Object.is(i,r.v))&&(++r.n,ow(i)&&PAe(i))},LD=(e,t,n)=>{var r;const s=new Set;for(const i of((r=n.get(e))==null?void 0:r.t)||[])n.has(i)&&s.add(i);for(const i of t.p)s.add(i);return s},DAe=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},R_=()=>{const e={},t=new WeakMap,n=r=>{var s,i;(s=t.get(e))==null||s.forEach(o=>o(r)),(i=t.get(r))==null||i.forEach(o=>o())};return n.add=(r,s)=>{const i=r||e,o=(t.has(i)?t:t.set(i,new Set)).get(i);return o.add(s),()=>{o==null||o.delete(s),o.size||t.delete(i)}},n},LAe=e=>(e.c||(e.c=R_()),e.m||(e.m=R_()),e.u||(e.u=R_()),e.f||(e.f=DAe()),e),FAe=Symbol(),BAe=(e=new WeakMap,t=new WeakMap,n=new WeakMap,r=new Set,s=new Set,i=new Set,o={},a=(p,...y)=>p.read(...y),c=(p,...y)=>p.write(...y),u=(p,y)=>{var v;return(v=p.unstable_onInit)==null?void 0:v.call(p,y)},f=(p,y)=>{var v;return(v=p.onMount)==null?void 0:v.call(p,y)},...h)=>{const p=h[0]||(k=>{if((Kp?"production":void 0)!=="production"&&!k)throw new Error("Atom is undefined or null");let R=e.get(k);return R||(R={d:new Map,p:new Set,n:0},e.set(k,R),u==null||u(k,$)),R}),y=h[1]||(()=>{const k=[],R=F=>{try{F()}catch(z){k.push(z)}};do{o.f&&R(o.f);const F=new Set,z=F.add.bind(F);r.forEach(L=>{var B;return(B=t.get(L))==null?void 0:B.l.forEach(z)}),r.clear(),i.forEach(z),i.clear(),s.forEach(z),s.clear(),F.forEach(R),r.size&&v()}while(r.size||i.size||s.size);if(k.length)throw new AggregateError(k)}),v=h[2]||(()=>{const k=[],R=new WeakSet,F=new WeakSet,z=Array.from(r);for(;z.length;){const L=z[z.length-1],B=p(L);if(F.has(L)){z.pop();continue}if(R.has(L)){if(n.get(L)===B.n)k.push([L,B]);else if((Kp?"production":void 0)!=="production"&&n.has(L))throw new Error("[Bug] invalidated atom exists");F.add(L),z.pop();continue}R.add(L);for(const H of LD(L,B,t))R.has(H)||z.push(H)}for(let L=k.length-1;L>=0;--L){const[B,H]=k[L];let I=!1;for(const V of H.d.keys())if(V!==B&&r.has(V)){I=!0;break}I&&(x(B),_(B)),n.delete(B)}}),x=h[3]||(k=>{var R;const F=p(k);if(PD(F)&&(t.has(k)&&n.get(k)!==F.n||Array.from(F.d).every(([D,P])=>x(D).n===P)))return F;F.d.clear();let z=!0;const L=()=>{t.has(k)&&(_(k),v(),y())},B=D=>{var P;if(MD(k,D)){const M=p(D);if(!PD(M))if(ID(D))$_(D,D.init,p);else throw new Error("no atom init");return lv(M)}const q=x(D);try{return lv(q)}finally{F.d.set(D,q.n),DD(F.v)&&$W(k,F.v,q),(P=t.get(D))==null||P.t.add(k),z||L()}};let H,I;const V={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(Kp?"production":void 0)!=="production"&&!T_(k)&&console.warn("setSelf function cannot be used with read-only atom"),!I&&T_(k)&&(I=(...D)=>{if((Kp?"production":void 0)!=="production"&&z&&console.warn("setSelf function cannot be called in sync"),!z)try{return N(k,...D)}finally{v(),y()}}),I}},T=F.n;try{const D=a(k,B,V);return $_(k,D,p),ow(D)&&(TW(D,()=>H==null?void 0:H.abort()),D.then(L,L)),F}catch(D){return delete F.v,F.e=D,++F.n,F}finally{z=!1,T!==F.n&&n.get(k)===T&&(n.set(k,F.n),r.add(k),(R=o.c)==null||R.call(o,k))}}),S=h[4]||(k=>{const R=[k];for(;R.length;){const F=R.pop(),z=p(F);for(const L of LD(F,z,t)){const B=p(L);n.set(L,B.n),R.push(L)}}}),N=h[5]||((k,...R)=>{let F=!0;const z=B=>lv(x(B)),L=(B,...H)=>{var I;const V=p(B);try{if(MD(k,B)){if(!ID(B))throw new Error("atom not writable");const T=V.n,D=H[0];$_(B,D,p),_(B),T!==V.n&&(r.add(B),(I=o.c)==null||I.call(o,B),S(B));return}else return N(B,...H)}finally{F||(v(),y())}};try{return c(k,z,L,...R)}finally{F=!1}}),_=h[6]||(k=>{var R;const F=p(k),z=t.get(k);if(z&&!DD(F.v)){for(const[L,B]of F.d)if(!z.d.has(L)){const H=p(L);C(L).t.add(k),z.d.add(L),B!==H.n&&(r.add(L),(R=o.c)==null||R.call(o,L),S(L))}for(const L of z.d||[])if(!F.d.has(L)){z.d.delete(L);const B=j(L);B==null||B.t.delete(k)}}}),C=h[7]||(k=>{var R;const F=p(k);let z=t.get(k);if(!z){x(k);for(const L of F.d.keys())C(L).t.add(k);if(z={l:new Set,d:new Set(F.d.keys()),t:new Set},t.set(k,z),(R=o.m)==null||R.call(o,k),T_(k)){const L=()=>{let B=!0;const H=(...I)=>{try{return N(k,...I)}finally{B||(v(),y())}};try{const I=f(k,H);I&&(z.u=()=>{B=!0;try{I()}finally{B=!1}})}finally{B=!1}};s.add(L)}}return z}),j=h[8]||(k=>{var R;const F=p(k);let z=t.get(k);if(z&&!z.l.size&&!Array.from(z.t).some(L=>{var B;return(B=t.get(L))==null?void 0:B.d.has(k)})){z.u&&i.add(z.u),z=void 0,t.delete(k),(R=o.u)==null||R.call(o,k);for(const L of F.d.keys()){const B=j(L);B==null||B.t.delete(k)}return}return z}),A=[e,t,n,r,s,i,o,a,c,u,f,p,y,v,x,S,N,_,C,j],$={get:k=>lv(x(k)),set:(k,...R)=>{try{return N(k,...R)}finally{v(),y()}},sub:(k,R)=>{const z=C(k).l;return z.add(R),y(),()=>{z.delete(R),j(k),y()}}};return Object.defineProperty($,FAe,{value:A}),$},RW=BAe,zAe=LAe,FD=TW,h3={};let VAe=0;function Bh(e,t){const n=`atom${++VAe}`,r={toString(){return(h3?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=UAe,r.write=qAe),t&&(r.write=t),r}function UAe(e){return e(this)}function qAe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const HAe=()=>{let e=0;const t=zAe({}),n=new WeakMap,r=new WeakMap,s=RW(n,r,void 0,void 0,void 0,void 0,t,void 0,(a,c,u,...f)=>e?u(a,...f):a.write(c,u,...f)),i=new Set;return t.m.add(void 0,a=>{i.add(a);const c=n.get(a);c.m=r.get(a)}),t.u.add(void 0,a=>{i.delete(a);const c=n.get(a);delete c.m}),Object.assign(s,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>i,dev4_restore_atoms:a=>{const c={read:()=>null,write:(u,f)=>{++e;try{for(const[h,p]of a)"init"in h&&f(h,p)}finally{--e}}};s.set(c)}})};function WAe(){return(h3?"production":void 0)!=="production"?HAe():RW()}let Vp;function kW(){return Vp||(Vp=WAe(),(h3?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Vp),globalThis.__JOTAI_DEFAULT_STORE__!==Vp&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Vp}const GAe={},YAe=w.createContext(void 0);function MW(e){return w.useContext(YAe)||kW()}const IW=e=>typeof(e==null?void 0:e.then)=="function",JAe=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},XAe=je.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(JAe(e),e)}),k_=new WeakMap,KAe=(e,t)=>{let n=k_.get(e);return n||(n=new Promise((r,s)=>{let i=e;const o=u=>f=>{i===u&&r(f)},a=u=>f=>{i===u&&s(f)},c=()=>{try{const u=t();IW(u)?(k_.set(u,n),i=u,u.then(o(u),a(u)),FD(u,c)):r(u)}catch(u){s(u)}};e.then(o(e),a(e)),FD(e,c)}),k_.set(e,n)),n};function m3(e,t){const n=MW(),[[r,s,i],o]=w.useReducer(u=>{const f=n.get(e);return Object.is(u[0],f)&&u[1]===n&&u[2]===e?u:[f,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;if((s!==n||i!==e)&&(o(),a=n.get(e)),w.useEffect(()=>{const u=n.sub(e,()=>{o()});return o(),u},[n,e,void 0]),w.useDebugValue(a),IW(a)){const u=KAe(a,()=>n.get(e));return XAe(u)}return a}function p3(e,t){const n=MW();return w.useCallback((...s)=>{if((GAe?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...s)},[n,e])}function Em(e,t){return[m3(e),p3(e)]}const g3={},QAe=Symbol((g3?"production":void 0)!=="production"?"RESET":""),M_=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),ZAe=new WeakMap,eTe=(e,t,n,r)=>{const s=M_(()=>new WeakMap,ZAe,t),i=M_(()=>new WeakMap,s,n);return M_(e,i,r)};function u0(e,t,n=Object.is){return eTe(()=>{const r=Symbol(),s=([o,a])=>{if(a===r)return t(o);const c=t(o,a);return n(a,c)?a:c},i=Bh(o=>{const a=o(i),c=o(e);return s([c,a])});return i.init=r,i},e,t,n)}const tTe=e=>typeof(e==null?void 0:e.then)=="function";function nTe(e=()=>{try{return window.localStorage}catch(n){(g3?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,s;const i={getItem:(c,u)=>{var f,h;const p=v=>{if(v=v||"",r!==v){try{s=JSON.parse(v,t==null?void 0:t.reviver)}catch{return u}r=v}return s},y=(h=(f=e())==null?void 0:f.getItem(c))!=null?h:null;return tTe(y)?y.then(p):p(y)},setItem:(c,u)=>{var f;return(f=e())==null?void 0:f.setItem(c,JSON.stringify(u,void 0))},removeItem:c=>{var u;return(u=e())==null?void 0:u.removeItem(c)}},o=c=>(u,f,h)=>c(u,p=>{let y;try{y=JSON.parse(p||"")}catch{y=h}f(y)});let a;try{a=(n=e())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(c,u)=>{if(!(e()instanceof window.Storage))return()=>{};const f=h=>{h.storageArea===e()&&h.key===c&&u(h.newValue)};return window.addEventListener("storage",f),()=>{window.removeEventListener("storage",f)}}),a&&(i.subscribe=o(a)),i}const rTe=nTe();function sTe(e,t,n=rTe,r){const s=Bh(t);return(g3?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=o=>{o(n.getItem(e,t));let a;return n.subscribe&&(a=n.subscribe(e,o,t)),a},Bh(o=>o(s),(o,a,c)=>{const u=typeof c=="function"?c(o(s)):c;return u===QAe?(a(s,t),n.removeItem(e)):u instanceof Promise?u.then(f=>(a(s,f),n.setItem(e,f))):(a(s,u),n.setItem(e,u))})}const iTe={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",ContainsMinError:"The array at `{{pointer}}` contains {{delta}} too few items matching `{{schema}}`",ContainsMaxError:"The array at `{{pointer}}` contains {{delta}} too many items matching `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatDurationError:"Value `{{value}}` at `{{pointer}}` is not a valid duration",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",FormatUUIDError:"Value `{{value}}` at `{{pointer}}` is not a valid uuid",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maxProperties}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minProperties}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UnevaluatedPropertyError:"Invalid unevaluated property `{{pointer}}`",UnevaluatedItemsError:"Invalid unevaluated item `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},oTe=Object.prototype.toString;function Rt(e){const t=oTe.call(e).match(/\s([^\]]+)\]/).pop().toLowerCase();return t==="file"?"object":t}const aTe="object",lTe="array";function cTe(e,t={}){return e.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),s=t[r],i=Rt(s);return i===aTe||i===lTe?JSON.stringify(s):s})}function uTe(e,t,n=e){var r;const s=(r=iTe[e])!==null&&r!==void 0?r:n;return cTe(s,t)}function dTe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fTe(e,t){return{type:"error",name:e,code:dTe(e),message:uTe(e,t),data:t}}function Ze(e){return fTe.bind(null,e)}function iy(e,t=[]){for(let n=0;n<e.length;n+=1){const r=e[n];Array.isArray(r)?iy(r,t):t.push(r)}return t}const d0={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function Vn(e){return(e==null?void 0:e.type)==="error"}function hTe(e){return e instanceof Promise}function aw(e){return Vn(e)||hTe(e)}function zt(e){return Rt(e)==="object"}const{DECLARATOR_ONEOF:Kf}=d0;function gg(e,t){zt(e)&&(e.__oneOfIndex=t)}function mTe(e,t){const{schema:n,draft:r,pointer:s}=e;if(t!=null&&n[Kf]){const a=[],c=n[Kf],u=t[n[Kf]];if(u===void 0)return r.errors.missingOneOfPropertyError({property:c,pointer:s,schema:n,value:t});for(let f=0;f<n.oneOf.length;f+=1){const h=e.next(n.oneOf[f]).resolveRef(),p=r.step(h,c,t);if(Vn(p))return p;let y=iy(r.validate(p,u));if(y=y.filter(aw),y.length>0)a.push(...y);else return gg(h.schema,f),p.next(h.schema)}return r.errors.oneOfPropertyError({property:c,value:u,pointer:s,schema:n,errors:a})}const i=[],o=[];for(let a=0;a<n.oneOf.length;a+=1){const c=r.resolveRef(e.next(n.oneOf[a]));let u=iy(r.validate(c,t));u=u.filter(aw),u.length>0?o.push(...u):i.push({index:a,schema:c.schema})}return i.length===1?(gg(i[0].schema,i[0].index),e.next(i[0].schema)):i.length>1?r.errors.multipleOneOfError({value:t,pointer:s,schema:n,matches:i}):r.errors.oneOfError({value:JSON.stringify(t),pointer:s,schema:n,oneOf:n.oneOf,errors:o})}function pTe(e,t){const{draft:n,schema:r,pointer:s}=e;if(t==null||r.properties==null)return-1;let i=0;const o=Object.keys(r.properties);for(let a=0;a<o.length;a+=1){const c=o[a];t[c]&&n.isValid(t[c],r.properties[c],s)&&(i+=1)}return i}function y3(e,t){const{schema:n,pointer:r,draft:s}=e;if(!Array.isArray(n.oneOf))throw new Error("not a oneof schema");if(t!=null&&n[Kf]){const o=[],a=n[Kf],c=t[n[Kf]];if(c===void 0)return s.errors.missingOneOfPropertyError({property:a,pointer:r,schema:n,value:t});for(let u=0;u<n.oneOf.length;u+=1){const f=s.resolveRef(e.next(n.oneOf[u])),h=s.step(f,a,t);if(Vn(h))return h;let p=iy(s.validate(h,c));if(p=p.filter(aw),p.length>0)o.push(...p);else return gg(f.schema,u),h.next(f.schema)}return s.errors.oneOfPropertyError({property:a,value:c,pointer:r,schema:n,errors:o})}const i=[];for(let o=0;o<n.oneOf.length;o+=1){const c=s.resolveRef(e.next(n.oneOf[o])).schema;s.isValid(t,c,r)&&i.push({schema:c,index:o})}if(i.length===1)return gg(i[0].schema,i[0].index),e.next(i[0].schema);if(zt(t)){let o,a=-1,c=0;for(let u=0;u<n.oneOf.length;u+=1){const f=s.resolveRef(e.next(n.oneOf[u])),h=pTe(f,t);c<h&&(c=h,o=f.schema,a=u)}return o===void 0?s.errors.oneOfError({value:JSON.stringify(t),pointer:r,schema:n,oneOf:n.oneOf}):(gg(o,a),e.next(o))}return i.length>1?s.errors.multipleOneOfError({matches:i,pointer:r,schema:n,value:t}):s.errors.oneOfError({value:JSON.stringify(t),pointer:r,schema:n,oneOf:n.oneOf})}const gTe=(e,t)=>{if(Array.isArray(e.schema.oneOf)){const n=e.draft.resolveOneOf(e,t);if(Vn(n))return n}};function ts(e,t,...n){if((t==null?void 0:t.type)==="error")return t;if((e==null?void 0:e.type)==="error")return e;const r=Rt(e),s=Rt(t);if(r!==s)return e;const i=qv(e,t);for(let o=0;o<n.length;o+=1)delete i[n[o]];return i}function qv(e,t,n){var r;if(zt(e)&&zt(t)){const s={};return[...Object.keys(e),...Object.keys(t)].filter((i,o,a)=>a.indexOf(i)===o).forEach(i=>s[i]=qv(e[i],t[i],i)),s}if(Array.isArray(e)&&Array.isArray(t)){if(n==="required")return e.concat(t).filter((o,a,c)=>c.indexOf(o)===a);if(n==="items"){const o=[];for(let a=0;a<t.length;a+=1)zt(e[a])&&zt(t[a])&&e[a].type===t[a].type?o[a]=qv(e[a],t[a]):o.push((r=t[a])!==null&&r!==void 0?r:e[a]);return o}const s=[],i=[];for(let o=0;o<Math.max(e.length,t.length);o+=1)zt(e[o])&&zt(t[o])?s[o]=qv(e[o],t[o]):e[o]!==void 0&&t[o]!==void 0?(s[o]=e[o],i.push(t[o])):e[o]!==void 0?s[o]=e[o]:t[o]!==void 0&&i.push(t[o]);return[...s,...i].filter((o,a,c)=>c.indexOf(o)===a)}return Array.isArray(t)?t:Array.isArray(e)?e:t!==void 0?t:e}function oj(e,...t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function xS(e,t){if(e.schema.if!=null){if(e.schema.if===!1)return e.next(e.schema.else);if(e.schema.if&&(e.schema.then||e.schema.else)){const n=e.draft.resolveRef(e.next(e.schema.if)),r=e.draft.validate(n,t);if(r.length===0&&e.schema.then){const s=e.next(e.schema.then);return e.draft.resolveRef(s)}if(r.length!==0&&e.schema.else){const s=e.next(e.schema.else);return e.draft.resolveRef(s)}}}}const yTe=(e,t)=>{const n=xS(e,t);if(n)return e.draft.validate(n,t)};function PW(e){return{...e}}function DW(e,t){const n=xS(e,t);if(n)return n;const r=PW(e.schema);return e.next(oj(r,"if","then","else"))}function bTe(e,t){const{schema:n}=e;let r=PW(n);for(let s=0;s<n.allOf.length;s+=1){const i=e.next(n.allOf[s]).resolveRef(),o=DW(i,t).schema;r=ts(r,o)}return delete r.allOf,e.next(r)}function LW(e,t){const{allOf:n}=t;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(s=>{if(s==null)return;const i=e.createNode(s).resolveRef();r=ts(r,i.schema)}),r}const vTe=(e,t)=>{const{draft:n,schema:r}=e,{allOf:s}=r;if(!Array.isArray(s)||s.length===0)return;const i=[];return r.allOf.forEach(o=>{i.push(...n.validate(e.next(o),t))}),i};function xTe(e,...t){if(e==null)throw new Error("undefined schema");const n=this,r=ts(n.schema,e,...t);return{...n,schema:r,path:[...n.path,[n.pointer,n.schema]]}}function wTe(){const e=this;return e.draft.resolveRef(e)}function STe(e,t){if(Vn(e))return e;if(e==null)throw new Error("undefined schema");if(!zt(e)&&Rt(e)!=="boolean")throw new Error(`bad schema type ${Rt(e)}`);const n=this;return{...n,pointer:t?`${n.pointer}/${t}`:n.pointer,schema:e,path:[...n.path,[n.pointer,n.schema]]}}function Wi(e){return zt(e)&&e.next&&e.path&&e.draft}function ETe(e,t,n="#"){return{draft:e,pointer:n,schema:t,path:[],next:STe,merge:xTe,resolveRef:wTe}}function NTe(e){const t=e.path;let n=0;for(let s=t.length-1;s>=0;s--){const i=t[s][1];if(i.$id&&/^https?:\/\//.test(i.$id)&&i.$recursiveAnchor!==!0){n=s;break}}const r=t.find((s,i)=>i>=n&&s[1].$recursiveAnchor===!0);if(r)return e.next(r[1]);for(let s=t.length-1;s>=0;s--){const i=t[s][1];if(i.$id)return e.next(i)}return e.next(e.draft.rootSchema)}function FW(e){if(!Wi(e))throw new Error("expected node");if(e.schema==null)return e;if(e.schema.$recursiveRef)return FW(NTe(e));if(e.schema.$ref==null)return e;const t=e.draft.rootSchema.getRef(e.schema);return t===!1?e.next(t):e.merge(t,"$ref")}function _Te(e){return e.filter((t,n)=>e.indexOf(t)===n)}function BW(e,t){var n;const{schema:r}=e,s=(n=r.dependencies)!==null&&n!==void 0?n:r.dependentSchemas;if(!zt(s)||!zt(t))return;let i=!1,o={required:[]};if(Object.keys(s).forEach(a=>{var c,u;if(t[a]==null&&!(!((c=r.required)===null||c===void 0)&&c.includes(a)||!((u=o.required)===null||u===void 0)&&u.includes(a)))return;const f=s[a];if(Array.isArray(f)){i=!0,o.required.push(...f);return}if(zt(f)){i=!0;const h=e.next(f).resolveRef();o=ts(o,h.schema);return}}),i)return o.required=_Te(o.required),o}const CTe=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependentRequired;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{const c=i[a];if(c!==!0){if(c===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}if(Array.isArray(c))for(let u=0,f=c.length;u<f;u+=1)t[c[u]]===void 0&&o.push(n.errors.missingDependencyError({missingProperty:c[u],pointer:s,schema:r,value:t}))}}),o},OTe=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependentSchemas;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{const c=i[a];if(c!==!0){if(c===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}zt(c)&&n.validate(e.next(c),t).map(u=>o.push(u))}}),o},jTe=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependencies;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{if(i[a]===void 0||i[a]===!0)return;if(i[a]===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}let c;const u=Rt(i[a]),f=i[a];if(Array.isArray(f))c=f.filter(h=>t[h]===void 0).map(h=>n.errors.missingDependencyError({missingProperty:h,pointer:s,schema:r,value:t}));else if(u==="object")c=n.validate(e.next(i[a]),t);else throw new Error(`Invalid dependency definition for ${s}/${a}. Must be string[] or schema`);o.push(...c)}),o.length>0?o:void 0};function zW(e,t){const{draft:n,schema:r}=e;if(!Array.isArray(r.anyOf)||r.anyOf.length===0)return;let s;if(r.anyOf.forEach(i=>{const o=n.resolveRef(e.next(i));n.validate(o,t).length===0&&(s=s?ts(s,o.schema):o.schema)}),s)return e.next(s)}function ATe(e,t){const{anyOf:n}=e.schema;if(!Array.isArray(n)||n.length===0)return e;const r=zW(e,t);if(r){const{pointer:s,schema:i}=e;return e.draft.errors.anyOfError({pointer:s,schema:i,value:t,anyOf:JSON.stringify(n)})}return e.merge(r.schema,"anyOf")}const TTe=(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(!Array.isArray(r.anyOf)||r.anyOf.length===0)){for(let i=0;i<r.anyOf.length;i+=1){const o=n.resolveRef(e.next(r.anyOf[i]));if(n.validate(o,t).length===0)return}return n.errors.anyOfError({pointer:s,schema:r,value:t,anyOf:r.anyOf})}},BD=["allOf","anyOf","oneOf","dependencies","if","then","else"],$Te=["allOf","anyOf","oneOf","dependencies","if"];function RTe(e){const t=Object.keys(e);return $Te.findIndex(n=>t.includes(n))!==-1}function aj(e,t){let n,r;const s=e.draft.resolveRef(e),{draft:i}=s,o=Wi(s)?s.schema:s;if(o.oneOf){const p=y3(s,t);Vn(p)?r=p:p&&(n=ts(n??{},p.schema))}if(Array.isArray(o.allOf)){const p=o.allOf.map(y=>{if(RTe(y)){const v=aj(s.next(y),t);if(v==null||Vn(v))return v;const x=ts(y,v.schema);return oj(x,...BD)}return y});if(p.length>0){const y=LW(i,{allOf:p});n=ts(n??{},y)}}const a=zW(s,t);a&&a.schema&&(n=ts(n??{},a.schema));const c=BW(s,t);c&&(n=ts(n??{},c));const u=xS(s,t);if(Wi(u)&&(n=ts(n??{},u.schema)),n==null)return r;if(Vn(n))return n;const f=aj(s.next(n),t);Wi(f)&&(n=ts(n,f.schema));const h=oj(n,...BD);return s.next(h)}const kTe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function lw(e,t){const n=aj(e,t);return Wi(n)?e.merge(n.schema,...kTe):n||e}var MTe=Function.prototype.toString,I_=Object.create,ITe=Object.prototype.toString,PTe=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(t){return!!~this._keys.indexOf(t)},e.prototype.get=function(t){return this._values[this._keys.indexOf(t)]},e.prototype.set=function(t,n){this._keys.push(t),this._values.push(n)},e}();function DTe(){return new PTe}function LTe(){return new WeakMap}var FTe=typeof WeakMap<"u"?LTe:DTe;function b3(e){if(!e)return I_(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:I_(e);if(t&&~MTe.call(t).indexOf("[native code]"))try{return new t}catch{}return I_(e)}function BTe(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}function zTe(e){return e.flags}var VTe=/test/g.flags==="g"?zTe:BTe;function VW(e){var t=ITe.call(e);return t.substring(8,t.length-1)}function UTe(e){return e[Symbol.toStringTag]||VW(e)}var qTe=typeof Symbol<"u"?UTe:VW,HTe=Object.defineProperty,WTe=Object.getOwnPropertyDescriptor,UW=Object.getOwnPropertyNames,v3=Object.getOwnPropertySymbols,qW=Object.prototype,HW=qW.hasOwnProperty,GTe=qW.propertyIsEnumerable,WW=typeof v3=="function";function YTe(e){return UW(e).concat(v3(e))}var JTe=WW?YTe:UW;function wS(e,t,n){for(var r=JTe(e),s=0,i=r.length,o=void 0,a=void 0;s<i;++s)if(o=r[s],!(o==="callee"||o==="caller")){if(a=WTe(e,o),!a){t[o]=n.copier(e[o],n);continue}!a.get&&!a.set&&(a.value=n.copier(a.value,n));try{HTe(t,o,a)}catch{t[o]=a.value}}return t}function XTe(e,t){var n=new t.Constructor;t.cache.set(e,n);for(var r=0,s=e.length;r<s;++r)n[r]=t.copier(e[r],t);return n}function KTe(e,t){var n=new t.Constructor;return t.cache.set(e,n),wS(e,n,t)}function GW(e,t){return e.slice(0)}function QTe(e,t){return e.slice(0,e.size,e.type)}function ZTe(e,t){return new t.Constructor(GW(e.buffer))}function e$e(e,t){return new t.Constructor(e.getTime())}function YW(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach(function(r,s){n.set(s,t.copier(r,t))}),n}function t$e(e,t){return wS(e,YW(e,t),t)}function n$e(e,t){var n=b3(t.prototype);t.cache.set(e,n);for(var r in e)HW.call(e,r)&&(n[r]=t.copier(e[r],t));return n}function r$e(e,t){var n=b3(t.prototype);t.cache.set(e,n);for(var r in e)HW.call(e,r)&&(n[r]=t.copier(e[r],t));for(var s=v3(e),i=0,o=s.length,a=void 0;i<o;++i)a=s[i],GTe.call(e,a)&&(n[a]=t.copier(e[a],t));return n}var s$e=WW?r$e:n$e;function i$e(e,t){var n=b3(t.prototype);return t.cache.set(e,n),wS(e,n,t)}function P_(e,t){return new t.Constructor(e.valueOf())}function o$e(e,t){var n=new t.Constructor(e.source,VTe(e));return n.lastIndex=e.lastIndex,n}function Hv(e,t){return e}function JW(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach(function(r){n.add(t.copier(r,t))}),n}function a$e(e,t){return wS(e,JW(e,t),t)}var l$e=Array.isArray,x3=Object.assign,c$e=Object.getPrototypeOf||function(e){return e.__proto__},XW={array:XTe,arrayBuffer:GW,blob:QTe,dataView:ZTe,date:e$e,error:Hv,map:YW,object:s$e,regExp:o$e,set:JW},u$e=x3({},XW,{array:KTe,map:t$e,object:i$e,set:a$e});function d$e(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:P_,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:P_,Object:e.object,Promise:Hv,RegExp:e.regExp,Set:e.set,String:P_,WeakMap:Hv,WeakSet:Hv,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}function KW(e){var t=x3({},XW,e),n=d$e(t),r=n.Array,s=n.Object;function i(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=c$e(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return s(o,a);if(l$e(o))return r(o,a);var c=n[qTe(o)];return c?c(o,a):typeof o.then=="function"?o:s(o,a)}return function(a){return i(a,{Constructor:void 0,cache:FTe(),copier:i,prototype:void 0})}}function f$e(e){return KW(x3({},u$e,e))}f$e({});var lj=KW({});class h$e{constructor(t,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=t,this.typeKeywords=lj(t.typeKeywords),this.validateKeyword=Object.assign({},t.validateKeyword),this.validateType=Object.assign({},t.validateType),this.validateFormat=Object.assign({},t.validateFormat),this.errors=Object.assign({},t.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(t){t!=null&&(this.__rootSchema=this.config.compileSchema(this,t))}addRemoteSchema(t,n){this.config.addRemoteSchema(this,t,n)}compileSchema(t){var n;return this.config.compileSchema(this,t,(n=this.rootSchema)!==null&&n!==void 0?n:t)}createSchemaOf(t){return this.config.createSchemaOf(t)}each(t,n,r,s){const i=this.createNode(r??this.rootSchema,s);return this.config.each(i,t,n)}eachSchema(t,n=this.rootSchema){return this.config.eachSchema(n,t)}getChildSchemaSelection(t,n){return this.config.getChildSchemaSelection(this,t,n)}getSchema(t){const n=this.getSchemaNode(t);return Wi(n)?n.schema:n}getSchemaNode(t){return this.config.getSchema(this,t)}getTemplate(t,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,t,n,r)}isValid(t,n,r){return this.config.isValid(this,t,n,r)}createNode(t,n="#"){return this.config.createNode(this,t,n)}resolveAnyOf(t,n){return this.config.resolveAnyOf(t,n)}resolveAllOf(t,n){return this.config.resolveAllOf(t,n)}resolveRef(t){return this.config.resolveRef(t)}resolveOneOf(t,n){return this.config.resolveOneOf(t,n)}setSchema(t){this.rootSchema=t}step(t,n,r){return this.config.step(t,n,r)}validate(t,n=this.rootSchema,r){if(Wi(t)){const i=n,o=t;return this.config.validate(o,i)}if(Vn(t))return[t];const s=this.createNode(n,r);return this.config.validate(s,t)}}function Pf(e,t,n,r){const s=t[e];zt(s)&&Object.keys(s).forEach(i=>{Array.isArray(s[i])||(i==="$defs"?Pf("$defs",s[i],n,`${r}/${e}/$defs`):Mi(s[i],n,`${r}/${e}/${i}`))})}function cv(e,t,n,r){const s=t[e];Array.isArray(s)&&s.forEach((i,o)=>Mi(i,n,`${r}/${e}/${o}`))}function Mi(e,t,n=""){e!==void 0&&t(e,n)!==!0&&zt(e)&&(Pf("properties",e,t,n),Pf("patternProperties",e,t,n),Mi(e.not,t,`${n}/not`),Mi(e.additionalProperties,t,`${n}/additionalProperties`),Pf("dependencies",e,t,n),zt(e.items)&&Mi(e.items,t,`${n}/items`),cv("items",e,t,n),Mi(e.additionalItems,t,`${n}/additionalItems`),cv("allOf",e,t,n),cv("anyOf",e,t,n),cv("oneOf",e,t,n),Mi(e.if,t,`${n}/if`),Mi(e.then,t,`${n}/then`),Mi(e.else,t,`${n}/else`),Pf("definitions",e,t,n),Pf("$defs",e,t,n))}const m$e=/(#)+$/,D_=/#$/,zD=/^[#/]+/,VD=/^[^:]+:\/\/[^/]+\//,p$e=/\/[^/]*$/,g$e=/#.*$/,y$e=/^urn:uuid:[0-9A-Fa-f]/;function UD(e,t){return e==null&&t==null?"#":t==null?e.replace(D_,""):y$e.test(t)?t:e==null||e===""||e==="#"?t.replace(D_,""):t[0]==="#"?`${e.replace(g$e,"")}${t.replace(m$e,"")}`:VD.test(t)?t.replace(D_,""):VD.test(e)&&t.startsWith("/")?`${e.replace(/(^[^:]+:\/\/[^/]+)(.*)/,"$1")}/${t.replace(zD,"")}`:`${e.replace(p$e,"")}/${t.replace(zD,"")}`}var Wv={exports:{}},b$e=Wv.exports,qD;function v$e(){return qD||(qD=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:b$e,()=>(()=>{var n={d:(L,B)=>{for(var H in B)n.o(B,H)&&!n.o(L,H)&&Object.defineProperty(L,H,{enumerable:!0,get:B[H]})},o:(L,B)=>Object.prototype.hasOwnProperty.call(L,B),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},r={};function s(L){return L==="#"||L===""||Array.isArray(L)&&L.length===0||!1}n.r(r),n.d(r,{default:()=>z,get:()=>h,isRoot:()=>s,join:()=>R,remove:()=>j,removeUndefinedItems:()=>C,set:()=>S,split:()=>f,splitLast:()=>F});const i=/~1/g,o=/~0/g,a=/(^#?\/?)/g;function c(L){return L.replace(i,"/").replace(o,"~")}function u(L){return c(decodeURIComponent(L))}function f(L){if(L==null||typeof L!="string"||s(L))return Array.isArray(L)?L:[];const B=L.indexOf("#")>=0?u:c,H=(L=L.replace(a,"")).split("/");for(let I=0,V=H.length;I<V;I+=1)H[I]=B(H[I]);return H}function h(L,B,H=void 0){if(B==null||L==null)return H;if(s(B))return L;const I=p(L,f(B));return I===void 0?H:I}function p(L,B){const H=B.shift();if(L!==void 0)return H!==void 0?p(L[H],B):L}const y=/^\[.*\]$/,v=/^\[(.+)\]$/;function x(L,B){return L==="__proto__"||L=="constructor"&&B.length>0&&B[0]=="prototype"}function S(L,B,H){if(B==null)return L;const I=f(B);if(I.length===0)return L;L==null&&(L=y.test(I[0])?[]:{});let V,T,D=L;for(;I.length>1;)V=I.shift(),T=y.test(I[0]),x(V,I)||(D=_(D,V,T));return V=I.pop(),N(D,V,H),L}function N(L,B,H){let I;const V=B.match(v);B==="[]"&&Array.isArray(L)?L.push(H):V?(I=V.pop(),L[I]=H):L[B]=H}function _(L,B,H){var I,V;const T=(V=(I=B.match(v))===null||I===void 0?void 0:I.pop())!==null&&V!==void 0?V:B;if(L[T]!=null)return L[T];const D=H?[]:{};return N(L,B,D),D}function C(L){let B=0,H=0;for(;B+H<L.length;)L[B+H]===void 0&&(H+=1),L[B]=L[B+H],B+=1;return L.length=L.length-H,L}function j(L,B,H){const I=f(B),V=I.pop(),T=h(L,I);return T&&delete T[V],Array.isArray(T)&&H!==!0&&C(T),L}const A=/~/g,$=/\//g;function k(L,B){if(L.length===0)return B?"#":"";for(let H=0,I=L.length;H<I;H+=1)L[H]=L[H].replace(A,"~0").replace($,"~1"),B&&(L[H]=encodeURIComponent(L[H]));return(B?"#/":"/")+L.join("/")}function R(L,...B){const H=[];if(Array.isArray(L))return k(L,arguments[1]===!0);const I=arguments[arguments.length-1],V=typeof I=="boolean"?I:L&&L[0]==="#";for(let D=0,P=arguments.length;D<P;D+=1)H.push.apply(H,f(arguments[D]));const T=[];for(let D=0,P=H.length;D<P;D+=1)if(H[D]===".."){if(T.length===0)return V?"#":"";T.pop()}else T.push(H[D]);return k(T,V)}function F(L){const B=f(L);if(B.length===0)return typeof L=="string"&&L[0]==="#"?["#",B[0]]:["",void 0];if(B.length===1)return L[0]==="#"?["#",B[0]]:["",B[0]];const H=B.pop();return[R(B,L[0]==="#"),H]}const z={get:h,set:S,remove:j,join:R,split:f,splitLast:F,isRoot:s,removeUndefinedItems:C};return r})())}(Wv)),Wv.exports}var Nu=v$e();const x$e=Zi(Nu),L_=/(#)+$/g,w$e=["",null,"#"];function S$e(e){if(w$e.includes(e))return[];if(e=e.replace(L_,""),e.indexOf("#")===-1)return[e.replace(/(#|\/)+$/g,"")];if(e.indexOf("#")===0)return[e.replace(L_,"")];const t=e.split("#");return t[0]=t[0].replace(/(#|\/)+$/g,""),t[1]=`#${t[1].replace(L_,"")}`,t}const E$e=/(#)+$/g,N$e=e=>Rt(e)==="object";function da(e,t,n){var r,s,i,o,a;let c;if(N$e(n)?c=n.__ref||n.$ref:c=n,c==null)return t;let u;const f=c.replace(E$e,"");if(e.remotes[f]!=null)return u=e.remotes[f],u&&u.$ref?da(e,u,u):u;const h=(r=e.anchors)===null||r===void 0?void 0:r[c];if(h)return Nu.get(t,h);if(e.ids[c]!=null)return u=Nu.get(t,e.ids[c]),u&&u.$ref?da(e,t,u):u;const p=c,y=S$e(c);if(y.length===0)return t;if(y.length===1){if(c=y[0],e.remotes[c]&&(u=e.remotes[c],u&&u.$ref))return da(e,t,u);if(e.ids[c])return u=Nu.get(t,e.ids[c]),u&&u.$ref?da(e,t,u):u;const v=(s=t.getContext)===null||s===void 0?void 0:s.call(t).ids[c];if(v)return da(e,t,v)}if(y.length===2){const v=y[0];c=y[1];const x=(i=e.remotes[v])!==null&&i!==void 0?i:e.remotes[`${v}/`];if(x)return x.getContext&&x.getContext().anchors[p]!=null?x.getRef(p):x.getRef?x.getRef(c):da(e,x,c);const S=(o=e.ids[v])!==null&&o!==void 0?o:e.ids[`${v}/`];if(S)return da(e,Nu.get(t,S),c)}return u=Nu.get(t,(a=e.ids[c])!==null&&a!==void 0?a:c),u&&u.$ref?da(e,t,u):u}function Na(e){if(e===void 0)return;const t={type:Rt(e)};return t.type==="object"&&zt(e)&&(t.properties={},Object.keys(e).forEach(n=>t.properties[n]=Na(e[n]))),t.type==="array"&&Array.isArray(e)&&(e.length===1?t.items=Na(e[0]):t.items=e.map(Na)),t}const _$e={additionalItemsError:Ze("AdditionalItemsError"),additionalPropertiesError:Ze("AdditionalPropertiesError"),allOfError:Ze("AllOfError"),anyOfError:Ze("AnyOfError"),constError:Ze("ConstError"),containsAnyError:Ze("ContainsAnyError"),containsArrayError:Ze("ContainsArrayError"),containsError:Ze("ContainsError"),containsMaxError:Ze("ContainsMaxError"),containsMinError:Ze("ContainsMinError"),enumError:Ze("EnumError"),forbiddenPropertyError:Ze("ForbiddenPropertyError"),formatDateError:Ze("FormatDateError"),formatDateTimeError:Ze("FormatDateTimeError"),formatDurationError:Ze("FormatDurationError"),formatEmailError:Ze("FormatEmailError"),formatHostnameError:Ze("FormatHostnameError"),formatIPV4Error:Ze("FormatIPV4Error"),formatIPV4LeadingZeroError:Ze("FormatIPV4LeadingZeroError"),formatIPV6Error:Ze("FormatIPV6Error"),formatIPV6LeadingZeroError:Ze("FormatIPV6LeadingZeroError"),formatJsonPointerError:Ze("FormatJsonPointerError"),formatRegExError:Ze("FormatRegExError"),formatTimeError:Ze("FormatTimeError"),formatURIError:Ze("FormatURIError"),formatURIReferenceError:Ze("FormatURIReferenceError"),formatURITemplateError:Ze("FormatURITemplateError"),formatURLError:Ze("FormatURLError"),formatUUIDError:Ze("FormatUUIDError"),invalidDataError:Ze("InvalidDataError"),invalidPropertyNameError:Ze("InvalidPropertyNameError"),invalidSchemaError:Ze("InvalidSchemaError"),invalidTypeError:Ze("InvalidTypeError"),maximumError:Ze("MaximumError"),maxItemsError:Ze("MaxItemsError"),maxLengthError:Ze("MaxLengthError"),maxPropertiesError:Ze("MaxPropertiesError"),minimumError:Ze("MinimumError"),minItemsError:Ze("MinItemsError"),minItemsOneError:Ze("MinItemsOneError"),minLengthError:Ze("MinLengthError"),minLengthOneError:Ze("MinLengthOneError"),minPropertiesError:Ze("MinPropertiesError"),missingDependencyError:Ze("MissingDependencyError"),missingOneOfPropertyError:Ze("MissingOneOfPropertyError"),multipleOfError:Ze("MultipleOfError"),multipleOneOfError:Ze("MultipleOneOfError"),noAdditionalPropertiesError:Ze("NoAdditionalPropertiesError"),notError:Ze("NotError"),oneOfError:Ze("OneOfError"),oneOfPropertyError:Ze("OneOfPropertyError"),patternError:Ze("PatternError"),patternPropertiesError:Ze("PatternPropertiesError"),requiredPropertyError:Ze("RequiredPropertyError"),schemaWarning:Ze("SchemaWarning"),typeError:Ze("TypeError"),undefinedValueError:Ze("UndefinedValueError"),unevaluatedItemsError:Ze("UnevaluatedItemsError"),unevaluatedPropertyError:Ze("UnevaluatedPropertyError"),uniqueItemsError:Ze("UniqueItemsError"),unknownPropertyError:Ze("UnknownPropertyError"),valueNotEmptyError:Ze("ValueNotEmptyError")};var F_={exports:{}},HD;function C$e(){return HD||(HD=1,function(e){(function(t){t.exports.is_uri=r,t.exports.is_http_uri=s,t.exports.is_https_uri=i,t.exports.is_web_uri=o,t.exports.isUri=r,t.exports.isHttpUri=s,t.exports.isHttpsUri=i,t.exports.isWebUri=o;var n=function(a){var c=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return c};function r(a){if(a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var c=[],u="",f="",h="",p="",y="",v="";if(c=n(a),u=c[1],f=c[2],h=c[3],p=c[4],y=c[5],!!(u&&u.length&&h.length>=0)){if(f&&f.length){if(!(h.length===0||/^\//.test(h)))return}else if(/^\/\//.test(h))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(u.toLowerCase()))return v+=u+":",f&&f.length&&(v+="//"+f),v+=h,p&&p.length&&(v+="?"+p),y&&y.length&&(v+="#"+y),v}}}function s(a,c){if(r(a)){var u=[],f="",h="",p="",y="",v="",x="",S="";if(u=n(a),f=u[1],h=u[2],p=u[3],v=u[4],x=u[5],!!f){if(c){if(f.toLowerCase()!="https")return}else if(f.toLowerCase()!="http")return;if(h)return/:(\d+)$/.test(h)&&(y=h.match(/:(\d+)$/)[0],h=h.replace(/:\d+$/,"")),S+=f+":",S+="//"+h,y&&(S+=y),S+=p,v&&v.length&&(S+="?"+v),x&&x.length&&(S+="#"+x),S}}}function i(a){return s(a,!0)}function o(a){return s(a)||i(a)}})(e)}(F_)),F_.exports}var O$e=C$e();const WD=Zi(O$e);var Rr={},Gv={exports:{}},j$e=Gv.exports,GD;function A$e(){return GD||(GD=1,function(e){(function(t,n){e.exports?e.exports=n():t.nearley=n()})(j$e,function(){function t(u,f,h){return this.id=++t.highestId,this.name=u,this.symbols=f,this.postprocess=h,this}t.highestId=0,t.prototype.toString=function(u){var f=typeof u>"u"?this.symbols.map(c).join(" "):this.symbols.slice(0,u).map(c).join(" ")+" ● "+this.symbols.slice(u).map(c).join(" ");return this.name+" → "+f};function n(u,f,h,p){this.rule=u,this.dot=f,this.reference=h,this.data=[],this.wantedBy=p,this.isComplete=this.dot===u.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(u){var f=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=u,f.isComplete&&(f.data=f.build(),f.right=void 0),f},n.prototype.build=function(){var u=[],f=this;do u.push(f.right.data),f=f.left;while(f.left);return u.reverse(),u},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,f){this.grammar=u,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var f=this.states,h=this.wants,p=this.completed,y=0;y<f.length;y++){var v=f[y];if(v.isComplete){if(v.finish(),v.data!==o.fail){for(var x=v.wantedBy,S=x.length;S--;){var N=x[S];this.complete(N,v)}if(v.reference===this.index){var _=v.rule.name;(this.completed[_]=this.completed[_]||[]).push(v)}}}else{var _=v.rule.symbols[v.dot];if(typeof _!="string"){this.scannable.push(v);continue}if(h[_]){if(h[_].push(v),p.hasOwnProperty(_))for(var C=p[_],S=0;S<C.length;S++){var j=C[S];this.complete(v,j)}}else h[_]=[v],this.predict(_)}}},r.prototype.predict=function(u){for(var f=this.grammar.byName[u]||[],h=0;h<f.length;h++){var p=f[h],y=this.wants[u],v=new n(p,0,this.index,y);this.states.push(v)}},r.prototype.complete=function(u,f){var h=u.nextState(f);this.states.push(h)};function s(u,f){this.rules=u,this.start=f||this.rules[0].name;var h=this.byName={};this.rules.forEach(function(p){h.hasOwnProperty(p.name)||(h[p.name]=[]),h[p.name].push(p)})}s.fromCompiled=function(p,f){var h=p.Lexer;p.ParserStart&&(f=p.ParserStart,p=p.ParserRules);var p=p.map(function(v){return new t(v.name,v.symbols,v.postprocess)}),y=new s(p,f);return y.lexer=h,y};function i(){this.reset("")}i.prototype.reset=function(u,f){this.buffer=u,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,f){var h=this.buffer;if(typeof h=="string"){var p=h.split(`
`).slice(Math.max(0,this.line-5),this.line),y=h.indexOf(`
`,this.index);y===-1&&(y=h.length);var v=this.index-this.lastLineBreak,x=String(this.line).length;return f+=" at line "+this.line+" col "+v+`:

`,f+=p.map(function(N,_){return S(this.line-p.length+_+1,x)+" "+N},this).join(`
`),f+=`
`+S("",x+v)+`^
`,f}else return f+" at index "+(this.index-1);function S(N,_){var C=String(N);return Array(_-C.length+1).join(" ")+C}};function o(u,f,h){if(u instanceof s)var p=u,h=f;else var p=s.fromCompiled(u,f);this.grammar=p,this.options={keepHistory:!1,lexer:p.lexer||new i};for(var y in h||{})this.options[y]=h[y];this.lexer=this.options.lexer,this.lexerState=void 0;var v=new r(p,0);this.table=[v],v.wants[p.start]=[],v.predict(p.start),v.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var f=this.lexer;f.reset(u,this.lexerState);for(var h;;){try{if(h=f.next(),!h)break}catch(k){var x=new r(this.grammar,this.current+1);this.table.push(x);var p=new Error(this.reportLexerError(k));throw p.offset=this.current,p.token=k.token,p}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var v=this.current+1,x=new r(this.grammar,v);this.table.push(x);for(var S=h.text!==void 0?h.text:h.value,N=f.constructor===i?h.value:h,_=y.scannable,C=_.length;C--;){var j=_[C],A=j.rule.symbols[j.dot];if(A.test?A.test(N):A.type?A.type===h.type:A.literal===S){var $=j.nextState({data:N,token:h,isToken:!0,reference:v-1});x.states.push($)}}if(x.process(),x.states.length===0){var p=new Error(this.reportError(h));throw p.offset=this.current,p.token=h,p}this.options.keepHistory&&(y.lexerState=f.save()),this.current++}return y&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var f,h,p=u.token;return p?(f="input "+JSON.stringify(p.text[0])+" (lexer error)",h=this.lexer.formatError(p,"Syntax error")):(f="input (lexer error)",h=u.message),this.reportErrorCommon(h,f)},o.prototype.reportError=function(u){var f=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),h=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(h,f)},o.prototype.reportErrorCommon=function(u,f){var h=[];h.push(u);var p=this.table.length-2,y=this.table[p],v=y.states.filter(function(S){var N=S.rule.symbols[S.dot];return N&&typeof N!="string"});if(v.length===0)h.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,h);else{h.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var x=v.map(function(S){return this.buildFirstStateStack(S,[])||[S]},this);x.forEach(function(S){var N=S[0],_=N.rule.symbols[N.dot],C=this.getSymbolDisplay(_);h.push("A "+C+" based on:"),this.displayStateStack(S,h)},this)}return h.push(""),h.join(`
`)},o.prototype.displayStateStack=function(u,f){for(var h,p=0,y=0;y<u.length;y++){var v=u[y],x=v.rule.toString(v.dot);x===h?p++:(p>0&&f.push("    ^ "+p+" more lines identical to this"),p=0,f.push("    "+x)),h=x}},o.prototype.getSymbolDisplay=function(u){return a(u)},o.prototype.buildFirstStateStack=function(u,f){if(f.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var h=u.wantedBy[0],p=[u].concat(f),y=this.buildFirstStateStack(h,p);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var f=u.index;this.current=f,this.table[f]=u,this.table.splice(f+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],f=this.grammar.start,h=this.table[this.table.length-1];return h.states.forEach(function(p){p.rule.name===f&&p.dot===p.rule.symbols.length&&p.reference===0&&p.data!==o.fail&&u.push(p)}),u.map(function(p){return p.data})};function a(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function c(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:s,Rule:t}})}(Gv)),Gv.exports}var uv={},YD;function T$e(){if(YD)return uv;YD=1,Object.defineProperty(uv,"__esModule",{value:!0});function e(s){return s[0]}const t=s=>[].concat(...s.map(i=>Array.isArray(i)?t(i):i));function n(s){return s?Array.isArray(s)?t(s).join(""):s:""}const r={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:s=>s.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(s){return s.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(s){return s.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:e},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:e},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:s=>s[0].concat([s[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:e},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:s=>s[0].concat([s[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:e},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(s){return{DomainName:n(s[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(s){return{AddressLiteral:n(s[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(s){return{localPart:n(s[0]),domainPart:n(s[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(s){return{DotString:n(s[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(s){return{QuotedString:n(s[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:s=>s[0].concat([s[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:s=>s[0].concat([s[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:e},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(s){return s.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:s=>s[0].concat([s[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:e},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:e},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:s=>s.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:e},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:e},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:s=>s.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:e},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:e},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:e},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:e},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:e},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:e},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:e},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:e}],ParserStart:"Reverse_path"};return uv.default=r,uv}var JD;function $$e(){if(JD)return Rr;JD=1;var e=Rr&&Rr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.canonicalize=Rr.canonicalize_quoted_string=Rr.normalize=Rr.normalize_dot_string=Rr.parse=void 0;const t=A$e(),n=e(T$e());n.default.ParserStart="Mailbox";const r=t.Grammar.fromCompiled(n.default);function s(u){const f=new t.Parser(r);if(f.feed(u),f.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return f.results[0]}Rr.parse=s;function i(u){return function(){const p=u.indexOf("+");return p===-1?u:u.substr(0,p)}().replace(/\./g,"").toLowerCase()}Rr.normalize_dot_string=i;function o(u){var f,h;const p=s(u),y=(f=p.domainPart.AddressLiteral)!==null&&f!==void 0?f:p.domainPart.DomainName.toLowerCase();return`${(h=p.localPart.QuotedString)!==null&&h!==void 0?h:i(p.localPart.DotString)}@${y}`}Rr.normalize=o;function a(u){return`"${u.substr(1).substr(0,u.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}Rr.canonicalize_quoted_string=a;function c(u){var f;const h=s(u),p=(f=h.domainPart.AddressLiteral)!==null&&f!==void 0?f:h.domainPart.DomainName.toLowerCase();return`${h.localPart.QuotedString?a(h.localPart.QuotedString):h.localPart.DotString}@${p}`}return Rr.canonicalize=c,Rr}var R$e=$$e();const k$e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,M$e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,I$e=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,P$e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,D$e=/^(?<time>(?:([0-1]\d|2[0-3]):[0-5]\d:(?<second>[0-5]\d|60)))(?:\.\d+)?(?<offset>(?:z|[+-]([0-1]\d|2[0-3])(?::?[0-5]\d)?))$/i,L$e=[0,31,28,31,30,31,30,31,31,30,31,30,31],F$e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,B$e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,z$e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,V$e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,U$e=/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,cj={date:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.match(P$e);if(!i)return n.errors.formatDateTimeError({value:t,pointer:s,schema:r});const o=+i[1],a=+i[2],c=+i[3],u=o%4===0&&(o%100!==0||o%400===0);if(!(a>=1&&a<=12&&c>=1&&c<=(a==2&&u?29:L$e[a])))return n.errors.formatDateError({value:t,pointer:s,schema:r})},"date-time":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.split(/t/i);if(i.length===2){const o=cj.date(e,i[0])===void 0,a=cj.time(e,i[1])===void 0;if(o&&a)return}return n.errors.formatDateTimeError({value:t,pointer:s,schema:r})},duration:(e,t)=>{if(Rt(t)!=="string")return;const r=/(\d+M)(\d+W)|(\d+Y)(\d+W)/;if(!U$e.test(t)||r.test(t))return e.draft.errors.formatDurationError({value:t,pointer:e.pointer,schema:e.schema})},email:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;if(t[0]==='"')return n.errors.formatEmailError({value:t,pointer:s,schema:r});const[i,o,...a]=t.split("@");if(!i||!o||a.length!==0||i.length>64||o.length>253)return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(!/^[a-z0-9.-]+$/i.test(o)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(!o.split(".").every(c=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(c)))return n.errors.formatEmailError({value:t,pointer:s,schema:r})},"idn-email":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t===""))try{R$e.parse(t);return}catch{return n.errors.formatEmailError({value:t,pointer:s,schema:r})}},hostname:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&!(t===""||I$e.test(t)))return n.errors.formatHostnameError({value:t,pointer:s,schema:r})},ipv4:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV4LeadingZeroError({value:t,pointer:s,schema:r});if(!(t.length<=15&&k$e.test(t)))return n.errors.formatIPV4Error({value:t,pointer:s,schema:r})}},ipv6:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV6LeadingZeroError({value:t,pointer:s,schema:r});if(!(t.length<=45&&M$e.test(t)))return n.errors.formatIPV6Error({value:t,pointer:s,schema:r})}},"json-pointer":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!F$e.test(t))return n.errors.formatJsonPointerError({value:t,pointer:s,schema:r})},"relative-json-pointer":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&!B$e.test(t))return n.errors.formatJsonPointerError({value:t,pointer:s,schema:r})},regex:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&/\\Z$/.test(t)===!1){try{new RegExp(t);return}catch{}return n.errors.formatRegExError({value:t,pointer:s,schema:r})}if(!(typeof t=="object"||typeof t=="number"||Array.isArray(t)))return n.errors.formatRegExError({value:t,pointer:s,schema:r})},time:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.match(D$e);if(!i)return n.errors.formatDateTimeError({value:t,pointer:s,schema:r});if(i.groups.second==="60"){if(/23:59:60(z|\+00:00)/i.test(t))return;const o=i.groups.time.match(/(\d+):(\d+):/),a=i.groups.offset.match(/(\d+):(\d+)/);if(a){const c=parseInt(o[1]),u=parseInt(a[1]),f=parseInt(o[2]),h=parseInt(a[2]);let p;/^-/.test(i.groups.offset)?p=(c+u)*60+(f+h):p=(24+c-u)*60+(f-h);const y=Math.floor(p/60),v=y%24,x=p-y*60;if(v===23&&x===59)return}return n.errors.formatDateTimeError({value:t,pointer:s,schema:r})}},uri:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!WD.isUri(t))return n.errors.formatURIError({value:t,pointer:s,schema:r})},"uri-reference":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!z$e.test(t))return n.errors.formatURIReferenceError({value:t,pointer:s,schema:r})},"uri-template":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!V$e.test(t))return n.errors.formatURITemplateError({value:t,pointer:s,schema:r})},url:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(t===""||WD.isWebUri(t)))return n.errors.formatURLError({value:t,pointer:s,schema:r})},uuid:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))return n.errors.formatUUIDError({value:t,pointer:s,schema:r})}};function q$e(e,t,n=e.rootSchema){var r;if(n.oneOf)return n.oneOf.map(i=>e.createNode(i).resolveRef().schema);if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(i=>e.createNode(i).resolveRef().schema);if(Array.isArray(n.items)&&n.items.length>+t)return[e.step(e.createNode(n),t,{}).schema];if(n.additionalItems&&!zt(n.items)){const i=n.additionalItems===!0?{type:"string"}:n.additionalItems;return[e.createNode(i).resolveRef().schema]}if(Array.isArray(n.items)&&n.items.length<=+t)return[];const s=e.step(e.createNode(n),t,{});return Vn(s)?s:[s.schema]}const QW={};function H$e(e,t=QW){const{pointer:n="#",data:r,schema:s=e.rootSchema,withSchemaWarning:i=!1}=t,o=x$e.split(n),a=e.createNode(s).resolveRef(),c=ZW(a,o,r);return!i&&Vn(c)&&c.code==="schema-warning"?e.createNode(void 0):c}function ZW(e,t,n=QW){if(t.length===0)return e.resolveRef();const r=t.shift(),s=e.draft.step(e,r,n);return Vn(s)?s:(n=n[r],ZW(s,t,n))}var B_,XD;function W$e(){if(XD)return B_;XD=1;var e=function(_){return t(_)&&!n(_)};function t(N){return!!N&&typeof N=="object"}function n(N){var _=Object.prototype.toString.call(N);return _==="[object RegExp]"||_==="[object Date]"||i(N)}var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103;function i(N){return N.$$typeof===s}function o(N){return Array.isArray(N)?[]:{}}function a(N,_){return _.clone!==!1&&_.isMergeableObject(N)?x(o(N),N,_):N}function c(N,_,C){return N.concat(_).map(function(j){return a(j,C)})}function u(N,_){if(!_.customMerge)return x;var C=_.customMerge(N);return typeof C=="function"?C:x}function f(N){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(N).filter(function(_){return Object.propertyIsEnumerable.call(N,_)}):[]}function h(N){return Object.keys(N).concat(f(N))}function p(N,_){try{return _ in N}catch{return!1}}function y(N,_){return p(N,_)&&!(Object.hasOwnProperty.call(N,_)&&Object.propertyIsEnumerable.call(N,_))}function v(N,_,C){var j={};return C.isMergeableObject(N)&&h(N).forEach(function(A){j[A]=a(N[A],C)}),h(_).forEach(function(A){y(N,A)||(p(N,A)&&C.isMergeableObject(_[A])?j[A]=u(A,C)(N[A],_[A],C):j[A]=a(_[A],C))}),j}function x(N,_,C){C=C||{},C.arrayMerge=C.arrayMerge||c,C.isMergeableObject=C.isMergeableObject||e,C.cloneUnlessOtherwiseSpecified=a;var j=Array.isArray(_),A=Array.isArray(N),$=j===A;return $?j?C.arrayMerge(N,_,C):v(N,_,C):a(_,C)}x.all=function(_,C){if(!Array.isArray(_))throw new Error("first argument should be an array");return _.reduce(function(j,A){return x(j,A,C)},{})};var S=x;return B_=S,B_}var G$e=W$e();const Y$e=Zi(G$e),J$e=(e,t)=>t,eG=(e,t)=>Y$e(e,t,{arrayMerge:J$e});function X$e(e){switch(Rt(e)){case"string":case"array":return(e==null?void 0:e.length)===0;case"null":case"undefined":return!0;case"object":return Object.keys(e).length===0;default:return!1}}const KD=d0.templateDefaultOptions;let _a;function z_(e,t){const{$ref:n}=e;return n==null?!0:(_a[t]==null||_a[t][n]==null?0:_a[t][n])<d0.GET_TEMPLATE_RECURSION_LIMIT}function QD(e,t,n){const{$ref:r}=t;return r==null?t:(_a[n]=_a[n]||{},_a[n][r]=_a[n][r]||0,_a[n][r]+=1,e.createNode(t,n).resolveRef().schema)}function K$e(e,t){if(e==="string")return JSON.stringify(t);if(typeof t!="string")return null;try{if(t=JSON.parse(t),typeof t===e)return t}catch{}return null}function tG(e,t,n,r,s){if(Rt(t)!=="object")return Object.assign({pointer:r},t);if(z_(t,r)===!1&&n==null)return!1;let i=lj(QD(e,t,r));if(Array.isArray(t.anyOf)&&t.anyOf.length>0){if(z_(t.anyOf[0],`${r}/anyOf/0`)){const o=QD(e,t.anyOf[0],`${r}/anyOf/0`);i=eG(i,o),i.pointer=t.anyOf[0].$ref||i.pointer}delete i.anyOf}if(Array.isArray(t.allOf)&&t.allOf.map((a,c)=>z_(a,`${r}/allOf/${c}`)).reduceRight((a,c)=>a&&c,!0)){const a=[];let c=lj(n);for(let f=0;f<t.allOf.length;f+=1){const h=e.createNode(t.allOf[f],r);a.push(DW(h,c).schema),c=Ss(e,c,{type:t.type,...a[f]},`${r}/allOf/${f}`,s)}const u=LW(e,{allOf:a});u&&(i=ts(i,u))}return i.pointer=i.pointer||t.$ref||r,i}const ZD=e=>e&&typeof e=="object";function Ss(e,t,n,r,s){var i;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(t)}`);if(r==null)throw new Error("Missing pointer");let o=tG(e,n,t,r,s);if(!ZD(o))return;if(r=o.pointer,o!=null&&o.const)return o.const;if(Array.isArray(o.oneOf))if(X$e(t)){const f=o.oneOf[0].type||o.type||o.const&&typeof o.const||Rt(t);o={...o.oneOf[0],type:f}}else{const f=e.createNode(o,r),h=y3(f,t);if(Vn(h)){if(t!=null&&s.removeInvalidData!==!0)return t;o=o.oneOf[0],t=void 0}else{const p=h.schema;p.type=(i=p.type)!==null&&i!==void 0?i:o.type,o=p}}if(!ZD(o)||o.type==null)return;if(t instanceof File)return t;const a=Array.isArray(o.type)?Q$e(o.type,t,o.default):o.type,c=Rt(t);return t!=null&&c!==a&&!(c==="number"&&a==="integer")&&(t=K$e(a,t)),e9[a]==null?s.removeInvalidData?void 0:t:e9[a](e,o,t,r,s)}function Q$e(e,t,n){if(t==null){if(n!=null){const s=Rt(n);if(e.includes(s))return s}return e[0]}const r=Rt(t);return e.includes(r)?r:e[0]}const e9={null:(e,t,n)=>Up(t,n,null),string:(e,t,n)=>Up(t,n,""),number:(e,t,n)=>Up(t,n,0),integer:(e,t,n)=>Up(t,n,0),boolean:(e,t,n)=>Up(t,n,!1),object:(e,t,n,r,s)=>{var i;const o=t.default===void 0?{}:t.default,a={},c=s.extendDefaults===!1&&t.default!==void 0?[]:(i=t.required)!==null&&i!==void 0?i:[];t.properties&&Object.keys(t.properties).forEach(y=>{const v=n==null||n[y]==null?o[y]:n[y],x=c.includes(y);(v!=null||x||s.addOptionalProps)&&(a[y]=Ss(e,v,t.properties[y],`${r}/properties/${y}`,s))});const u=e.createNode(t,r);let f=BW(u,a);if(f){f=ts(t,f),delete f.dependencies;const y=Ss(e,n,f,`${r}/dependencies`,s);Object.assign(a,y)}n&&(s.removeInvalidData===!0&&(t.additionalProperties===!1||Rt(t.additionalProperties)==="object")?Rt(t.additionalProperties)==="object"&&Object.keys(n).forEach(y=>{a[y]==null&&e.isValid(n[y],t.additionalProperties)&&(a[y]=n[y])}):Object.keys(n).forEach(y=>a[y]==null&&(a[y]=n[y])));const h=e.createNode(t,r),p=xS(h,a);if(Wi(p)){const y=Ss(e,a,{type:"object",...p.schema},r,s);Object.assign(a,y)}return a},array:(e,t,n,r,s)=>{var i,o,a;const c=t.default===void 0?[]:t.default,u=n||c,f=s.extendDefaults===!1&&t.default!==void 0?0:(i=t.minItems)!==null&&i!==void 0?i:0;if(t.items==null){if(t.additionalItems){const p=Math.max(f,u.length);for(let y=0;y<p;y+=1)u[y]=Ss(e,u[y],t.additionalItems,`${r}/additionalItems`,s)}return n||[]}if(Array.isArray(t.items)){const p=Math.max(f??0,(a=(o=t.items)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0);for(let y=0;y<p;y+=1)t.items[y]?u[y]=Ss(e,u[y]==null?c[y]:u[y],t.items[y],`${r}/items/${y}`,s):t.additionalItems&&(u[y]=Ss(e,u[y]==null?c[y]:u[y],t.additionalItems,`${r}/additionalItems`,s));return u}if(Rt(t.items)!=="object")return u;const h=tG(e,t.items,n,r,s);if(h===!1)return u;if(r=h.pointer||r,h.oneOf&&u.length===0){const p=h.oneOf[0];for(let y=0;y<f;y+=1)u[y]=Ss(e,u[y]==null?c[y]:u[y],p,`${r}/oneOf/0`,s);return u}if(h.oneOf&&u.length>0){const p=Math.max(f,u.length);for(let y=0;y<p;y+=1){let v=u[y]==null?c[y]:u[y];const x=e.createNode(h,r);let S=y3(x,v);S==null||Vn(S)?v!=null&&s.removeInvalidData!==!0?u[y]=v:(v=void 0,S=h.oneOf[0],u[y]=Ss(e,v,S,`${r}/oneOf/${y}`,s)):u[y]=Ss(e,v,S.schema,`${r}/oneOf/${y}`,s)}return u}if(h.type){for(let p=0,y=Math.max(f,u.length);p<y;p+=1)u[p]=Ss(e,u[p]==null?c[p]:u[p],h,`${r}/items`,s);return u}return u}};function Up(e,t,n){return t??(e.const?e.const:e.default===void 0&&Array.isArray(e.enum)?e.enum[0]:e.default===void 0?n:e.default)}const Z$e=(e,t,n=e.rootSchema,r)=>(_a={},r?Ss(e,t,n,"#",{...KD,...r}):Ss(e,t,n,"#",KD));function e3e(e,t,n=e.rootSchema,r="#"){const s=e.createNode(n,r);return e.validate(s,t).length===0}function t9(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}function n9(e){const t=`${e}`;if(t.includes("e-"))return parseInt(t.replace(/.*e-/,""));const n=t.indexOf(".");return n===-1?0:t.length-(n+1)}var V_,r9;function t3e(){return r9||(r9=1,V_=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),V_}var n3e=t3e();const nG=Zi(n3e),r3e=Object.prototype.hasOwnProperty,s9=(e,t)=>!(e[t]===void 0||!r3e.call(e,t)),s3e={additionalProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.additionalProperties===!0||r.additionalProperties==null||Rt(r.patternProperties)==="object"&&r.additionalProperties===!1)return;const i=[];let o=Object.keys(t).filter(c=>d0.propertyBlacklist.includes(c)===!1);const a=Object.keys(r.properties||{});if(Rt(r.patternProperties)==="object"){const c=Object.keys(r.patternProperties).map(u=>new RegExp(u));o=o.filter(u=>{for(let f=0;f<c.length;f+=1)if(c[f].test(u))return!1;return!0})}for(let c=0,u=o.length;c<u;c+=1){const f=o[c];if(a.indexOf(f)===-1){const h=zt(r.additionalProperties);if(h&&Array.isArray(r.additionalProperties.oneOf)){const p=n.resolveOneOf(e.next(r.additionalProperties),t[f]);Vn(p)?i.push(n.errors.additionalPropertiesError({pointer:s,schema:r.additionalProperties,value:t,property:o[c],properties:a,errors:p.data.errors})):i.push(...n.validate(e.next(p,f),t[f]))}else if(h){const p=n.validate(e.next(r.additionalProperties,f),t[f]);i.push(...p)}else i.push(n.errors.noAdditionalPropertiesError({pointer:s,schema:r,value:t,property:o[c],properties:a}))}}return i},allOf:vTe,anyOf:TTe,dependencies:jTe,enum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=Rt(t);if(i==="object"||i==="array"){const o=JSON.stringify(t);for(let a=0;a<r.enum.length;a+=1)if(JSON.stringify(r.enum[a])===o)return}else if(r.enum.includes(t))return;return n.errors.enumError({pointer:s,schema:r,value:t,values:r.enum})},format:(e,t)=>{const{draft:n,schema:r}=e;if(n.validateFormat[r.format])return n.validateFormat[r.format](e,t)},items:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.items===!1)return Array.isArray(t)&&t.length===0?void 0:n.errors.invalidDataError({pointer:s,value:t,schema:r});const i=[];for(let o=0;o<t.length;o+=1){const a=t[o],c=n.step(e.next(r),o,t);if(Vn(c))return[c];const u=n.validate(c,a);i.push(...u)}return i},maximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maximum)){if(r.maximum&&r.maximum<t)return n.errors.maximumError({maximum:r.maximum,length:t,value:t,pointer:s,schema:r});if(r.maximum&&r.exclusiveMaximum===!0&&r.maximum===t)return n.errors.maximumError({maximum:r.maximum,length:t,pointer:s,schema:r,value:t})}},maxItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maxItems)&&r.maxItems<t.length)return n.errors.maxItemsError({maximum:r.maxItems,length:t.length,schema:r,value:t,pointer:s})},maxLength:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.maxLength))return;const i=t9(t).length;if(r.maxLength<i)return n.errors.maxLengthError({maxLength:r.maxLength,length:i,pointer:s,schema:r,value:t})},maxProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=Object.keys(t).length;if(isNaN(r.maxProperties)===!1&&r.maxProperties<i)return n.errors.maxPropertiesError({maxProperties:r.maxProperties,length:i,pointer:s,schema:r,value:t})},minLength:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.minLength))return;const i=t9(t).length;if(r.minLength>i)return r.minLength===1?n.errors.minLengthOneError({minLength:r.minLength,length:i,pointer:s,schema:r,value:t}):n.errors.minLengthError({minLength:r.minLength,length:i,pointer:s,schema:r,value:t})},minimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minimum)){if(r.minimum>t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t});if(r.exclusiveMinimum===!0&&r.minimum===t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t})}},minItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minItems)&&r.minItems>t.length)return r.minItems===1?n.errors.minItemsOneError({minItems:r.minItems,length:t.length,pointer:s,schema:r,value:t}):n.errors.minItemsError({minItems:r.minItems,length:t.length,pointer:s,schema:r,value:t})},minProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.minProperties))return;const i=Object.keys(t).length;if(r.minProperties>i)return n.errors.minPropertiesError({minProperties:r.minProperties,length:i,pointer:s,schema:r,value:t})},multipleOf:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.multipleOf)||typeof t!="number")return;const i=n9(t),o=n9(r.multipleOf);if(i>o)return n.errors.multipleOfError({multipleOf:r.multipleOf,value:t,pointer:s,schema:r});const a=Math.pow(10,o),c=Math.round(t*a),u=Math.round(r.multipleOf*a);if(c%u/a!==0)return n.errors.multipleOfError({multipleOf:r.multipleOf,value:t,pointer:s,schema:r})},not:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=[];return n.validate(e.next(r.not),t).length===0&&i.push(n.errors.notError({value:t,not:r.not,pointer:s,schema:r})),i},oneOf:gTe,pattern:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(new RegExp(r.pattern,"u").test(t)===!1)return n.errors.patternError({pattern:r.pattern,description:r.patternExample||r.pattern,received:t,schema:r,value:t,pointer:s})},patternProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.properties||{},o=r.patternProperties;if(Rt(o)!=="object")return;const a=[],c=Object.keys(t),u=Object.keys(o).map(f=>({regex:new RegExp(f),patternSchema:o[f]}));return c.forEach(f=>{let h=!1;for(let p=0,y=u.length;p<y;p+=1)if(u[p].regex.test(f)){h=!0;const v=n.validate(e.next(u[p].patternSchema,f),t[f]);v&&v.length>0&&a.push(...v)}i[f]||h===!1&&r.additionalProperties===!1&&a.push(n.errors.patternPropertiesError({key:f,pointer:s,schema:r,value:t,patterns:Object.keys(o).join(",")}))}),a},properties:(e,t)=>{const{draft:n,schema:r}=e,s=[],i=Object.keys(r.properties||{});for(let o=0;o<i.length;o+=1){const a=i[o];if(s9(t,a)){const c=n.step(e,a,t);if(Vn(c))s.push(c);else{const u=n.validate(c,t[a]);s.push(...u)}}}return s},propertiesRequired:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=[],o=Object.keys(r.properties||{});for(let a=0;a<o.length;a+=1){const c=o[a];if(t[c]===void 0)i.push(n.errors.requiredPropertyError({key:c,pointer:s,schema:r,value:t}));else{const u=n.step(e,c,t),f=n.validate(u,t[c]);i.push(...f)}}return i},required:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(Array.isArray(r.required)!==!1)return r.required.map(i=>{if(!s9(t,i))return n.errors.requiredPropertyError({key:i,pointer:s,schema:r,value:t})})},requiredNotEmpty:(e,t)=>{const{schema:n}=e;if(Array.isArray(n.required)!==!1)return n.required.map(r=>{const{draft:s,schema:i,pointer:o}=e;if(t[r]==null||t[r]==="")return s.errors.valueNotEmptyError({property:r,pointer:`${o}/${r}`,schema:i,value:t})})},uniqueItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if((Array.isArray(t)&&r.uniqueItems)===!1)return;const i=[],o=[];return t.forEach((a,c)=>{for(let u=c+1;u<t.length;u+=1)nG(a,t[u])&&!i.includes(u)&&(o.push(n.errors.uniqueItemsError({pointer:`${s}/${u}`,duplicatePointer:`${s}/${c}`,arrayPointer:s,value:JSON.stringify(a),schema:r})),i.push(u))}),o}},i3e={array:(e,t,n)=>{const{draft:r,schema:s,pointer:i}=e,o=n==null?void 0:n[t],a=Rt(s.items);if(a==="object")return lw(e.next(s.items,t),o);if(a==="array"){if(s.items[t]===!0)return e.next(Na(o),t);if(s.items[t]===!1)return r.errors.invalidDataError({key:t,value:o,pointer:i,schema:s});if(s.items[t])return r.resolveRef(e.next(s.items[t],t));if(s.additionalItems===!1)return r.errors.additionalItemsError({key:t,value:o,pointer:i,schema:s});if(s.additionalItems===!0||s.additionalItems===void 0)return e.next(Na(o),t);if(Rt(s.additionalItems)==="object")return e.next(s.additionalItems,t);throw new Error(`Invalid schema ${JSON.stringify(s,null,2)} for ${JSON.stringify(n,null,2)}`)}return s.additionalItems!==!1&&o?e.next(Na(o),t):new Error(`Invalid array schema for ${t} at ${i}`)},object:(e,t,n)=>{var r,s;const{draft:i,pointer:o}=e,a=lw(e,n),c=(r=a.schema)!==null&&r!==void 0?r:a,u=(s=c==null?void 0:c.properties)===null||s===void 0?void 0:s[t];if(u!==void 0){if(u===!1)return i.errors.forbiddenPropertyError({property:t,value:n,pointer:o,schema:c});if(u===!0)return e.next(Na(n==null?void 0:n[t]),t);const p=i.resolveRef(e.next(u,t));if(Vn(p))return p;if(p&&Array.isArray(p.schema.oneOf)){const y=e.next(p.schema,t),v=i.resolveOneOf(y,n[t]);return Vn(v)?v:y.merge(v.schema,"oneOf")}if(p)return p}const{patternProperties:f}=c;if(Rt(f)==="object"){let p;const y=Object.keys(f);for(let v=0,x=y.length;v<x;v+=1)if(p=new RegExp(y[v]),p.test(t))return e.next(f[y[v]],t)}const{additionalProperties:h}=c;if(Rt(h)==="object")return e.next(c.additionalProperties,t);if(n&&(h===void 0||h===!0)){const p=Na(n[t]);return p?e.next(p,t):void 0}return i.errors.unknownPropertyError({property:t,value:n,pointer:`${o}`,schema:c})}};function o3e(e,t,n){var r;const{draft:s,schema:i,pointer:o}=e,a=Rt(n);let c=(r=i.type)!==null&&r!==void 0?r:a;if(Array.isArray(c)){if(!c.includes(a))return s.errors.typeError({value:n,pointer:o,expected:i.type,received:a,schema:i});c=a}const u=i3e[c];if(u){const f=u(e,`${t}`,n);return f===void 0?s.errors.schemaWarning({pointer:o,value:n,schema:i,key:t}):f}return new Error(`Unsupported schema type ${i.type} for key ${t}`)}const a3e={array:(e,t)=>e.draft.typeKeywords.array.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),object:(e,t)=>e.draft.typeKeywords.object.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),string:(e,t)=>e.draft.typeKeywords.string.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),integer:(e,t)=>e.draft.typeKeywords.number.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),number:(e,t)=>e.draft.typeKeywords.number.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),boolean:(e,t)=>e.draft.typeKeywords.boolean.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),null:(e,t)=>e.draft.typeKeywords.null.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t))};function l3e(e,t){const n=Rt(e);return n==="number"&&(t==="integer"||Array.isArray(t)&&t.includes("integer"))?Number.isInteger(e)||isNaN(e)?"integer":"number":n}function c3e(e,t){if(!Wi(e))throw new Error("node expected");const{draft:n,pointer:r}=e;e=e.resolveRef();const s=e.schema;if(s==null)throw new Error("missing schema");if(Rt(s)==="boolean")return s?[]:[n.errors.invalidDataError({pointer:r,schema:s,value:t})];if(Vn(s))return[s];if(s.const!==void 0)return nG(s.const,t)?[]:[n.errors.constError({pointer:r,schema:s,value:t,expected:s.const})];const i=l3e(t,s.type),o=s.type||i;return i!==o&&(!Array.isArray(o)||!o.includes(i))?[n.errors.typeError({pointer:r,schema:s,value:t,received:i,expected:o})]:n.validateType[i]==null?[n.errors.invalidTypeError({pointer:r,schema:s,value:t,receivedType:i})]:iy(n.validateType[i](e,t)).filter(aw)}function uj(e,t,n){const r=e.resolveRef(),{draft:s,schema:i,pointer:o}=r;n(i,t,o);const a=Rt(t);a==="object"?Object.keys(t).forEach(c=>{const u=s.step(r,c,t);Wi(u)&&uj(u,t[c],n)}):a==="array"&&t.forEach((c,u)=>{const f=s.step(r,u,t);Wi(f)&&uj(f,t[u],n)})}function u3e(e,t,n){n.$id=n.$id||t,e.remotes[t]=e.compileSchema(n)}const i9="__compiled",o9="__ref",d3e="getRef",f3e="getRoot",h3e="getContext",m3e=/(#|\/)+$/g;function p3e(e,t,n=t,r=!1){if(t===!0||t===!1||t===void 0||t[i9]!==void 0)return t;const s={ids:{},anchors:{},remotes:e.remotes},i=JSON.stringify(t),o=JSON.parse(i);if(Object.defineProperties(o,{[i9]:{enumerable:!1,value:!0},[h3e]:{enumerable:!1,value:()=>s},[d3e]:{enumerable:!1,value:da.bind(null,s,o)}}),r===!1&&i.includes("$ref")===!1)return o;o!==n&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,o.definitions,o.$defs)});const a={},c=()=>o;return Mi(o,(u,f)=>{var h;if(u.$id){if(u.$id.startsWith("http")&&/(allOf|anyOf|oneOf|if)\/\d+$/.test(f)){const S=f.replace(/\/(allOf|anyOf|oneOf|if)\/\d+$/,""),N=Nu.get(o,S);u.$id=(h=N.$id)!==null&&h!==void 0?h:u.$id}s.ids[u.$id.replace(m3e,"")]=f}f=`#${f}`.replace(/##+/,"#");const p=f.replace(/\/[^/]+$/,""),y=f.replace(/\/[^/]+\/[^/]+$/,""),v=a[p]||a[y],x=UD(v,u.$id);a[f]=x,s.ids[x]==null&&(s.ids[x]=f),u.$anchor&&(s.anchors[`${x}#${u.$anchor}`]=f),u.$ref&&!u[o9]&&(Object.defineProperty(u,o9,{enumerable:!1,value:UD(x,u.$ref)}),Object.defineProperty(u,f3e,{enumerable:!1,value:c}))}),o}const g3e={...s3e,contains:(e,t)=>{var n,r;const{draft:s,schema:i,pointer:o}=e;if(i.contains===!1)return s.errors.containsArrayError({pointer:o,value:t,schema:i});if(i.contains===!0)return Array.isArray(t)&&t.length===0?s.errors.containsAnyError({pointer:o,value:t,schema:i}):void 0;if(Rt(i.contains)!=="object")return;let a=0;for(let f=0;f<t.length;f+=1)s.validate(e.next(i.contains,f),t[f]).length===0&&a++;const c=(n=i.maxContains)!==null&&n!==void 0?n:1/0,u=(r=i.minContains)!==null&&r!==void 0?r:1;if(!(c>=a&&u<=a))return c<a?s.errors.containsMaxError({pointer:o,schema:i,delta:a-c,value:t}):u>a?s.errors.containsMinError({pointer:o,schema:i,delta:u-a,value:t}):s.errors.containsError({pointer:o,schema:i,value:t})},exclusiveMaximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.exclusiveMaximum)&&r.exclusiveMaximum<=t)return n.errors.maximumError({maximum:r.exclusiveMaximum,length:t,pointer:s,schema:r,value:t})},exclusiveMinimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.exclusiveMinimum)&&r.exclusiveMinimum>=t)return n.errors.minimumError({minimum:r.exclusiveMinimum,length:t,pointer:s,schema:r,value:t})},if:yTe,maximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maximum)&&r.maximum&&r.maximum<t)return n.errors.maximumError({maximum:r.maximum,length:t,pointer:s,schema:r,value:t})},minimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minimum)&&r.minimum>t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t})},patternProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.properties||{},o=r.patternProperties;if(Rt(o)!=="object")return;const a=[],c=Object.keys(t),u=Object.keys(o).map(f=>({regex:new RegExp(f),patternSchema:o[f]}));return c.forEach(f=>{let h=!1;for(let p=0,y=u.length;p<y;p+=1)if(u[p].regex.test(f)){if(h=!0,u[p].patternSchema===!1){a.push(n.errors.patternPropertiesError({key:f,pointer:s,patterns:Object.keys(o).join(","),schema:r,value:t}));return}const v=n.validate(e.next(u[p].patternSchema,f),t[f]);v&&v.length>0&&a.push(...v)}i[f]||h===!1&&r.additionalProperties===!1&&a.push(n.errors.patternPropertiesError({key:f,pointer:s,patterns:Object.keys(o).join(","),schema:r,value:t}))}),a},propertyNames:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.propertyNames===!1)return Object.keys(t).length===0?void 0:n.errors.invalidPropertyNameError({property:Object.keys(t),pointer:s,value:t,schema:r});if(r.propertyNames===!0||Rt(r.propertyNames)!=="object")return;const i=[],o=Object.keys(t),a={...r.propertyNames,type:"string"};return o.forEach(c=>{const u=e.next(a,c),f=n.validate(u,c);f.length>0&&i.push(n.errors.invalidPropertyNameError({property:c,pointer:s,validationError:f[0],value:t[c],schema:r}))}),i}},rG=e=>zt(e)?Object.keys(e).map(t=>new RegExp(t)):[];function y3e(e,t,n){var r,s;const i=e.draft.resolveRef(e),{schema:o}=i;if(o.additionalProperties===!0)return!0;if(!((r=o.properties)===null||r===void 0)&&r[t]){const c=(s=o.properties)===null||s===void 0?void 0:s[t];if(i.draft.isValid(n,c))return!0}if(rG(o.patternProperties).find(c=>c.test(t)))return!0;if(zt(o.additionalProperties)){const c=o.additionalProperties;return i.draft.validate(i.next(c),n)}return!1}const b3e={...g3e,dependencies:void 0,dependentSchemas:OTe,dependentRequired:CTe,unevaluatedProperties:(e,t)=>{var n;const{draft:r,schema:s,pointer:i}=e;if(!zt(t)||s.unevaluatedProperties==null)return;let o=Object.keys(t);if(o.length===0)return;const a=lw(e,t),c=(n=a.schema)!==null&&n!==void 0?n:a;if(c.unevaluatedProperties===!0)return;const u=rG(c.patternProperties);if(o=o.filter(h=>{var p;return!(!((p=c.properties)===null||p===void 0)&&p[h]||zt(s.if)&&y3e(e.next({type:"object",...s.if}),h,t[h])||u.find(y=>y.test(h))||c.additionalProperties)}),o.length===0)return;const f=[];return c.unevaluatedProperties===!1?(o.forEach(h=>{f.push(r.errors.unevaluatedPropertyError({pointer:`${i}/${h}`,value:JSON.stringify(t[h]),schema:s}))}),f):(o.forEach(h=>{if(zt(c.unevaluatedProperties)){const p=r.validate(e.next(c.unevaluatedProperties,h),t[h]);f.push(...p)}}),f)},unevaluatedItems:(e,t)=>{var n;const{draft:r,schema:s,pointer:i}=e;if(!Array.isArray(t)||t.length===0||s.unevaluatedItems==null||s.unevaluatedItems===!0)return;const o=lw(r.resolveRef(e),t),a=(n=o.schema)!==null&&n!==void 0?n:o;if(a.unevaluatedItems===!0||a.additionalItems===!0)return;if(zt(s.if)){const u={type:"array",...s.if};if(r.isValid(t,u)&&Array.isArray(u.items)&&u.items.length===t.length)return}if(zt(a.items)){const u={...a,unevaluatedItems:void 0};return r.validate(e.next(u),t).map(h=>r.errors.unevaluatedItemsError({...h.data}))}if(Array.isArray(a.items)){const u=[];for(let f=a.items.length;f<t.length;f+=1)f<a.items.length?r.validate(e.next(a.items[f],f),t[f]).length>0&&u.push({index:f,value:t[f]}):u.push({index:f,value:t[f]});return u.map(f=>r.errors.unevaluatedItemsError({pointer:`${i}/${f.index}`,value:JSON.stringify(f.value),schema:a.unevaluatedItems}))}if(zt(a.unevaluatedItems))return t.map((u,f)=>{if(!r.isValid(u,a.unevaluatedItems))return r.errors.unevaluatedItemsError({pointer:`${i}/${f}`,value:JSON.stringify(u),schema:a.unevaluatedItems})});const c=[];return t.forEach((u,f)=>{c.push(r.errors.unevaluatedItemsError({pointer:`${i}/${f}`,value:JSON.stringify(u),schema:s}))}),c}},v3e={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","unevaluatedItems","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependentSchemas","dependentRequired","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required","unevaluatedProperties"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:b3e,validateType:a3e,validateFormat:cj,errors:_$e,createNode:ETe,addRemoteSchema:u3e,compileSchema:p3e,createSchemaOf:Na,each:uj,eachSchema:Mi,getChildSchemaSelection:q$e,getSchema:H$e,getTemplate:Z$e,isValid:e3e,resolveAllOf:bTe,resolveAnyOf:ATe,resolveOneOf:mTe,resolveRef:FW,step:o3e,validate:c3e,templateDefaultOptions:d0.templateDefaultOptions};class w3 extends h$e{constructor(t,n={}){super(eG(v3e,n),t)}}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function a9(e){return Object.prototype.toString.call(e)==="[object Object]"}function l9(e){var t,n;return a9(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(a9(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var Yv={exports:{}},x3e=Yv.exports,c9;function w3e(){return c9||(c9=1,function(e){(function(t,n){e.exports=n()})(x3e,function(){var t=Object.prototype.toString;function n(h,p){return h==null?!1:Object.prototype.hasOwnProperty.call(h,p)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var p in h)if(n(h,p))return!1;return!0}return!1}function s(h){return t.call(h)}function i(h){return typeof h=="object"&&s(h)==="[object Object]"}var o=Array.isArray||function(h){return t.call(h)==="[object Array]"};function a(h){return typeof h=="boolean"||s(h)==="[object Boolean]"}function c(h){var p=parseInt(h);return p.toString()===h?p:h}function u(h){h=h||{};var p=function(N){return Object.keys(p).reduce(function(_,C){return C==="create"||typeof p[C]=="function"&&(_[C]=p[C].bind(p,N)),_},{})},y;h.includeInheritedProps?y=function(){return!0}:y=function(N,_){return typeof _=="number"&&Array.isArray(N)||n(N,_)};function v(N,_){if(y(N,_))return N[_]}var x;h.includeInheritedProps?x=function(N,_){typeof _!="string"&&typeof _!="number"&&(_=String(_));var C=v(N,_);if(_==="__proto__"||_==="prototype"||_==="constructor"&&typeof C=="function")throw new Error("For security reasons, object's magic properties cannot be set");return C}:x=function(N,_){return v(N,_)};function S(N,_,C,j){if(typeof _=="number"&&(_=[_]),!_||_.length===0)return N;if(typeof _=="string")return S(N,_.split(".").map(c),C,j);var A=_[0],$=x(N,A);return _.length===1?(($===void 0||!j)&&(N[A]=C),$):($===void 0&&(typeof _[1]=="number"?N[A]=[]:N[A]={}),S(N[A],_.slice(1),C,j))}return p.has=function(N,_){if(typeof _=="number"?_=[_]:typeof _=="string"&&(_=_.split(".")),!_||_.length===0)return!!N;for(var C=0;C<_.length;C++){var j=c(_[C]);if(typeof j=="number"&&o(N)&&j<N.length||(h.includeInheritedProps?j in Object(N):n(N,j)))N=N[j];else return!1}return!0},p.ensureExists=function(N,_,C){return S(N,_,C,!0)},p.set=function(N,_,C,j){return S(N,_,C,j)},p.insert=function(N,_,C,j){var A=p.get(N,_);j=~~j,o(A)||(A=[],p.set(N,_,A)),A.splice(j,0,C)},p.empty=function(N,_){if(!r(_)&&N!=null){var C,j;if(C=p.get(N,_)){if(typeof C=="string")return p.set(N,_,"");if(a(C))return p.set(N,_,!1);if(typeof C=="number")return p.set(N,_,0);if(o(C))C.length=0;else if(i(C))for(j in C)y(C,j)&&delete C[j];else return p.set(N,_,null)}}},p.push=function(N,_){var C=p.get(N,_);o(C)||(C=[],p.set(N,_,C)),C.push.apply(C,Array.prototype.slice.call(arguments,2))},p.coalesce=function(N,_,C){for(var j,A=0,$=_.length;A<$;A++)if((j=p.get(N,_[A]))!==void 0)return j;return C},p.get=function(N,_,C){if(typeof _=="number"&&(_=[_]),!_||_.length===0)return N;if(N==null)return C;if(typeof _=="string")return p.get(N,_.split("."),C);var j=c(_[0]),A=x(N,j);return A===void 0?C:_.length===1?A:p.get(N[j],_.slice(1),C)},p.del=function(_,C){if(typeof C=="number"&&(C=[C]),_==null||r(C))return _;if(typeof C=="string")return p.del(_,C.split("."));var j=c(C[0]);if(x(_,j),!y(_,j))return _;if(C.length===1)o(_)?_.splice(j,1):delete _[j];else return p.del(_[j],C.slice(1));return _},p}var f=u();return f.create=u,f.withInheritedProps=u({includeInheritedProps:!0}),f})}(Yv)),Yv.exports}var S3e=w3e();const E3e=Zi(S3e);var Qf=Object.prototype.hasOwnProperty;function ko(e){if(dj(e))return!1;if(!e||zh(e)&&e.length===0)return!0;if(!sG(e)){for(var t in e)if(Qf.call(e,t))return!1;return!0}return!1}function dj(e){return typeof e=="number"}function sG(e){return typeof e=="string"}function zh(e){return Array.isArray(e)}function fj(e,t){for(var n in t)Qf.call(t,n)&&(e[n]=t[n]);return e}function N3e(e){var t=parseInt(e);return t.toString()===e?t:e}function cw(e,t,n){return e==null?t?n?[]:{}:e:zh(e)?e.slice():fj({},e)}function uw(e,t){if(e!==t&&l9(e)&&l9(t)){var n={};for(var r in e)Qf.call(e,r)&&(Qf.call(t,r)?n[r]=uw(e[r],t[r]):n[r]=e[r]);for(r in t)Qf.call(t,r)&&(n[r]=uw(e[r],t[r]));return n}return t}function Ha(e,t,n,r){if(dj(n)&&(n=[n]),ko(n))return t;if(sG(n))return Ha(e,t,n.split(".").map(N3e),r);var s=n[0];return(!e||e===t)&&(e=cw(t,!0,dj(s))),n.length===1?r(e,s):(t!=null&&(t=t[s]),e[s]=Ha(e[s],t,n.slice(1),r),e)}var hs={};hs.set=function(t,n,r,s){return ko(r)?s:Ha(t,n,r,function(i,o){return i[o]=s,i})};hs.update=function(t,n,r,s){return ko(r)?s(cw(n)):Ha(t,n,r,function(i,o){return i[o]=s(i[o]),i})};hs.push=function(t,n,r){var s=Array.prototype.slice.call(arguments,3);return ko(r)?zh(n)?n.concat(s):s:Ha(t,n,r,function(i,o){return zh(i[o])?i[o]=i[o].concat(s):i[o]=s,i})};hs.insert=function(t,n,r,s,i){if(i=~~i,ko(r)){if(!zh(n))return[s];var o=n.slice(0,i);return o.push(s),o.concat(n.slice(i))}return Ha(t,n,r,function(a,c){var u=a[c];if(!zh(u)){if(u!=null&&typeof u<"u")throw new Error("Expected "+r+"to be an array. Instead got "+typeof r);u=[]}var f=u.slice(0,i);return f.push(s),a[c]=f.concat(u.slice(i)),a})};hs.del=function(t,n,r){if(!ko(r))return Ha(t,n,r,function(s,i){return Array.isArray(s)?s[i]!==void 0&&s.splice(i,1):Qf.call(s,i)&&delete s[i],s})};hs.assign=function(t,n,r,s){return ko(r)?ko(s)?n:fj(cw(n),s):Ha(t,n,r,function(i,o){s=Object(s);var a=cw(i[o],!0);return fj(a,s),i[o]=a,i})};hs.merge=function(t,n,r,s){return ko(r)?ko(s)?n:uw(n,s):Ha(t,n,r,function(i,o){return s=Object(s),i[o]=uw(i[o],s),i})};var _3e=hs.set.bind(null,null);hs.update.bind(null,null);hs.push.bind(null,null);hs.insert.bind(null,null);var C3e=hs.del.bind(null,null);hs.assign.bind(null,null);hs.merge.bind(null,null);E3e.get;function O3e(e){return e==null||e===""}function iG(e,t,n){if(!(O3e(e)&&typeof(n==null?void 0:n.required)=="boolean"&&!n.required)){switch(t.type){case"string":return String(e);case"integer":case"number":return Number(e);case"boolean":return["true","1",1,"on",!0].includes(e);case"null":return null}return e}}const S3=e=>typeof e<"u"&&e!==null&&e!=="";function dw(e){return"#"+(e.includes(".")?e.split("."):[e]).filter(S3).map(n=>"/"+n).join("")}function E3(e="",t=""){const n=e.includes(".")?e.split("."):[e];return[t,...n].filter(S3).join(".")}function oG(e="",t=""){return[...e.includes(".")?e.split("."):[e],t].filter(S3).join(".")}function j3e(e){return e.substring(0,e.lastIndexOf("/"))}function A3e(e,t,n,r){var s;try{if(t==="#/"||!n)return!1;const i=e.getSchema({pointer:t,data:r,schema:n});if(typeof i=="object"&&"const"in i)return!0;const o=j3e(t),a=e.getSchema({pointer:o,data:r});return!!((s=a==null?void 0:a.required)==null?void 0:s.includes(t.split("/").pop()))}catch(i){return console.error("isRequired",{pointer:t,schema:n,data:r,e:i}),!1}}function Tu(e,t){if(!e||!t)return!1;const n=Array.isArray(e)?e:[e];return(Array.isArray(t)?t:[t]).some(s=>n.includes(s))}function aG(e,t){if(typeof t=="object"&&"title"in t)return t.title;if(!e)return"";const n=e.includes(".")?e.split(".").pop()??"":e;return Ku(n)}function N3(e){if(!(!e||typeof e!="object"))return e.anyOf??e.oneOf}function lG(e,t){const n=N3(e);if(!n)return[-1,[],void 0];const r=n.findIndex(s=>new w3(s).validate(t,s).length===0);return r===-1?[-1,n,void 0]:[r,n,n[r]]}function T3e(e,t,n){if(typeof e!="object"||!("properties"in e)||t.length===0)return[e,n];const r=JSON.parse(JSON.stringify(e)),s=n?JSON.parse(JSON.stringify(n)):void 0,i={...r,properties:Ms(r.properties,t)};i.required&&(i.required=i.required.filter(a=>!t.includes(a)));const o=Ms(s,t);return[i,o]}function cG(e){return typeof e=="object"&&"type"in e&&!Tu(e.type,"error")}function $3e(...e){for(const t of e)if(typeof t<"u")return t}const SS=w.createContext(void 0);SS.displayName="FormContext";function ES({schema:e,initialValues:t,initialOpts:n,children:r,onChange:s,onSubmit:i,onInvalidSubmit:o,validateOn:a="submit",hiddenSubmit:c=!0,ignoreKeys:u=[],options:f={},...h}){const[p,y]=T3e(e,u,t),v=w.useMemo(()=>new w3(p),[JSON.stringify(p)]),x=y??v.getTemplate(void 0,p,n),S=w.useMemo(()=>Bh({dirty:!1,submitting:!1,errors:[],data:x}),[x]),N=p3(S),_=w.useRef(null);w.useEffect(()=>{x&&a==="change"&&R()},[x]);async function C(z){const{data:L,errors:B}=R();if(i){z.preventDefault(),N(H=>({...H,submitting:!0}));try{B.length===0?await i(L):(console.log("invalid",B),o==null||o(B,L))}catch(H){console.warn(H)}return N(H=>({...H,submitting:!1})),!1}else if(B.length>0)return z.preventDefault(),o==null||o(B,L),!1}const j=Dt((z,L)=>{N(B=>{const H=B.data,I=_3e(H,z,L);return s==null||s(I,z,L),{...B,data:I}}),k()}),A=Dt(z=>{N(L=>{const B=L.data,H=C3e(B,z);return s==null||s(H,z,void 0),{...L,data:H}}),k()}),$=Dt(()=>kW().get(S)),k=Dt(()=>{var L;const z=$();N(B=>({...B,dirty:!Ta(x,z.data)})),(a==="change"||((L=z==null?void 0:z.errors)==null?void 0:L.length)>0)&&R()}),R=Dt(z=>{var H;const L=z??((H=$())==null?void 0:H.data),B=v.validate(L,p);return N(I=>({...I,errors:B})),{data:L,errors:B}}),F=w.useMemo(()=>({_formStateAtom:S,setValue:j,deleteValue:A,schema:p,lib:v,options:f,root:"",path:""}),[p,x,f]);return m.jsxs("form",{...h,ref:_,onSubmit:C,children:[m.jsxs(SS.Provider,{value:F,children:[r||m.jsx(di,{name:""}),(f==null?void 0:f.debug)&&m.jsx(NS,{})]}),c&&m.jsx("button",{style:{visibility:"hidden"},type:"submit",children:"Submit"})]})}function Uc(){return w.useContext(SS)}function _3({children:e,overrideData:t,prefix:n,...r}){const s=Uc(),i={};n&&(i.root=n);const o={...s,...r,...i};return m.jsx(SS.Provider,{value:o,children:e})}function f0(e,t){const{_formStateAtom:n,root:r}=Uc();if((typeof e!="string"||e.length===0)&&(t==null?void 0:t.strict)===!0)return{value:void 0,errors:[]};const s=u0(n,w.useCallback(i=>{const o=E3(e,r),a=dw(o);return{value:Er(i.data,o),errors:i.errors.filter(c=>c.data.pointer.startsWith(a))}},[e]),Ta);return Em(s)[0]}function h0(e,t){const{_formStateAtom:n,root:r}=Uc(),s=u0(n,w.useCallback(i=>{const o=E3(e,r),a=dw(o);return i.errors.filter(c=>t!=null&&t.strict?c.data.pointer===a:c.data.pointer.startsWith(a))},[e]),Ta);return Em(s)[0]}function uG(e,t=[]){const{_formStateAtom:n}=Uc(),r=u0(n,w.useCallback(e,t),Ta);return Em(r)[0]}function jd(e,t,n){const{_formStateAtom:r,root:s,lib:i,...o}=Uc(),a=o.schema,c=u0(r,w.useCallback(u=>{const f=dw(e),h=E3(e,s),p=dw(h),y=Er(u.data,h),v=f==="#/"?a:i.getSchema({pointer:f,data:y,schema:a}),x=A3e(i,p,a,u.data),S={...o,path:h,root:s,schema:v,pointer:f,required:x},N=t==null?void 0:t({...S,_formStateAtom:r,lib:i,value:y});return{...S,value:N}},[e,a??{},s]),Ta);return{...m3(c),_formStateAtom:r,lib:i}}function m0({children:e,selector:t}){return e(uG(t??(n=>n)))}function NS({force:e=!1}){const{options:t}=Uc();if((t==null?void 0:t.debug)!==!0&&e!==!0)return null;const n=uG(r=>r);return m.jsx(fs,{json:n,expand:99})}function fw({name:e,label:t,required:n,schema:r,wrapper:s,hidden:i,errorPlacement:o="bottom",descriptionPlacement:a="bottom",children:c,fieldId:u,...f}){const h=h0(e,{strict:!0}),p=(r==null?void 0:r.examples)||[],y=`${e}-examples`,v=(f==null?void 0:f.description)??(r==null?void 0:r.description),x=typeof t<"u"?t:r?aG(e,r):e,S=h.length>0&&m.jsx(xje,{children:h.map(_=>_.message).join(", ")}),N=v&&m.jsx(vje,{className:a==="top"?"-mt-1 mb-1":"mb-2",children:v});return m.jsxs(Qi,{error:h.length>0,as:s==="fieldset"?"fieldset":"div",className:i?"hidden":"relative",children:[o==="top"&&S,m.jsx(R3e,{name:e,schema:r,required:n}),x&&m.jsxs(Ro,{as:s==="fieldset"?"legend":"label",htmlFor:u,className:"self-start",children:[x," ",n&&m.jsx("span",{className:"font-medium opacity-30",children:"*"})]}),a==="top"&&N,m.jsx("div",{className:"flex flex-row gap-2",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[w.Children.count(c)===1&&w.isValidElement(c)?w.cloneElement(c,{list:p.length>0?y:void 0}):c,p.length>0&&m.jsx("datalist",{id:y,children:p.map((_,C)=>m.jsx("option",{value:_},C))})]})}),a==="bottom"&&N,o==="bottom"&&S]})}const R3e=({name:e,schema:t,required:n})=>{const{options:r}=Uc();if(!(r!=null&&r.debug))return null;const{value:s}=f0(e),i=h0(e,{strict:!0});return m.jsx("div",{className:"absolute top-0 right-0",children:m.jsx(r3,{overlayProps:{className:"max-w-none"},position:"bottom-end",target:({toggle:o})=>m.jsx(fs,{className:"bg-background pr-3 text-sm",json:{name:e,value:s,required:n,schema:t,errors:i},expand:6}),children:m.jsx(Nt,{Icon:gU,size:"xs",className:"opacity-30"})})})},k3e=({path:e=""})=>{const{setValue:t,pointer:n,required:r,schema:s,...i}=jd(e);return!s||typeof s>"u"?`ArrayField(${e}): no schema ${n}`:s.uniqueItems&&typeof s.items=="object"&&"enum"in s.items?m.jsx(fw,{name:e,schema:s,wrapper:"fieldset",children:m.jsx(CS,{required:!0,name:e,schema:s.items,multiple:!0,className:"h-auto",onChange:o=>{const a=Array.from(o.target.selectedOptions).map(c=>c.value);t(i.path,a)}})}):m.jsxs(fw,{name:e,schema:s,wrapper:"fieldset",children:[m.jsx(I3e,{name:e,children:({value:o})=>o==null?void 0:o.map((a,c)=>m.jsx(M3e,{path:e,index:c,schema:s},c))}),m.jsx("div",{className:"flex flex-row",children:m.jsx(P3e,{path:e,schema:s})})]})},M3e=w.memo(({path:e,index:t,schema:n})=>{const{value:r,...s}=jd(e,h=>{var p;return(p=h.value)==null?void 0:p[t]}),i=oG(e,t);let o=n.items;if(N3(n.items)){const[,,h]=lG(n.items,r);o=h}const c=Dt((h,p)=>{s.setValue(h,p)}),u=Dt(h=>{s.deleteValue(h)}),f=w.useMemo(()=>m.jsx(Nt,{Icon:bU,onClick:()=>u(i),size:"sm"}),[i]);return m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(CS,{name:i,schema:o,value:r,onChange:h=>{c(i,iG(h.target.value,o))},className:"w-full"}),f]},i)},Ta),I3e=w.memo(({name:e,children:t})=>t(f0(e)),(e,t)=>{var n,r;return((n=e.value)==null?void 0:n.length)===((r=t.value)==null?void 0:r.length)}),P3e=({schema:e,path:t})=>{const{setValue:n,value:{currentIndex:r},...s}=jd(t,a=>{var c;return{currentIndex:((c=a.value)==null?void 0:c.length)??0}}),i=N3(e.items);function o(a){const c=oG(t,r);n(c,a??s.lib.getTemplate(void 0,e.items))}return i?m.jsx(Ur,{dropdownWrapperProps:{className:"min-w-0"},items:i.map((a,c)=>({label:a.title??`Option ${c+1}`,onClick:()=>o(s.lib.getTemplate(void 0,a))})),onClickItem:console.log,children:m.jsx(ot,{IconLeft:mxe,children:"Add"})}):m.jsx(ot,{onClick:()=>o(),children:"Add"})},dG=w.createContext(void 0),C3=()=>w.useContext(dG),D3e=Bh(null),L3e=({path:e="",children:t})=>{const{setValue:n,lib:r,pointer:s,value:{matchedIndex:i,schemas:o},schema:a}=jd(e,x=>{const[S,N=[]]=lG(x.schema,x.value);return{matchedIndex:S,schemas:N}}),c=h0(e,{strict:!0});if(!a)return`AnyOfField(${e}): no schema ${s}`;const[u,f]=Em(D3e),{options:{anyOfNoneSelectedMode:h}}=Uc(),p=u!==null?u:i>-1?i:h==="first"?0:null,y=Dt(x=>{n(e,x!==null?r.getTemplate(void 0,o[x]):void 0),f(x)}),v=w.useMemo(()=>{const x=o.map((_,C)=>_.title??`Option ${C+1}`),S={type:"string",enum:x},N=p!==null?o[p]:void 0;return{options:x,selectSchema:S,selectedSchema:N,schema:a,schemas:o,selected:p}},[p]);return m.jsx(dG.Provider,{value:{...v,select:y,path:e,errors:c},children:t},p)},F3e=()=>{const{selected:e,select:t,path:n,schema:r,options:s,selectSchema:i}=C3(),o=Dt(c=>{const u=c.target.value?Number(c.target.value):null;t(u)}),a=w.useMemo(()=>s.map((c,u)=>({label:c,value:u})),[]);return m.jsxs(m.Fragment,{children:[m.jsx(Ro,{children:aG(n,r)}),m.jsx(CS,{schema:i,options:a,onChange:o,value:e??void 0,className:"h-8 py-1"})]})},B3e=({name:e,label:t,...n})=>{const{selected:r,selectedSchema:s,path:i,errors:o}=C3();return r===null?null:m.jsx(_3,{prefix:i,schema:s,children:m.jsx("div",{className:Ue(o.length>0&&"bg-red-500/10"),children:m.jsx(z3e,{label:!1,...n},`${i}_${r}`)})})},z3e=e=>{const{value:t}=f0(""),n={value:["string","number","boolean"].includes(typeof t)?t:void 0};return m.jsx(di,{name:"",label:!1,...e,inputProps:n})},yg={Root:L3e,Select:F3e,Field:B3e,useContext:C3},V3e=e=>m.jsx("fieldset",{children:m.jsxs(yg.Root,{...e,children:[m.jsx("legend",{className:"flex flex-row gap-2 items-center py-2",children:m.jsx(yg.Select,{})}),m.jsx(yg.Field,{})]})}),_S=({path:e="",label:t,wrapperProps:n={}})=>{const{schema:r,...s}=jd(e);if(!cG(r))return`ObjectField "${e}": no schema`;const i=Object.entries(r.properties??{});return m.jsx(fw,{name:e,schema:{...r,description:void 0},wrapper:"fieldset",errorPlacement:"top",...n,children:i.length===0?m.jsx("i",{className:"opacity-50",children:"No properties"}):i.map(([o,a])=>{const c=[e,o].filter(Boolean).join(".");if(!(typeof a>"u"||typeof a=="boolean"))return a.anyOf||a.oneOf?m.jsx(V3e,{path:c},c):m.jsx(di,{name:c},c)})})},di=e=>m.jsx(bm,{fallback:U3e(e),children:m.jsx(q3e,{...e})}),fG=({as:e="div",className:t,...n})=>{const r=e;return m.jsx(r,{className:[t,"hidden"].filter(Boolean).join(" "),children:m.jsx(di,{...n})})},U3e=({name:e})=>({error:t})=>m.jsxs(hG,{children:['Field "',e,'" error: ',t.message]}),q3e=({name:e,onChange:t,placeholder:n,required:r,inputProps:s,...i})=>{const{path:o,setValue:a,schema:c,...u}=jd(e),f=`${e}-${w.useId()}`,h=typeof r=="boolean"?r:u.required;if(!c)return m.jsxs(hG,{children:["[Field] ",o," has no schema (",JSON.stringify(c),")"]});if(Tu(c.type,"object"))return m.jsx(_S,{path:e});if(Tu(c.type,"array"))return m.jsx(k3e,{path:e});w.useEffect(()=>{s!=null&&s.defaultValue&&a(o,s.defaultValue)},[s==null?void 0:s.defaultValue]);const p=$3e(s==null?void 0:s.disabled,i.disabled,c.readOnly,"const"in c,!1),y=Dt(v=>{var S;const x=iG(v.target.value,c,{required:h});typeof x>"u"&&!h&&((S=u.options)==null?void 0:S.keepEmpty)!==!0?u.deleteValue(o):a(o,x)});return m.jsx(fw,{name:e,required:h,schema:c,fieldId:f,...i,children:m.jsx(CS,{...s,id:f,schema:c,name:e,required:h,disabled:p,placeholder:n,onChange:t??y})})},hG=({children:e})=>m.jsx("pre",{className:"dark:bg-red-950 bg-red-100 rounded-md px-3 py-1.5 text-wrap whitespace-break-spaces  break-all",children:e}),CS=({schema:e,render:t,...n})=>{const{value:r}=f0(n.name,{strict:!0});if(!cG(e))return null;const s={...n,value:typeof n.value<"u"?n.value:r,placeholder:n.placeholder??typeof e.default<"u"?String(e.default):""};if(t)return t({schema:e,...s});if(e.enum)return m.jsx(gW,{options:e.enum,...s});if(Tu(e.type,["number","integer"])){const o={min:e.minimum,max:e.maximum,step:e.multipleOf};return m.jsx(sl,{type:"number",...s,value:s.value??"",...o})}if(Tu(e.type,"boolean"))return m.jsx(Eje,{...s,checked:r===!0});if(Tu(e.type,"string")&&e.format==="date-time"){const o=s.value?new Date(s.value).toISOString().slice(0,16):"";return m.jsx(ej,{...s,value:o,type:"datetime-local",onChange:a=>{var u;const c=new Date(a.target.value);(u=s.onChange)==null||u.call(s,{target:{value:c.toISOString()}})}})}if(Tu(e.type,"string")&&e.format==="date")return m.jsx(ej,{...s,value:s.value??""});const i={maxLength:e.maxLength,minLength:e.minLength,pattern:e.pattern};return e.format&&["password","hidden","url","email","tel"].includes(e.format)&&(i.type=e.format),m.jsx(wje,{...s,value:s.value??"",...i})};function O3({context:e,id:t,innerProps:{file:n}}){var p;const{config:{entity_name:r,basepath:s}}=AW(),i=Y1(r,void 0,{where:{path:n.path}}),o=()=>e.closeModal(t),a=(p=i.data)==null?void 0:p[0],c=window.location.origin,u=a!=null&&a.reference?a==null?void 0:a.reference.split(".")[0]:void 0,f=u?"/data"+ft.data.entity.edit(u,a==null?void 0:a.entity_id):void 0,h=a!=null&&a.path?"/data"+ft.data.entity.edit(r,a==null?void 0:a.id):void 0;return m.jsxs("div",{className:"flex flex-col md:flex-row",children:[m.jsx("div",{className:"flex w-full md:w-[calc(100%-300px)] justify-center items-center bg-lightest min-w-0",children:m.jsx(H3e,{file:n})}),m.jsxs("div",{className:"w-full md:!w-[300px] flex flex-col",children:[m.jsx(Dl,{title:"ID",value:a==null?void 0:a.id,copyValue:c+h,first:!0,children:h&&m.jsxs(LO,{href:h,size:"small",className:"py-1.5 px-2 !leading-none font-mono",onClick:o,children:["#",String(a==null?void 0:a.id)]})}),m.jsx(Dl,{title:"Path",value:a==null?void 0:a.path}),m.jsx(Dl,{title:"Mime Type",value:a==null?void 0:a.mime_type}),m.jsx(Dl,{title:"Size",value:(a==null?void 0:a.size)&&aT.fileSize(a.size,1),copyValue:a==null?void 0:a.size}),m.jsx(Dl,{title:"Etag",value:a==null?void 0:a.etag}),m.jsx(Dl,{title:"Entity",copyValue:c+f,children:f&&m.jsxs(LO,{href:f,size:"small",className:"py-1.5 px-2 !leading-none font-mono",onClick:o,children:[a==null?void 0:a.reference," #",a==null?void 0:a.entity_id]})}),m.jsx(Dl,{title:"Modified At",value:(a==null?void 0:a.modified_at)&&oF(a==null?void 0:a.modified_at),copyValue:a==null?void 0:a.modified_at}),m.jsx(Dl,{title:"Metadata",value:a==null?void 0:a.metadata,copyable:!1,children:(a==null?void 0:a.metadata)&&m.jsx(fs,{json:a==null?void 0:a.metadata,expand:2,showCopy:!0,className:"w-full text-sm bg-primary/2 pt-2.5 rounded-lg",copyIconProps:{className:"size-6 opacity-20 group-hover:opacity-100 transition-all"}})})]})]})}const Dl=({title:e,children:t,value:n,first:r,copyable:s=!0,copyValue:i})=>{const o=RQ(),a=!t&&(n===null||typeof n>"u"),c=s&&!a&&o.copy!==void 0,u=n?typeof n=="object"&&!a?JSON.stringify(n):String(n):void 0;return m.jsxs("div",{className:Ue("flex flex-col gap-1 py-3 pl-5 pr-3 group",!r&&"border-t border-muted"),children:[m.jsx("div",{className:"text-sm font-bold opacity-50",children:Ku(e)}),m.jsxs("div",{className:"flex flex-row gap-1 justify-between items-center",children:[t??m.jsx("div",{className:Ue("font-mono truncate",a&&"opacity-30"),children:a?"null":u}),c&&m.jsx(Nt,{Icon:o.copied?rSe:Eq,className:Ue("size-6 opacity-20 group-hover:opacity-100 transition-all",o.copied&&"text-success-foreground opacity-100"),onClick:()=>o.copy(i||n)})]})]})},H3e=({file:e})=>e.type.startsWith("image/")||e.type.startsWith("video/")?m.jsx(f3.Preview,{file:e,className:"max-h-[70dvh]",controls:!0,muted:!0}):m.jsx("div",{className:"min-w-96 min-h-48 flex justify-center items-center h-full max-h-[70dvh]",children:m.jsx("span",{className:"opacity-50 font-mono",children:"No Preview Available"})});O3.defaultTitle=void 0;O3.modalProps={withCloseButton:!1,size:"auto",centered:!0,styles:{content:{overflowY:"initial !important"}},classNames:{root:"bknd-admin w-full max-w-xl",content:"overflow-hidden",title:"font-bold !text-md",body:"max-h-inherit !p-0"}};const hw={test:u3,debug:l3,form:c3,overlay:T$,dataCreate:a3,mediaInfo:O3};function W3e({children:e}){return m.jsx(tEe,{modals:hw,children:e})}function G3e(e,t,{title:n,...r}={}){const s=n??hw[e].defaultTitle??void 0,i=hw[e].modalProps??{},o={title:s,...r,...i,modal:e,innerProps:t};return XSe({transitionProps:{transition:Xje,duration:300},...o}),{close:()=>mG(e),closeAll:Mq.closeAll}}function mG(e){return KSe(e)}const Nr={ids:Object.fromEntries(Object.keys(hw).map(e=>[e,e])),open:G3e,close:mG,closeAll:Mq.closeAll};function Y3e(){const[e]=Dn(),{config:t,actions:n}=Vc(),r=Object.values(en(t.roles??{},(o,a)=>({role:a,permissions:o.permissions,is_default:o.is_default??!1,implicit_allow:o.implicit_allow??!1})));function s(o){e(ft.auth.roles.edit(o.role))}function i(){Nr.open("form",{schema:He({name:td}),uiSchema:{name:{"ui:title":"Role name"}},onSubmit:async o=>{o.name.length>0&&await n.roles.add(o.name)&&e(ft.auth.roles.edit(o.name))}},{title:"New Role"})}return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsx(ot,{variant:"primary",onClick:i,children:"Create new"}),children:"Roles & Permissions"}),m.jsxs(Zn,{children:[m.jsx(So.Warning,{visible:!t.enabled,title:"Auth not enabled",message:"To use authentication features, please enable it in the settings."}),m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(gS,{data:r,renderValue:J3e,renderHeader:Dy,onClickRow:s})})]})]})}const J3e=({value:e,property:t})=>{if(["is_default","implicit_allow"].includes(t))return e?m.jsx("span",{children:"Yes"}):m.jsx("span",{className:"opacity-50",children:"No"});if(t==="permissions"){let r=e||[];const s=r.length;return s>3&&(r=[...r.slice(0,3),`+${s-3}`]),m.jsx("div",{className:"flex flex-row gap-1",children:r.map((i,o)=>m.jsx("span",{className:"inline-block px-2 py-1.5 text-sm bg-primary/5 rounded font-mono leading-none",children:i},o))})}return m.jsx(yS,{value:e,property:t})},OS=({path:e,backTo:t,onBack:n})=>{const[,,r]=Dn(),s=Array.isArray(e)?e:[e],i=s.length>1,o=n||(()=>r({fallback:t})),a=w.useMemo(()=>s.map((c,u)=>({last:u===s.length-1,...c})),[s]);return m.jsxs("div",{className:"flex flex-row flex-grow items-center gap-2 text-lg",children:[i&&m.jsx(Nt,{onClick:o,Icon:E$,variant:"default",size:"lg",className:"mr-1"}),m.jsx("div",{className:"hidden md:flex gap-1.5",children:m.jsx(pG,{crumbs:a})}),m.jsx("div",{className:"flex md:hidden gap-2",children:m.jsx(X3e,{crumbs:a})})]})},pG=({crumbs:e})=>e.map((t,n)=>t.last?m.jsx(gG,{...t},n):m.jsx(yG,{...t},n)),X3e=({crumbs:e})=>{const[,t]=bi();if(e.length<=2)return m.jsx(pG,{crumbs:e});const n=e[0],r=e[e.length-1],s=w.useMemo(()=>e.slice(1,-1).map(o=>({label:o.string,href:o.href})),[e]),i=Dt(o=>t(`~/${o.href}`));return m.jsxs(m.Fragment,{children:[m.jsx(yG,{...n}),m.jsx(Ur,{onClickItem:i,items:s,children:m.jsx(Nt,{Icon:zc,variant:"ghost"})}),m.jsx("span",{className:"opacity-25 dark:font-bold font-semibold",children:"/"}),m.jsx(gG,{...r})]})},gG=({label:e})=>m.jsx("span",{className:"text-nowrap dark:font-bold font-semibold",children:e}),yG=({href:e,label:t})=>m.jsxs("div",{className:"opacity-50 flex flex-row gap-1.5 dark:font-bold font-semibold",children:[m.jsx(X1,{to:e,className:"text-nowrap",children:t}),m.jsx("span",{className:"opacity-50",children:"/"})]}),K3e=kV,Q3e=w.forwardRef(({role:e,debug:t},n)=>{const{permissions:r}=xt(),{formState:{isValid:s},watch:i,control:o,reset:a,getValues:c}=nl({resolver:rl(K3e),defaultValues:e});return w.useImperativeHandle(n,()=>({reset:a,getData:()=>c(),isValid:()=>s})),m.jsxs("div",{className:"flex flex-col flex-grow px-5 py-5 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-2",children:m.jsx(Z3e,{control:o,permissions:r})}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(It.Wrapper,{label:"Should this role be the default?",size:"md",description:"In case an user is not assigned any role, this role will be assigned by default.",children:m.jsx("div",{className:"flex flex-row",children:m.jsx(hg,{name:"is_default",control:o,className:"mt-2"})})}),m.jsx(It.Wrapper,{label:"Implicit allow missing permissions?",size:"md",description:"This should be only used for admins. If a permission is not explicitly denied, it will be allowed.",children:m.jsx("div",{className:"flex flex-row",children:m.jsx(hg,{name:"implicit_allow",control:o,className:"mt-2"})})})]}),t&&m.jsxs("div",{className:"font-mono opacity-50",children:[m.jsx("div",{children:JSON.stringify(e,null,2)}),m.jsx("div",{children:JSON.stringify(i(),null,2)})]})]})}),Z3e=({control:e,permissions:t})=>{const{field:{value:n,onChange:r,...s},fieldState:i}=Od({name:"permissions",control:e}),o=n??[];function a(u){return f=>{const p=f.target.checked?[...o,u]:o.filter(y=>y!==u);r(p)}}const c=t.reduce((u,f)=>{const[h,p]=f.split(".");return u[h]||(u[h]=[]),u[h].push(f),u},{});return console.log("grouped",c),m.jsx("div",{className:"flex flex-col gap-10",children:Object.entries(c).map(([u,f])=>m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("h3",{className:"font-semibold",children:[li(u)," Permissions"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-3",children:f.map(h=>{const p=o.includes(h);return m.jsx("div",{className:"flex flex-col border border-muted",children:m.jsxs("div",{className:"flex flex-row gap-2 justify-between",children:[m.jsx("div",{className:"py-4 px-4 font-mono leading-none",children:h}),m.jsxs("div",{className:"flex flex-row gap-1 items-center px-2",children:[m.jsx(Ka,{checked:p,onChange:a(h)}),m.jsx(hd,{label:"Coming soon",children:m.jsx(ot,{size:"small",variant:"ghost",disabled:!0,children:m.jsx("span",{className:"font-normal italic font-mono",children:"FX"})})})]})]})},h)})})]},u))})};function e4e(e){const{hasSecrets:t}=xt({withSecrets:!0});return t?m.jsx(t4e,{...e}):m.jsx(Is.MissingPermission,{what:"Roles & Permissions"})}function t4e({params:e}){var u;const[t]=Dn(),{config:n,actions:r}=Vc(),s=e.role,i=(u=n.roles)==null?void 0:u[s],o=w.useRef(null);async function a(){var p,y,v;if(console.log("data",(p=o.current)==null?void 0:p.isValid()),!((y=o.current)!=null&&y.isValid()))return;const f=(v=o.current)==null?void 0:v.getData();await r.roles.patch(s,f)&&t(ft.auth.roles.list())}async function c(){await r.roles.delete(s)&&t(ft.auth.roles.list())}return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(Ur,{items:[{label:"Advanced Settings",onClick:()=>t(ft.settings.path(["auth","roles",s]),{absolute:!0})},{label:"Delete",onClick:c,destructive:!0}],position:"bottom-end",children:m.jsx(Nt,{Icon:zc})}),m.jsx(ot,{variant:"primary",onClick:a,children:"Update"})]}),className:"pl-3",children:m.jsx(OS,{path:[{label:"Roles & Permissions",href:ft.auth.roles.list()},{label:s}]})}),m.jsx(Zn,{children:m.jsx(Q3e,{ref:o,role:i})})]})}const bG=Q1(Zy({advanced:[]},e=>({toggleAdvanced:t=>e(n=>({advanced:n.advanced.includes(t)?n.advanced.filter(r=>r!==t):[...n.advanced,t]}))})));function n4e(e){Wr(["Auth","Settings"]);const{hasSecrets:t}=xt({withSecrets:!0});return t?m.jsx(s4e,{...e}):m.jsx(Is.MissingPermission,{what:"Auth Settings"})}const r4e={ignoreKeys:["roles","strategies"],options:{keepEmpty:!0,debug:qr()}};function s4e(){const{config:e,schema:t,actions:n,$auth:r}=Vc(),s=JSON.parse(JSON.stringify(t));s.properties.jwt.required=["alg"];async function i(o){await n.config.set(o)}return m.jsxs(ES,{schema:s,initialValues:e,onSubmit:i,...r4e,children:[m.jsx(m0,{selector:o=>({dirty:o.dirty,errors:o.errors.length>0,submitting:o.submitting}),children:({dirty:o,errors:a,submitting:c})=>m.jsx(An,{className:"pl-4",right:m.jsx(ot,{variant:"primary",type:"submit",disabled:!o||a||c,children:"Update"}),children:"Settings"})}),m.jsxs(Zn,{children:[m.jsxs(U_,{className:"pt-4 pl-0 pb-0",children:[m.jsx("div",{className:"pl-4",children:m.jsx(Zr,{name:"enabled",label:"Authentication Enabled",description:"Only after enabling authentication, all settings below will take effect.",descriptionPlacement:"top"})}),m.jsxs("div",{className:"flex flex-col gap-6 relative pl-4 pb-2",children:[m.jsx(d9,{}),m.jsx(Zr,{name:"guard.enabled",label:m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("span",{children:"Guard Enabled"}),!r.roles.has_admin&&m.jsx(nS.Warning,{title:"No admin roles defined. Enabling the guard will likely block all requests."})]}),disabled:r.roles.none,description:"When enabled, enforces permissions on all routes. Make sure to create roles first.",descriptionPlacement:"top"}),m.jsx(Zr,{name:"allow_register",label:"Allow User Registration",description:"When enabled, allows users to register autonomously. New users use the default role.",descriptionPlacement:"top"})]})]}),m.jsxs("div",{className:"flex flex-col gap-3 relative mt-3 pb-4",children:[m.jsx(d9,{}),m.jsx(zO,{}),m.jsxs(U_,{title:"JWT",children:[m.jsx(Zr,{name:"jwt.issuer"}),m.jsx(Zr,{name:"jwt.secret",description:"The secret used to sign the JWT token. If not set, a random key will be generated after enabling authentication.",advanced:"jwt",inputProps:{type:"password"}}),m.jsx(Zr,{name:"jwt.alg",advanced:"jwt"}),m.jsx(Zr,{name:"jwt.expires",advanced:"jwt"}),m.jsx(u9,{which:"jwt"})]}),m.jsx(zO,{}),m.jsxs(U_,{title:"Cookie",children:[m.jsx(Zr,{name:"cookie.path",advanced:"cookie"}),m.jsx(Zr,{name:"cookie.sameSite",advanced:"cookie"}),m.jsx(Zr,{name:"cookie.secure",advanced:"cookie"}),m.jsx(Zr,{name:"cookie.expires",advanced:"cookie"}),m.jsx(Zr,{name:"cookie.renew",label:"Renew Cookie",description:"Automatically renew users cookie on every request.",descriptionPlacement:"top"}),m.jsx(Zr,{name:"cookie.pathSuccess",advanced:"cookie"}),m.jsx(Zr,{name:"cookie.pathLoggedOut"}),m.jsx(u9,{which:"cookie"})]})]}),m.jsx(NS,{})]})]})}const u9=({which:e})=>{const{advanced:t,toggleAdvanced:n}=bG(),r=t.includes(e);return m.jsx(ot,{IconLeft:r?oSe:Sq,onClick:()=>n(e),variant:r?"default":"ghost",className:"self-start",size:"small",children:r?"Hide advanced settings":"Show advanced settings"})},d9=()=>m.jsx(m0,{selector:e=>({enabled:e.data.enabled}),children:({enabled:e})=>!e&&m.jsx("div",{className:"absolute w-full h-full z-50 inset-0 bg-background opacity-90"})});function U_(e){const{children:t,title:n,className:r}=e;return m.jsx(m.Fragment,{children:m.jsxs("div",{className:yn("flex flex-col gap-6 px-4",n&&"pt-0",r),children:[n&&m.jsx("h3",{className:"text-lg font-bold",children:n}),t]})})}function Zr(e){const{advanced:t,...n}=e,r=bG(s=>s.advanced);return t&&!r.includes(t)?null:m.jsx(di,{...n})}const i4e=({className:e,...t})=>m.jsx("div",{className:Ue("flex flex-col gap-2 max-w-4xl",e),...t}),o4e=({className:e,hasError:t,disabled:n,...r})=>m.jsx("div",{className:Ue("flex flex-col border border-muted rounded bg-background",t&&"border-error",e),...r}),a4e=({className:e,left:t,right:n,children:r,...s})=>m.jsxs("div",{...s,className:Ue("flex flex-row justify-between p-3 gap-3 items-center",e),children:[t&&m.jsx("div",{className:"flex flex-row items-center p-2 bg-primary/5 rounded",children:t}),m.jsx("div",{className:"font-mono flex-grow flex flex-row gap-3",children:r}),n&&m.jsx("div",{className:"flex flex-row gap-4 items-center",children:n})]}),l4e=({className:e,open:t,...n})=>t&&m.jsx("div",{...n,className:Ue("flex flex-col border-t border-t-muted px-4 pt-3 pb-4 bg-lightest/50 gap-4",e)}),Jv={Root:i4e,Item:o4e,Preview:a4e,Detail:l4e};function c4e(e){Wr(["Auth","Strategies"]);const{hasSecrets:t,config:{auth:{enabled:n}}}=xt({withSecrets:!0});if(t){if(!n)return m.jsx(Is.NotEnabled,{description:"Enable Auth first."})}else return m.jsx(Is.MissingPermission,{what:"Auth Strategies"});return m.jsx(d4e,{...e})}const u4e={keepEmpty:!0,debug:qr()};function d4e(){var s,i;const e=Vc(),t=e.config.strategies,n=e.schema.properties.strategies;Object.fromEntries((i=(s=e.schema.properties.strategies)==null?void 0:s.additionalProperties)==null?void 0:i.anyOf.map(o=>[o.properties.type.const,o]));async function r(o){await e.actions.config.set({strategies:o})}return m.jsxs(ES,{schema:n,initialValues:t,onSubmit:r,options:u4e,children:[m.jsx(m0,{selector:o=>({dirty:o.dirty,errors:o.errors.length>0,submitting:o.submitting}),children:({dirty:o,errors:a,submitting:c})=>m.jsx(An,{className:"pl-4",right:m.jsx(ot,{variant:"primary",type:"submit",disabled:!o||a||c,children:"Update"}),children:"Strategies"})}),m.jsxs(Zn,{children:[m.jsxs("div",{className:"flex flex-col p-4 gap-4",children:[m.jsx("p",{className:"opacity-70",children:"Allow users to sign in or sign up using different strategies."}),m.jsxs(Jv.Root,{children:[m.jsx(Ll,{type:"password",name:"password"}),m.jsx(Ll,{type:"oauth",name:"google"}),m.jsx(Ll,{type:"oauth",name:"github"}),m.jsx(Ll,{type:"oauth",name:"facebook",unavailable:!0}),m.jsx(Ll,{type:"oauth",name:"x",unavailable:!0}),m.jsx(Ll,{type:"oauth",name:"instagram",unavailable:!0}),m.jsx(Ll,{type:"oauth",name:"apple",unavailable:!0}),m.jsx(Ll,{type:"oauth",name:"discord",unavailable:!0})]})]}),m.jsx(NS,{})]})]})}const Ll=({type:e,name:t,unavailable:n})=>{const r=h0(t,{strict:!0}),s=Vc(),o=Object.fromEntries(s.schema.properties.strategies.additionalProperties.anyOf.map(u=>[u.properties.type.const,u]))[e],{active:a,toggle:c}=S$("/strategies/:strategy?",t);return o?m.jsx(_3,{schema:o,prefix:t,children:m.jsxs(Jv.Item,{hasError:r.length>0,className:n?"opacity-20 pointer-events-none cursor-not-allowed":void 0,children:[m.jsx(Jv.Preview,{left:m.jsx(h4e,{type:e,provider:t}),right:m.jsxs(m.Fragment,{children:[m.jsx(f4e,{type:e}),m.jsx(Nt,{Icon:ym,size:"lg",iconProps:{strokeWidth:1.5},variant:a?"primary":"ghost",onClick:()=>c(!a)})]}),children:m.jsx("span",{className:"leading-none",children:Ku(t)})}),m.jsx(Jv.Detail,{open:a,children:m.jsx(m4e,{type:e,name:t})})]})}):null},f4e=({type:e})=>{const t=jd(""),{value:n}=f0("");function r(s){const i=s.target.value,o=Object.keys(n??{}),a=o.length===0||o.length===1&&o[0]==="enabled";!i&&a?t.deleteValue(t.path):t.setValue([t.path,"enabled"].join("."),i)}return m.jsx(di,{name:"enabled",label:!1,required:!0,onChange:r})},h4e=({type:e,provider:t})=>{if(e==="password")return m.jsx(K1e,{className:"size-5"});if(t&&t in f9){const n=f9[t];return m.jsx(n,{className:"size-5"})}return m.jsx(tSe,{className:"size-5"})},f9={google:q1e,github:U1e,facebook:V1e,x:nSe,instagram:eSe,apple:B1e,discord:z1e},m4e=({type:e,name:t})=>{let n=r=>m.jsx(_S,{path:"",wrapperProps:{wrapper:"group",label:!1}});switch(e){case"password":n=p4e;break;case"oauth":n=g4e;break}return m.jsxs(m.Fragment,{children:[m.jsx(fG,{name:"type",inputProps:{disabled:!0,defaultValue:e}}),m.jsx(n,{type:e,name:t})]})},p4e=()=>m.jsx(_S,{path:"config",wrapperProps:{wrapper:"group",label:!1}}),g4e=({type:e,name:t})=>m.jsxs(m.Fragment,{children:[m.jsx(fG,{name:"config.name",inputProps:{disabled:!0,defaultValue:t}}),m.jsx(di,{name:"config.client.client_id",required:!0,inputProps:{type:"password"}}),m.jsx(di,{name:"config.client.client_secret",required:!0,inputProps:{type:"password"}})]});function y4e(){return null}function b4e(){return m.jsxs(zSe,{children:[m.jsx(at,{path:"/",component:WSe}),m.jsx(at,{path:"/users",component:y4e}),m.jsx(at,{path:"/roles",component:Y3e}),m.jsx(at,{path:"/roles/edit/:role",component:e4e}),m.jsx(at,{path:"/strategies/:strategy?",component:c4e}),m.jsx(at,{path:"/settings",component:n4e})]})}function v4e(){return Wr(["Login"]),m.jsx(EW.Screen,{action:"login",logo:m.jsx(In,{href:"/",className:"link",children:m.jsx(Z1,{scale:.25})})})}const vG={data:{btnCreateEntity:"data-btns-create-entity"},media:{switchEnabled:"media-switch-enabled"}};function x4e({children:e}){const{entities:t,$data:n}=Fs(),r={regular:[],generated:[],system:[]},[s]=Dn(),i=window.location.href.match(/\/schema/)?"schema":"data";for(const a of Object.values(t))r[a.getType()].push(a);function o(a){var u;if(!a)return;const c=((u=window.location.href.match(/\/entity\/([^/]+)/))==null?void 0:u[1])||null;switch(a){case"data":c?s(ft.data.entity.list(c)):s(ft.data.root(),{absolute:!0});break;case"schema":s(c?ft.data.schema.entity(c):ft.data.schema.root());break}}return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(md,{data:[{value:"data",label:"Data"},{value:"schema",label:"Schema"}],value:i,onChange:o}),m.jsx(K1,{children:m.jsx(hd,{label:"New Entity",children:m.jsx(Nt,{Icon:Nq,onClick:n.modals.createEntity})})})]}),children:"Entities"}),m.jsx(Zn,{initialOffset:96,children:m.jsxs("div",{className:"flex flex-col flex-grow py-3 gap-3",children:[m.jsx(q_,{entities:r.regular,context:i,suggestCreate:!0}),m.jsx(q_,{entities:r.system,context:i,title:"System"}),m.jsx(q_,{entities:r.generated,context:i,title:"Generated"})]})})]}),m.jsx(n0,{children:e})]})}const q_=({entities:e,title:t,context:n,suggestCreate:r=!1})=>{const{$data:s}=Fs(),i=kwe();if(e.length===0)return r?m.jsx(Kn,{className:"py-10",description:"Create your first entity to get started.",secondary:{children:"Create entity",onClick:()=>s.modals.createEntity()}}):null;function o(a){return c=>{switch(c.stopPropagation(),c.preventDefault(),n){case"schema":i(u=>u.data.entity.list(a.name));break;case"data":i(u=>u.data.schema.entity(a.name));break}}}return m.jsxs("nav",{className:Ue("flex flex-col flex-1 gap-1 px-3",t&&"border-t border-primary/10 pt-2"),children:[t&&m.jsx("div",{className:"text-sm text-primary/50 ml-3.5 mb-1",children:t}),e.map(a=>{const c=n==="data"?ft.data.entity.list(a.name):ft.data.schema.entity(a.name);return m.jsx(w4e,{entity:a,children:m.jsxs(ns,{as:In,href:c,className:"justify-between items-center",children:[a.label,Nwe(c)&&m.jsx(ot,{IconLeft:vxe,size:"small",onClick:o(a),children:n==="schema"?"Data":"Fields"})]})},a.name)})]})},w4e=({entity:e,children:t,enabled:n=!0})=>{if(!n)return t;const[r]=Dn(),{$data:s}=Fs(),i=t.props.href,o=()=>m.jsx("div",{className:"h-px my-1 w-full bg-primary/5"});return m.jsx(Ur,{className:"flex flex-col w-full",dropdownWrapperProps:{className:"min-w-fit"},title:e.label+" Actions",items:[i&&{icon:lxe,label:"Open in tab",onClick:()=>r(i,{target:"_blank"})},o,!s.system(e.name).any&&{icon:f$,label:"Create new",onClick:()=>r(ft.data.entity.create(e.name))},{icon:od,label:"List entries",onClick:()=>r(ft.data.entity.list(e.name))},o,{icon:u$,label:"Manage fields",onClick:()=>r(ft.data.schema.entity(e.name))},{icon:d$,label:"Add relation",onClick:()=>s.modals.createRelation(e.name)},!s.system(e.name).media&&{icon:yU,label:"Add media",onClick:()=>s.modals.createMedia(e.name)},o,{icon:Xg,label:"Advanced",onClick:()=>r(ft.settings.path(["data","entities",e.name]),{absolute:!0})}],openEvent:"onContextMenu",position:"bottom-start",children:t})};function S4e(){Wr(["Data"]);const[e]=Dn(),{$data:t}=Fs(),{readonly:n}=xt();function r(){e(ft.data.schema.root())}return n?m.jsx(Kn,{Icon:od,title:"No entity selected",description:"Please select an entity from the left sidebar.",primary:{children:"Go to schema",onClick:r}}):m.jsx(Kn,{Icon:od,title:"No entity selected",description:"Please select an entity from the left sidebar or create a new one to continue.",secondary:{children:"Go to schema",onClick:r},primary:{children:"Create entity","data-testid":vG.data.btnCreateEntity,onClick:t.modals.createEntity}})}const Zf=new WeakMap,Xv=new WeakMap,mw={current:[]};let H_=!1,bg=0;const Qp=new Set,dv=new Map;function xG(e){const t=Array.from(e).sort((n,r)=>n instanceof Ma&&n.options.deps.includes(r)?1:r instanceof Ma&&r.options.deps.includes(n)?-1:0);for(const n of t){if(mw.current.includes(n))continue;mw.current.push(n),n.recompute();const r=Xv.get(n);if(r)for(const s of r){const i=Zf.get(s);i&&xG(i)}}}function E4e(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function N4e(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function wG(e){if(bg>0&&!dv.has(e)&&dv.set(e,e.prevState),Qp.add(e),!(bg>0)&&!H_)try{for(H_=!0;Qp.size>0;){const t=Array.from(Qp);Qp.clear();for(const n of t){const r=dv.get(n)??n.prevState;n.prevState=r,E4e(n)}for(const n of t){const r=Zf.get(n);r&&(mw.current.push(n),xG(r))}for(const n of t){const r=Zf.get(n);if(r)for(const s of r)N4e(s)}}}finally{H_=!1,mw.current=[],dv.clear()}}function Ul(e){bg++;try{e()}finally{if(bg--,bg===0){const t=Array.from(Qp)[0];t&&wG(t)}}}class hj{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var s,i;this.listeners.add(r);const o=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.setState=r=>{var s,i,o;this.prevState=this.state,this.state=(s=this.options)!=null&&s.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),wG(this)},this.prevState=t,this.state=t,this.options=n}}class Ma{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const s of this.options.deps)n.push(s.prevState),r.push(s.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:s,currDepVals:i,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:s,currDepVals:i,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof Ma&&i.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let i=0;i<s.length;i++)if(s[i]!==r[i]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const i=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),i==null||i()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof Ma)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof hj){let r=Zf.get(n);r||(r=new Set,Zf.set(n,r)),r.add(this);let s=Xv.get(this);s||(s=new Set,Xv.set(this,s)),s.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof Ma)this.unregisterFromGraph(n.options.deps);else if(n instanceof hj){const r=Zf.get(n);r&&r.delete(this);const s=Xv.get(this);s&&s.delete(n)}}}function jS(e,t=n=>n){return UU.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,_4e)}function _4e(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const C4e=w.lazy(()=>s0(()=>import("./CodeEditor-D9Xekm1D.js"),[]));function O4e({editable:e,className:t,...n}){return m.jsx(w.Suspense,{fallback:null,children:m.jsx(C4e,{className:Ue("flex w-full border border-muted",!e&&"opacity-70",t),editable:e,_extensions:{json:!0},...n})})}function j4e({fieldApi:e,field:t,data:n,disabled:r,...s}){function i(a){r||e.setValue(a)}const o=n==null?void 0:n[t.name];return m.jsxs(Qi,{children:[m.jsx(s3,{htmlFor:e.name,field:t}),m.jsx("div",{"data-disabled":r?1:void 0,className:"data-[disabled]:opacity-70 data-[disabled]:pointer-events-none",children:m.jsx(vm,{schema:t.getJsonSchema(),onChange:i,direction:"horizontal",formData:o,uiSchema:{"ui:globalOptions":{flexDirection:"row"},...t.getJsonUiSchema()}})})]})}function j3({entity:e,select:t,...n}){const r=t??e.getSelect(),s=e.getFields();function i(c){return s.find(u=>u.name===c)}function o(c){try{return i(c).getLabel()}catch(u){return console.warn("Couldn't render header",{entity:e,select:t,...n},u),c}}function a({value:c,property:u}){let f=c;try{f=i(u).getValue(c,"table")}catch(h){console.warn("Couldn't render value",{value:c,property:u,entity:e,select:t,columns:r,...n},h)}return m.jsx(bm,{fallback:String(f),children:m.jsx(yS,{value:f,property:u})})}return m.jsx(gS,{...n,columns:r,renderHeader:o,renderValue:a})}function A4e({fieldApi:e,field:t,data:n,disabled:r,tabIndex:s}){const{app:i}=xt(),o=i.entity(t.target()),[a,c]=w.useState({limit:10,page:1,perPage:10,select:o.getSelect(void 0,"table")});bi();const u=w.useRef(null),f=Y1(t.target(),void 0,{select:a.select,limit:a.limit,offset:(a.page-1)*a.limit}),[h,p]=w.useState(),y=n==null?void 0:n[t.reference()],v=n==null?void 0:n[t.name];w.useEffect(()=>{const S=n==null?void 0:n[t.reference()];p(S)},[y]),w.useEffect(()=>{(async()=>{if(!t.target()||!v)return;const N=await f.api.readOne(t.target(),v);N.ok&&N.data&&p(N.data)})()},[v]),w.useEffect(()=>{var S;if(t.isRequired()&&!e.state.value){const N=(S=f.data)==null?void 0:S[0];if(!N)return;console.warn("setting first value because field is required",t.name,N.id),e.setValue(N.id),p(N)}},[f.data]);const x=f.isLoading||f.isValidating;return m.jsxs(Qi,{children:[m.jsx(Ro,{htmlFor:e.name,children:t.getLabel({fallback:!1})??o.label}),m.jsx("div",{"data-disabled":x||r?1:void 0,className:"data-[disabled]:opacity-70 data-[disabled]:pointer-events-none",children:m.jsx(r3,{backdrop:!0,className:"",target:({toggle:S})=>m.jsx(T4e,{container:f.data,entity:o,query:a,toggle:S,onClickRow:N=>{e.setValue(N.id),p(N),S()},onClickPage:N=>{console.log("setting page",N),c(_=>({..._,page:N}))}}),children:m.jsx("div",{ref:u,className:"bg-muted/40 w-full h-11 focus:bg-muted rounded-md items-center px-2.5 outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50 cursor-pointer active:bg-muted/80 hover:bg-muted/60 flex flex-row gap-2",tabIndex:s,onKeyDown:XQ([["Enter",()=>{var S;(S=u.current)==null||S.click()}]]),children:h?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex bg-primary/10 px-2 leading-none py-1.5 rounded-lg font-mono text-sm",children:li(o.name)}),m.jsx("div",{className:"flex flex-row gap-3 overflow-clip w-1 flex-grow",children:h&&Object.entries(h).map(([S,N])=>{const _=o.getField(S);if(_.isHidden("table"))return null;const C=_.getValue(N,"table");return m.jsxs("div",{className:"flex flex-row gap-1 items-center flex-nowrap",children:[m.jsxs("span",{className:"opacity-60 text-nowrap",children:[_.getLabel(),":"]})," ",C!==null&&typeof C<"u"?m.jsx(bm,{fallback:JSON.stringify(C),suppressError:!0,children:m.jsx("span",{className:"text-nowrap truncate",children:C})}):m.jsx("span",{className:"opacity-30 text-nowrap font-mono mt-0.5",children:"null"})]},S)})}),m.jsx(In,{to:ft.data.entity.edit(o.name,h.id),children:m.jsx(ot,{IconLeft:_q,size:"small",children:"View"})})]}):m.jsx("div",{className:"pl-2",children:"- Select -"})})})}),m.jsx(sl,{type:"hidden",name:e.name,id:e.name,value:e.state.value??"",onChange:console.log,tabIndex:-1})]})}const T4e=({container:e,entity:t,query:n,toggle:r,onClickRow:s,onClickPage:i})=>{var c;function o(){var u;n.limit*n.page<((u=e.meta)==null?void 0:u.count)&&(i==null||i(n.page+1))}function a(){n.page>1&&(i==null||i(n.page-1))}return Uj([["ArrowRight",o],["ArrowLeft",a],["Escape",r]]),m.jsx("div",{children:m.jsx(j3,{classNames:{value:"line-clamp-1 truncate max-w-52 text-nowrap"},data:e??[],entity:t,select:n.select,total:(c=e.meta)==null?void 0:c.count,page:n.page,onClickRow:s,onClickPage:i})})};function SG({entity:e,entityId:t,handleSubmit:n,fieldsDisabled:r,Form:s,data:i,className:o,action:a}){const c=e.getFillableFields(a,!0);return m.jsxs("form",{onSubmit:n,children:[m.jsx(s.Subscribe,{selector:u=>[u.canSubmit,u.isValid,u.errors],children:([u,f,h])=>!f&&m.jsxs("div",{className:"flex flex-col dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("p",{children:"Form is invalid."}),Array.isArray(h)&&m.jsx("ul",{className:"list-disc",children:h.map((p,y)=>m.jsx("li",{className:"ml-6",children:p},y))})]})}),m.jsx("div",{className:o,children:c.map((u,f)=>{if(u instanceof Ug)return m.jsx(R4e,{entity:e,entityId:t,formApi:s,field:u},u.name+f);if(!u.isFillable(a))return;const h=`${e.name}-${u.name}-${f}`;return m.jsx(bm,{fallback:m.jsxs(So.Exception,{className:"font-mono",children:["Field error: ",u.name]}),children:m.jsx(s.Field,{name:u.name,children:p=>m.jsx($4e,{field:u,fieldApi:p,disabled:r,tabIndex:f+1,action:a,data:i})})},h)})}),m.jsx("div",{className:"hidden",children:m.jsx("button",{type:"submit"})})]})}function $4e({fieldApi:e,field:t,action:n,data:r,...s}){const i=Dt(u=>{typeof u=="object"&&"target"in u?e.handleChange(u.target.value):e.handleChange(u)});if(t.type==="relation")return m.jsx(A4e,{fieldApi:e,field:t,data:r,disabled:s.disabled,tabIndex:s.tabIndex});if(t.type==="json")return m.jsx(k4e,{fieldApi:e,field:t,...s});if(t.type==="jsonschema")return m.jsx(j4e,{fieldApi:e,field:t,data:r,disabled:s.disabled,tabIndex:s.tabIndex,...s});if(t.type==="enum")return m.jsx(M4e,{fieldApi:e,field:t,...s});const o=t.getHtmlConfig().element,a=t.getHtmlConfig().props,c=Nje(o??"input");return m.jsxs(Qi,{children:[m.jsx(s3,{htmlFor:e.name,field:t}),m.jsx(c,{...a,name:e.name,id:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:i,required:t.isRequired(),...s})]})}function R4e({formApi:e,field:t,entity:n,entityId:r,disabled:s}){if(!r)return;const i=jS(e.store,c=>{const u=c.values[t.name];return!u||typeof u>"u"?[]:Array.isArray(u)?u:[u]}),o=JSON.stringify([n,r,t.name,i.length]),a=c=>{Nr.open(Nr.ids.mediaInfo,{file:c})};return m.jsxs(Qi,{children:[m.jsx(s3,{field:t}),m.jsx(f3.Dropzone,{maxItems:t.getMaxItems(),initialItems:i,onClick:a,entity:{name:n.name,id:r,field:t.name},query:{sort:"-id"}},o)]})}function k4e({fieldApi:e,field:t,...n}){const r=Dt(s=>{e.handleChange(s)});return m.jsxs(Qi,{children:[m.jsx(Ro,{htmlFor:e.name,children:t.getLabel()}),m.jsx(w.Suspense,{children:m.jsx(O4e,{id:e.name,value:e.state.value,onChange:r,onBlur:e.handleBlur,minHeight:"100",...n})})]})}function M4e({fieldApi:e,field:t,...n}){const r=Dt(s=>{e.handleChange(s.target.value)});return m.jsxs(Qi,{children:[m.jsx(Ro,{htmlFor:e.name,children:t.getLabel()}),m.jsxs(gW,{name:e.name,id:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:r,required:t.isRequired(),...n,children:[!t.isRequired()&&m.jsx("option",{value:"",children:"- Select -"}),t.getOptions().map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))]})]})}function AS(e,t){return typeof e=="function"?e(t):e}function EG(e,t){return A3(t).reduce((r,s)=>{if(r===null)return null;if(typeof r<"u")return r[s]},e)}function W_(e,t,n){const r=A3(t);function s(i){if(!r.length)return AS(n,i);const o=r.shift();if(typeof o=="string"||typeof o=="number"&&!Array.isArray(i))return typeof i=="object"?(i===null&&(i={}),{...i,[o]:s(i[o])}):{[o]:s()};if(Array.isArray(i)&&typeof o=="number"){const a=i.slice(0,o);return[...a.length?a:new Array(o),s(i[o]),...i.slice(o+1)]}return[...new Array(o),s()]}return s(e)}function I4e(e,t){const n=A3(t);function r(s){if(!s)return;if(n.length===1){const o=n[0];if(Array.isArray(s)&&typeof o=="number")return s.filter((u,f)=>f!==o);const{[o]:a,...c}=s;return c}const i=n.shift();if(typeof i=="string"&&typeof s=="object")return{...s,[i]:r(s[i])};if(typeof i=="number"&&Array.isArray(s)){if(i>=s.length)return s;const o=s.slice(0,i);return[...o.length?o:new Array(i),r(s[i]),...s.slice(i+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(e)}const P4e=/^(\d*)$/gm,D4e=/\.(\d*)\./gm,L4e=/^(\d*)\./gm,F4e=/\.(\d*$)/gm,B4e=/\.{2,}/gm,mj="__int__",fv=`${mj}$1`;function A3(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/\[/g,".").replace(/\]/g,"").replace(P4e,fv).replace(D4e,`.${fv}.`).replace(L4e,`${fv}.`).replace(F4e,`.${fv}`).replace(B4e,".").split(".").map(t=>t.indexOf(mj)===0?parseInt(t.substring(mj.length),10):t)}function z4e(e){return!(Array.isArray(e)&&e.length===0)}function pj(e,t){const{asyncDebounceMs:n}=t,{onChangeAsync:r,onBlurAsync:s,onSubmitAsync:i,onBlurAsyncDebounceMs:o,onChangeAsyncDebounceMs:a}=t.validators||{},c=n??0,u={cause:"change",validate:r,debounceMs:a??c},f={cause:"blur",validate:s,debounceMs:o??c},h={cause:"submit",validate:i,debounceMs:0},p=y=>({...y,debounceMs:0});switch(e){case"submit":return[p(u),p(f),h];case"blur":return[f];case"change":return[u];case"server":default:return[]}}function gj(e,t){const{onChange:n,onBlur:r,onSubmit:s,onMount:i}=t.validators||{},o={cause:"change",validate:n},a={cause:"blur",validate:r},c={cause:"submit",validate:s},u={cause:"mount",validate:i},f={cause:"server",validate:()=>{}};switch(e){case"mount":return[u];case"submit":return[o,a,c,f];case"server":return[f];case"blur":return[a,f];case"change":default:return[o,f]}}const NG=e=>!!e&&typeof e=="object"&&"fields"in e;function G_(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function V4e(e){const t=new Map;for(const n of e){const r=[...n.path??[]].map(s=>{const i=typeof s=="object"?s.key:s;return typeof i=="number"?`[${i}]`:i}).join(".").replace(/\.\[/g,"[");t.set(r,(t.get(r)??[]).concat(n))}return Object.fromEntries(t)}const U4e=e=>e,q4e=e=>{const t=V4e(e);return{form:t,fields:t}},h9=(e,t)=>e==="form"?q4e(t):U4e(t),_G={validate({value:e,validationSource:t},n){const r=n["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return h9(t,r.issues)},async validateAsync({value:e,validationSource:t},n){const r=await n["~standard"].validate(e);if(r.issues)return h9(t,r.issues)}},CG=e=>!!e&&"~standard"in e;function hv(e){function t(h,p,y,v){const x=r(h,p,y,v);({insert:()=>a(x,h,p),remove:()=>c(x),swap:()=>v!==void 0&&f(x,h,p,v),move:()=>v!==void 0&&u(x,h,p,v)})[y]()}function n(h,p){return`${h}[${p}]`}function r(h,p,y,v){const x=[n(h,p)];if(y==="swap")x.push(n(h,v));else if(y==="move"){const[S,N]=[Math.min(p,v),Math.max(p,v)];for(let _=S;_<=N;_++)x.push(n(h,_))}else{const S=e.getFieldValue(h),N=Array.isArray(S)?S.length:0;for(let _=p+1;_<N;_++)x.push(n(h,_))}return Object.keys(e.fieldInfo).filter(S=>x.some(N=>S.startsWith(N)))}function s(h,p){return h.replace(/\[(\d+)\]/,(y,v)=>{const x=parseInt(v,10);return`[${p==="up"?x+1:Math.max(0,x-1)}]`})}function i(h,p){(p==="up"?h:[...h].reverse()).forEach(v=>{const x=s(v.toString(),p),S=e.getFieldMeta(x);S?e.setFieldMeta(v,S):e.setFieldMeta(v,o())})}const o=()=>({isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}}),a=(h,p,y)=>{i(h,"down"),h.forEach(v=>{v.toString().startsWith(n(p,y))&&e.setFieldMeta(v,o())})},c=h=>{i(h,"up")},u=(h,p,y,v)=>{const x=new Map(Object.keys(e.fieldInfo).filter(S=>S.startsWith(n(p,y))).map(S=>[S,e.getFieldMeta(S)]));i(h,y<v?"up":"down"),Object.keys(e.fieldInfo).filter(S=>S.startsWith(n(p,v))).forEach(S=>{const N=S.replace(n(p,v),n(p,y)),_=x.get(N);_&&e.setFieldMeta(S,_)})},f=(h,p,y,v)=>{h.forEach(x=>{if(!x.toString().startsWith(n(p,y)))return;const S=x.toString().replace(n(p,y),n(p,v)),[N,_]=[e.getFieldMeta(x),e.getFieldMeta(S)];N&&e.setFieldMeta(S,N),_&&e.setFieldMeta(x,_)})};return{handleArrayFieldMetaShift:t}}function Y_(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class H4e{constructor(t){var n;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.cumulativeFieldsErrorMap={},this.mount=()=>{const r=this.fieldMetaDerived.mount(),s=this.store.mount(),i=()=>{r(),s()},{onMount:o}=this.options.validators||{};return o&&this.validateSync("mount"),i},this.update=r=>{var s,i;if(!r)return;const o=this.options;this.options=r;const a=!!((i=(s=r.transform)==null?void 0:s.deps)!=null&&i.some((f,h)=>f!==this.prevTransformArray[h])),c=r.defaultValues&&!G_(r.defaultValues,o.defaultValues)&&!this.state.isTouched,u=!G_(r.defaultState,o.defaultState)&&!this.state.isTouched;!c&&!u&&!a||Ul(()=>{this.baseStore.setState(()=>Y_(Object.assign({},this.state,u?r.defaultState:{},c?{values:r.defaultValues}:{},a?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(r,s)=>{const{fieldMeta:i}=this.state,o=this.resetFieldMeta(i);r&&!(s!=null&&s.keepDefaultValues)&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>{var a;return Y_({...this.options.defaultState,values:r??this.options.defaultValues??((a=this.options.defaultState)==null?void 0:a.values),fieldMetaBase:o})})},this.validateAllFields=async r=>{const s=[];return Ul(()=>{Object.values(this.fieldInfo).forEach(o=>{if(!o.instance)return;const a=o.instance;s.push(Promise.resolve().then(()=>a.validate(r,{skipFormValidation:!0}))),o.instance.state.meta.isTouched||o.instance.setMeta(c=>({...c,isTouched:!0}))})}),(await Promise.all(s)).flat()},this.validateArrayFieldsStartingFrom=async(r,s,i)=>{const o=this.getFieldValue(r),a=Array.isArray(o)?Math.max(o.length-1,0):null,c=[`${r}[${s}]`];for(let p=s+1;p<=(a??0);p++)c.push(`${r}[${p}]`);const u=Object.keys(this.fieldInfo).filter(p=>c.some(y=>p.startsWith(y))),f=[];return Ul(()=>{u.forEach(p=>{f.push(Promise.resolve().then(()=>this.validateField(p,i)))})}),(await Promise.all(f)).flat()},this.validateField=(r,s)=>{var i;const o=(i=this.fieldInfo[r])==null?void 0:i.instance;return o?(o.state.meta.isTouched||o.setMeta(a=>({...a,isTouched:!0})),o.validate(s)):[]},this.validateSync=r=>{const s=gj(r,this.options);let i=!1;const o={};return Ul(()=>{var a;for(const u of s){if(!u.validate)continue;const f=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:h,fieldErrors:p}=yj(f),y=mv(u.cause);if(p)for(const[v,x]of Object.entries(p)){const N={...this.cumulativeFieldsErrorMap[v]||{},[y]:x};o[v]=N,this.cumulativeFieldsErrorMap[v]=N;const _=this.getFieldMeta(v);_&&_.errorMap[y]!==x&&this.setFieldMeta(v,C=>({...C,errorMap:{...C.errorMap,[y]:x}}))}for(const v of Object.keys(this.cumulativeFieldsErrorMap)){const x=this.getFieldMeta(v);x!=null&&x.errorMap[y]&&!((a=o[v])!=null&&a[y])&&(this.cumulativeFieldsErrorMap[v]={...this.cumulativeFieldsErrorMap[v],[y]:void 0},this.setFieldMeta(v,S=>({...S,errorMap:{...S.errorMap,[y]:void 0}})))}this.state.errorMap[y]!==h&&this.baseStore.setState(v=>({...v,errorMap:{...v.errorMap,[y]:h}})),(h||p)&&(i=!0)}const c=mv("submit");this.state.errorMap[c]&&r!=="submit"&&!i&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}}))}),{hasErrored:i,fieldsErrorMap:o}},this.validateAsync=async r=>{const s=pj(r,this.options);this.state.isFormValidating||this.baseStore.setState(u=>({...u,isFormValidating:!0}));const i=[];let o;for(const u of s){if(!u.validate)continue;const f=mv(u.cause),h=this.state.validationMetaMap[f];h==null||h.lastAbortController.abort();const p=new AbortController;this.state.validationMetaMap[f]={lastAbortController:p},i.push(new Promise(async y=>{let v;try{v=await new Promise((_,C)=>{setTimeout(async()=>{if(p.signal.aborted)return _(void 0);try{_(await this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:p.signal},type:"validateAsync"}))}catch(j){C(j)}},u.debounceMs)})}catch(_){v=_}const{formError:x,fieldErrors:S}=yj(v);S&&(o=o?{...o,...S}:S);const N=mv(u.cause);if(o)for(const[_,C]of Object.entries(o)){const j=this.getFieldMeta(_);j&&j.errorMap[N]!==C&&this.setFieldMeta(_,A=>({...A,errorMap:{...A.errorMap,[N]:C}}))}this.baseStore.setState(_=>({..._,errorMap:{..._.errorMap,[N]:x}})),y(o?{fieldErrors:o,errorMapKey:N}:void 0)}))}let a=[];const c={};if(i.length){a=await Promise.all(i);for(const u of a)if(u!=null&&u.fieldErrors){const{errorMapKey:f}=u;for(const[h,p]of Object.entries(u.fieldErrors)){const v={...c[h]||{},[f]:p};c[h]=v}}}return this.baseStore.setState(u=>({...u,isFormValidating:!1})),c},this.validate=r=>{const{hasErrored:s,fieldsErrorMap:i}=this.validateSync(r);return s&&!this.options.asyncAlways?i:this.validateAsync(r)},this.getFieldValue=r=>EG(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>{var s;return(s=this.fieldInfo)[r]||(s[r]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(r,s)=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[r]:AS(s,i.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((s,i)=>{const o=i;return s[o]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},s},{}),this.setFieldValue=(r,s,i)=>{const o=(i==null?void 0:i.dontUpdateMeta)??!1;Ul(()=>{o||this.setFieldMeta(r,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a==null?void 0:a.errorMap,onMount:void 0}})),this.baseStore.setState(a=>({...a,values:W_(a.values,r,s)}))})},this.deleteField=r=>{const i=[...Object.keys(this.fieldInfo).filter(o=>{const a=r.toString();return o!==a&&o.startsWith(a)}),r];this.baseStore.setState(o=>{const a={...o};return i.forEach(c=>{a.values=I4e(a.values,c),delete this.fieldInfo[c],delete a.fieldMetaBase[c]}),a})},this.pushFieldValue=(r,s,i)=>{this.setFieldValue(r,o=>[...Array.isArray(o)?o:[],s],i),this.validateField(r,"change")},this.insertFieldValue=async(r,s,i,o)=>{this.setFieldValue(r,a=>[...a.slice(0,s),i,...a.slice(s)],o),await this.validateField(r,"change"),hv(this).handleArrayFieldMetaShift(r,s,"insert"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.replaceFieldValue=async(r,s,i,o)=>{this.setFieldValue(r,a=>a.map((c,u)=>u===s?i:c),o),await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.removeFieldValue=async(r,s,i)=>{const o=this.getFieldValue(r),a=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(r,c=>c.filter((u,f)=>f!==s),i),hv(this).handleArrayFieldMetaShift(r,s,"remove"),a!==null){const c=`${r}[${a}]`;this.deleteField(c)}await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.swapFieldValues=(r,s,i,o)=>{this.setFieldValue(r,a=>{const c=a[s],u=a[i];return W_(W_(a,`${s}`,u),`${i}`,c)},o),hv(this).handleArrayFieldMetaShift(r,s,"swap",i),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${i}]`,"change")},this.moveFieldValues=(r,s,i,o)=>{this.setFieldValue(r,a=>(a.splice(i,0,a.splice(s,1)[0]),a),o),hv(this).handleArrayFieldMetaShift(r,s,"move",i),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${i}]`,"change")},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[s,i])=>(Object.keys(i).length&&i.errors.length&&(r[s]={errors:i.errors,errorMap:i.errorMap}),r),{})}),this.baseStore=new hj(Y_({...t==null?void 0:t.defaultState,values:(t==null?void 0:t.defaultValues)??((n=t==null?void 0:t.defaultState)==null?void 0:n.values)})),this.fieldMetaDerived=new Ma({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:s,prevVal:i})=>{var o;const a=i,c=r==null?void 0:r[0],u=s[0];let f=0;const h={};for(const p of Object.keys(u.fieldMetaBase)){const y=u.fieldMetaBase[p],v=c==null?void 0:c.fieldMetaBase[p],x=a==null?void 0:a[p];let S=x==null?void 0:x.errors;if(!v||y.errorMap!==v.errorMap){S=Object.values(y.errorMap??{}).filter(C=>C!==void 0);const _=(o=this.getFieldInfo(p))==null?void 0:o.instance;_&&!_.options.disableErrorFlat&&(S=S==null?void 0:S.flat(1))}const N=!y.isDirty;if(x&&x.isPristine===N&&x.errors===S&&y===v){h[p]=x,f++;continue}h[p]={...y,errors:S,isPristine:N}}return Object.keys(u.fieldMetaBase).length&&a&&f===Object.keys(u.fieldMetaBase).length?a:h}}),this.store=new Ma({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:s,prevVal:i})=>{var o,a,c,u;const f=i,h=r==null?void 0:r[0],p=s[0],y=Object.values(p.fieldMetaBase),v=y.some(V=>V==null?void 0:V.isValidating),x=!y.some(V=>(V==null?void 0:V.errorMap)&&z4e(Object.values(V.errorMap).filter(Boolean))),S=y.some(V=>V==null?void 0:V.isTouched),N=y.some(V=>V==null?void 0:V.isBlurred),_=S&&((o=p==null?void 0:p.errorMap)==null?void 0:o.onMount),C=y.some(V=>V==null?void 0:V.isDirty),j=!C,A=!!((a=p.errorMap)!=null&&a.onMount||y.some(V=>{var T;return(T=V==null?void 0:V.errorMap)==null?void 0:T.onMount})),$=!!v;let k=(f==null?void 0:f.errors)??[];(!h||p.errorMap!==h.errorMap)&&(k=Object.values(p.errorMap).reduce((V,T)=>T===void 0?V:T&&NG(T)?(V.push(T.form),V):(V.push(T),V),[]));const R=k.length===0,F=x&&R,z=p.submissionAttempts===0&&!S&&!A||!$&&!p.isSubmitting&&F;let L=p.errorMap;if(_&&(k=k.filter(V=>V!==p.errorMap.onMount),L=Object.assign(L,{onMount:void 0})),f&&h&&f.errorMap===L&&f.fieldMeta===this.fieldMetaDerived.state&&f.errors===k&&f.isFieldsValidating===v&&f.isFieldsValid===x&&f.isFormValid===R&&f.isValid===F&&f.canSubmit===z&&f.isTouched===S&&f.isBlurred===N&&f.isPristine===j&&f.isDirty===C&&G_(h,p))return f;let B={...p,errorMap:L,fieldMeta:this.fieldMetaDerived.state,errors:k,isFieldsValidating:v,isFieldsValid:x,isFormValid:R,isValid:F,canSubmit:z,isTouched:S,isBlurred:N,isPristine:j,isDirty:C};const H=((c=this.options.transform)==null?void 0:c.deps)??[];if(H.length!==this.prevTransformArray.length||H.some((V,T)=>V!==this.prevTransformArray[T])){const V=Object.assign({},this,{state:B});(u=this.options.transform)==null||u.fn(V),B=V.state,this.prevTransformArray=H}return B}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(t||{})}get state(){return this.store.state}runValidator(t){return CG(t.validate)?_G[t.type](t.value,t.validate):t.validate(t.value)}async handleSubmit(t){var n,r,s,i,o,a;if(this.baseStore.setState(u=>({...u,isSubmitted:!1,submissionAttempts:u.submissionAttempts+1,isSubmitSuccessful:!1})),!this.state.canSubmit)return;this.baseStore.setState(u=>({...u,isSubmitting:!0}));const c=()=>{this.baseStore.setState(u=>({...u,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){c(),(r=(n=this.options).onSubmitInvalid)==null||r.call(n,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){c(),(i=(s=this.options).onSubmitInvalid)==null||i.call(s,{value:this.state.values,formApi:this});return}Ul(()=>{Object.values(this.fieldInfo).forEach(u=>{var f,h,p;(p=(h=(f=u.instance)==null?void 0:f.options.listeners)==null?void 0:h.onSubmit)==null||p.call(h,{value:u.instance.state.value,fieldApi:u.instance})})});try{await((a=(o=this.options).onSubmit)==null?void 0:a.call(o,{value:this.state.values,formApi:this,meta:t??this.options.onSubmitMeta})),Ul(()=>{this.baseStore.setState(u=>({...u,isSubmitted:!0,isSubmitSuccessful:!0})),c()})}catch(u){throw this.baseStore.setState(f=>({...f,isSubmitSuccessful:!1})),c(),u}}setErrorMap(t){this.baseStore.setState(n=>({...n,errorMap:{...n.errorMap,...t}}))}}function yj(e){if(e){if(NG(e)){const t=yj(e.form).formError,n=e.fields;return{formError:t,fieldErrors:n}}return{formError:e}}return{formError:void 0}}function mv(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class W4e{constructor(t){this.options={},this.mount=()=>{var n,r;const s=this.store.mount(),i=this.getInfo();i.instance=this,this.update(this.options);const{onMount:o}=this.options.validators||{};if(o){const a=this.runValidator({validate:o,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(c=>({...c,errorMap:{...c==null?void 0:c.errorMap,onMount:a}}))}return(r=(n=this.options.listeners)==null?void 0:n.onMount)==null||r.call(n,{value:this.state.value,fieldApi:this}),s},this.update=n=>{if(this.state.value===void 0){const r=EG(n.form.options.defaultValues,n.name);n.defaultValue!==void 0?this.setValue(n.defaultValue,{dontUpdateMeta:!0}):r!==void 0&&this.setValue(r,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta),this.options=n,this.name=n.name},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{var s,i;this.form.setFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this}),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{var s,i;this.form.pushFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this})},this.insertValue=(n,r,s)=>{var i,o;this.form.insertFieldValue(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.replaceValue=(n,r,s)=>{var i,o;this.form.replaceFieldValue(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.removeValue=(n,r)=>{var s,i;this.form.removeFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this})},this.swapValues=(n,r,s)=>{var i,o;this.form.swapFieldValues(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.moveValue=(n,r,s)=>{var i,o;this.form.moveFieldValues(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),s=[];for(const i of r){if(!i.instance)continue;const{onChangeListenTo:o,onBlurListenTo:a}=i.instance.options.validators||{};n==="change"&&(o!=null&&o.includes(this.name))&&s.push(i.instance),n==="blur"&&(a!=null&&a.includes(this.name))&&s.push(i.instance)}return s},this.validateSync=(n,r)=>{const s=gj(n,this.options),o=this.getLinkedFields(n).reduce((u,f)=>{const h=gj(n,f.options);return h.forEach(p=>{p.field=f}),u.concat(h)},[]);let a=!1;Ul(()=>{const u=(f,h)=>{const p=qp(h.cause),y=h.validate?m9(f.runValidator({validate:h.validate,value:{value:f.store.state.value,validationSource:"field",fieldApi:f},type:"validate"})):r[p];f.state.meta.errorMap[p]!==y&&f.setMeta(v=>({...v,errorMap:{...v.errorMap,[qp(h.cause)]:y||r[p]}})),(y||r[p])&&(a=!0)};for(const f of s)u(this,f);for(const f of o)f.validate&&u(f.field,f)});const c=qp("submit");return this.state.meta.errorMap[c]&&n!=="submit"&&!a&&this.setMeta(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}})),{hasErrored:a}},this.validateAsync=async(n,r)=>{const s=pj(n,this.options),i=await r,o=this.getLinkedFields(n),a=o.reduce((p,y)=>{const v=pj(n,y.options);return v.forEach(x=>{x.field=y}),p.concat(v)},[]);this.state.meta.isValidating||this.setMeta(p=>({...p,isValidating:!0}));for(const p of o)p.setMeta(y=>({...y,isValidating:!0}));const c=[],u=[],f=(p,y,v)=>{const x=qp(y.cause),S=p.getInfo().validationMetaMap[x];S==null||S.lastAbortController.abort();const N=new AbortController;this.getInfo().validationMetaMap[x]={lastAbortController:N},v.push(new Promise(async _=>{var C;let j;try{j=await new Promise((R,F)=>{this.timeoutIds[y.cause]&&clearTimeout(this.timeoutIds[y.cause]),this.timeoutIds[y.cause]=setTimeout(async()=>{if(N.signal.aborted)return R(void 0);try{R(await this.runValidator({validate:y.validate,value:{value:p.store.state.value,fieldApi:p,signal:N.signal,validationSource:"field"},type:"validateAsync"}))}catch(z){F(z)}},y.debounceMs)})}catch(R){j=R}if(N.signal.aborted)return _(void 0);const A=m9(j),$=(C=i[this.name])==null?void 0:C[x],k=A||$;p.setMeta(R=>({...R,errorMap:{...R==null?void 0:R.errorMap,[x]:k}})),_(k)}))};for(const p of s)p.validate&&f(this,p,c);for(const p of a)p.validate&&f(p.field,p,u);let h=[];(c.length||u.length)&&(h=await Promise.all(c),await Promise.all(u)),this.setMeta(p=>({...p,isValidating:!1}));for(const p of o)p.setMeta(y=>({...y,isValidating:!1}));return h.filter(Boolean)},this.validate=(n,r)=>{var s;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:i}=r!=null&&r.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:o}=this.validateSync(n,i[this.name]??{});if(o&&!this.options.asyncAlways)return(s=this.getInfo().validationMetaMap[qp(n)])==null||s.lastAbortController.abort(),this.state.meta.errors;const a=r!=null&&r.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,a)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{var n,r;this.state.meta.isTouched||(this.setMeta(i=>({...i,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(i=>({...i,isBlurred:!0})),this.validate("blur"),(r=(n=this.options.listeners)==null?void 0:n.onBlur)==null||r.call(n,{value:this.state.value,fieldApi:this})},this.form=t.form,this.name=t.name,this.timeoutIds={},t.defaultValue!==void 0&&this.form.setFieldValue(this.name,t.defaultValue,{dontUpdateMeta:!0}),this.store=new Ma({deps:[this.form.store],fn:()=>{const n=this.form.getFieldValue(this.name),r=this.form.getFieldMeta(this.name)??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...t.defaultMeta};return{value:n,meta:r}}}),this.options=t}get state(){return this.store.state}runValidator(t){return CG(t.validate)?_G[t.type](t.value,t.validate):t.validate(t.value)}setErrorMap(t){this.setMeta(n=>({...n,errorMap:{...n.errorMap,...t}}))}}function m9(e){if(e)return e}function qp(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}const pw=typeof window<"u"?w.useLayoutEffect:w.useEffect;function G4e(e){const[t]=w.useState(()=>{const r=new W4e({...e,form:e.form,name:e.name});return r.Field=OG,r});return pw(t.mount,[t]),pw(()=>{t.update(e)}),jS(t.store,e.mode==="array"?n=>[n.meta,Object.keys(n.value??[]).length]:void 0),t}const OG=({children:e,...t})=>{const n=G4e(t),r=w.useMemo(()=>AS(e,n),[e,n,n.state.value,n.state.meta]);return m.jsx(m.Fragment,{children:r})};function Y4e({form:e,selector:t,children:n}){const r=jS(e.store,t);return AS(n,r)}function J4e(e){const[t]=w.useState(()=>{const n=new H4e(e),r=n;return r.Field=function(i){return m.jsx(OG,{...i,form:n})},r.Subscribe=s=>m.jsx(Y4e,{form:n,selector:s.selector,children:s.children}),r});return pw(t.mount,[]),jS(t.store,n=>n.isSubmitting),pw(()=>{t.update(e)}),t}function X4e(e,t){return ti(e,(n,r)=>{n[r.name]=r.getValue(t==null?void 0:t[r.name],"form")??""},{})}function K4e(e,t,n,r){return ti(t,(s,i,o)=>{const a=r.find(f=>f.name===o);if(!a||a.isVirtual())return;const c=i===""?null:i,u=a.getValue(c,"submit")||null;(e==="create"||u!==n[o])&&(s[o]=u)},{})}function jG({action:e="update",entity:t,initialData:n,onSubmitted:r}){const s=n??{},i=t.getFillableFields(e,!0),o=X4e(i,s),a=J4e({defaultValues:o,validators:{onSubmitAsync:async({value:u})=>{try{t.isValidData(u,e,{explain:!0,ignoreUnknown:!0});return}catch(f){return f.message}}},onSubmit:async({value:u,formApi:f})=>{if(!t.isValidData(u,e)){console.error("invalid data",u);return}if(!s)return;const h=K4e(e,u,s,i);await(r==null?void 0:r(Object.keys(h).length===0?void 0:h))}});async function c(u){u.preventDefault(),u.stopPropagation(),a.handleSubmit()}return{Form:a,handleSubmit:c,fields:i,action:e,values:o,initialData:n}}function Q4e({params:e}){return m.jsx(Z4e,{params:e},e.entity)}function Z4e({params:e}){var $,k;const{$data:t,relations:n}=Fs(),r=t.entity(e.entity);if(!r)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});const s=e.id,[i,o]=w.useState(null),[a,c,u]=Dn();Wr(["Data",r.label,`#${s}`]);const f=n.listableRelationsOf(r),h=($=n.sourceRelationsOf(r))==null?void 0:$.map(R=>R.other(r).reference),p=Y1(r.name,s,{with:h},{keepPreviousData:!1,revalidateOnFocus:!1,shouldRetryOnError:!1}),y=ft.data.entity.list(r.name),v=()=>u({fallback:y});async function x(R){if(!R){v();return}try{await p.update(R),i&&o(null),v()}catch(F){o(F instanceof Error?F.message:"Failed to update")}}async function S(){if(confirm("Are you sure to delete?"))try{await p._delete(),i&&o(null),v()}catch(R){o(R instanceof Error?R.message:"Failed to delete")}}const N=p.data,{Form:_,handleSubmit:C}=jG({action:"update",entity:r,initialData:(k=p.data)==null?void 0:k.toJSON(),onSubmitted:x});if(!N&&!p.isLoading)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" with ID "${s}" doesn't exist.`});const j=(R="")=>`${r.name}_${s}_${String(R)}`,A=p.isLoading||p.isValidating||_.state.isSubmitting;return m.jsxs(w.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(Ur,{position:"bottom-end",items:[{label:"Inspect",onClick:()=>{Nr.open("debug",{data:{data:N,entity:r.toJSON(),schema:r.toSchema({clean:!0}),form:_.state.values,state:_.state}})}},{label:"Settings",onClick:()=>a(ft.settings.path(["data","entities",r.name]),{absolute:!0})},{label:"Delete",onClick:S,destructive:!0,disabled:A}],children:m.jsx(Nt,{Icon:zc})}),m.jsx(_.Subscribe,{selector:R=>[R.canSubmit,R.isSubmitting],children:([R,F])=>m.jsx(ot,{type:"button",onClick:_.handleSubmit,variant:"primary",tabIndex:r.fields.length+1,disabled:!R||F||A,children:"Update"})})]}),className:"pl-3",children:m.jsx(OS,{backTo:y,path:[{label:r.label,href:y},{label:`Edit #${s}`}]})}),p.isLoading?m.jsx("div",{className:"w-full h-full flex justify-center items-center font-mono opacity-30",children:"Loading..."}):m.jsxs(Zn,{children:[i&&m.jsxs("div",{className:"flex flex-row dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("b",{className:"mr-2",children:"Update failed: "})," ",i]}),m.jsx(SG,{entity:r,entityId:s,handleSubmit:C,fieldsDisabled:A,data:N??void 0,Form:_,action:"update",className:"flex flex-grow flex-col gap-3 p-3"}),f.length>0?m.jsx(eRe,{id:s,entity:r,relations:f}):null]})]},j())}function eRe({id:e,entity:t,relations:n}){const[r,s]=w.useState(n.length>0?n[0]:void 0);function i(o){s(o)}return n.length===0?null:m.jsxs("div",{className:"flex flex-col max-w-full",children:[m.jsx(kq,{title:"Relations",items:n.map(o=>{const a=o.other(t);return{as:"button",type:"button",label:li(a.reference),onClick:()=>i(o),active:(r==null?void 0:r.other(t).reference)===a.reference,badge:o.type()}})}),m.jsx("div",{className:"flex flex-grow flex-col gap-3 p-3",children:m.jsx(tRe,{id:e,entity:t,relation:r},JSON.stringify(r==null?void 0:r.toJSON()))})]})}function tRe({id:e,entity:t,relation:n}){var h,p,y;const r=n.other(t),[s]=Dn(),[i,o]=w.useState({select:r.entity.getSelect(void 0,"table"),sort:r.entity.getDefaultSort(),limit:10,offset:0}),a=G1(v=>v.data.readManyByReference(t.name,e,r.reference,i),{keepPreviousData:!0,revalidateOnFocus:!0});function c(v){s(ft.data.entity.edit(r.entity.name,v.id))}let u;try{if(r.entity.type!=="system"){const v=n.getReferenceQuery(r.entity,e,r.reference);u=()=>{s(ft.data.entity.create(r.entity.name),{query:v.where})}}}catch{}if(!a.data)return null;const f=a.isValidating||a.isLoading;return m.jsx("div",{"data-updating":f?1:void 0,className:"transition-opacity data-[updating]:opacity-50",children:m.jsx(j3,{select:i.select,data:a.data??null,entity:r.entity,sort:i.sort,onClickRow:c,onClickNew:u,page:Math.floor(i.offset/i.limit)+1,total:((y=(p=(h=a.data)==null?void 0:h.body)==null?void 0:p.meta)==null?void 0:y.count)??1,onClickPage:v=>{o(x=>({...x,offset:(v-1)*x.limit}))}})})}function AG(e,t){const n=vwe(),[r,s]=bi(),[i,o]=w.useState((t==null?void 0:t.defaultValue)??{}),a=w.useMemo(()=>hF(e.template({withOptional:!0}),(t==null?void 0:t.defaultValue)??{}),[JSON.stringify({schema:e,dflt:t==null?void 0:t.defaultValue})]);w.useEffect(()=>{const u=n.length>0?Uoe(n):(t==null?void 0:t.defaultValue)??{},f=Un(e,Object.assign({},a,u));o(f)},[n,JSON.stringify(t==null?void 0:t.defaultValue),r]);function c(u){var y;const f=nRe(Object.assign({},i,u),a),h=((y=t==null?void 0:t.beforeEncode)==null?void 0:y.call(t,f))??f,p=y1(h,{encode:!1});s(r+(p.length>0?"?"+p:""))}return{value:i,set:c}}function nRe(e,t){return ti(e,(n,r,s)=>{t&&Oz(r,t[s])||(n[s]=r)},{})}function rRe({params:e}){const{$data:t}=Fs(),[n,r,s]=Dn(),i=t.entity(e.entity);if(i){if(i.type==="system")return m.jsx(Is.NotAllowed,{description:`Entity "${e.entity}" cannot be created.`})}else return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});const[o,a]=w.useState(null);Wr(["Data",i.label,"Create"]);const c=Jve(i.name),u=AG(ze({}),{}),f=ft.data.entity.list(i.name),h=()=>s({fallback:f});async function p(S){if(console.log("create:changeSet",S),!!S)try{await c.create(S),o&&a(null),h()}catch(N){a(N instanceof Error?N.message:"Failed to create")}}const{Form:y,handleSubmit:v}=jG({action:"create",entity:i,initialData:u.value,onSubmitted:p}),x=c.isLoading||c.isValidating||y.state.isSubmitting;return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(ot,{onClick:h,children:"Cancel"}),m.jsx(y.Subscribe,{selector:S=>[S.canSubmit,S.isSubmitting],children:([S,N])=>m.jsx(ot,{type:"button",onClick:y.handleSubmit,variant:"primary",tabIndex:i.fields.length,disabled:!S||N,children:"Create"})})]}),children:m.jsx(OS,{backTo:f,path:[{label:i.label},{label:"Create"}]})}),m.jsxs(Zn,{children:[o&&m.jsxs("div",{className:"flex flex-row dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("b",{className:"mr-2",children:"Create failed: "})," ",o]}),m.jsx(SG,{entity:i,handleSubmit:v,fieldsDisabled:x,data:u.value,Form:y,action:"create",className:"flex flex-grow flex-col gap-3 p-3"})]},i.name)]})}function sRe(){const e=Lo(),{config:t}=Vc(),n=c$(),[r]=Dn();return{open:async()=>{const i=Nr.open("overlay",{content:"Loading..."}),o=await e.auth.actionSchema("password","create");i.closeAll(),Nr.open("form",{schema:o,uiSchema:{password:{"ui:widget":"password"}},autoCloseAfterSubmit:!1,onSubmit:async(a,c)=>{console.log("submitted:",a,c);const u=await e.auth.action("password","create",a);console.log(u),u.ok?(n(),r(ft.data.entity.edit(t.entity_name,u.data.id)),c.close()):"error"in u?c.setError(u.error):c.setError("Unknown error")}},{title:"Create User"})}}}const iRe=TF({...pF(Ks.properties,["select","where","sort"]),page:jt({default:1}).optional(),perPage:jt({default:10}).optional()}),oRe=[5,10,25,50,100];function aRe({params:e}){return m.jsx(lRe,{params:e},e.entity)}function lRe({params:e}){var y,v;const{$data:t}=Fs(),n=t.entity(e.entity);if(!n)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});Wr(["Data",(n==null?void 0:n.label)??e.entity]);const[r]=Dn(),s=AG(iRe,{defaultValue:{select:n.getSelect(void 0,"table"),sort:n.getDefaultSort()},beforeEncode:x=>"sort"in x&&x.sort?{...x,sort:`${x.sort.dir==="asc"?"":"-"}${x.sort.by}`}:x}),i=G1(x=>x.data.readMany(n==null?void 0:n.name,{select:s.value.select,limit:s.value.perPage,offset:(s.value.page-1)*s.value.perPage,sort:`${s.value.sort.dir==="asc"?"":"-"}${s.value.sort.by}`}),{enabled:!!n,revalidateOnFocus:!0,keepPreviousData:!0}),o=(y=i.data)==null?void 0:y.data,a=(v=i.data)==null?void 0:v.body.meta;function c(x){n&&r(ft.data.entity.edit(n.name,x.id))}function u(x){s.set({page:x})}function f(x){const S=s.value.sort,N={by:x,dir:S.by===x&&S.dir==="asc"?"desc":"asc"};s.set({sort:N})}function h(x){s.set({perPage:x,page:1})}const p=i.isLoading||i.isValidating;return m.jsxs(w.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(Ur,{items:[{label:"Settings",onClick:()=>r(ft.data.schema.entity(n.name))},{label:"Data Schema",onClick:()=>r(ft.data.schema.root())},{label:"Advanced Settings",onClick:()=>r(ft.settings.path(["data","entities",n.name]),{absolute:!0})}],position:"bottom-end",children:m.jsx(Nt,{Icon:zc})}),m.jsx(cRe,{entity:n})]}),children:m.jsx(r0,{children:n.label})}),m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx("div",{"data-updating":p?1:void 0,className:"data-[updating]:opacity-50 transition-opacity pb-10",children:m.jsx(j3,{data:o??null,entity:n,select:s.value.select,onClickRow:c,page:s.value.page,sort:s.value.sort,onClickSort:f,perPage:s.value.perPage,perPageOptions:oRe,total:a==null?void 0:a.count,onClickPage:u,onClickPerPage:h})})})},n.name)]},n.name)}function cRe({entity:e}){const t=xt(),n=sRe(),[r]=Dn();return e?e.type==="system"?{users:t.app.config.auth.entity_name,media:t.app.config.media.entity_name}.users===e.name?m.jsx(ot,{onClick:n.open,variant:"primary",children:"New User"}):null:m.jsx(ot,{onClick:()=>{r(ft.data.entity.create(e.name))},variant:"primary",children:"Create new"}):null}function uRe({params:e}){const{$data:t}=Fs(),[n]=Dn(),r=t.entity(e.entity);return r?m.jsxs(A1e,{path:`/entity/${r.name}/:setting?`,defaultIdentifier:"fields",children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(Ur,{items:[{label:"Data",onClick:()=>n(ft.data.root()+ft.data.entity.list(r.name),{absolute:!0})},{label:"Advanced Settings",onClick:()=>n(ft.settings.path(["data","entities",r.name]),{absolute:!0})}],position:"bottom-end",children:m.jsx(Nt,{Icon:zc})}),m.jsx(K1,{children:m.jsx(Ur,{items:[{icon:N$,label:"Add relation",onClick:()=>t.modals.createRelation(r.name)},{icon:t0,label:"Add media",onClick:()=>t.modals.createMedia(r.name)},()=>m.jsx("div",{className:"h-px my-1 w-full bg-primary/5"}),{icon:Nq,label:"Create Entity",onClick:()=>t.modals.createEntity()}],position:"bottom-end",children:m.jsx(ot,{IconRight:Oq,children:"Add"})})})]}),className:"pl-3",children:m.jsxs("div",{className:"flex flex-row gap-4",children:[m.jsx(OS,{path:[{label:"Schema",href:"/"},{label:r.label}],backTo:"/"}),m.jsx(In,{to:"/",className:"hidden md:inline",children:m.jsx(ot,{IconLeft:BO,children:"Overview"})})]})}),m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsx(dRe,{entity:r}),m.jsx(fRe,{entity:r}),m.jsx(Vx,{identifier:"relations",title:"Relations",ActiveIcon:d$,children:m.jsx(Kn,{title:"Relations",description:"This will soon be available here. Meanwhile, check advanced settings.",primary:{children:"Advanced Settings",onClick:()=>n(ft.settings.path(["data","relations"]),{absolute:!0})}})}),m.jsx(Vx,{identifier:"indices",title:"Indices",ActiveIcon:exe,children:m.jsx(Kn,{title:"Indices",description:"This will soon be available here. Meanwhile, check advanced settings.",primary:{children:"Advanced Settings",onClick:()=>n(ft.settings.path(["data","indices"]),{absolute:!0})}})})]},r.name)]}):m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`})}const dRe=({entity:e})=>{const[t,n]=w.useState(!1),[r,s]=w.useState(0),{actions:i,$data:o,config:a}=Fs(),{readonly:c}=xt(),[u,f]=w.useState(),h=w.useRef(null);async function p(){var x;if(t)return;n(!0);const v=(x=h.current)==null?void 0:x.getData();await i.entity.patch(e.name).fields.set(v),n(!1),s(S=>S+1)}const y=Object.fromEntries(e.fields.map(v=>[v.name,v.toJSON()]));return m.jsx(Vx,{identifier:"fields",title:"Fields",ActiveIcon:u$,renderHeaderRight:({open:v})=>v&&!c?m.jsx(ot,{variant:"primary",disabled:!v,onClick:p,children:"Update"}):null,children:m.jsxs("div",{className:"flex flex-col flex-grow py-3 px-4 max-w-4xl gap-3 relative",children:[t&&m.jsx("div",{className:"animate-fade-in absolute w-full h-full top-0 bottom-0 left-0 right-0 bg-background/65 z-50"}),m.jsx(bW,{readonly:c,routePattern:`/entity/${e.name}/fields/:sub?`,fields:y,ref:h,sortable:!c,additionalFieldTypes:pS.filter(v=>["relation","media"].includes(v.type)).map(v=>({...v,onClick:()=>{switch(v.type){case"relation":o.modals.createRelation(e.name);break;case"media":o.modals.createMedia(e.name);break}}})),defaultPrimaryFormat:a==null?void 0:a.default_primary_format,isNew:!1},String(r)),qr()&&!c&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-row gap-1 justify-center",children:[m.jsx(ot,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.isValid())},children:"valid"}),m.jsx(ot,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getValues())},children:"values"}),m.jsx(ot,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getData())},children:"data"}),m.jsx(ot,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getErrors())},children:"errors"}),m.jsx(ot,{size:"small",onClick:p,children:"update"})]}),m.jsx("pre",{className:"select-text",children:JSON.stringify(u,null,2)})]})]})})},fRe=({entity:e})=>{var u,f,h,p;const t=Fs(),n=(f=(u=t.entities)==null?void 0:u[e.name])==null?void 0:f.config,r=w.useRef(null),{readonly:s}=xt(),i=F1((p=(h=t.schema.properties.entities.additionalProperties)==null?void 0:h.properties)==null?void 0:p.config),[o,a]=mW(i,n,["fields"]);try{o.properties.sort_field.enum=e.getFields().map(y=>y.name)}catch(y){console.error("error setting sort_field enum",y)}async function c(){var y,v;console.log("update",(y=r.current)==null?void 0:y.formData()),await t.actions.entity.patch(e.name).config((v=r.current)==null?void 0:v.formData())}return m.jsx(Vx,{identifier:"settings",title:"Settings",ActiveIcon:Xg,renderHeaderRight:({open:y})=>y&&!s?m.jsx(ot,{variant:"primary",disabled:!y,onClick:c,children:"Update"}):null,children:m.jsx("div",{className:"flex flex-col flex-grow py-3 px-4 max-w-4xl gap-3 relative",children:m.jsx(vm,{ref:r,schema:o,formData:a,onSubmit:console.log,className:"legacy hide-required-mark fieldset-alternative mute-root",readonly:s})})})},hRe=w.lazy(()=>s0(()=>import("./DataSchemaCanvas-BT38ATfa.js"),[]).then(e=>({default:e.DataSchemaCanvas})));function mRe(){const{$data:e}=Fs();return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsx(K1,{children:m.jsx(ot,{type:"button",variant:"primary",onClick:e.modals.createAny,children:"Create new"})}),children:"Schema Overview"}),m.jsx("div",{className:"w-full h-full",children:m.jsx(w.Suspense,{children:m.jsx(hRe,{})})})]})}function pRe(){return m.jsx(x4e,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/",component:S4e}),m.jsx(at,{path:"/entity/:entity",component:aRe}),m.jsx(at,{path:"/entity/:entity/create",component:rRe}),m.jsx(at,{path:"/entity/:entity/edit/:id",component:Q4e}),m.jsxs(at,{path:"/schema",nest:!0,children:[m.jsx(at,{path:"/",component:mRe}),m.jsx(at,{path:"/entity/:entity/:setting?/:sub?",component:uRe})]})]})})}const p9=()=>m.jsx("span",{className:"text-xs bg-primary/10 flex rounded-full px-2.5 py-1 leading-none",children:"coming soon"});function gRe(e){return qr()?m.jsx(yRe,{...e}):m.jsx(bRe,{})}function yRe({children:e}){const{app:t}=xt();return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:t.getSettingsPath(["flows"]),children:m.jsx(Nt,{Icon:ym})}),children:"Flows"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsx(ns,{as:In,href:ft.flows.flows.list(),children:"All Flows"}),m.jsxs(ns,{disabled:!0,className:"justify-between",children:["Endpoints",m.jsx(p9,{})]}),m.jsxs(ns,{disabled:!0,className:"justify-between",children:["Executions",m.jsx(p9,{})]}),m.jsx(ns,{as:In,href:t.getSettingsPath(["flows"]),children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}function bRe(){return Wr(["Flows"]),m.jsx(Kn,{Icon:uxe,title:"Flows",description:"Flows are coming very soon!"})}function qn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=qn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var vRe={value:()=>{}};function TS(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kv(n)}function Kv(e){this._=e}function xRe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kv.prototype=TS.prototype={constructor:Kv,on:function(e,t){var n=this._,r=xRe(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=wRe(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=g9(n[s],e.name,t);else if(t==null)for(s in n)n[s]=g9(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kv(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function wRe(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function g9(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=vRe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var bj="http://www.w3.org/1999/xhtml";const y9={svg:"http://www.w3.org/2000/svg",xhtml:bj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $S(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),y9.hasOwnProperty(t)?{space:y9[t],local:e}:e}function SRe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bj&&t.documentElement.namespaceURI===bj?t.createElement(e):t.createElementNS(n,e)}}function ERe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function TG(e){var t=$S(e);return(t.local?ERe:SRe)(t)}function NRe(){}function T3(e){return e==null?NRe:function(){return this.querySelector(e)}}function _Re(e){typeof e!="function"&&(e=T3(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),c,u,f=0;f<o;++f)(c=i[f])&&(u=e.call(c,c.__data__,f,i))&&("__data__"in c&&(u.__data__=c.__data__),a[f]=u);return new Ps(r,this._parents)}function CRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ORe(){return[]}function $G(e){return e==null?ORe:function(){return this.querySelectorAll(e)}}function jRe(e){return function(){return CRe(e.apply(this,arguments))}}function ARe(e){typeof e=="function"?e=jRe(e):e=$G(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new Ps(r,s)}function RG(e){return function(){return this.matches(e)}}function kG(e){return function(t){return t.matches(e)}}var TRe=Array.prototype.find;function $Re(e){return function(){return TRe.call(this.children,e)}}function RRe(){return this.firstElementChild}function kRe(e){return this.select(e==null?RRe:$Re(typeof e=="function"?e:kG(e)))}var MRe=Array.prototype.filter;function IRe(){return Array.from(this.children)}function PRe(e){return function(){return MRe.call(this.children,e)}}function DRe(e){return this.selectAll(e==null?IRe:PRe(typeof e=="function"?e:kG(e)))}function LRe(e){typeof e!="function"&&(e=RG(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ps(r,this._parents)}function MG(e){return new Array(e.length)}function FRe(){return new Ps(this._enter||this._groups.map(MG),this._parents)}function gw(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gw.prototype={constructor:gw,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function BRe(e){return function(){return e}}function zRe(e,t,n,r,s,i){for(var o=0,a,c=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new gw(e,i[o]);for(;o<c;++o)(a=t[o])&&(s[o]=a)}function VRe(e,t,n,r,s,i,o){var a,c,u=new Map,f=t.length,h=i.length,p=new Array(f),y;for(a=0;a<f;++a)(c=t[a])&&(p[a]=y=o.call(c,c.__data__,a,t)+"",u.has(y)?s[a]=c:u.set(y,c));for(a=0;a<h;++a)y=o.call(e,i[a],a,i)+"",(c=u.get(y))?(r[a]=c,c.__data__=i[a],u.delete(y)):n[a]=new gw(e,i[a]);for(a=0;a<f;++a)(c=t[a])&&u.get(p[a])===c&&(s[a]=c)}function URe(e){return e.__data__}function qRe(e,t){if(!arguments.length)return Array.from(this,URe);var n=t?VRe:zRe,r=this._parents,s=this._groups;typeof e!="function"&&(e=BRe(e));for(var i=s.length,o=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var f=r[u],h=s[u],p=h.length,y=HRe(e.call(f,f&&f.__data__,u,r)),v=y.length,x=a[u]=new Array(v),S=o[u]=new Array(v),N=c[u]=new Array(p);n(f,h,x,S,N,y,t);for(var _=0,C=0,j,A;_<v;++_)if(j=x[_]){for(_>=C&&(C=_+1);!(A=S[C])&&++C<v;);j._next=A||null}}return o=new Ps(o,r),o._enter=a,o._exit=c,o}function HRe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WRe(){return new Ps(this._exit||this._groups.map(MG),this._parents)}function GRe(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function YRe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),c=0;c<o;++c)for(var u=n[c],f=r[c],h=u.length,p=a[c]=new Array(h),y,v=0;v<h;++v)(y=u[v]||f[v])&&(p[v]=y);for(;c<s;++c)a[c]=n[c];return new Ps(a,this._parents)}function JRe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function XRe(e){e||(e=KRe);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,c=s[i]=new Array(a),u,f=0;f<a;++f)(u=o[f])&&(c[f]=u);c.sort(t)}return new Ps(s,this._parents).order()}function KRe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function QRe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ZRe(){return Array.from(this)}function e5e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function t5e(){let e=0;for(const t of this)++e;return e}function n5e(){return!this.node()}function r5e(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function s5e(e){return function(){this.removeAttribute(e)}}function i5e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o5e(e,t){return function(){this.setAttribute(e,t)}}function a5e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function l5e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function c5e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function u5e(e,t){var n=$S(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?i5e:s5e:typeof t=="function"?n.local?c5e:l5e:n.local?a5e:o5e)(n,t))}function IG(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function d5e(e){return function(){this.style.removeProperty(e)}}function f5e(e,t,n){return function(){this.style.setProperty(e,t,n)}}function h5e(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function m5e(e,t,n){return arguments.length>1?this.each((t==null?d5e:typeof t=="function"?h5e:f5e)(e,t,n??"")):Vh(this.node(),e)}function Vh(e,t){return e.style.getPropertyValue(t)||IG(e).getComputedStyle(e,null).getPropertyValue(t)}function p5e(e){return function(){delete this[e]}}function g5e(e,t){return function(){this[e]=t}}function y5e(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function b5e(e,t){return arguments.length>1?this.each((t==null?p5e:typeof t=="function"?y5e:g5e)(e,t)):this.node()[e]}function PG(e){return e.trim().split(/^|\s+/)}function $3(e){return e.classList||new DG(e)}function DG(e){this._node=e,this._names=PG(e.getAttribute("class")||"")}DG.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function LG(e,t){for(var n=$3(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function FG(e,t){for(var n=$3(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function v5e(e){return function(){LG(this,e)}}function x5e(e){return function(){FG(this,e)}}function w5e(e,t){return function(){(t.apply(this,arguments)?LG:FG)(this,e)}}function S5e(e,t){var n=PG(e+"");if(arguments.length<2){for(var r=$3(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?w5e:t?v5e:x5e)(n,t))}function E5e(){this.textContent=""}function N5e(e){return function(){this.textContent=e}}function _5e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function C5e(e){return arguments.length?this.each(e==null?E5e:(typeof e=="function"?_5e:N5e)(e)):this.node().textContent}function O5e(){this.innerHTML=""}function j5e(e){return function(){this.innerHTML=e}}function A5e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function T5e(e){return arguments.length?this.each(e==null?O5e:(typeof e=="function"?A5e:j5e)(e)):this.node().innerHTML}function $5e(){this.nextSibling&&this.parentNode.appendChild(this)}function R5e(){return this.each($5e)}function k5e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M5e(){return this.each(k5e)}function I5e(e){var t=typeof e=="function"?e:TG(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function P5e(){return null}function D5e(e,t){var n=typeof e=="function"?e:TG(e),r=t==null?P5e:typeof t=="function"?t:T3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function L5e(){var e=this.parentNode;e&&e.removeChild(this)}function F5e(){return this.each(L5e)}function B5e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function z5e(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function V5e(e){return this.select(e?z5e:B5e)}function U5e(e){return arguments.length?this.property("__data__",e):this.node().__data__}function q5e(e){return function(t){e.call(this,t,this.__data__)}}function H5e(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function W5e(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function G5e(e,t,n){return function(){var r=this.__on,s,i=q5e(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Y5e(e,t,n){var r=H5e(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,f;c<u;++c)for(s=0,f=a[c];s<i;++s)if((o=r[s]).type===f.type&&o.name===f.name)return f.value}return}for(a=t?G5e:W5e,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function BG(e,t,n){var r=IG(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function J5e(e,t){return function(){return BG(this,e,t)}}function X5e(e,t){return function(){return BG(this,e,t.apply(this,arguments))}}function K5e(e,t){return this.each((typeof t=="function"?X5e:J5e)(e,t))}function*Q5e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var zG=[null];function Ps(e,t){this._groups=e,this._parents=t}function p0(){return new Ps([[document.documentElement]],zG)}function Z5e(){return this}Ps.prototype=p0.prototype={constructor:Ps,select:_Re,selectAll:ARe,selectChild:kRe,selectChildren:DRe,filter:LRe,data:qRe,enter:FRe,exit:WRe,join:GRe,merge:YRe,selection:Z5e,order:JRe,sort:XRe,call:QRe,nodes:ZRe,node:e5e,size:t5e,empty:n5e,each:r5e,attr:u5e,style:m5e,property:b5e,classed:S5e,text:C5e,html:T5e,raise:R5e,lower:M5e,append:I5e,insert:D5e,remove:F5e,clone:V5e,datum:U5e,on:Y5e,dispatch:K5e,[Symbol.iterator]:Q5e};function Cs(e){return typeof e=="string"?new Ps([[document.querySelector(e)]],[document.documentElement]):new Ps([[e]],zG)}function eke(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ii(e,t){if(e=eke(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const tke={passive:!1},oy={capture:!0,passive:!1};function J_(e){e.stopImmediatePropagation()}function eh(e){e.preventDefault(),e.stopImmediatePropagation()}function VG(e){var t=e.document.documentElement,n=Cs(e).on("dragstart.drag",eh,oy);"onselectstart"in t?n.on("selectstart.drag",eh,oy):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function UG(e,t){var n=e.document.documentElement,r=Cs(e).on("dragstart.drag",null);t&&(r.on("click.drag",eh,oy),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pv=e=>()=>e;function vj(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:a,dx:c,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}vj.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function nke(e){return!e.ctrlKey&&!e.button}function rke(){return this.parentNode}function ske(e,t){return t??{x:e.x,y:e.y}}function ike(){return navigator.maxTouchPoints||"ontouchstart"in this}function qG(){var e=nke,t=rke,n=ske,r=ike,s={},i=TS("start","drag","end"),o=0,a,c,u,f,h=0;function p(j){j.on("mousedown.drag",y).filter(r).on("touchstart.drag",S).on("touchmove.drag",N,tke).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(j,A){if(!(f||!e.call(this,j,A))){var $=C(this,t.call(this,j,A),j,A,"mouse");$&&(Cs(j.view).on("mousemove.drag",v,oy).on("mouseup.drag",x,oy),VG(j.view),J_(j),u=!1,a=j.clientX,c=j.clientY,$("start",j))}}function v(j){if(eh(j),!u){var A=j.clientX-a,$=j.clientY-c;u=A*A+$*$>h}s.mouse("drag",j)}function x(j){Cs(j.view).on("mousemove.drag mouseup.drag",null),UG(j.view,u),eh(j),s.mouse("end",j)}function S(j,A){if(e.call(this,j,A)){var $=j.changedTouches,k=t.call(this,j,A),R=$.length,F,z;for(F=0;F<R;++F)(z=C(this,k,j,A,$[F].identifier,$[F]))&&(J_(j),z("start",j,$[F]))}}function N(j){var A=j.changedTouches,$=A.length,k,R;for(k=0;k<$;++k)(R=s[A[k].identifier])&&(eh(j),R("drag",j,A[k]))}function _(j){var A=j.changedTouches,$=A.length,k,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),k=0;k<$;++k)(R=s[A[k].identifier])&&(J_(j),R("end",j,A[k]))}function C(j,A,$,k,R,F){var z=i.copy(),L=Ii(F||$,A),B,H,I;if((I=n.call(j,new vj("beforestart",{sourceEvent:$,target:p,identifier:R,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:z}),k))!=null)return B=I.x-L[0]||0,H=I.y-L[1]||0,function V(T,D,P){var q=L,M;switch(T){case"start":s[R]=V,M=o++;break;case"end":delete s[R],--o;case"drag":L=Ii(P||D,A),M=o;break}z.call(T,j,new vj(T,{sourceEvent:D,subject:I,target:p,identifier:R,active:M,x:L[0]+B,y:L[1]+H,dx:L[0]-q[0],dy:L[1]-q[1],dispatch:z}),k)}}return p.filter=function(j){return arguments.length?(e=typeof j=="function"?j:pv(!!j),p):e},p.container=function(j){return arguments.length?(t=typeof j=="function"?j:pv(j),p):t},p.subject=function(j){return arguments.length?(n=typeof j=="function"?j:pv(j),p):n},p.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:pv(!!j),p):r},p.on=function(){var j=i.on.apply(i,arguments);return j===i?p:j},p.clickDistance=function(j){return arguments.length?(h=(j=+j)*j,p):Math.sqrt(h)},p}function R3(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function HG(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function g0(){}var ay=.7,yw=1/ay,th="\\s*([+-]?\\d+)\\s*",ly="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oke=/^#([0-9a-f]{3,8})$/,ake=new RegExp(`^rgb\\(${th},${th},${th}\\)$`),lke=new RegExp(`^rgb\\(${Oo},${Oo},${Oo}\\)$`),cke=new RegExp(`^rgba\\(${th},${th},${th},${ly}\\)$`),uke=new RegExp(`^rgba\\(${Oo},${Oo},${Oo},${ly}\\)$`),dke=new RegExp(`^hsl\\(${ly},${Oo},${Oo}\\)$`),fke=new RegExp(`^hsla\\(${ly},${Oo},${Oo},${ly}\\)$`),b9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R3(g0,cy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:v9,formatHex:v9,formatHex8:hke,formatHsl:mke,formatRgb:x9,toString:x9});function v9(){return this.rgb().formatHex()}function hke(){return this.rgb().formatHex8()}function mke(){return WG(this).formatHsl()}function x9(){return this.rgb().formatRgb()}function cy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oke.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?w9(t):n===3?new is(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ake.exec(e))?new is(t[1],t[2],t[3],1):(t=lke.exec(e))?new is(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cke.exec(e))?gv(t[1],t[2],t[3],t[4]):(t=uke.exec(e))?gv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dke.exec(e))?N9(t[1],t[2]/100,t[3]/100,1):(t=fke.exec(e))?N9(t[1],t[2]/100,t[3]/100,t[4]):b9.hasOwnProperty(e)?w9(b9[e]):e==="transparent"?new is(NaN,NaN,NaN,0):null}function w9(e){return new is(e>>16&255,e>>8&255,e&255,1)}function gv(e,t,n,r){return r<=0&&(e=t=n=NaN),new is(e,t,n,r)}function pke(e){return e instanceof g0||(e=cy(e)),e?(e=e.rgb(),new is(e.r,e.g,e.b,e.opacity)):new is}function xj(e,t,n,r){return arguments.length===1?pke(e):new is(e,t,n,r??1)}function is(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}R3(is,xj,HG(g0,{brighter(e){return e=e==null?yw:Math.pow(yw,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ay:Math.pow(ay,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new is(Gu(this.r),Gu(this.g),Gu(this.b),bw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S9,formatHex:S9,formatHex8:gke,formatRgb:E9,toString:E9}));function S9(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}`}function gke(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}${$u((isNaN(this.opacity)?1:this.opacity)*255)}`}function E9(){const e=bw(this.opacity);return`${e===1?"rgb(":"rgba("}${Gu(this.r)}, ${Gu(this.g)}, ${Gu(this.b)}${e===1?")":`, ${e})`}`}function bw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $u(e){return e=Gu(e),(e<16?"0":"")+e.toString(16)}function N9(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fi(e,t,n,r)}function WG(e){if(e instanceof Fi)return new Fi(e.h,e.s,e.l,e.opacity);if(e instanceof g0||(e=cy(e)),!e)return new Fi;if(e instanceof Fi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,c=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?i+s:2-i-s,o*=60):a=c>0&&c<1?0:o,new Fi(o,a,c,e.opacity)}function yke(e,t,n,r){return arguments.length===1?WG(e):new Fi(e,t,n,r??1)}function Fi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}R3(Fi,yke,HG(g0,{brighter(e){return e=e==null?yw:Math.pow(yw,e),new Fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ay:Math.pow(ay,e),new Fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new is(X_(e>=240?e-240:e+120,s,r),X_(e,s,r),X_(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Fi(_9(this.h),yv(this.s),yv(this.l),bw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bw(this.opacity);return`${e===1?"hsl(":"hsla("}${_9(this.h)}, ${yv(this.s)*100}%, ${yv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _9(e){return e=(e||0)%360,e<0?e+360:e}function yv(e){return Math.max(0,Math.min(1,e||0))}function X_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const GG=e=>()=>e;function bke(e,t){return function(n){return e+n*t}}function vke(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xke(e){return(e=+e)==1?YG:function(t,n){return n-t?vke(t,n,e):GG(isNaN(t)?n:t)}}function YG(e,t){var n=t-e;return n?bke(e,n):GG(isNaN(e)?t:e)}const C9=function e(t){var n=xke(t);function r(s,i){var o=n((s=xj(s)).r,(i=xj(i)).r),a=n(s.g,i.g),c=n(s.b,i.b),u=YG(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=a(f),s.b=c(f),s.opacity=u(f),s+""}}return r.gamma=e,r}(1);function Wl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var wj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,K_=new RegExp(wj.source,"g");function wke(e){return function(){return e}}function Ske(e){return function(t){return e(t)+""}}function Eke(e,t){var n=wj.lastIndex=K_.lastIndex=0,r,s,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=wj.exec(e))&&(s=K_.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:Wl(r,s)})),n=K_.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?Ske(c[0].x):wke(t):(t=c.length,function(u){for(var f=0,h;f<t;++f)a[(h=c[f]).i]=h.x(u);return a.join("")})}var O9=180/Math.PI,Sj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function JG(e,t,n,r,s,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*O9,skewX:Math.atan(c)*O9,scaleX:o,scaleY:a}}var bv;function Nke(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Sj:JG(t.a,t.b,t.c,t.d,t.e,t.f)}function _ke(e){return e==null||(bv||(bv=document.createElementNS("http://www.w3.org/2000/svg","g")),bv.setAttribute("transform",e),!(e=bv.transform.baseVal.consolidate()))?Sj:(e=e.matrix,JG(e.a,e.b,e.c,e.d,e.e,e.f))}function XG(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,f,h,p,y,v){if(u!==h||f!==p){var x=y.push("translate(",null,t,null,n);v.push({i:x-4,x:Wl(u,h)},{i:x-2,x:Wl(f,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function o(u,f,h,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Wl(u,f)})):f&&h.push(s(h)+"rotate("+f+r)}function a(u,f,h,p){u!==f?p.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Wl(u,f)}):f&&h.push(s(h)+"skewX("+f+r)}function c(u,f,h,p,y,v){if(u!==h||f!==p){var x=y.push(s(y)+"scale(",null,",",null,")");v.push({i:x-4,x:Wl(u,h)},{i:x-2,x:Wl(f,p)})}else(h!==1||p!==1)&&y.push(s(y)+"scale("+h+","+p+")")}return function(u,f){var h=[],p=[];return u=e(u),f=e(f),i(u.translateX,u.translateY,f.translateX,f.translateY,h,p),o(u.rotate,f.rotate,h,p),a(u.skewX,f.skewX,h,p),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,p),u=f=null,function(y){for(var v=-1,x=p.length,S;++v<x;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var Cke=XG(Nke,"px, ","px)","deg)"),Oke=XG(_ke,", ",")",")"),jke=1e-12;function j9(e){return((e=Math.exp(e))+1/e)/2}function Ake(e){return((e=Math.exp(e))-1/e)/2}function Tke(e){return((e=Math.exp(2*e))-1)/(e+1)}const $ke=function e(t,n,r){function s(i,o){var a=i[0],c=i[1],u=i[2],f=o[0],h=o[1],p=o[2],y=f-a,v=h-c,x=y*y+v*v,S,N;if(x<jke)N=Math.log(p/u)/t,S=function(k){return[a+k*y,c+k*v,u*Math.exp(t*k*N)]};else{var _=Math.sqrt(x),C=(p*p-u*u+r*x)/(2*u*n*_),j=(p*p-u*u-r*x)/(2*p*n*_),A=Math.log(Math.sqrt(C*C+1)-C),$=Math.log(Math.sqrt(j*j+1)-j);N=($-A)/t,S=function(k){var R=k*N,F=j9(A),z=u/(n*_)*(F*Tke(t*R+A)-Ake(A));return[a+z*y,c+z*v,u*F/j9(t*R+A)]}}return S.duration=N*1e3*t/Math.SQRT2,S}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,c=a*a;return e(o,a,c)},s}(Math.SQRT2,2,4);var Uh=0,Zp=0,Hp=0,KG=1e3,vw,eg,xw=0,ld=0,RS=0,uy=typeof performance=="object"&&performance.now?performance:Date,QG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function k3(){return ld||(QG(Rke),ld=uy.now()+RS)}function Rke(){ld=0}function ww(){this._call=this._time=this._next=null}ww.prototype=ZG.prototype={constructor:ww,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?k3():+n)+(t==null?0:+t),!this._next&&eg!==this&&(eg?eg._next=this:vw=this,eg=this),this._call=e,this._time=n,Ej()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ej())}};function ZG(e,t,n){var r=new ww;return r.restart(e,t,n),r}function kke(){k3(),++Uh;for(var e=vw,t;e;)(t=ld-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uh}function A9(){ld=(xw=uy.now())+RS,Uh=Zp=0;try{kke()}finally{Uh=0,Ike(),ld=0}}function Mke(){var e=uy.now(),t=e-xw;t>KG&&(RS-=t,xw=e)}function Ike(){for(var e,t=vw,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vw=n);eg=e,Ej(r)}function Ej(e){if(!Uh){Zp&&(Zp=clearTimeout(Zp));var t=e-ld;t>24?(e<1/0&&(Zp=setTimeout(A9,e-uy.now()-RS)),Hp&&(Hp=clearInterval(Hp))):(Hp||(xw=uy.now(),Hp=setInterval(Mke,KG)),Uh=1,QG(A9))}}function T9(e,t,n){var r=new ww;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Pke=TS("start","end","cancel","interrupt"),Dke=[],eY=0,$9=1,Nj=2,Qv=3,R9=4,_j=5,Zv=6;function kS(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Lke(e,n,{name:t,index:r,group:s,on:Pke,tween:Dke,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:eY})}function M3(e,t){var n=so(e,t);if(n.state>eY)throw new Error("too late; already scheduled");return n}function Bo(e,t){var n=so(e,t);if(n.state>Qv)throw new Error("too late; already running");return n}function so(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lke(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=ZG(i,0,n.time);function i(u){n.state=$9,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,h,p,y;if(n.state!==$9)return c();for(f in r)if(y=r[f],y.name===n.name){if(y.state===Qv)return T9(o);y.state===R9?(y.state=Zv,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[f]):+f<t&&(y.state=Zv,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[f])}if(T9(function(){n.state===Qv&&(n.state=R9,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Nj,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nj){for(n.state=Qv,s=new Array(p=n.tween.length),f=0,h=-1;f<p;++f)(y=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=y);s.length=h+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=_j,1),h=-1,p=s.length;++h<p;)s[h].call(e,f);n.state===_j&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Zv,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ex(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Nj&&r.state<_j,r.state=Zv,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function Fke(e){return this.each(function(){ex(this,e)})}function Bke(e,t){var n,r;return function(){var s=Bo(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function zke(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Bo(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=a;break}c===u&&s.push(a)}i.tween=s}}function Vke(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=so(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?Bke:zke)(n,e,t))}function I3(e,t,n){var r=e._id;return e.each(function(){var s=Bo(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return so(s,r).value[t]}}function tY(e,t){var n;return(typeof t=="number"?Wl:t instanceof cy?C9:(n=cy(t))?(t=n,C9):Eke)(e,t)}function Uke(e){return function(){this.removeAttribute(e)}}function qke(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hke(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function Wke(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function Gke(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function Yke(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function Jke(e,t){var n=$S(e),r=n==="transform"?Oke:tY;return this.attrTween(e,typeof t=="function"?(n.local?Yke:Gke)(n,r,I3(this,"attr."+e,t)):t==null?(n.local?qke:Uke)(n):(n.local?Wke:Hke)(n,r,t))}function Xke(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Kke(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qke(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Kke(e,i)),n}return s._value=t,s}function Zke(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Xke(e,i)),n}return s._value=t,s}function eMe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$S(e);return this.tween(n,(r.local?Qke:Zke)(r,t))}function tMe(e,t){return function(){M3(this,e).delay=+t.apply(this,arguments)}}function nMe(e,t){return t=+t,function(){M3(this,e).delay=t}}function rMe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tMe:nMe)(t,e)):so(this.node(),t).delay}function sMe(e,t){return function(){Bo(this,e).duration=+t.apply(this,arguments)}}function iMe(e,t){return t=+t,function(){Bo(this,e).duration=t}}function oMe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sMe:iMe)(t,e)):so(this.node(),t).duration}function aMe(e,t){if(typeof t!="function")throw new Error;return function(){Bo(this,e).ease=t}}function lMe(e){var t=this._id;return arguments.length?this.each(aMe(t,e)):so(this.node(),t).ease}function cMe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Bo(this,e).ease=n}}function uMe(e){if(typeof e!="function")throw new Error;return this.each(cMe(this._id,e))}function dMe(e){typeof e!="function"&&(e=RG(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Wa(r,this._parents,this._name,this._id)}function fMe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],f=c.length,h=o[a]=new Array(f),p,y=0;y<f;++y)(p=c[y]||u[y])&&(h[y]=p);for(;a<r;++a)o[a]=t[a];return new Wa(o,this._parents,this._name,this._id)}function hMe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mMe(e,t,n){var r,s,i=hMe(t)?M3:Bo;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function pMe(e,t){var n=this._id;return arguments.length<2?so(this.node(),n).on.on(e):this.each(mMe(n,e,t))}function gMe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yMe(){return this.on("end.remove",gMe(this._id))}function bMe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=T3(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],c=a.length,u=i[o]=new Array(c),f,h,p=0;p<c;++p)(f=a[p])&&(h=e.call(f,f.__data__,p,a))&&("__data__"in f&&(h.__data__=f.__data__),u[p]=h,kS(u[p],t,n,p,u,so(f,n)));return new Wa(i,this._parents,t,n)}function vMe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$G(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var c=r[a],u=c.length,f,h=0;h<u;++h)if(f=c[h]){for(var p=e.call(f,f.__data__,h,c),y,v=so(f,n),x=0,S=p.length;x<S;++x)(y=p[x])&&kS(y,t,n,x,p,v);i.push(p),o.push(f)}return new Wa(i,o,t,n)}var xMe=p0.prototype.constructor;function wMe(){return new xMe(this._groups,this._parents)}function SMe(e,t){var n,r,s;return function(){var i=Vh(this,e),o=(this.style.removeProperty(e),Vh(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function nY(e){return function(){this.style.removeProperty(e)}}function EMe(e,t,n){var r,s=n+"",i;return function(){var o=Vh(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function NMe(e,t,n){var r,s,i;return function(){var o=Vh(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Vh(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a))}}function _Me(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var c=Bo(this,e),u=c.on,f=c.value[i]==null?a||(a=nY(t)):void 0;(u!==n||s!==f)&&(r=(n=u).copy()).on(o,s=f),c.on=r}}function CMe(e,t,n){var r=(e+="")=="transform"?Cke:tY;return t==null?this.styleTween(e,SMe(e,r)).on("end.style."+e,nY(e)):typeof t=="function"?this.styleTween(e,NMe(e,r,I3(this,"style."+e,t))).each(_Me(this._id,e)):this.styleTween(e,EMe(e,r,t),n).on("end.style."+e,null)}function OMe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jMe(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&OMe(e,o,n)),r}return i._value=t,i}function AMe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jMe(e,t,n??""))}function TMe(e){return function(){this.textContent=e}}function $Me(e){return function(){var t=e(this);this.textContent=t??""}}function RMe(e){return this.tween("text",typeof e=="function"?$Me(I3(this,"text",e)):TMe(e==null?"":e+""))}function kMe(e){return function(t){this.textContent=e.call(this,t)}}function MMe(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&kMe(s)),t}return r._value=e,r}function IMe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,MMe(e))}function PMe(){for(var e=this._name,t=this._id,n=rY(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var f=so(c,t);kS(c,e,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Wa(r,this._parents,e,n)}function DMe(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var u=Bo(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),s===0&&i()})}var LMe=0;function Wa(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rY(){return++LMe}var la=p0.prototype;Wa.prototype={constructor:Wa,select:bMe,selectAll:vMe,selectChild:la.selectChild,selectChildren:la.selectChildren,filter:dMe,merge:fMe,selection:wMe,transition:PMe,call:la.call,nodes:la.nodes,node:la.node,size:la.size,empty:la.empty,each:la.each,on:pMe,attr:Jke,attrTween:eMe,style:CMe,styleTween:AMe,text:RMe,textTween:IMe,remove:yMe,tween:Vke,delay:rMe,duration:oMe,ease:lMe,easeVarying:uMe,end:DMe,[Symbol.iterator]:la[Symbol.iterator]};function FMe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var BMe={time:null,delay:0,duration:250,ease:FMe};function zMe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function VMe(e){var t,n;e instanceof Wa?(t=e._id,e=e._name):(t=rY(),(n=BMe).time=k3(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&kS(c,e,t,u,o,n||zMe(c,t));return new Wa(r,this._parents,e,t)}p0.prototype.interrupt=Fke;p0.prototype.transition=VMe;const vv=e=>()=>e;function UMe(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ja(e,t,n){this.k=e,this.x=t,this.y=n}ja.prototype={constructor:ja,scale:function(e){return e===1?this:new ja(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ja(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var MS=new ja(1,0,0);sY.prototype=ja.prototype;function sY(e){for(;!e.__zoom;)if(!(e=e.parentNode))return MS;return e.__zoom}function Q_(e){e.stopImmediatePropagation()}function Wp(e){e.preventDefault(),e.stopImmediatePropagation()}function qMe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function HMe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function k9(){return this.__zoom||MS}function WMe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function GMe(){return navigator.maxTouchPoints||"ontouchstart"in this}function YMe(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function iY(){var e=qMe,t=HMe,n=YMe,r=WMe,s=GMe,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=$ke,u=TS("start","zoom","end"),f,h,p,y=500,v=150,x=0,S=10;function N(I){I.property("__zoom",k9).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(I,V,T,D){var P=I.selection?I.selection():I;P.property("__zoom",k9),I!==P?A(I,V,T,D):P.interrupt().each(function(){$(this,arguments).event(D).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},N.scaleBy=function(I,V,T,D){N.scaleTo(I,function(){var P=this.__zoom.k,q=typeof V=="function"?V.apply(this,arguments):V;return P*q},T,D)},N.scaleTo=function(I,V,T,D){N.transform(I,function(){var P=t.apply(this,arguments),q=this.__zoom,M=T==null?j(P):typeof T=="function"?T.apply(this,arguments):T,W=q.invert(M),X=typeof V=="function"?V.apply(this,arguments):V;return n(C(_(q,X),M,W),P,o)},T,D)},N.translateBy=function(I,V,T,D){N.transform(I,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),o)},null,D)},N.translateTo=function(I,V,T,D,P){N.transform(I,function(){var q=t.apply(this,arguments),M=this.__zoom,W=D==null?j(q):typeof D=="function"?D.apply(this,arguments):D;return n(MS.translate(W[0],W[1]).scale(M.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof T=="function"?-T.apply(this,arguments):-T),q,o)},D,P)};function _(I,V){return V=Math.max(i[0],Math.min(i[1],V)),V===I.k?I:new ja(V,I.x,I.y)}function C(I,V,T){var D=V[0]-T[0]*I.k,P=V[1]-T[1]*I.k;return D===I.x&&P===I.y?I:new ja(I.k,D,P)}function j(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,V,T,D){I.on("start.zoom",function(){$(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,q=arguments,M=$(P,q).event(D),W=t.apply(P,q),X=T==null?j(W):typeof T=="function"?T.apply(P,q):T,Q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),oe=P.__zoom,ae=typeof V=="function"?V.apply(P,q):V,fe=c(oe.invert(X).concat(Q/oe.k),ae.invert(X).concat(Q/ae.k));return function(le){if(le===1)le=ae;else{var ue=fe(le),ve=Q/ue[2];le=new ja(ve,X[0]-ue[0]*ve,X[1]-ue[1]*ve)}M.zoom(null,le)}})}function $(I,V,T){return!T&&I.__zooming||new k(I,V)}function k(I,V){this.that=I,this.args=V,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,V),this.taps=0}k.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,V){return this.mouse&&I!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var V=Cs(this.that).datum();u.call(I,this.that,new UMe(I,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:u}),V)}};function R(I,...V){if(!e.apply(this,arguments))return;var T=$(this,V).event(I),D=this.__zoom,P=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,r.apply(this,arguments)))),q=Ii(I);if(T.wheel)(T.mouse[0][0]!==q[0]||T.mouse[0][1]!==q[1])&&(T.mouse[1]=D.invert(T.mouse[0]=q)),clearTimeout(T.wheel);else{if(D.k===P)return;T.mouse=[q,D.invert(q)],ex(this),T.start()}Wp(I),T.wheel=setTimeout(M,v),T.zoom("mouse",n(C(_(D,P),T.mouse[0],T.mouse[1]),T.extent,o));function M(){T.wheel=null,T.end()}}function F(I,...V){if(p||!e.apply(this,arguments))return;var T=I.currentTarget,D=$(this,V,!0).event(I),P=Cs(I.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",Q,!0),q=Ii(I,T),M=I.clientX,W=I.clientY;VG(I.view),Q_(I),D.mouse=[q,this.__zoom.invert(q)],ex(this),D.start();function X(oe){if(Wp(oe),!D.moved){var ae=oe.clientX-M,fe=oe.clientY-W;D.moved=ae*ae+fe*fe>x}D.event(oe).zoom("mouse",n(C(D.that.__zoom,D.mouse[0]=Ii(oe,T),D.mouse[1]),D.extent,o))}function Q(oe){P.on("mousemove.zoom mouseup.zoom",null),UG(oe.view,D.moved),Wp(oe),D.event(oe).end()}}function z(I,...V){if(e.apply(this,arguments)){var T=this.__zoom,D=Ii(I.changedTouches?I.changedTouches[0]:I,this),P=T.invert(D),q=T.k*(I.shiftKey?.5:2),M=n(C(_(T,q),D,P),t.apply(this,V),o);Wp(I),a>0?Cs(this).transition().duration(a).call(A,M,D,I):Cs(this).call(N.transform,M,D,I)}}function L(I,...V){if(e.apply(this,arguments)){var T=I.touches,D=T.length,P=$(this,V,I.changedTouches.length===D).event(I),q,M,W,X;for(Q_(I),M=0;M<D;++M)W=T[M],X=Ii(W,this),X=[X,this.__zoom.invert(X),W.identifier],P.touch0?!P.touch1&&P.touch0[2]!==X[2]&&(P.touch1=X,P.taps=0):(P.touch0=X,q=!0,P.taps=1+!!f);f&&(f=clearTimeout(f)),q&&(P.taps<2&&(h=X[0],f=setTimeout(function(){f=null},y)),ex(this),P.start())}}function B(I,...V){if(this.__zooming){var T=$(this,V).event(I),D=I.changedTouches,P=D.length,q,M,W,X;for(Wp(I),q=0;q<P;++q)M=D[q],W=Ii(M,this),T.touch0&&T.touch0[2]===M.identifier?T.touch0[0]=W:T.touch1&&T.touch1[2]===M.identifier&&(T.touch1[0]=W);if(M=T.that.__zoom,T.touch1){var Q=T.touch0[0],oe=T.touch0[1],ae=T.touch1[0],fe=T.touch1[1],le=(le=ae[0]-Q[0])*le+(le=ae[1]-Q[1])*le,ue=(ue=fe[0]-oe[0])*ue+(ue=fe[1]-oe[1])*ue;M=_(M,Math.sqrt(le/ue)),W=[(Q[0]+ae[0])/2,(Q[1]+ae[1])/2],X=[(oe[0]+fe[0])/2,(oe[1]+fe[1])/2]}else if(T.touch0)W=T.touch0[0],X=T.touch0[1];else return;T.zoom("touch",n(C(M,W,X),T.extent,o))}}function H(I,...V){if(this.__zooming){var T=$(this,V).event(I),D=I.changedTouches,P=D.length,q,M;for(Q_(I),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),q=0;q<P;++q)M=D[q],T.touch0&&T.touch0[2]===M.identifier?delete T.touch0:T.touch1&&T.touch1[2]===M.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(M=Ii(M,this),Math.hypot(h[0]-M[0],h[1]-M[1])<S)){var W=Cs(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return N.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:vv(+I),N):r},N.filter=function(I){return arguments.length?(e=typeof I=="function"?I:vv(!!I),N):e},N.touchable=function(I){return arguments.length?(s=typeof I=="function"?I:vv(!!I),N):s},N.extent=function(I){return arguments.length?(t=typeof I=="function"?I:vv([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),N):t},N.scaleExtent=function(I){return arguments.length?(i[0]=+I[0],i[1]=+I[1],N):[i[0],i[1]]},N.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],N):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},N.constrain=function(I){return arguments.length?(n=I,N):n},N.duration=function(I){return arguments.length?(a=+I,N):a},N.interpolate=function(I){return arguments.length?(c=I,N):c},N.on=function(){var I=u.on.apply(u,arguments);return I===u?N:I},N.clickDistance=function(I){return arguments.length?(x=(I=+I)*I,N):Math.sqrt(x)},N.tapDistance=function(I){return arguments.length?(S=+I,N):S},N}const Mo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},dy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],oY=["Enter"," ","Escape"];var qh;(function(e){e.Strict="strict",e.Loose="loose"})(qh||(qh={}));var Yu;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Yu||(Yu={}));var fy;(function(e){e.Partial="partial",e.Full="full"})(fy||(fy={}));const aY={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ql;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ql||(Ql={}));var cd;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(cd||(cd={}));var st;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(st||(st={}));const M9={[st.Left]:st.Right,[st.Right]:st.Left,[st.Top]:st.Bottom,[st.Bottom]:st.Top};function lY(e){return e===null?null:e?"valid":"invalid"}const cY=e=>"id"in e&&"source"in e&&"target"in e,JMe=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),P3=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),y0=(e,t=[0,0])=>{const{width:n,height:r}=il(e),s=e.origin??t,i=n*s[0],o=r*s[1];return{x:e.position.x-i,y:e.position.y-o}},XMe=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const i=typeof s=="string";let o=!t.nodeLookup&&!i?s:void 0;t.nodeLookup&&(o=i?t.nodeLookup.get(s):P3(s)?s:t.nodeLookup.get(s.id));const a=o?Sw(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return IS(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return PS(n)},b0=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const s=Sw(r);n=IS(n,s)}}),PS(n)},uY=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1)=>{const a={...v0(t,[n,r,s]),width:t.width/s,height:t.height/s},c=[];for(const u of e.values()){const{measured:f,selectable:h=!0,hidden:p=!1}=u;if(o&&!h||p)continue;const y=f.width??u.width??u.initialWidth??null,v=f.height??u.height??u.initialHeight??null,x=hy(a,Wh(u)),S=(y??0)*(v??0),N=i&&x>0;(!u.internals.handleBounds||N||x>=S||u.dragging)&&c.push(u)}return c},KMe=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Cj(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function Oj({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:i},o){if(e.size===0)return Promise.resolve(!1);const a=b0(e),c=D3(a,t,n,(o==null?void 0:o.minZoom)??s,(o==null?void 0:o.maxZoom)??i,(o==null?void 0:o.padding)??.1);return await r.setViewport(c,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function dY({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:i}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},f=o.origin??r;let h=s;if(o.extent==="parent"&&!o.expandParent)if(!a)i==null||i("005",Mo.error005());else{const y=a.measured.width,v=a.measured.height;y&&v&&(h=[[c,u],[c+y,u+v]])}else a&&Gh(o.extent)&&(h=[[o.extent[0][0]+c,o.extent[0][1]+u],[o.extent[1][0]+c,o.extent[1][1]+u]]);const p=Gh(h)?ud(t,h,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(i==null||i("015",Mo.error015())),{position:{x:p.x-c+(o.measured.width??0)*f[0],y:p.y-u+(o.measured.height??0)*f[1]},positionAbsolute:p}}async function QMe({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const i=new Set(e.map(p=>p.id)),o=[];for(const p of n){if(p.deletable===!1)continue;const y=i.has(p.id),v=!y&&p.parentId&&o.find(x=>x.id===p.parentId);(y||v)&&o.push(p)}const a=new Set(t.map(p=>p.id)),c=r.filter(p=>p.deletable!==!1),f=KMe(o,c);for(const p of c)a.has(p.id)&&!f.find(v=>v.id===p.id)&&f.push(p);if(!s)return{edges:f,nodes:o};const h=await s({nodes:o,edges:f});return typeof h=="boolean"?h?{edges:f,nodes:o}:{edges:[],nodes:[]}:h}const Hh=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ud=(e={x:0,y:0},t,n)=>({x:Hh(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Hh(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function fY(e,t,n){const{width:r,height:s}=il(n),{x:i,y:o}=n.internals.positionAbsolute;return ud(e,[[i,o],[i+r,o+s]],t)}const I9=(e,t,n)=>e<t?Hh(Math.abs(e-t),1,t)/t:e>n?-Hh(Math.abs(e-n),1,t)/t:0,hY=(e,t,n=15,r=40)=>{const s=I9(e.x,r,t.width-r)*n,i=I9(e.y,r,t.height-r)*n;return[s,i]},IS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jj=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),PS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Wh=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=P3(e)?e.internals.positionAbsolute:y0(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Sw=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=P3(e)?e.internals.positionAbsolute:y0(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},mY=(e,t)=>PS(IS(jj(e),jj(t))),hy=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},P9=e=>qi(e.width)&&qi(e.height)&&qi(e.x)&&qi(e.y),qi=e=>!isNaN(e)&&isFinite(e),ZMe=(e,t)=>{},DS=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),v0=({x:e,y:t},[n,r,s],i=!1,o=[1,1])=>{const a={x:(e-n)/s,y:(t-r)/s};return i?DS(a,o):a},pY=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),D3=(e,t,n,r,s,i)=>{const o=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(o,a),u=Hh(c,r,s),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*u,y=n/2-h*u;return{x:p,y,zoom:u}},Ew=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Gh(e){return e!==void 0&&e!=="parent"}function il(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function gY(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function yY(e,t={width:0,height:0},n,r,s){const i={...e},o=r.get(n);if(o){const a=o.origin||s;i.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function D9(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vg(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:i,y:o}=Ia(e),a=v0({x:i-((s==null?void 0:s.left)??0),y:o-((s==null?void 0:s.top)??0)},r),{x:c,y:u}=n?DS(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const LS=e=>({width:e.offsetWidth,height:e.offsetHeight}),bY=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},e6e=["INPUT","SELECT","TEXTAREA"];function Aj(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:e6e.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const vY=e=>"clientX"in e,Ia=(e,t)=>{var i,o;const n=vY(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},L9=(e,t,n,r,s)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:s,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...LS(o)}})};function xY({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const c=e*.125+s*.375+o*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,f=Math.abs(c-e),h=Math.abs(u-t);return[c,u,f,h]}function xv(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function F9({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case st.Left:return[t-xv(t-r,i),n];case st.Right:return[t+xv(r-t,i),n];case st.Top:return[t,n-xv(n-s,i)];case st.Bottom:return[t,n+xv(s-n,i)]}}function wY({sourceX:e,sourceY:t,sourcePosition:n=st.Bottom,targetX:r,targetY:s,targetPosition:i=st.Top,curvature:o=.25}){const[a,c]=F9({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[u,f]=F9({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[h,p,y,v]=xY({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:f});return[`M${e},${t} C${a},${c} ${u},${f} ${r},${s}`,h,p,y,v]}function SY({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[i,a,s,o]}function t6e({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1}){if(!s)return r;const i=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?o:0)}function n6e({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const i=IS(Sw(e),Sw(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const o={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return hy(o,PS(i))>0}const r6e=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,s6e=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),EY=(e,t)=>{if(!e.source||!e.target)return t;let n;return cY(e)?n={...e}:n={...e,id:r6e(e)},s6e(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function NY({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,a]=SY({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,a]}const B9={[st.Left]:{x:-1,y:0},[st.Right]:{x:1,y:0},[st.Top]:{x:0,y:-1},[st.Bottom]:{x:0,y:1}},i6e=({source:e,sourcePosition:t=st.Bottom,target:n})=>t===st.Left||t===st.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},z9=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function o6e({source:e,sourcePosition:t=st.Bottom,target:n,targetPosition:r=st.Top,center:s,offset:i}){const o=B9[t],a=B9[r],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},f=i6e({source:c,sourcePosition:t,target:u}),h=f.x!==0?"x":"y",p=f[h];let y=[],v,x;const S={x:0,y:0},N={x:0,y:0},[_,C,j,A]=SY({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){v=s.x??_,x=s.y??C;const k=[{x:v,y:c.y},{x:v,y:u.y}],R=[{x:c.x,y:x},{x:u.x,y:x}];o[h]===p?y=h==="x"?k:R:y=h==="x"?R:k}else{const k=[{x:c.x,y:u.y}],R=[{x:u.x,y:c.y}];if(h==="x"?y=o.x===p?R:k:y=o.y===p?k:R,t===r){const H=Math.abs(e[h]-n[h]);if(H<=i){const I=Math.min(i-1,i-H);o[h]===p?S[h]=(c[h]>e[h]?-1:1)*I:N[h]=(u[h]>n[h]?-1:1)*I}}if(t!==r){const H=h==="x"?"y":"x",I=o[h]===a[H],V=c[H]>u[H],T=c[H]<u[H];(o[h]===1&&(!I&&V||I&&T)||o[h]!==1&&(!I&&T||I&&V))&&(y=h==="x"?k:R)}const F={x:c.x+S.x,y:c.y+S.y},z={x:u.x+N.x,y:u.y+N.y},L=Math.max(Math.abs(F.x-y[0].x),Math.abs(z.x-y[0].x)),B=Math.max(Math.abs(F.y-y[0].y),Math.abs(z.y-y[0].y));L>=B?(v=(F.x+z.x)/2,x=y[0].y):(v=y[0].x,x=(F.y+z.y)/2)}return[[e,{x:c.x+S.x,y:c.y+S.y},...y,{x:u.x+N.x,y:u.y+N.y},n],v,x,j,A]}function a6e(e,t,n,r){const s=Math.min(z9(e,t)/2,z9(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+s*u},${o}Q ${i},${o} ${i},${o+s*f}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*a},${o}`}function Tj({sourceX:e,sourceY:t,sourcePosition:n=st.Bottom,targetX:r,targetY:s,targetPosition:i=st.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[f,h,p,y,v]=o6e({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:a,y:c},offset:u});return[f.reduce((S,N,_)=>{let C="";return _>0&&_<f.length-1?C=a6e(f[_-1],N,f[_+1],o):C=`${_===0?"M":"L"}${N.x} ${N.y}`,S+=C,S},""),h,p,y,v]}function V9(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function l6e(e){var h;const{sourceNode:t,targetNode:n}=e;if(!V9(t)||!V9(n))return null;const r=t.internals.handleBounds||U9(t.handles),s=n.internals.handleBounds||U9(n.handles),i=q9((r==null?void 0:r.source)??[],e.sourceHandle),o=q9(e.connectionMode===qh.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!i||!o)return(h=e.onError)==null||h.call(e,"008",Mo.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||st.Bottom,c=(o==null?void 0:o.position)||st.Top,u=my(t,i,a),f=my(n,o,c);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:c}}function U9(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function my(e,t,n=st.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??il(e);if(r)return{x:s+o/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case st.Top:return{x:s+o/2,y:i};case st.Right:return{x:s+o,y:i+a/2};case st.Bottom:return{x:s+o/2,y:i+a};case st.Left:return{x:s,y:i+a/2}}}function q9(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function $j(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function c6e(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const i=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||s].forEach(c=>{if(c&&typeof c=="object"){const u=$j(c,t);i.has(u)||(o.push({id:u,color:c.color||n,...c}),i.add(u))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const L3={nodeOrigin:[0,0],nodeExtent:dy,elevateNodesOnSelect:!0,defaults:{}},u6e={...L3,checkEquality:!0};function F3(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function d6e(e,t,n){const r=F3(L3,n);for(const s of e.values())if(s.parentId)B3(s,e,t,r);else{const i=y0(s,r.nodeOrigin),o=Gh(s.extent)?s.extent:r.nodeExtent,a=ud(i,o,il(s));s.internals.positionAbsolute=a}}function Rj(e,t,n,r){var a,c;const s=F3(u6e,r),i=new Map(t),o=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let f=i.get(u.id);if(s.checkEquality&&u===(f==null?void 0:f.internals.userNode))t.set(u.id,f);else{const h=y0(u,s.nodeOrigin),p=Gh(u.extent)?u.extent:s.nodeExtent,y=ud(h,p,il(u));f={...s.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:_Y(u,o),userNode:u}},t.set(u.id,f)}u.parentId&&B3(f,t,n,r)}}function f6e(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function B3(e,t,n,r){const{elevateNodesOnSelect:s,nodeOrigin:i,nodeExtent:o}=F3(L3,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}f6e(e,n);const u=s?1e3:0,{x:f,y:h,z:p}=h6e(e,c,i,o,u),{positionAbsolute:y}=e.internals,v=f!==y.x||h!==y.y;(v||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:f,y:h}:y,z:p}})}function _Y(e,t){return(qi(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function h6e(e,t,n,r,s){const{x:i,y:o}=t.internals.positionAbsolute,a=il(e),c=y0(e,n),u=Gh(e.extent)?ud(c,e.extent,a):c;let f=ud({x:i+u.x,y:o+u.y},r,a);e.extent==="parent"&&(f=fY(f,a,t));const h=_Y(e,s),p=t.internals.z??0;return{x:f.x,y:f.y,z:p>h?p:h}}function z3(e,t,n,r=[0,0]){var o;const s=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((o=i.get(a.parentId))==null?void 0:o.expandedRect)??Wh(c),f=mY(u,a.rect);i.set(a.parentId,{expandedRect:f,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var C;const f=c.internals.positionAbsolute,h=il(c),p=c.origin??r,y=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,v=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,x=Math.max(h.width,Math.round(a.width)),S=Math.max(h.height,Math.round(a.height)),N=(x-h.width)*p[0],_=(S-h.height)*p[1];(y>0||v>0||N||_)&&(s.push({id:u,type:"position",position:{x:c.position.x-y+N,y:c.position.y-v+_}}),(C=n.get(u))==null||C.forEach(j=>{e.some(A=>A.id===j.id)||s.push({id:j.id,type:"position",position:{x:j.position.x+y,y:j.position.y+v}})})),(h.width<a.width||h.height<a.height||y||v)&&s.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(y?p[0]*y-N:0),height:S+(v?p[1]*v-_:0)}})}),s}function m6e(e,t,n,r,s,i){const o=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const p of e.values()){const y=t.get(p.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),a=!0;continue}const v=LS(p.nodeElement),x=y.measured.width!==v.width||y.measured.height!==v.height;if(!!(v.width&&v.height&&(x||!y.internals.handleBounds||p.force))){const N=p.nodeElement.getBoundingClientRect(),_=Gh(y.extent)?y.extent:i;let{positionAbsolute:C}=y.internals;y.parentId&&y.extent==="parent"?C=fY(C,v,t.get(y.parentId)):_&&(C=ud(C,_,v));const j={...y,measured:v,internals:{...y.internals,positionAbsolute:C,handleBounds:{source:L9("source",p.nodeElement,N,f,y.id),target:L9("target",p.nodeElement,N,f,y.id)}}};t.set(y.id,j),y.parentId&&B3(j,t,n,{nodeOrigin:s}),a=!0,x&&(c.push({id:y.id,type:"dimensions",dimensions:v}),y.expandParent&&y.parentId&&h.push({id:y.id,parentId:y.parentId,rect:Wh(j,s)}))}}if(h.length>0){const p=z3(h,t,n,s);c.push(...p)}return{changes:c,updatedInternals:a}}async function p6e({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,i]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function H9(e,t,n,r,s,i){let o=s;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${s}-${e}`;const c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),i){o=`${s}-${e}-${i}`;const u=r.get(o)||new Map;r.set(o,u.set(n,t))}}function CY(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:i,sourceHandle:o=null,targetHandle:a=null}=r,c={edgeId:r.id,source:s,target:i,sourceHandle:o,targetHandle:a},u=`${s}-${o}--${i}-${a}`,f=`${i}-${a}--${s}-${o}`;H9("source",c,f,e,s,o),H9("target",c,u,e,i,a),t.set(r.id,r)}}function OY(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:OY(n,t):!1}function W9(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function g6e(e,t,n,r){const s=new Map;for(const[i,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!OY(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(i);a&&s.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return s}function Z_({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,c;const s=[];for(const[u,f]of t){const h=(o=n.get(u))==null?void 0:o.internals.userNode;h&&s.push({...h,position:f.position,dragging:r})}if(!e)return[s[0],s];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:s[0],s]}function y6e({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let i={x:null,y:null},o=0,a=new Map,c=!1,u={x:0,y:0},f=null,h=!1,p=null,y=!1;function v({noDragClassName:S,handleSelector:N,domNode:_,isSelectable:C,nodeId:j,nodeClickDistance:A=0}){p=Cs(_);function $({x:z,y:L},B){const{nodeLookup:H,nodeExtent:I,snapGrid:V,snapToGrid:T,nodeOrigin:D,onNodeDrag:P,onSelectionDrag:q,onError:M,updateNodePositions:W}=t();i={x:z,y:L};let X=!1,Q={x:0,y:0,x2:0,y2:0};if(a.size>1&&I){const oe=b0(a);Q=jj(oe)}for(const[oe,ae]of a){if(!H.has(oe))continue;let fe={x:z-ae.distance.x,y:L-ae.distance.y};T&&(fe=DS(fe,V));let le=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];if(a.size>1&&I&&!ae.extent){const{positionAbsolute:_e}=ae.internals,ke=_e.x-Q.x+I[0][0],Oe=_e.x+ae.measured.width-Q.x2+I[1][0],$e=_e.y-Q.y+I[0][1],Re=_e.y+ae.measured.height-Q.y2+I[1][1];le=[[ke,$e],[Oe,Re]]}const{position:ue,positionAbsolute:ve}=dY({nodeId:oe,nextPosition:fe,nodeLookup:H,nodeExtent:le,nodeOrigin:D,onError:M});X=X||ae.position.x!==ue.x||ae.position.y!==ue.y,ae.position=ue,ae.internals.positionAbsolute=ve}if(X&&(W(a,!0),B&&(r||P||!j&&q))){const[oe,ae]=Z_({nodeId:j,dragItems:a,nodeLookup:H});r==null||r(B,a,oe,ae),P==null||P(B,oe,ae),j||q==null||q(B,ae)}}async function k(){if(!f)return;const{transform:z,panBy:L,autoPanSpeed:B,autoPanOnNodeDrag:H}=t();if(!H){c=!1,cancelAnimationFrame(o);return}const[I,V]=hY(u,f,B);(I!==0||V!==0)&&(i.x=(i.x??0)-I/z[2],i.y=(i.y??0)-V/z[2],await L({x:I,y:V})&&$(i,null)),o=requestAnimationFrame(k)}function R(z){var X;const{nodeLookup:L,multiSelectionActive:B,nodesDraggable:H,transform:I,snapGrid:V,snapToGrid:T,selectNodesOnDrag:D,onNodeDragStart:P,onSelectionDragStart:q,unselectNodesAndEdges:M}=t();h=!0,(!D||!C)&&!B&&j&&((X=L.get(j))!=null&&X.selected||M()),C&&D&&j&&(e==null||e(j));const W=vg(z.sourceEvent,{transform:I,snapGrid:V,snapToGrid:T,containerBounds:f});if(i=W,a=g6e(L,H,W,j),a.size>0&&(n||P||!j&&q)){const[Q,oe]=Z_({nodeId:j,dragItems:a,nodeLookup:L});n==null||n(z.sourceEvent,a,Q,oe),P==null||P(z.sourceEvent,Q,oe),j||q==null||q(z.sourceEvent,oe)}}const F=qG().clickDistance(A).on("start",z=>{const{domNode:L,nodeDragThreshold:B,transform:H,snapGrid:I,snapToGrid:V}=t();f=(L==null?void 0:L.getBoundingClientRect())||null,y=!1,B===0&&R(z),i=vg(z.sourceEvent,{transform:H,snapGrid:I,snapToGrid:V,containerBounds:f}),u=Ia(z.sourceEvent,f)}).on("drag",z=>{const{autoPanOnNodeDrag:L,transform:B,snapGrid:H,snapToGrid:I,nodeDragThreshold:V,nodeLookup:T}=t(),D=vg(z.sourceEvent,{transform:B,snapGrid:H,snapToGrid:I,containerBounds:f});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||j&&!T.has(j))&&(y=!0),!y){if(!c&&L&&h&&(c=!0,k()),!h){const P=D.xSnapped-(i.x??0),q=D.ySnapped-(i.y??0);Math.sqrt(P*P+q*q)>V&&R(z)}(i.x!==D.xSnapped||i.y!==D.ySnapped)&&a&&h&&(u=Ia(z.sourceEvent,f),$(D,z.sourceEvent))}}).on("end",z=>{if(!(!h||y)&&(c=!1,h=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:L,updateNodePositions:B,onNodeDragStop:H,onSelectionDragStop:I}=t();if(B(a,!1),s||H||!j&&I){const[V,T]=Z_({nodeId:j,dragItems:a,nodeLookup:L,dragging:!1});s==null||s(z.sourceEvent,a,V,T),H==null||H(z.sourceEvent,V,T),j||I==null||I(z.sourceEvent,T)}}}).filter(z=>{const L=z.target;return!z.button&&(!S||!W9(L,`.${S}`,_))&&(!N||W9(L,N,_))});p.call(F)}function x(){p==null||p.on(".drag",null)}return{update:v,destroy:x}}function b6e(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())hy(s,Wh(i))>0&&r.push(i);return r}const v6e=250;function x6e(e,t,n,r){var a,c;let s=[],i=1/0;const o=b6e(e,n,t+v6e);for(const u of o){const f=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const h of f){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:p,y}=my(u,h,h.position,!0),v=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(y-e.y,2));v>t||(v<i?(s=[{...h,x:p,y}],i=v):v===i&&s.push({...h,x:p,y}))}}if(!s.length)return null;if(s.length>1){const u=r.type==="source"?"target":"source";return s.find(f=>f.type===u)??s[0]}return s[0]}function jY(e,t,n,r,s,i=!1){var u,f,h;const o=r.get(e);if(!o)return null;const a=s==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((f=o.internals.handleBounds)==null?void 0:f.source)??[],...((h=o.internals.handleBounds)==null?void 0:h.target)??[]],c=(n?a==null?void 0:a.find(p=>p.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...my(o,c,c.position,!0)}:c}function AY(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function w6e(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const TY=()=>!0;function S6e(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:i,isTarget:o,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:f,flowId:h,panBy:p,cancelConnection:y,onConnectStart:v,onConnect:x,onConnectEnd:S,isValidConnection:N=TY,onReconnectEnd:_,updateConnection:C,getTransform:j,getFromHandle:A,autoPanSpeed:$}){const k=bY(e.target);let R=0,F;const{x:z,y:L}=Ia(e),B=k==null?void 0:k.elementFromPoint(z,L),H=AY(i,B),I=a==null?void 0:a.getBoundingClientRect();if(!I||!H)return;const V=jY(s,H,r,c,t);if(!V)return;let T=Ia(e,I),D=!1,P=null,q=!1,M=null;function W(){if(!f||!I)return;const[ve,_e]=hY(T,I,$);p({x:ve,y:_e}),R=requestAnimationFrame(W)}const X={...V,nodeId:s,type:H,position:V.position},Q=c.get(s),ae={inProgress:!0,isValid:null,from:my(Q,X,st.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:Q,to:T,toHandle:null,toPosition:M9[X.position],toNode:null};C(ae);let fe=ae;v==null||v(e,{nodeId:s,handleId:r,handleType:H});function le(ve){if(!A()||!X){ue(ve);return}const _e=j();T=Ia(ve,I),F=x6e(v0(T,_e,!1,[1,1]),n,c,X),D||(W(),D=!0);const ke=$Y(ve,{handle:F,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:o?"target":"source",isValidConnection:N,doc:k,lib:u,flowId:h,nodeLookup:c});M=ke.handleDomNode,P=ke.connection,q=w6e(!!F,ke.isValid);const Oe={...fe,isValid:q,to:F&&q?pY({x:F.x,y:F.y},_e):T,toHandle:ke.toHandle,toPosition:q&&ke.toHandle?ke.toHandle.position:M9[X.position],toNode:ke.toHandle?c.get(ke.toHandle.nodeId):null};q&&F&&fe.toHandle&&Oe.toHandle&&fe.toHandle.type===Oe.toHandle.type&&fe.toHandle.nodeId===Oe.toHandle.nodeId&&fe.toHandle.id===Oe.toHandle.id&&fe.to.x===Oe.to.x&&fe.to.y===Oe.to.y||(C(Oe),fe=Oe)}function ue(ve){(F||M)&&P&&q&&(x==null||x(P));const{inProgress:_e,...ke}=fe,Oe={...ke,toPosition:fe.toHandle?fe.toPosition:null};S==null||S(ve,Oe),i&&(_==null||_(ve,Oe)),y(),cancelAnimationFrame(R),D=!1,q=!1,P=null,M=null,k.removeEventListener("mousemove",le),k.removeEventListener("mouseup",ue),k.removeEventListener("touchmove",le),k.removeEventListener("touchend",ue)}k.addEventListener("mousemove",le),k.addEventListener("mouseup",ue),k.addEventListener("touchmove",le),k.addEventListener("touchend",ue)}function $Y(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:i,doc:o,lib:a,flowId:c,isValidConnection:u=TY,nodeLookup:f}){const h=i==="target",p=t?o.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:v}=Ia(e),x=o.elementFromPoint(y,v),S=x!=null&&x.classList.contains(`${a}-flow__handle`)?x:p,N={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const _=AY(void 0,S),C=S.getAttribute("data-nodeid"),j=S.getAttribute("data-handleid"),A=S.classList.contains("connectable"),$=S.classList.contains("connectableend");if(!C||!_)return N;const k={source:h?C:r,sourceHandle:h?j:s,target:h?r:C,targetHandle:h?s:j};N.connection=k;const F=A&&$&&(n===qh.Strict?h&&_==="source"||!h&&_==="target":C!==r||j!==s);N.isValid=F&&u(k),N.toHandle=jY(C,_,j,f,n,!1)}return N}const kj={onPointerDown:S6e,isValid:$Y};function E6e({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=Cs(e);function i({translateExtent:a,width:c,height:u,zoomStep:f=10,pannable:h=!0,zoomable:p=!0,inversePan:y=!1}){const v=C=>{const j=n();if(C.sourceEvent.type!=="wheel"||!t)return;const A=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*f,$=j[2]*Math.pow(2,A);t.scaleTo($)};let x=[0,0];const S=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(x=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},N=C=>{const j=n();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const A=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],$=[A[0]-x[0],A[1]-x[1]];x=A;const k=r()*Math.max(j[2],Math.log(j[2]))*(y?-1:1),R={x:j[0]-$[0]*k,y:j[1]-$[1]*k},F=[[0,0],[c,u]];t.setViewportConstrained({x:R.x,y:R.y,zoom:j[2]},F,a)},_=iY().on("start",S).on("zoom",h?N:null).on("zoom.wheel",p?v:null);s.call(_,{})}function o(){s.on("zoom",null)}return{update:i,destroy:o,pointer:Ii}}const N6e=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,FS=e=>({x:e.x,y:e.y,zoom:e.k}),eC=({x:e,y:t,zoom:n})=>MS.translate(e,t).scale(n),Uf=(e,t)=>e.target.closest(`.${t}`),RY=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),tC=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},kY=e=>{const t=e.ctrlKey&&Ew()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function _6e({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:i,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return f=>{if(Uf(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(f.ctrlKey&&o){const S=Ii(f),N=kY(f),_=h*Math.pow(2,N);r.scaleTo(n,_,S,f);return}const p=f.deltaMode===1?20:1;let y=s===Yu.Vertical?0:f.deltaX*p,v=s===Yu.Horizontal?0:f.deltaY*p;!Ew()&&f.shiftKey&&s!==Yu.Vertical&&(y=f.deltaY*p,v=0),r.translateBy(n,-(y/h)*i,-(v/h)*i,{internal:!0});const x=FS(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(f,x)),e.isPanScrolling&&(c==null||c(f,x),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,x),e.isPanScrolling=!1},150))}}function C6e({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){if(!t&&r.type==="wheel"&&!r.ctrlKey||Uf(r,e))return null;r.preventDefault(),n.call(this,r,s)}}function O6e({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,o,a;if((i=r.sourceEvent)!=null&&i.internal)return;const s=FS(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function j6e({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return i=>{var o,a;e.usedRightMouseButton=!!(n&&RY(t,e.mouseButton??0)),(o=i.sourceEvent)!=null&&o.sync||r([i.transform.x,i.transform.y,i.transform.k]),s&&!((a=i.sourceEvent)!=null&&a.internal)&&(s==null||s(i.sourceEvent,FS(i.transform)))}}function A6e({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:i}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&RY(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&i(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),s&&N6e(e.prevViewport,o.transform))){const c=FS(o.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(o.sourceEvent,c)},n?150:0)}}}function T6e({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:i,userSelectionActive:o,noWheelClassName:a,noPanClassName:c,lib:u}){return f=>{var v;const h=e||t,p=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Uf(f,`${u}-flow__node`)||Uf(f,`${u}-flow__edge`)))return!0;if(!r&&!h&&!s&&!i&&!n||o||Uf(f,a)&&f.type==="wheel"||Uf(f,c)&&(f.type!=="wheel"||s&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((v=f.touches)==null?void 0:v.length)>1)return f.preventDefault(),!1;if(!h&&!s&&!p&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&y}}function $6e({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:i,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),p=iY().clickDistance(!qi(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(s),y=Cs(e).call(p);C({x:i.x,y:i.y,zoom:Hh(i.zoom,t,n)},[[0,0],[h.width,h.height]],s);const v=y.on("wheel.zoom"),x=y.on("dblclick.zoom");p.wheelDelta(kY);function S(B,H){return y?new Promise(I=>{p==null||p.transform(tC(y,H==null?void 0:H.duration,()=>I(!0)),B)}):Promise.resolve(!1)}function N({noWheelClassName:B,noPanClassName:H,onPaneContextMenu:I,userSelectionActive:V,panOnScroll:T,panOnDrag:D,panOnScrollMode:P,panOnScrollSpeed:q,preventScrolling:M,zoomOnPinch:W,zoomOnScroll:X,zoomOnDoubleClick:Q,zoomActivationKeyPressed:oe,lib:ae,onTransformChange:fe}){V&&!f.isZoomingOrPanning&&_();const ue=T&&!oe&&!V?_6e({zoomPanValues:f,noWheelClassName:B,d3Selection:y,d3Zoom:p,panOnScrollMode:P,panOnScrollSpeed:q,zoomOnPinch:W,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:c}):C6e({noWheelClassName:B,preventScrolling:M,d3ZoomHandler:v});if(y.on("wheel.zoom",ue,{passive:!1}),!V){const _e=O6e({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:a});p.on("start",_e);const ke=j6e({zoomPanValues:f,panOnDrag:D,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:fe});p.on("zoom",ke);const Oe=A6e({zoomPanValues:f,panOnDrag:D,panOnScroll:T,onPaneContextMenu:I,onPanZoomEnd:c,onDraggingChange:u});p.on("end",Oe)}const ve=T6e({zoomActivationKeyPressed:oe,panOnDrag:D,zoomOnScroll:X,panOnScroll:T,zoomOnDoubleClick:Q,zoomOnPinch:W,userSelectionActive:V,noPanClassName:H,noWheelClassName:B,lib:ae});p.filter(ve),Q?y.on("dblclick.zoom",x):y.on("dblclick.zoom",null)}function _(){p.on("zoom",null)}async function C(B,H,I){const V=eC(B),T=p==null?void 0:p.constrain()(V,H,I);return T&&await S(T),new Promise(D=>D(T))}async function j(B,H){const I=eC(B);return await S(I,H),new Promise(V=>V(I))}function A(B){if(y){const H=eC(B),I=y.property("__zoom");(I.k!==B.zoom||I.x!==B.x||I.y!==B.y)&&(p==null||p.transform(y,H,null,{sync:!0}))}}function $(){const B=y?sY(y.node()):{x:0,y:0,k:1};return{x:B.x,y:B.y,zoom:B.k}}function k(B,H){return y?new Promise(I=>{p==null||p.scaleTo(tC(y,H==null?void 0:H.duration,()=>I(!0)),B)}):Promise.resolve(!1)}function R(B,H){return y?new Promise(I=>{p==null||p.scaleBy(tC(y,H==null?void 0:H.duration,()=>I(!0)),B)}):Promise.resolve(!1)}function F(B){p==null||p.scaleExtent(B)}function z(B){p==null||p.translateExtent(B)}function L(B){const H=!qi(B)||B<0?0:B;p==null||p.clickDistance(H)}return{update:N,destroy:_,setViewport:j,setViewportConstrained:C,getViewport:$,scaleTo:k,scaleBy:R,setScaleExtent:F,setTranslateExtent:z,syncViewport:A,setClickDistance:L}}var xg;(function(e){e.Line="line",e.Handle="handle"})(xg||(xg={}));function R6e({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:i}){const o=e-t,a=n-r,c=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&s&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function k6e(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Fl(e,t){return Math.max(0,t-e)}function Bl(e,t){return Math.max(0,e-t)}function wv(e,t,n){return Math.max(0,t-e,e-n)}function G9(e,t){return e?!t:t}function M6e(e,t,n,r,s,i,o,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:f,isVertical:h}=t,p=f&&h,{xSnapped:y,ySnapped:v}=n,{minWidth:x,maxWidth:S,minHeight:N,maxHeight:_}=r,{x:C,y:j,width:A,height:$,aspectRatio:k}=e;let R=Math.floor(f?y-e.pointerX:0),F=Math.floor(h?v-e.pointerY:0);const z=A+(c?-R:R),L=$+(u?-F:F),B=-i[0]*A,H=-i[1]*$;let I=wv(z,x,S),V=wv(L,N,_);if(o){let P=0,q=0;c&&R<0?P=Fl(C+R+B,o[0][0]):!c&&R>0&&(P=Bl(C+z+B,o[1][0])),u&&F<0?q=Fl(j+F+H,o[0][1]):!u&&F>0&&(q=Bl(j+L+H,o[1][1])),I=Math.max(I,P),V=Math.max(V,q)}if(a){let P=0,q=0;c&&R>0?P=Bl(C+R,a[0][0]):!c&&R<0&&(P=Fl(C+z,a[1][0])),u&&F>0?q=Bl(j+F,a[0][1]):!u&&F<0&&(q=Fl(j+L,a[1][1])),I=Math.max(I,P),V=Math.max(V,q)}if(s){if(f){const P=wv(z/k,N,_)*k;if(I=Math.max(I,P),o){let q=0;!c&&!u||c&&!u&&p?q=Bl(j+H+z/k,o[1][1])*k:q=Fl(j+H+(c?R:-R)/k,o[0][1])*k,I=Math.max(I,q)}if(a){let q=0;!c&&!u||c&&!u&&p?q=Fl(j+z/k,a[1][1])*k:q=Bl(j+(c?R:-R)/k,a[0][1])*k,I=Math.max(I,q)}}if(h){const P=wv(L*k,x,S)/k;if(V=Math.max(V,P),o){let q=0;!c&&!u||u&&!c&&p?q=Bl(C+L*k+B,o[1][0])/k:q=Fl(C+(u?F:-F)*k+B,o[0][0])/k,V=Math.max(V,q)}if(a){let q=0;!c&&!u||u&&!c&&p?q=Fl(C+L*k,a[1][0])/k:q=Bl(C+(u?F:-F)*k,a[0][0])/k,V=Math.max(V,q)}}}F=F+(F<0?V:-V),R=R+(R<0?I:-I),s&&(p?z>L*k?F=(G9(c,u)?-R:R)/k:R=(G9(c,u)?-F:F)*k:f?(F=R/k,u=c):(R=F*k,c=u));const T=c?C+R:C,D=u?j+F:j;return{width:A+(c?-R:R),height:$+(u?-F:F),x:i[0]*R*(c?-1:1)+T,y:i[1]*F*(u?-1:1)+D}}const MY={width:0,height:0,x:0,y:0},I6e={...MY,pointerX:0,pointerY:0,aspectRatio:1};function P6e(e){return[[0,0],[e.measured.width,e.measured.height]]}function D6e(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,i=e.measured.width??0,o=e.measured.height??0,a=n[0]*i,c=n[1]*o;return[[r-a,s-c],[r+i-a,s+o-c]]}function L6e({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const i=Cs(e);function o({controlPosition:c,boundaries:u,keepAspectRatio:f,onResizeStart:h,onResize:p,onResizeEnd:y,shouldResize:v}){let x={...MY},S={...I6e};const N=k6e(c);let _,C=null,j=[],A,$,k;const R=qG().on("start",F=>{const{nodeLookup:z,transform:L,snapGrid:B,snapToGrid:H,nodeOrigin:I,paneDomNode:V}=n();if(_=z.get(t),!_)return;C=(V==null?void 0:V.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:D}=vg(F.sourceEvent,{transform:L,snapGrid:B,snapToGrid:H,containerBounds:C});x={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},S={...x,pointerX:T,pointerY:D,aspectRatio:x.width/x.height},A=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(A=z.get(_.parentId),$=A&&_.extent==="parent"?P6e(A):void 0),j=[],k=void 0;for(const[P,q]of z)if(q.parentId===t&&(j.push({id:P,position:{...q.position},extent:q.extent}),q.extent==="parent"||q.expandParent)){const M=D6e(q,_,q.origin??I);k?k=[[Math.min(M[0][0],k[0][0]),Math.min(M[0][1],k[0][1])],[Math.max(M[1][0],k[1][0]),Math.max(M[1][1],k[1][1])]]:k=M}h==null||h(F,{...x})}).on("drag",F=>{const{transform:z,snapGrid:L,snapToGrid:B,nodeOrigin:H}=n(),I=vg(F.sourceEvent,{transform:z,snapGrid:L,snapToGrid:B,containerBounds:C}),V=[];if(!_)return;const{x:T,y:D,width:P,height:q}=x,M={},W=_.origin??H,{width:X,height:Q,x:oe,y:ae}=M6e(S,N,I,u,f,W,$,k),fe=X!==P,le=Q!==q,ue=oe!==T&&fe,ve=ae!==D&&le;if(!ue&&!ve&&!fe&&!le)return;if((ue||ve||W[0]===1||W[1]===1)&&(M.x=ue?oe:x.x,M.y=ve?ae:x.y,x.x=M.x,x.y=M.y,j.length>0)){const $e=oe-T,Re=ae-D;for(const qe of j)qe.position={x:qe.position.x-$e+W[0]*(X-P),y:qe.position.y-Re+W[1]*(Q-q)},V.push(qe)}if((fe||le)&&(M.width=fe?X:x.width,M.height=le?Q:x.height,x.width=M.width,x.height=M.height),A&&_.expandParent){const $e=W[0]*(M.width??0);M.x&&M.x<$e&&(x.x=$e,S.x=S.x-(M.x-$e));const Re=W[1]*(M.height??0);M.y&&M.y<Re&&(x.y=Re,S.y=S.y-(M.y-Re))}const _e=R6e({width:x.width,prevWidth:P,height:x.height,prevHeight:q,affectsX:N.affectsX,affectsY:N.affectsY}),ke={...x,direction:_e};(v==null?void 0:v(F,ke))!==!1&&(p==null||p(F,ke),r(M,V))}).on("end",F=>{y==null||y(F,{...x}),s==null||s()});i.call(R)}function a(){i.on(".drag",null)}return{update:o,destroy:a}}const{useDebugValue:F6e}=je,{useSyncExternalStoreWithSelector:B6e}=qU,z6e=e=>e;function IY(e,t=z6e,n){const r=B6e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return F6e(r),r}const Y9=(e,t)=>{const n=y$(e),r=(s,i=t)=>IY(n,s,i);return Object.assign(r,n),r},V6e=(e,t)=>e?Y9(e,t):Y9;function En(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const BS=w.createContext(null),U6e=BS.Provider,PY=Mo.error001();function kt(e,t){const n=w.useContext(BS);if(n===null)throw new Error(PY);return IY(n,e,t)}function bn(){const e=w.useContext(BS);if(e===null)throw new Error(PY);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const J9={display:"none"},q6e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},DY="react-flow__node-desc",LY="react-flow__edge-desc",H6e="react-flow__aria-live",W6e=e=>e.ariaLiveMessage;function G6e({rfId:e}){const t=kt(W6e);return m.jsx("div",{id:`${H6e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:q6e,children:t})}function Y6e({rfId:e,disableKeyboardA11y:t}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{id:`${DY}-${e}`,style:J9,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),m.jsx("div",{id:`${LY}-${e}`,style:J9,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&m.jsx(G6e,{rfId:e})]})}const J6e=e=>e.userSelectionActive?"none":"all",Yh=w.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},i)=>{const o=kt(J6e),a=`${e}`.split("-");return m.jsx("div",{className:qn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:i,...s,children:t})});Yh.displayName="Panel";function X6e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(Yh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const K6e=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Sv=e=>e.id;function Q6e(e,t){return En(e.selectedNodes.map(Sv),t.selectedNodes.map(Sv))&&En(e.selectedEdges.map(Sv),t.selectedEdges.map(Sv))}function Z6e({onSelectionChange:e}){const t=bn(),{selectedNodes:n,selectedEdges:r}=kt(K6e,Q6e);return w.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(i=>i(s))},[n,r,e]),null}const eIe=e=>!!e.onSelectionChangeHandlers;function tIe({onSelectionChange:e}){const t=kt(eIe);return e||t?m.jsx(Z6e,{onSelectionChange:e}):null}const FY=[0,0],nIe={x:0,y:0,zoom:1},rIe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],X9=[...rIe,"rfId"],sIe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),K9={translateExtent:dy,nodeOrigin:FY,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function iIe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:i,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=kt(sIe,En),f=bn();w.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{h.current=K9,a()}),[]);const h=w.useRef(K9);return w.useEffect(()=>{for(const p of X9){const y=e[p],v=h.current[p];y!==v&&(typeof e[p]>"u"||(p==="nodes"?t(y):p==="edges"?n(y):p==="minZoom"?r(y):p==="maxZoom"?s(y):p==="translateExtent"?i(y):p==="nodeExtent"?o(y):p==="paneClickDistance"?u(y):p==="fitView"?f.setState({fitViewOnInit:y}):p==="fitViewOptions"?f.setState({fitViewOnInitOptions:y}):f.setState({[p]:y})))}h.current=e},X9.map(p=>e[p])),null}function Q9(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function oIe(e){var r;const[t,n]=w.useState(e==="system"?null:e);return w.useEffect(()=>{if(e!=="system"){n(e);return}const s=Q9(),i=()=>n(s!=null&&s.matches?"dark":"light");return i(),s==null||s.addEventListener("change",i),()=>{s==null||s.removeEventListener("change",i)}},[e]),t!==null?t:(r=Q9())!=null&&r.matches?"dark":"light"}const Z9=typeof document<"u"?document:null;function py(e=null,t={target:Z9,actInsideInputWithModifier:!0}){const[n,r]=w.useState(!1),s=w.useRef(!1),i=w.useRef(new Set([])),[o,a]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=u.reduce((h,p)=>h.concat(...p),[]);return[u,f]}return[[],[]]},[e]);return w.useEffect(()=>{const c=(t==null?void 0:t.target)||Z9;if(e!==null){const u=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Aj(p))return!1;const v=t8(p.code,a);i.current.add(p[v]),e8(o,i.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Aj(p))return!1;const v=t8(p.code,a);e8(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[v]),p.key==="Meta"&&i.current.clear(),s.current=!1},h=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,r]),n}function e8(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function t8(e,t){return t.includes(e)?"code":"key"}const aIe=()=>{const e=bn();return w.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,i],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:s,panZoom:i,domNode:o}=e.getState();if(!i||!o)return Promise.resolve(!1);const a=Cj(n,t),{width:c,height:u}=LS(o);return Oj({nodes:a,width:c,height:u,minZoom:r,maxZoom:s,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:s,height:i,maxZoom:o,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:o,u=s/2-t*c,f=i/2-n*c;return a?(await a.setViewport({x:u,y:f,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:i,maxZoom:o,panZoom:a}=e.getState(),c=D3(t,r,s,i,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:a,y:c}=o.getBoundingClientRect(),u={x:t.x-a,y:t.y-c},f=n.snapGrid??s,h=n.snapToGrid??i;return v0(u,r,h,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:i}=r.getBoundingClientRect(),o=pY(t,n);return{x:o.x+s,y:o.y+i}}}),[])};function BY(e,t){const n=[],r=new Map,s=[];for(const i of e)if(i.type==="add"){s.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const o=r.get(i.id);o?o.push(i):r.set(i.id,[i])}for(const i of t){const o=r.get(i.id);if(!o){n.push(i);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...i};for(const c of o)lIe(c,a);n.push(a)}return s.length&&s.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function lIe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function zY(e,t){return BY(e,t)}function VY(e,t){return BY(e,t)}function wu(e,t){return{id:e,type:"select",selected:t}}function qf(e,t=new Set,n=!1){const r=[];for(const[s,i]of e){const o=t.has(s);!(i.selected===void 0&&!o)&&i.selected!==o&&(n&&(i.selected=o),r.push(wu(i.id,o)))}return r}function n8({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,o]of e.entries()){const a=t.get(o.id),c=((s=a==null?void 0:a.internals)==null?void 0:s.userNode)??a;c!==void 0&&c!==o&&n.push({id:o.id,item:o,type:"replace"}),c===void 0&&n.push({item:o,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function r8(e){return{id:e.id,type:"remove"}}const s8=e=>JMe(e),cIe=e=>cY(e);function UY(e){return w.forwardRef(e)}const uIe=typeof window<"u"?w.useLayoutEffect:w.useEffect;function i8(e){const[t,n]=w.useState(BigInt(0)),[r]=w.useState(()=>dIe(()=>n(s=>s+BigInt(1))));return uIe(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function dIe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const qY=w.createContext(null);function fIe({children:e}){const t=bn(),n=w.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:f,onNodesChange:h,nodeLookup:p}=t.getState();let y=c;for(const v of a)y=typeof v=="function"?v(y):v;f?u(y):h&&h(n8({items:y,lookup:p}))},[]),r=i8(n),s=w.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:f,onEdgesChange:h,edgeLookup:p}=t.getState();let y=c;for(const v of a)y=typeof v=="function"?v(y):v;f?u(y):h&&h(n8({items:y,lookup:p}))},[]),i=i8(s),o=w.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return m.jsx(qY.Provider,{value:o,children:e})}function hIe(){const e=w.useContext(qY);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const mIe=e=>!!e.panZoom;function Nm(){const e=aIe(),t=bn(),n=hIe(),r=kt(mIe),s=w.useMemo(()=>{const i=h=>t.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},a=h=>{n.edgeQueue.push(h)},c=h=>{var N,_;const{nodeLookup:p,nodeOrigin:y}=t.getState(),v=s8(h)?h:p.get(h.id),x=v.parentId?yY(v.position,v.measured,v.parentId,p,y):v.position,S={...v,position:x,width:((N=v.measured)==null?void 0:N.width)??v.width,height:((_=v.measured)==null?void 0:_.height)??v.height};return Wh(S)},u=(h,p,y={replace:!1})=>{o(v=>v.map(x=>{if(x.id===h){const S=typeof p=="function"?p(x):p;return y.replace&&s8(S)?S:{...x,...S}}return x}))},f=(h,p,y={replace:!1})=>{a(v=>v.map(x=>{if(x.id===h){const S=typeof p=="function"?p(x):p;return y.replace&&cIe(S)?S:{...x,...S}}return x}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var p;return(p=i(h))==null?void 0:p.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(p=>({...p}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:o,setEdges:a,addNodes:h=>{const p=Array.isArray(h)?h:[h];n.nodeQueue.push(y=>[...y,...p])},addEdges:h=>{const p=Array.isArray(h)?h:[h];n.edgeQueue.push(y=>[...y,...p])},toObject:()=>{const{nodes:h=[],edges:p=[],transform:y}=t.getState(),[v,x,S]=y;return{nodes:h.map(N=>({...N})),edges:p.map(N=>({...N})),viewport:{x:v,y:x,zoom:S}}},deleteElements:async({nodes:h=[],edges:p=[]})=>{const{nodes:y,edges:v,onNodesDelete:x,onEdgesDelete:S,triggerNodeChanges:N,triggerEdgeChanges:_,onDelete:C,onBeforeDelete:j}=t.getState(),{nodes:A,edges:$}=await QMe({nodesToRemove:h,edgesToRemove:p,nodes:y,edges:v,onBeforeDelete:j}),k=$.length>0,R=A.length>0;if(k){const F=$.map(r8);S==null||S($),_(F)}if(R){const F=A.map(r8);x==null||x(A),N(F)}return(R||k)&&(C==null||C({nodes:A,edges:$})),{deletedNodes:A,deletedEdges:$}},getIntersectingNodes:(h,p=!0,y)=>{const v=P9(h),x=v?h:c(h),S=y!==void 0;return x?(y||t.getState().nodes).filter(N=>{const _=t.getState().nodeLookup.get(N.id);if(_&&!v&&(N.id===h.id||!_.internals.positionAbsolute))return!1;const C=Wh(S?N:_),j=hy(C,x);return p&&j>0||j>=x.width*x.height}):[]},isNodeIntersecting:(h,p,y=!0)=>{const x=P9(h)?h:c(h);if(!x)return!1;const S=hy(x,p);return y&&S>0||S>=x.width*x.height},updateNode:u,updateNodeData:(h,p,y={replace:!1})=>{u(h,v=>{const x=typeof p=="function"?p(v):p;return y.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},y)},updateEdge:f,updateEdgeData:(h,p,y={replace:!1})=>{f(h,v=>{const x=typeof p=="function"?p(v):p;return y.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},y)},getNodesBounds:h=>{const{nodeLookup:p,nodeOrigin:y}=t.getState();return XMe(h,{nodeLookup:p,nodeOrigin:y})},getHandleConnections:({type:h,id:p,nodeId:y})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${y}-${h}${p?`-${p}`:""}`))==null?void 0:v.values())??[])},getNodeConnections:({type:h,handleId:p,nodeId:y})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${y}${h?p?`-${h}-${p}`:`-${h}`:""}`))==null?void 0:v.values())??[])}}},[]);return w.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const o8=e=>e.selected,pIe={actInsideInputWithModifier:!1},gIe=typeof window<"u"?window:void 0;function yIe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=bn(),{deleteElements:r}=Nm(),s=py(e,pIe),i=py(t,{target:gIe});w.useEffect(()=>{if(s){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(o8),edges:o.filter(o8)}),n.setState({nodesSelectionActive:!1})}},[s]),w.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function bIe(e){const t=bn();w.useEffect(()=>{const n=()=>{var s,i;if(!e.current)return!1;const r=LS(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Mo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const zS={position:"absolute",width:"100%",height:"100%",top:0,left:0},vIe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function xIe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:i=Yu.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:f,maxZoom:h,zoomActivationKeyCode:p,preventScrolling:y=!0,children:v,noWheelClassName:x,noPanClassName:S,onViewportChange:N,isControlledViewport:_,paneClickDistance:C}){const j=bn(),A=w.useRef(null),{userSelectionActive:$,lib:k}=kt(vIe,En),R=py(p),F=w.useRef();bIe(A);const z=w.useCallback(L=>{N==null||N({x:L[0],y:L[1],zoom:L[2]}),_||j.setState({transform:L})},[N,_]);return w.useEffect(()=>{if(A.current){F.current=$6e({domNode:A.current,minZoom:f,maxZoom:h,translateExtent:u,viewport:c,paneClickDistance:C,onDraggingChange:I=>j.setState({paneDragging:I}),onPanZoomStart:(I,V)=>{const{onViewportChangeStart:T,onMoveStart:D}=j.getState();D==null||D(I,V),T==null||T(V)},onPanZoom:(I,V)=>{const{onViewportChange:T,onMove:D}=j.getState();D==null||D(I,V),T==null||T(V)},onPanZoomEnd:(I,V)=>{const{onViewportChangeEnd:T,onMoveEnd:D}=j.getState();D==null||D(I,V),T==null||T(V)}});const{x:L,y:B,zoom:H}=F.current.getViewport();return j.setState({panZoom:F.current,transform:[L,B,H],domNode:A.current.closest(".react-flow")}),()=>{var I;(I=F.current)==null||I.destroy()}}},[]),w.useEffect(()=>{var L;(L=F.current)==null||L.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:i,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:R,preventScrolling:y,noPanClassName:S,userSelectionActive:$,noWheelClassName:x,lib:k,onTransformChange:z})},[e,t,n,r,s,i,o,a,R,y,S,$,x,k,z]),m.jsx("div",{className:"react-flow__renderer",ref:A,style:zS,children:v})}const wIe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function SIe(){const{userSelectionActive:e,userSelectionRect:t}=kt(wIe,En);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const nC=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},EIe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function NIe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=fy.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:i,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:y}){const v=bn(),{userSelectionActive:x,elementsSelectable:S,dragging:N}=kt(EIe,En),_=S&&(e||x),C=w.useRef(null),j=w.useRef(),A=w.useRef(new Set),$=w.useRef(new Set),k=w.useRef(!1),R=w.useRef(!1),F=T=>{if(k.current){k.current=!1;return}a==null||a(T),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},z=T=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){T.preventDefault();return}c==null||c(T)},L=u?T=>u(T):void 0,B=T=>{var W,X;const{resetSelectedElements:D,domNode:P}=v.getState();if(j.current=P==null?void 0:P.getBoundingClientRect(),!S||!e||T.button!==0||T.target!==C.current||!j.current)return;(X=(W=T.target)==null?void 0:W.setPointerCapture)==null||X.call(W,T.pointerId),R.current=!0,k.current=!1;const{x:q,y:M}=Ia(T.nativeEvent,j.current);D(),v.setState({userSelectionRect:{width:0,height:0,startX:q,startY:M,x:q,y:M}}),i==null||i(T)},H=T=>{const{userSelectionRect:D,transform:P,nodeLookup:q,edgeLookup:M,connectionLookup:W,triggerNodeChanges:X,triggerEdgeChanges:Q,defaultEdgeOptions:oe}=v.getState();if(!j.current||!D)return;k.current=!0;const{x:ae,y:fe}=Ia(T.nativeEvent,j.current),{startX:le,startY:ue}=D,ve={startX:le,startY:ue,x:ae<le?ae:le,y:fe<ue?fe:ue,width:Math.abs(ae-le),height:Math.abs(fe-ue)},_e=A.current,ke=$.current;A.current=new Set(uY(q,ve,P,n===fy.Partial,!0).map($e=>$e.id)),$.current=new Set;const Oe=(oe==null?void 0:oe.selectable)??!0;for(const $e of A.current){const Re=W.get($e);if(Re)for(const{edgeId:qe}of Re.values()){const et=M.get(qe);et&&(et.selectable??Oe)&&$.current.add(qe)}}if(!D9(_e,A.current)){const $e=qf(q,A.current,!0);X($e)}if(!D9(ke,$.current)){const $e=qf(M,$.current);Q($e)}v.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},I=T=>{var P,q;if(T.button!==0||!R.current)return;(q=(P=T.target)==null?void 0:P.releasePointerCapture)==null||q.call(P,T.pointerId);const{userSelectionRect:D}=v.getState();!x&&D&&T.target===C.current&&(F==null||F(T)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),o==null||o(T),(t||s)&&(k.current=!1),R.current=!1},V=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:qn(["react-flow__pane",{draggable:V,dragging:N,selection:e}]),onClick:_?void 0:nC(F,C),onContextMenu:nC(z,C),onWheel:nC(L,C),onPointerEnter:_?void 0:f,onPointerDown:_?B:h,onPointerMove:_?H:h,onPointerUp:_?I:void 0,onPointerLeave:p,ref:C,style:zS,children:[y,m.jsx(SIe,{})]})}function Mj({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Mo.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):s([e])}function HY({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,nodeClickDistance:o}){const a=bn(),[c,u]=w.useState(!1),f=w.useRef();return w.useEffect(()=>{f.current=y6e({getStoreItems:()=>a.getState(),onNodeMouseDown:h=>{Mj({id:h,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),w.useEffect(()=>{var h,p;if(t)(h=f.current)==null||h.destroy();else if(e.current)return(p=f.current)==null||p.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:s,nodeClickDistance:o}),()=>{var y;(y=f.current)==null||y.destroy()}},[n,r,t,i,e,s]),c}const _Ie=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function WY(){const e=bn();return w.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:i,nodesDraggable:o,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:f}=e.getState(),h=new Map,p=_Ie(o),y=s?i[0]:5,v=s?i[1]:5,x=n.direction.x*y*n.factor,S=n.direction.y*v*n.factor;for(const[,N]of u){if(!p(N))continue;let _={x:N.internals.positionAbsolute.x+x,y:N.internals.positionAbsolute.y+S};s&&(_=DS(_,i));const{position:C,positionAbsolute:j}=dY({nodeId:N.id,nextPosition:_,nodeLookup:u,nodeExtent:r,nodeOrigin:f,onError:a});N.position=C,N.internals.positionAbsolute=j,h.set(N.id,N)}c(h)},[])}const V3=w.createContext(null),CIe=V3.Provider;V3.Consumer;const GY=()=>w.useContext(V3),OIe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),jIe=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:i,connection:o}=r,{fromHandle:a,toHandle:c,isValid:u}=o,f=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:f,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:i===qh.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!s,valid:f&&u}};function AIe({type:e="source",position:t=st.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:f,onTouchStart:h,...p},y){var V,T;const v=o||null,x=e==="target",S=bn(),N=GY(),{connectOnClick:_,noPanClassName:C,rfId:j}=kt(OIe,En),{connectingFrom:A,connectingTo:$,clickConnecting:k,isPossibleEndHandle:R,connectionInProcess:F,clickConnectionInProcess:z,valid:L}=kt(jIe(N,v,e),En);N||(T=(V=S.getState()).onError)==null||T.call(V,"010",Mo.error010());const B=D=>{const{defaultEdgeOptions:P,onConnect:q,hasDefaultEdges:M}=S.getState(),W={...P,...D};if(M){const{edges:X,setEdges:Q}=S.getState();Q(EY(W,X))}q==null||q(W),a==null||a(W)},H=D=>{if(!N)return;const P=vY(D.nativeEvent);if(s&&(P&&D.button===0||!P)){const q=S.getState();kj.onPointerDown(D.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:x,handleId:v,nodeId:N,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:B,isValidConnection:n||q.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed})}P?f==null||f(D):h==null||h(D)},I=D=>{const{onClickConnectStart:P,onClickConnectEnd:q,connectionClickStartHandle:M,connectionMode:W,isValidConnection:X,lib:Q,rfId:oe,nodeLookup:ae,connection:fe}=S.getState();if(!N||!M&&!s)return;if(!M){P==null||P(D.nativeEvent,{nodeId:N,handleId:v,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:N,type:e,id:v}});return}const le=bY(D.target),ue=n||X,{connection:ve,isValid:_e}=kj.isValid(D.nativeEvent,{handle:{nodeId:N,id:v,type:e},connectionMode:W,fromNodeId:M.nodeId,fromHandleId:M.id||null,fromType:M.type,isValidConnection:ue,flowId:oe,doc:le,lib:Q,nodeLookup:ae});_e&&ve&&B(ve);const ke=structuredClone(fe);delete ke.inProgress,ke.toPosition=ke.toHandle?ke.toHandle.position:null,q==null||q(D,ke),S.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":v,"data-nodeid":N,"data-handlepos":t,"data-id":`${j}-${N}-${v}-${e}`,className:qn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!x,target:x,connectable:r,connectablestart:s,connectableend:i,clickconnecting:k,connectingfrom:A,connectingto:$,valid:L,connectionindicator:r&&(!F||R)&&(F||z?i:s)}]),onMouseDown:H,onTouchStart:H,onClick:_?I:void 0,ref:y,...p,children:c})}const gy=w.memo(UY(AIe));function TIe({data:e,isConnectable:t,sourcePosition:n=st.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(gy,{type:"source",position:n,isConnectable:t})]})}function $Ie({data:e,isConnectable:t,targetPosition:n=st.Top,sourcePosition:r=st.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(gy,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(gy,{type:"source",position:r,isConnectable:t})]})}function RIe(){return null}function kIe({data:e,isConnectable:t,targetPosition:n=st.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(gy,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Nw={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},a8={input:TIe,default:$Ie,output:kIe,group:RIe};function MIe(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const IIe=e=>{const{width:t,height:n,x:r,y:s}=b0(e.nodeLookup,{filter:i=>!!i.selected});return{width:qi(t)?t:null,height:qi(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function PIe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=bn(),{width:s,height:i,transformString:o,userSelectionActive:a}=kt(IIe,En),c=WY(),u=w.useRef(null);if(w.useEffect(()=>{var p;n||(p=u.current)==null||p.focus({preventScroll:!0})},[n]),HY({nodeRef:u}),a||!s||!i)return null;const f=e?p=>{const y=r.getState().nodes.filter(v=>v.selected);e(p,y)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(Nw,p.key)&&(p.preventDefault(),c({direction:Nw[p.key],factor:p.shiftKey?4:1}))};return m.jsx("div",{className:qn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:i}})})}const l8=typeof window<"u"?window:void 0,DIe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function YY({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:S,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:j,panOnScrollSpeed:A,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:R,defaultViewport:F,translateExtent:z,minZoom:L,maxZoom:B,preventScrolling:H,onSelectionContextMenu:I,noWheelClassName:V,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:P,isControlledViewport:q}){const{nodesSelectionActive:M,userSelectionActive:W}=kt(DIe),X=py(u,{target:l8}),Q=py(x,{target:l8}),oe=Q||R,ae=Q||j,fe=f&&oe!==!0,le=X||W||fe;return yIe({deleteKeyCode:c,multiSelectionKeyCode:v}),m.jsx(xIe,{onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:ae,panOnScrollSpeed:A,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:!X&&oe,defaultViewport:F,translateExtent:z,minZoom:L,maxZoom:B,zoomActivationKeyCode:S,preventScrolling:H,noWheelClassName:V,noPanClassName:T,onViewportChange:P,isControlledViewport:q,paneClickDistance:a,children:m.jsxs(NIe,{onSelectionStart:p,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:oe,isSelecting:!!le,selectionMode:h,selectionKeyPressed:X,selectionOnDrag:fe,children:[e,M&&m.jsx(PIe,{onSelectionContextMenu:I,noPanClassName:T,disableKeyboardA11y:D})]})})}YY.displayName="FlowRenderer";const LIe=w.memo(YY),FIe=e=>t=>e?uY(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function BIe(e){return kt(w.useCallback(FIe(e),[e]),En)}const zIe=e=>e.updateNodeInternals;function VIe(){const e=kt(zIe),[t]=w.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const i=s.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:s.target,force:!0})}),e(r)}));return w.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function UIe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=bn(),i=w.useRef(null),o=w.useRef(null),a=w.useRef(e.sourcePosition),c=w.useRef(e.targetPosition),u=w.useRef(t),f=n&&!!e.internals.handleBounds;return w.useEffect(()=>{i.current&&!e.hidden&&(!f||o.current!==i.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(i.current),o.current=i.current)},[f,e.hidden]),w.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),w.useEffect(()=>{if(i.current){const h=u.current!==t,p=a.current!==e.sourcePosition,y=c.current!==e.targetPosition;(h||p||y)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function qIe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:i,onDoubleClick:o,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:f,resizeObserver:h,noDragClassName:p,noPanClassName:y,disableKeyboardA11y:v,rfId:x,nodeTypes:S,nodeClickDistance:N,onError:_}){const{node:C,internals:j,isParent:A}=kt(le=>{const ue=le.nodeLookup.get(e),ve=le.parentLookup.has(e);return{node:ue,internals:ue.internals,isParent:ve}},En);let $=C.type||"default",k=(S==null?void 0:S[$])||a8[$];k===void 0&&(_==null||_("003",Mo.error003($)),$="default",k=a8.default);const R=!!(C.draggable||a&&typeof C.draggable>"u"),F=!!(C.selectable||c&&typeof C.selectable>"u"),z=!!(C.connectable||u&&typeof C.connectable>"u"),L=!!(C.focusable||f&&typeof C.focusable>"u"),B=bn(),H=gY(C),I=UIe({node:C,nodeType:$,hasDimensions:H,resizeObserver:h}),V=HY({nodeRef:I,disabled:C.hidden||!R,noDragClassName:p,handleSelector:C.dragHandle,nodeId:e,isSelectable:F,nodeClickDistance:N}),T=WY();if(C.hidden)return null;const D=il(C),P=MIe(C),q=F||R||t||n||r||s,M=n?le=>n(le,{...j.userNode}):void 0,W=r?le=>r(le,{...j.userNode}):void 0,X=s?le=>s(le,{...j.userNode}):void 0,Q=i?le=>i(le,{...j.userNode}):void 0,oe=o?le=>o(le,{...j.userNode}):void 0,ae=le=>{const{selectNodesOnDrag:ue,nodeDragThreshold:ve}=B.getState();F&&(!ue||!R||ve>0)&&Mj({id:e,store:B,nodeRef:I}),t&&t(le,{...j.userNode})},fe=le=>{if(!(Aj(le.nativeEvent)||v))if(oY.includes(le.key)&&F){const ue=le.key==="Escape";Mj({id:e,store:B,unselect:ue,nodeRef:I})}else R&&C.selected&&Object.prototype.hasOwnProperty.call(Nw,le.key)&&(le.preventDefault(),B.setState({ariaLiveMessage:`Moved selected node ${le.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),T({direction:Nw[le.key],factor:le.shiftKey?4:1}))};return m.jsx("div",{className:qn(["react-flow__node",`react-flow__node-${$}`,{[y]:R},C.className,{selected:C.selected,selectable:F,parent:A,draggable:R,dragging:V}]),ref:I,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:H?"visible":"hidden",...C.style,...P},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:M,onMouseMove:W,onMouseLeave:X,onContextMenu:Q,onClick:ae,onDoubleClick:oe,onKeyDown:L?fe:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":v?void 0:`${DY}-${x}`,"aria-label":C.ariaLabel,children:m.jsx(CIe,{value:e,children:m.jsx(k,{id:e,data:C.data,type:$,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:C.selected??!1,selectable:F,draggable:R,deletable:C.deletable??!0,isConnectable:z,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:V,dragHandle:C.dragHandle,zIndex:j.z,parentId:C.parentId,...D})})})}const HIe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function JY(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:i}=kt(HIe,En),o=BIe(e.onlyRenderVisibleElements),a=VIe();return m.jsx("div",{className:"react-flow__nodes",style:zS,children:o.map(c=>m.jsx(qIe,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}JY.displayName="NodeRenderer";const WIe=w.memo(JY);function GIe(e){return kt(w.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const i=n.nodeLookup.get(s.source),o=n.nodeLookup.get(s.target);i&&o&&n6e({sourceNode:i,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),En)}const YIe=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),JIe=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),c8={[cd.Arrow]:YIe,[cd.ArrowClosed]:JIe};function XIe(e){const t=bn();return w.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(c8,e)?c8[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",Mo.error009(e)),null)},[e])}const KIe=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=XIe(t);return c?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:m.jsx(c,{color:n,strokeWidth:o})}):null},XY=({defaultColor:e,rfId:t})=>{const n=kt(i=>i.edges),r=kt(i=>i.defaultEdgeOptions),s=w.useMemo(()=>c6e(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?m.jsx("svg",{className:"react-flow__marker",children:m.jsx("defs",{children:s.map(i=>m.jsx(KIe,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};XY.displayName="MarkerDefinitions";var QIe=w.memo(XY);function KY({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...f}){const[h,p]=w.useState({x:1,y:0,width:0,height:0}),y=qn(["react-flow__edge-textwrapper",u]),v=w.useRef(null);return w.useEffect(()=>{if(v.current){const x=v.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:m.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...f,children:[s&&m.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:v,style:r,children:n}),c]})}KY.displayName="EdgeText";const ZIe=w.memo(KY);function VS({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...f}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...f,d:e,fill:"none",className:qn(["react-flow__edge-path",f.className])}),u&&m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&qi(t)&&qi(n)?m.jsx(ZIe,{x:t,y:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function u8({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===st.Left||e===st.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function QY({sourceX:e,sourceY:t,sourcePosition:n=st.Bottom,targetX:r,targetY:s,targetPosition:i=st.Top}){const[o,a]=u8({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=u8({pos:i,x1:r,y1:s,x2:e,y2:t}),[f,h,p,y]=xY({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${r},${s}`,f,h,p,y]}function ZY(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o=st.Bottom,targetPosition:a=st.Top,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:S,interactionWidth:N})=>{const[_,C,j]=QY({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:a}),A=e.isInternal?void 0:t;return m.jsx(VS,{id:A,path:_,labelX:C,labelY:j,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:S,interactionWidth:N})})}const ePe=ZY({isInternal:!1}),eJ=ZY({isInternal:!0});ePe.displayName="SimpleBezierEdge";eJ.displayName="SimpleBezierEdgeInternal";function tJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:y=st.Bottom,targetPosition:v=st.Top,markerEnd:x,markerStart:S,pathOptions:N,interactionWidth:_})=>{const[C,j,A]=Tj({sourceX:n,sourceY:r,sourcePosition:y,targetX:s,targetY:i,targetPosition:v,borderRadius:N==null?void 0:N.borderRadius,offset:N==null?void 0:N.offset}),$=e.isInternal?void 0:t;return m.jsx(VS,{id:$,path:C,labelX:j,labelY:A,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:x,markerStart:S,interactionWidth:_})})}const nJ=tJ({isInternal:!1}),rJ=tJ({isInternal:!0});nJ.displayName="SmoothStepEdge";rJ.displayName="SmoothStepEdgeInternal";function sJ(e){return w.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return m.jsx(nJ,{...n,id:r,pathOptions:w.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const tPe=sJ({isInternal:!1}),iJ=sJ({isInternal:!0});tPe.displayName="StepEdge";iJ.displayName="StepEdgeInternal";function oJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:v,interactionWidth:x})=>{const[S,N,_]=NY({sourceX:n,sourceY:r,targetX:s,targetY:i}),C=e.isInternal?void 0:t;return m.jsx(VS,{id:C,path:S,labelX:N,labelY:_,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:v,interactionWidth:x})})}const nPe=oJ({isInternal:!1}),aJ=oJ({isInternal:!0});nPe.displayName="StraightEdge";aJ.displayName="StraightEdgeInternal";function lJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o=st.Bottom,targetPosition:a=st.Top,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:S,pathOptions:N,interactionWidth:_})=>{const[C,j,A]=wY({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:a,curvature:N==null?void 0:N.curvature}),$=e.isInternal?void 0:t;return m.jsx(VS,{id:$,path:C,labelX:j,labelY:A,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:S,interactionWidth:_})})}const rPe=lJ({isInternal:!1}),cJ=lJ({isInternal:!0});rPe.displayName="BezierEdge";cJ.displayName="BezierEdgeInternal";const d8={default:cJ,straight:aJ,step:iJ,smoothstep:rJ,simplebezier:eJ},f8={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},sPe=(e,t,n)=>n===st.Left?e-t:n===st.Right?e+t:e,iPe=(e,t,n)=>n===st.Top?e-t:n===st.Bottom?e+t:e,h8="react-flow__edgeupdater";function m8({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:qn([h8,`${h8}-${a}`]),cx:sPe(t,r,e),cy:iPe(n,r,e),r,stroke:"transparent",fill:"transparent"})}function oPe({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:i,targetY:o,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:f,onReconnectEnd:h,setReconnecting:p,setUpdateHover:y}){const v=bn(),x=(j,A)=>{if(j.button!==0)return;const{autoPanOnConnect:$,domNode:k,isValidConnection:R,connectionMode:F,connectionRadius:z,lib:L,onConnectStart:B,onConnectEnd:H,cancelConnection:I,nodeLookup:V,rfId:T,panBy:D,updateConnection:P}=v.getState(),q=A.type==="target";p(!0),f==null||f(j,n,A.type);const M=(X,Q)=>{p(!1),h==null||h(X,n,A.type,Q)},W=X=>u==null?void 0:u(n,X);kj.onPointerDown(j.nativeEvent,{autoPanOnConnect:$,connectionMode:F,connectionRadius:z,domNode:k,handleId:A.id,nodeId:A.nodeId,nodeLookup:V,isTarget:q,edgeUpdaterType:A.type,lib:L,flowId:T,cancelConnection:I,panBy:D,isValidConnection:R,onConnect:W,onConnectStart:B,onConnectEnd:H,onReconnectEnd:M,updateConnection:P,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},S=j=>x(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),N=j=>x(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>y(!0),C=()=>y(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(m8,{position:a,centerX:r,centerY:s,radius:t,onMouseDown:S,onMouseEnter:_,onMouseOut:C,type:"source"}),(e===!0||e==="target")&&m.jsx(m8,{position:c,centerX:i,centerY:o,radius:t,onMouseDown:N,onMouseEnter:_,onMouseOut:C,type:"target"})]})}function aPe({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:i,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,rfId:v,edgeTypes:x,noPanClassName:S,onError:N,disableKeyboardA11y:_}){let C=kt(Oe=>Oe.edgeLookup.get(e));const j=kt(Oe=>Oe.defaultEdgeOptions);C=j?{...j,...C}:C;let A=C.type||"default",$=(x==null?void 0:x[A])||d8[A];$===void 0&&(N==null||N("011",Mo.error011(A)),A="default",$=d8.default);const k=!!(C.focusable||t&&typeof C.focusable>"u"),R=typeof h<"u"&&(C.reconnectable||n&&typeof C.reconnectable>"u"),F=!!(C.selectable||r&&typeof C.selectable>"u"),z=w.useRef(null),[L,B]=w.useState(!1),[H,I]=w.useState(!1),V=bn(),{zIndex:T,sourceX:D,sourceY:P,targetX:q,targetY:M,sourcePosition:W,targetPosition:X}=kt(w.useCallback(Oe=>{const $e=Oe.nodeLookup.get(C.source),Re=Oe.nodeLookup.get(C.target);if(!$e||!Re)return{zIndex:C.zIndex,...f8};const qe=l6e({id:e,sourceNode:$e,targetNode:Re,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:Oe.connectionMode,onError:N});return{zIndex:t6e({selected:C.selected,zIndex:C.zIndex,sourceNode:$e,targetNode:Re,elevateOnSelect:Oe.elevateEdgesOnSelect}),...qe||f8}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),En),Q=w.useMemo(()=>C.markerStart?`url('#${$j(C.markerStart,v)}')`:void 0,[C.markerStart,v]),oe=w.useMemo(()=>C.markerEnd?`url('#${$j(C.markerEnd,v)}')`:void 0,[C.markerEnd,v]);if(C.hidden||D===null||P===null||q===null||M===null)return null;const ae=Oe=>{var et;const{addSelectedEdges:$e,unselectNodesAndEdges:Re,multiSelectionActive:qe}=V.getState();F&&(V.setState({nodesSelectionActive:!1}),C.selected&&qe?(Re({nodes:[],edges:[C]}),(et=z.current)==null||et.blur()):$e([e])),s&&s(Oe,C)},fe=i?Oe=>{i(Oe,{...C})}:void 0,le=o?Oe=>{o(Oe,{...C})}:void 0,ue=a?Oe=>{a(Oe,{...C})}:void 0,ve=c?Oe=>{c(Oe,{...C})}:void 0,_e=u?Oe=>{u(Oe,{...C})}:void 0,ke=Oe=>{var $e;if(!_&&oY.includes(Oe.key)&&F){const{unselectNodesAndEdges:Re,addSelectedEdges:qe}=V.getState();Oe.key==="Escape"?(($e=z.current)==null||$e.blur(),Re({edges:[C]})):qe([e])}};return m.jsx("svg",{style:{zIndex:T},children:m.jsxs("g",{className:qn(["react-flow__edge",`react-flow__edge-${A}`,C.className,S,{selected:C.selected,animated:C.animated,inactive:!F&&!s,updating:L,selectable:F}]),onClick:ae,onDoubleClick:fe,onContextMenu:le,onMouseEnter:ue,onMouseMove:ve,onMouseLeave:_e,onKeyDown:k?ke:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":k?`${LY}-${v}`:void 0,ref:z,children:[!H&&m.jsx($,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:F,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:D,sourceY:P,targetX:q,targetY:M,sourcePosition:W,targetPosition:X,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Q,markerEnd:oe,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),R&&m.jsx(oPe,{edge:C,isReconnectable:R,reconnectRadius:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,sourceX:D,sourceY:P,targetX:q,targetY:M,sourcePosition:W,targetPosition:X,setUpdateHover:B,setReconnecting:I})]})})}const lPe=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function uJ({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:f,reconnectRadius:h,onEdgeDoubleClick:p,onReconnectStart:y,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:S,edgesReconnectable:N,elementsSelectable:_,onError:C}=kt(lPe,En),j=GIe(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(QIe,{defaultColor:e,rfId:n}),j.map(A=>m.jsx(aPe,{id:A,edgesFocusable:S,edgesReconnectable:N,elementsSelectable:_,noPanClassName:s,onReconnect:i,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:f,reconnectRadius:h,onDoubleClick:p,onReconnectStart:y,onReconnectEnd:v,rfId:n,onError:C,edgeTypes:r,disableKeyboardA11y:x},A))]})}uJ.displayName="EdgeRenderer";const cPe=w.memo(uJ),uPe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function dPe({children:e}){const t=kt(uPe);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function fPe(e){const t=Nm(),n=w.useRef(!1);w.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const hPe=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function mPe(e){const t=kt(hPe),n=bn();return w.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function pPe(e){return e.connection.inProgress?{...e.connection,to:v0(e.connection.to,e.transform)}:{...e.connection}}function gPe(e){return pPe}function yPe(e){const t=gPe();return kt(t,En)}const bPe=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function vPe({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:i,height:o,isValid:a,inProgress:c}=kt(bPe,En);return!(i&&s&&c)?null:m.jsx("svg",{style:e,width:i,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:qn(["react-flow__connection",lY(a)]),children:m.jsx(dJ,{style:t,type:n,CustomComponent:r,isValid:a})})})}const dJ=({style:e,type:t=Ql.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:i,fromNode:o,fromHandle:a,fromPosition:c,to:u,toNode:f,toHandle:h,toPosition:p}=yPe();if(!s)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:p,connectionStatus:lY(r),toNode:f,toHandle:h});let y="";const v={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:p};switch(t){case Ql.Bezier:[y]=wY(v);break;case Ql.SimpleBezier:[y]=QY(v);break;case Ql.Step:[y]=Tj({...v,borderRadius:0});break;case Ql.SmoothStep:[y]=Tj(v);break;default:[y]=NY(v)}return m.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};dJ.displayName="ConnectionLine";const xPe={};function p8(e=xPe){w.useRef(e),bn(),w.useEffect(()=>{},[e])}function wPe(){bn(),w.useRef(!1),w.useEffect(()=>{},[])}function fJ({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:i,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,onSelectionContextMenu:h,onSelectionStart:p,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:S,connectionLineContainerStyle:N,selectionKeyCode:_,selectionOnDrag:C,selectionMode:j,multiSelectionKeyCode:A,panActivationKeyCode:$,zoomActivationKeyCode:k,deleteKeyCode:R,onlyRenderVisibleElements:F,elementsSelectable:z,defaultViewport:L,translateExtent:B,minZoom:H,maxZoom:I,preventScrolling:V,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:P,panOnScroll:q,panOnScrollSpeed:M,panOnScrollMode:W,zoomOnDoubleClick:X,panOnDrag:Q,onPaneClick:oe,onPaneMouseEnter:ae,onPaneMouseMove:fe,onPaneMouseLeave:le,onPaneScroll:ue,onPaneContextMenu:ve,paneClickDistance:_e,nodeClickDistance:ke,onEdgeContextMenu:Oe,onEdgeMouseEnter:$e,onEdgeMouseMove:Re,onEdgeMouseLeave:qe,reconnectRadius:et,onReconnect:Ce,onReconnectStart:Me,onReconnectEnd:Ie,noDragClassName:G,noWheelClassName:re,noPanClassName:te,disableKeyboardA11y:he,nodeExtent:se,rfId:ne,viewport:ce,onViewportChange:xe}){return p8(e),p8(t),wPe(),fPe(n),mPe(ce),m.jsx(LIe,{onPaneClick:oe,onPaneMouseEnter:ae,onPaneMouseMove:fe,onPaneMouseLeave:le,onPaneContextMenu:ve,onPaneScroll:ue,paneClickDistance:_e,deleteKeyCode:R,selectionKeyCode:_,selectionOnDrag:C,selectionMode:j,onSelectionStart:p,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:$,zoomActivationKeyCode:k,elementsSelectable:z,zoomOnScroll:D,zoomOnPinch:P,zoomOnDoubleClick:X,panOnScroll:q,panOnScrollSpeed:M,panOnScrollMode:W,panOnDrag:Q,defaultViewport:L,translateExtent:B,minZoom:H,maxZoom:I,onSelectionContextMenu:h,preventScrolling:V,noDragClassName:G,noWheelClassName:re,noPanClassName:te,disableKeyboardA11y:he,onViewportChange:xe,isControlledViewport:!!ce,children:m.jsxs(dPe,{children:[m.jsx(cPe,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:o,onReconnect:Ce,onReconnectStart:Me,onReconnectEnd:Ie,onlyRenderVisibleElements:F,onEdgeContextMenu:Oe,onEdgeMouseEnter:$e,onEdgeMouseMove:Re,onEdgeMouseLeave:qe,reconnectRadius:et,defaultMarkerColor:T,noPanClassName:te,disableKeyboardA11y:he,rfId:ne}),m.jsx(vPe,{style:x,type:v,component:S,containerStyle:N}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(WIe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,nodeClickDistance:ke,onlyRenderVisibleElements:F,noPanClassName:te,noDragClassName:G,disableKeyboardA11y:he,nodeExtent:se,rfId:ne}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}fJ.displayName="GraphView";const SPe=w.memo(fJ),g8=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c}={})=>{const u=new Map,f=new Map,h=new Map,p=new Map,y=r??t??[],v=n??e??[],x=a??[0,0],S=c??dy;CY(h,p,y),Rj(v,u,f,{nodeOrigin:x,nodeExtent:S,elevateNodesOnSelect:!1});let N=[0,0,1];if(o&&s&&i){const _=b0(u,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:C,y:j,zoom:A}=D3(_,s,i,.5,2,.1);N=[C,j,A]}return{rfId:"1",width:0,height:0,transform:N,nodes:v,nodeLookup:u,parentLookup:f,edges:y,edgeLookup:p,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:dy,nodeExtent:S,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...aY},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:ZMe,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},EPe=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c})=>V6e((u,f)=>({...g8({nodes:e,edges:t,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:p,parentLookup:y,nodeOrigin:v,elevateNodesOnSelect:x}=f();Rj(h,p,y,{nodeOrigin:v,nodeExtent:c,elevateNodesOnSelect:x,checkEquality:!0}),u({nodes:h})},setEdges:h=>{const{connectionLookup:p,edgeLookup:y}=f();CY(p,y,h),u({edges:h})},setDefaultNodesAndEdges:(h,p)=>{if(h){const{setNodes:y}=f();y(h),u({hasDefaultNodes:!0})}if(p){const{setEdges:y}=f();y(p),u({hasDefaultEdges:!0})}},updateNodeInternals:(h,p={triggerFitView:!0})=>{const{triggerNodeChanges:y,nodeLookup:v,parentLookup:x,fitViewOnInit:S,fitViewDone:N,fitViewOnInitOptions:_,domNode:C,nodeOrigin:j,nodeExtent:A,debug:$,fitViewSync:k}=f(),{changes:R,updatedInternals:F}=m6e(h,v,x,C,j,A);if(F){if(d6e(v,x,{nodeOrigin:j,nodeExtent:A}),p.triggerFitView){let z=N;!N&&S&&(z=k({..._,nodes:_==null?void 0:_.nodes})),u({fitViewDone:z})}else u({});(R==null?void 0:R.length)>0&&($&&console.log("React Flow: trigger node changes",R),y==null||y(R))}},updateNodePositions:(h,p=!1)=>{const y=[],v=[],{nodeLookup:x,triggerNodeChanges:S}=f();for(const[N,_]of h){const C=x.get(N),j=!!(C!=null&&C.expandParent&&(C!=null&&C.parentId)&&(_!=null&&_.position)),A={id:N,type:"position",position:j?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:p};j&&C.parentId&&y.push({id:N,parentId:C.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),v.push(A)}if(y.length>0){const{parentLookup:N,nodeOrigin:_}=f(),C=z3(y,x,N,_);v.push(...C)}S(v)},triggerNodeChanges:h=>{const{onNodesChange:p,setNodes:y,nodes:v,hasDefaultNodes:x,debug:S}=f();if(h!=null&&h.length){if(x){const N=zY(h,v);y(N)}S&&console.log("React Flow: trigger node changes",h),p==null||p(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:p,setEdges:y,edges:v,hasDefaultEdges:x,debug:S}=f();if(h!=null&&h.length){if(x){const N=VY(h,v);y(N)}S&&console.log("React Flow: trigger edge changes",h),p==null||p(h)}},addSelectedNodes:h=>{const{multiSelectionActive:p,edgeLookup:y,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:S}=f();if(p){const N=h.map(_=>wu(_,!0));x(N);return}x(qf(v,new Set([...h]),!0)),S(qf(y))},addSelectedEdges:h=>{const{multiSelectionActive:p,edgeLookup:y,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:S}=f();if(p){const N=h.map(_=>wu(_,!0));S(N);return}S(qf(y,new Set([...h]))),x(qf(v,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:p}={})=>{const{edges:y,nodes:v,nodeLookup:x,triggerNodeChanges:S,triggerEdgeChanges:N}=f(),_=h||v,C=p||y,j=_.map($=>{const k=x.get($.id);return k&&(k.selected=!1),wu($.id,!1)}),A=C.map($=>wu($.id,!1));S(j),N(A)},setMinZoom:h=>{const{panZoom:p,maxZoom:y}=f();p==null||p.setScaleExtent([h,y]),u({minZoom:h})},setMaxZoom:h=>{const{panZoom:p,minZoom:y}=f();p==null||p.setScaleExtent([y,h]),u({maxZoom:h})},setTranslateExtent:h=>{var p;(p=f().panZoom)==null||p.setTranslateExtent(h),u({translateExtent:h})},setPaneClickDistance:h=>{var p;(p=f().panZoom)==null||p.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:p,triggerNodeChanges:y,triggerEdgeChanges:v}=f(),x=p.reduce((N,_)=>_.selected?[...N,wu(_.id,!1)]:N,[]),S=h.reduce((N,_)=>_.selected?[...N,wu(_.id,!1)]:N,[]);y(x),v(S)},setNodeExtent:h=>{const{nodes:p,nodeLookup:y,parentLookup:v,nodeOrigin:x,elevateNodesOnSelect:S,nodeExtent:N}=f();h[0][0]===N[0][0]&&h[0][1]===N[0][1]&&h[1][0]===N[1][0]&&h[1][1]===N[1][1]||(Rj(p,y,v,{nodeOrigin:x,nodeExtent:h,elevateNodesOnSelect:S,checkEquality:!1}),u({nodeExtent:h}))},panBy:h=>{const{transform:p,width:y,height:v,panZoom:x,translateExtent:S}=f();return p6e({delta:h,panZoom:x,transform:p,translateExtent:S,width:y,height:v})},fitView:h=>{const{panZoom:p,width:y,height:v,minZoom:x,maxZoom:S,nodeLookup:N}=f();if(!p)return Promise.resolve(!1);const _=Cj(N,h);return Oj({nodes:_,width:y,height:v,panZoom:p,minZoom:x,maxZoom:S},h)},fitViewSync:h=>{const{panZoom:p,width:y,height:v,minZoom:x,maxZoom:S,nodeLookup:N}=f();if(!p)return!1;const _=Cj(N,h);return Oj({nodes:_,width:y,height:v,panZoom:p,minZoom:x,maxZoom:S},h),_.size>0},cancelConnection:()=>{u({connection:{...aY}})},updateConnection:h=>{u({connection:h})},reset:()=>u({...g8()})}),Object.is);function hJ({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:i,fitView:o,nodeOrigin:a,nodeExtent:c,children:u}){const[f]=w.useState(()=>EPe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c}));return m.jsx(U6e,{value:f,children:m.jsx(fIe,{children:u})})}function NPe({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:i,height:o,fitView:a,nodeOrigin:c,nodeExtent:u}){return w.useContext(BS)?m.jsx(m.Fragment,{children:e}):m.jsx(hJ,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:i,initialHeight:o,fitView:a,nodeOrigin:c,nodeExtent:u,children:e})}const _Pe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function CPe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i,edgeTypes:o,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:f,onMoveStart:h,onMoveEnd:p,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:N,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:$,onNodeDragStart:k,onNodeDrag:R,onNodeDragStop:F,onNodesDelete:z,onEdgesDelete:L,onDelete:B,onSelectionChange:H,onSelectionDragStart:I,onSelectionDrag:V,onSelectionDragStop:T,onSelectionContextMenu:D,onSelectionStart:P,onSelectionEnd:q,onBeforeDelete:M,connectionMode:W,connectionLineType:X=Ql.Bezier,connectionLineStyle:Q,connectionLineComponent:oe,connectionLineContainerStyle:ae,deleteKeyCode:fe="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:ue=!1,selectionMode:ve=fy.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:ke=Ew()?"Meta":"Control",zoomActivationKeyCode:Oe=Ew()?"Meta":"Control",snapToGrid:$e,snapGrid:Re,onlyRenderVisibleElements:qe=!1,selectNodesOnDrag:et,nodesDraggable:Ce,nodesConnectable:Me,nodesFocusable:Ie,nodeOrigin:G=FY,edgesFocusable:re,edgesReconnectable:te,elementsSelectable:he=!0,defaultViewport:se=nIe,minZoom:ne=.5,maxZoom:ce=2,translateExtent:xe=dy,preventScrolling:Ee=!0,nodeExtent:We,defaultMarkerColor:Vt="#b1b1b7",zoomOnScroll:wt=!0,zoomOnPinch:io=!0,panOnScroll:Ut=!1,panOnScrollSpeed:hn=.5,panOnScrollMode:ur=Yu.Free,zoomOnDoubleClick:xi=!0,panOnDrag:Bs=!0,onPaneClick:oo,onPaneMouseEnter:qc,onPaneMouseMove:Ad,onPaneMouseLeave:ol,onPaneScroll:zo,onPaneContextMenu:zs,paneClickDistance:Hc=0,nodeClickDistance:_m=0,children:Wc,onReconnect:Gc,onReconnectStart:mn,onReconnectEnd:wi,onEdgeContextMenu:er,onEdgeDoubleClick:an,onEdgeMouseEnter:Ln,onEdgeMouseMove:Si,onEdgeMouseLeave:al,reconnectRadius:Td=10,onNodesChange:Cm,onEdgesChange:$d,noDragClassName:Vo="nodrag",noWheelClassName:Yc="nowheel",noPanClassName:ht="nopan",fitView:Tn,fitViewOptions:br,connectOnClick:Uo,attributionPosition:Fn,proOptions:w0,defaultEdgeOptions:S0,elevateNodesOnSelect:qo,elevateEdgesOnSelect:ll,disableKeyboardA11y:E0=!1,autoPanOnConnect:N0,autoPanOnNodeDrag:_0,autoPanSpeed:US,connectionRadius:Rd,isValidConnection:kd,onError:Ei,style:Om,id:jm,nodeDragThreshold:cl,viewport:Am,onViewportChange:Tm,width:qS,height:C0,colorMode:Gr="light",debug:O0,onScroll:Md,...Id},j0){const ul=jm||"1",HS=oIe(Gr),Yr=w.useCallback(Pd=>{Pd.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Md==null||Md(Pd)},[Md]);return m.jsx("div",{"data-testid":"rf__wrapper",...Id,onScroll:Yr,style:{...Om,..._Pe},ref:j0,className:qn(["react-flow",s,HS]),id:jm,children:m.jsxs(NPe,{nodes:e,edges:t,width:qS,height:C0,fitView:Tn,nodeOrigin:G,nodeExtent:We,children:[m.jsx(SPe,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:$,nodeTypes:i,edgeTypes:o,connectionLineType:X,connectionLineStyle:Q,connectionLineComponent:oe,connectionLineContainerStyle:ae,selectionKeyCode:le,selectionOnDrag:ue,selectionMode:ve,deleteKeyCode:fe,multiSelectionKeyCode:ke,panActivationKeyCode:_e,zoomActivationKeyCode:Oe,onlyRenderVisibleElements:qe,defaultViewport:se,translateExtent:xe,minZoom:ne,maxZoom:ce,preventScrolling:Ee,zoomOnScroll:wt,zoomOnPinch:io,zoomOnDoubleClick:xi,panOnScroll:Ut,panOnScrollSpeed:hn,panOnScrollMode:ur,panOnDrag:Bs,onPaneClick:oo,onPaneMouseEnter:qc,onPaneMouseMove:Ad,onPaneMouseLeave:ol,onPaneScroll:zo,onPaneContextMenu:zs,paneClickDistance:Hc,nodeClickDistance:_m,onSelectionContextMenu:D,onSelectionStart:P,onSelectionEnd:q,onReconnect:Gc,onReconnectStart:mn,onReconnectEnd:wi,onEdgeContextMenu:er,onEdgeDoubleClick:an,onEdgeMouseEnter:Ln,onEdgeMouseMove:Si,onEdgeMouseLeave:al,reconnectRadius:Td,defaultMarkerColor:Vt,noDragClassName:Vo,noWheelClassName:Yc,noPanClassName:ht,rfId:ul,disableKeyboardA11y:E0,nodeExtent:We,viewport:Am,onViewportChange:Tm}),m.jsx(iIe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:N,nodesDraggable:Ce,nodesConnectable:Me,nodesFocusable:Ie,edgesFocusable:re,edgesReconnectable:te,elementsSelectable:he,elevateNodesOnSelect:qo,elevateEdgesOnSelect:ll,minZoom:ne,maxZoom:ce,nodeExtent:We,onNodesChange:Cm,onEdgesChange:$d,snapToGrid:$e,snapGrid:Re,connectionMode:W,translateExtent:xe,connectOnClick:Uo,defaultEdgeOptions:S0,fitView:Tn,fitViewOptions:br,onNodesDelete:z,onEdgesDelete:L,onDelete:B,onNodeDragStart:k,onNodeDrag:R,onNodeDragStop:F,onSelectionDrag:V,onSelectionDragStart:I,onSelectionDragStop:T,onMove:f,onMoveStart:h,onMoveEnd:p,noPanClassName:ht,nodeOrigin:G,rfId:ul,autoPanOnConnect:N0,autoPanOnNodeDrag:_0,autoPanSpeed:US,onError:Ei,connectionRadius:Rd,isValidConnection:kd,selectNodesOnDrag:et,nodeDragThreshold:cl,onBeforeDelete:M,paneClickDistance:Hc,debug:O0}),m.jsx(tIe,{onSelectionChange:H}),Wc,m.jsx(X6e,{proOptions:w0,position:Fn}),m.jsx(Y6e,{rfId:ul,disableKeyboardA11y:E0})]})})}var OPe=UY(CPe);const jPe=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function APe(){return kt(jPe,En)}function TPe(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>zY(s,i)),[]);return[t,n,r]}function $Pe(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>VY(s,i)),[]);return[t,n,r]}function RPe({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:qn(["react-flow__background-pattern",n,r])})}function kPe({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:qn(["react-flow__background-pattern","dots",t])})}var Pa;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Pa||(Pa={}));const MPe={[Pa.Dots]:1,[Pa.Lines]:1,[Pa.Cross]:6},IPe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function mJ({id:e,variant:t=Pa.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=0,color:o,bgColor:a,style:c,className:u,patternClassName:f}){const h=w.useRef(null),{transform:p,patternId:y}=kt(IPe,En),v=r||MPe[t],x=t===Pa.Dots,S=t===Pa.Cross,N=Array.isArray(n)?n:[n,n],_=[N[0]*p[2]||1,N[1]*p[2]||1],C=v*p[2],j=Array.isArray(i)?i:[i,i],A=S?[C,C]:_,$=[j[0]*p[2]||1+A[0]/2,j[1]*p[2]||1+A[1]/2],k=`${y}${e||""}`;return m.jsxs("svg",{className:qn(["react-flow__background",u]),style:{...c,...zS,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[m.jsx("pattern",{id:k,x:p[0]%_[0],y:p[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`,children:x?m.jsx(kPe,{radius:C/2,className:f}):m.jsx(RPe,{dimensions:A,lineWidth:s,variant:t,className:f})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}mJ.displayName="Background";const y8=w.memo(mJ);function PPe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function DPe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function LPe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function FPe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function BPe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ev({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:qn(["react-flow__controls-button",t]),...n,children:e})}const zPe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function pJ({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:u,children:f,position:h="bottom-left",orientation:p="vertical","aria-label":y="React Flow controls"}){const v=bn(),{isInteractive:x,minZoomReached:S,maxZoomReached:N}=kt(zPe,En),{zoomIn:_,zoomOut:C,fitView:j}=Nm(),A=()=>{_(),i==null||i()},$=()=>{C(),o==null||o()},k=()=>{j(s),a==null||a()},R=()=>{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)},F=p==="horizontal"?"horizontal":"vertical";return m.jsxs(Yh,{className:qn(["react-flow__controls",F,u]),position:h,style:e,"data-testid":"rf__controls","aria-label":y,children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(Ev,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N,children:m.jsx(PPe,{})}),m.jsx(Ev,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S,children:m.jsx(DPe,{})})]}),n&&m.jsx(Ev,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:m.jsx(LPe,{})}),r&&m.jsx(Ev,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity",children:x?m.jsx(BPe,{}):m.jsx(FPe,{})}),f]})}pJ.displayName="Controls";w.memo(pJ);function VPe({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:f,shapeRendering:h,selected:p,onClick:y}){const{background:v,backgroundColor:x}=i||{},S=o||v||x;return m.jsx("rect",{className:qn(["react-flow__minimap-node",{selected:p},u]),x:t,y:n,rx:f,ry:f,width:r,height:s,style:{fill:S,stroke:a,strokeWidth:c},shapeRendering:h,onClick:y?N=>y(N,e):void 0})}const UPe=w.memo(VPe),qPe=e=>e.nodes.map(t=>t.id),rC=e=>e instanceof Function?e:()=>e;function HPe({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:i=UPe,onClick:o}){const a=kt(qPe,En),c=rC(t),u=rC(e),f=rC(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(p=>m.jsx(GPe,{id:p,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:i,onClick:o,shapeRendering:h},p))})}function WPe({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:i,shapeRendering:o,NodeComponent:a,onClick:c}){const{node:u,x:f,y:h,width:p,height:y}=kt(v=>{const x=v.nodeLookup.get(e),{x:S,y:N}=x.internals.positionAbsolute,{width:_,height:C}=il(x);return{node:x,x:S,y:N,width:_,height:C}},En);return!u||u.hidden||!gY(u)?null:m.jsx(a,{x:f,y:h,width:p,height:y,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:s,strokeColor:n(u),strokeWidth:i,shapeRendering:o,onClick:c,id:u.id})}const GPe=w.memo(WPe);var YPe=w.memo(HPe);const JPe=200,XPe=150,KPe=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?mY(b0(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},QPe="react-flow__minimap-desc";function gJ({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:f,maskStrokeWidth:h,position:p="bottom-right",onClick:y,onNodeClick:v,pannable:x=!1,zoomable:S=!1,ariaLabel:N="React Flow mini map",inversePan:_,zoomStep:C=10,offsetScale:j=5}){const A=bn(),$=w.useRef(null),{boundingRect:k,viewBB:R,rfId:F,panZoom:z,translateExtent:L,flowWidth:B,flowHeight:H}=kt(KPe,En),I=(e==null?void 0:e.width)??JPe,V=(e==null?void 0:e.height)??XPe,T=k.width/I,D=k.height/V,P=Math.max(T,D),q=P*I,M=P*V,W=j*P,X=k.x-(q-k.width)/2-W,Q=k.y-(M-k.height)/2-W,oe=q+W*2,ae=M+W*2,fe=`${QPe}-${F}`,le=w.useRef(0),ue=w.useRef();le.current=P,w.useEffect(()=>{if($.current&&z)return ue.current=E6e({domNode:$.current,panZoom:z,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{var ke;(ke=ue.current)==null||ke.destroy()}},[z]),w.useEffect(()=>{var ke;(ke=ue.current)==null||ke.update({translateExtent:L,width:B,height:H,inversePan:_,pannable:x,zoomStep:C,zoomable:S})},[x,S,_,C,L,B,H]);const ve=y?ke=>{var Re;const[Oe,$e]=((Re=ue.current)==null?void 0:Re.pointer(ke))||[0,0];y(ke,{x:Oe,y:$e})}:void 0,_e=v?w.useCallback((ke,Oe)=>{const $e=A.getState().nodeLookup.get(Oe);v(ke,$e)},[]):void 0;return m.jsx(Yh,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*P:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:qn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:I,height:V,viewBox:`${X} ${Q} ${oe} ${ae}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":fe,ref:$,onClick:ve,children:[N&&m.jsx("title",{id:fe,children:N}),m.jsx(YPe,{onClick:_e,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-W},${Q-W}h${oe+W*2}v${ae+W*2}h${-oe-W*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}gJ.displayName="MiniMap";const yJ=w.memo(gJ);function ZPe({nodeId:e,position:t,variant:n=xg.Handle,className:r,style:s={},children:i,color:o,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:p,onResizeStart:y,onResize:v,onResizeEnd:x}){const S=GY(),N=typeof e=="string"?e:S,_=bn(),C=w.useRef(null),j=n===xg.Line?"right":"bottom-right",A=t??j,$=w.useRef(null);w.useEffect(()=>{if(!(!C.current||!N))return $.current||($.current=L6e({domNode:C.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:z,transform:L,snapGrid:B,snapToGrid:H,nodeOrigin:I,domNode:V}=_.getState();return{nodeLookup:z,transform:L,snapGrid:B,snapToGrid:H,nodeOrigin:I,paneDomNode:V}},onChange:(z,L)=>{const{triggerNodeChanges:B,nodeLookup:H,parentLookup:I,nodeOrigin:V}=_.getState(),T=[],D={x:z.x,y:z.y},P=H.get(N);if(P&&P.expandParent&&P.parentId){const q=P.origin??V,M=z.width??P.measured.width??0,W=z.height??P.measured.height??0,X={id:P.id,parentId:P.parentId,rect:{width:M,height:W,...yY({x:z.x??P.position.x,y:z.y??P.position.y},{width:M,height:W},P.parentId,H,q)}},Q=z3([X],H,I,V);T.push(...Q),D.x=z.x?Math.max(q[0]*M,z.x):void 0,D.y=z.y?Math.max(q[1]*W,z.y):void 0}if(D.x!==void 0&&D.y!==void 0){const q={id:N,type:"position",position:{...D}};T.push(q)}if(z.width!==void 0&&z.height!==void 0){const q={id:N,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};T.push(q)}for(const q of L){const M={...q,type:"position"};T.push(M)}B(T)},onEnd:()=>{const z={id:N,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([z])}})),$.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:f},keepAspectRatio:h,onResizeStart:y,onResize:v,onResizeEnd:x,shouldResize:p}),()=>{var z;(z=$.current)==null||z.destroy()}},[A,a,c,u,f,h,y,v,x,p]);const k=A.split("-"),R=n===xg.Line?"borderColor":"backgroundColor",F=o?{...s,[R]:o}:s;return m.jsx("div",{className:qn(["react-flow__resize-control","nodrag",...k,n,r]),ref:C,style:F,children:i})}w.memo(ZPe);function eDe({nodes:e,edges:t,externalProvider:n,backgroundStyle:r="lines",minimap:s=!1,children:i,onDropNewNode:o,onDropNewEdge:a,...c}){const[u,f,h]=TPe(e??[]),[p,y,v]=$Pe(t??[]),{screenToFlowPosition:x}=Nm(),{theme:S}=Fc(),[N,_]=w.useState(!1),[C,j]=w.useState(!1),[A,$]=w.useState(!1),k=H=>{H.metaKey&&_(!0),H.key===" "&&j(!0)},R=H=>{H.metaKey||_(!1),H.key===" "&&j(!1)},F=()=>{if(C){$(!1);return}$(!0)},z=()=>{if(C){$(!1);return}$(!1)};w.useEffect(()=>{var H;return(H=document.querySelector("html"))==null||H.classList.add("fixed"),window.addEventListener("keydown",k),window.addEventListener("keyup",R),window.addEventListener("pointerdown",F),window.addEventListener("pointerup",z),()=>{var I;window.removeEventListener("keydown",k),window.removeEventListener("keyup",R),window.removeEventListener("pointerdown",F),window.removeEventListener("pointerup",z),(I=document.querySelector("html"))==null||I.classList.remove("fixed")}},[]),w.useEffect(()=>{f(e??[]),y(t??[])},[e,t]);const L=w.useCallback(H=>y(I=>EY(H,I)),[]),B=w.useCallback((H,I)=>{if(!o||!a)return;const{fromNode:V,fromHandle:T,fromPosition:D}=I;if(!I.isValid){console.log("conn",{event:H,connectionState:I});const{clientX:P,clientY:q}="changedTouches"in H?H.changedTouches[0]:H,M=o({id:"select",type:"default",data:{label:""},position:x({x:P,y:q}),origin:[0,0]});f(W=>W.concat(M)),y(W=>W.concat(o({id:M.id,source:I.fromNode.id,target:M.id})))}},[x]);return m.jsxs(OPe,{colorMode:S,onConnect:L,onConnectEnd:B,className:N?"cursor-zoom-in":C?A?"cursor-grabbing":"cursor-grab":"",proOptions:{hideAttribution:!0},fitView:!0,fitViewOptions:{maxZoom:1.5,...c.fitViewOptions},nodeDragThreshold:25,panOnScrollSpeed:1,snapToGrid:!0,nodes:u,edges:p,onNodesChange:h,onEdgesChange:v,nodesConnectable:!1,panOnDrag:!0,zoomOnScroll:N,panOnScroll:!N,zoomOnDoubleClick:!1,selectionOnDrag:!C,...c,children:[r==="lines"&&m.jsx(y8,{color:S==="light"?"rgba(0,0,0,.05)":"rgba(255,255,255,.1)",gap:[50,50],variant:Pa.Lines}),r==="dots"&&m.jsx(y8,{color:S==="light"?"rgba(0,0,0,.5)":"rgba(255,255,255,.2)"}),s&&m.jsx(yJ,{...typeof s=="object"?s:{}}),i]})}function Sr({position:e,className:t,children:n,unstyled:r,...s}){return r?m.jsx(Yh,{position:e,className:Ue("flex flex-row p-1 gap-4",t),...s,children:n}):m.jsx(Yh,{position:e,...s,children:m.jsx(bJ,{className:t,children:n})})}const bJ=({children:e,className:t,...n})=>m.jsx("div",{...n,className:Ue("flex flex-row bg-lightest border ring-2 ring-muted/5 border-muted rounded-full items-center p-1",t),children:e}),tDe=({Icon:e,size:t="lg",variant:n="ghost",onClick:r,disabled:s,className:i,round:o,...a})=>m.jsx(Nt,{Icon:e,size:t,variant:n,onClick:r,disabled:s,className:Ue(o?"rounded-full":"",i),...a}),nDe=w.forwardRef(({children:e,className:t,mono:n,...r},s)=>m.jsx("span",{...r,ref:s,className:Ue("text-md font-medium leading-none",n&&"font-mono",t),children:e}));Sr.Wrapper=bJ;Sr.IconButton=tDe;Sr.Text=nDe;function rDe({children:e,...t}){const[n,r]=w.useState(!1),s=Nm(),{zoom:i,x:o,y:a}=APe(),c=Math.round(i*100),u=async()=>await s.zoomIn(),f=async()=>s.zoomTo(1),h=async()=>await s.zoomOut();function p(){r(y=>!y)}return m.jsxs(m.Fragment,{children:[e,t.coordinates&&m.jsx(Sr,{position:"bottom-center",children:m.jsxs(Sr.Text,{className:"px-2",mono:!0,children:[o.toFixed(2),",",a.toFixed(2)]})}),m.jsxs(Sr,{unstyled:!0,position:"bottom-right",children:[t.zoom&&m.jsxs(Sr.Wrapper,{className:"px-1.5",children:[m.jsx(Sr.IconButton,{Icon:Oq,round:!0,onClick:u}),m.jsxs(Sr.Text,{className:"px-2",mono:!0,onClick:f,children:[c,"%"]}),m.jsx(Sr.IconButton,{Icon:SSe,round:!0,onClick:h}),m.jsx(Sr.IconButton,{Icon:xSe,round:!0,onClick:f})]}),t.minimap&&m.jsxs(m.Fragment,{children:[m.jsx(Sr.Wrapper,{children:m.jsx(Sr.IconButton,{Icon:BO,round:!0,onClick:p,variant:n?"default":"ghost"})}),n&&m.jsx(yJ,{style:{bottom:50,right:-5},ariaLabel:null})]})]})]})}function bc({selected:e,children:t,className:n,...r}){return Fc(),m.jsx("div",{...r,className:Ue("relative w-80 shadow-lg rounded-lg bg-background",e&&"outline outline-blue-500/25",n),children:t})}const sDe=({className:e,label:t,children:n,...r})=>m.jsx("div",{...r,className:Ue("flex flex-row bg-primary/15 justify-center items-center rounded-tl-lg rounded-tr-lg py-1 px-2 drag-handle",e),children:n||m.jsx("span",{className:"font-semibold opacity-75 font-mono",children:t??"Untitled node"})}),iDe=({children:e,className:t,...n})=>m.jsx("div",{...n,className:Ue("px-2 py-1.5 pb-2 flex flex-col",t),children:e});bc.Header=sDe;bc.Content=iDe;const U3=Bh({dirty:!1,name:void 0,flow:void 0}),vJ=w.createContext(void 0),sC={trigger:{type:"manual"},tasks:{},connections:{}};function oDe({children:e,name:t}){const n=p3(U3),r=xt(),s=t?r.config.flows.flows[t]:void 0,i=r.schema.flows.properties.flows;w.useEffect(()=>{t&&n({dirty:!1,name:t,flow:s})},[t]);const o={flow:{setName:async a=>{console.log("set name",a),n(c=>({...c,name:a,dirty:!0}))}},trigger:{update:async a=>{console.log("update trigger",a),n(c=>{const u=c.flow||sC;return{...c,dirty:!0,flow:{...u,trigger:a}}})}},task:{create:async(a,c={})=>{console.log("create task",a,c),n(u=>{const f=u.flow||sC,h={...f.tasks,[a]:c};return{...u,dirty:!0,flow:{...f,tasks:h}}})},update:async(a,c)=>{console.log("update task",a,c),n(u=>{var p,y;const f=u.flow||sC,h={...(y=(p=u.flow)==null?void 0:p.tasks)==null?void 0:y[a],params:c};return{...u,dirty:!0,flow:{...f,tasks:{...f.tasks,[a]:h}}}})}}};return m.jsx(vJ.Provider,{value:{name:t,data:s,schema:i,actions:o},children:e})}function x0(){return w.useContext(vJ)}function aDe(){return m3(U3)}function q3(e,t=Oz){const n=u0(U3,w.useCallback(e,[]),t);return Em(n)[0]}function lDe(e,t){const n=[{id:"trigger",data:{label:t,type:e.trigger.type},type:"trigger",dragHandle:".drag-handle",position:{x:0,y:0}}];let r=1;const s=Object.keys(e.tasks??{}).length;for(const[i,o]of Object.entries(e.tasks??{})){const a=r===s,c=r===1,u=a;n.push({id:`task-${i}`,data:{label:i,type:o.type,last:a,start:c,responding:u},type:"task",dragHandle:".drag-handle",position:{x:450*r+(r-1)*64,y:0}}),r++}return n}function cDe(e){var r;const t=Object.entries(e.tasks??{});if(t.length===0)return[];const n=t.length>=1?[{id:"trigger-task",source:"trigger",target:`task-${(r=t[0])==null?void 0:r[0]}`,style:{strokeWidth:2},markerEnd:{type:cd.ArrowClosed,width:10,height:10}}]:[];for(const[s,i]of Object.entries(e.connections??{}))n.push({id:s,source:"task-"+i.source,target:"task-"+i.target,style:{strokeWidth:2},markerEnd:{type:cd.ArrowClosed,width:10,height:10}});return n}function _w(e){const t={top:16,width:10,height:10,background:"transparent",border:"2px solid #999"},n=-10,r={target:{...t,left:n},source:{...t,right:n}};return m.jsx(gy,{...e,position:e.type==="source"?st.Right:st.Left,style:r[e.type]})}const b8=[{type:"fetch",label:"Fetch",description:"Fetch data from a URL",template:{type:"fetch",params:{method:"GET",headers:[],url:""}}},{type:"render",label:"Render",description:"Render data using LiquidJS"}];function uDe(e){const[t,n]=w.useState(),r=Nm(),{actions:s}=x0(),i=e.id;async function o(){const a=b8.find(u=>u.type===t),c="untitled";await s.task.create(c,a.template),r.setNodes(u=>u.map(f=>f.id===i?{...f,id:"task-"+c,type:"task",data:{...a.template,label:c}}:f)),setTimeout(()=>{r.setEdges(u=>u.map(f=>(console.log("edge?",f,i,f.target===i),f.target===i?{...f,id:"task-"+c,target:"task-"+c}:f)))},100),console.log("make",a)}return m.jsxs(bc,{className:"w-96",children:[m.jsx(_w,{type:"target",id:"select-in"}),m.jsxs(bc.Header,{className:"gap-3 justify-start py-2",children:[m.jsx("div",{className:"bg-primary/10 rounded-full w-4 h-4"}),m.jsx("div",{className:"bg-primary/5 rounded-full w-1/2 h-4"})]}),m.jsxs(bc.Content,{children:[m.jsx("div",{children:"select"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:b8.map(a=>m.jsx("button",{type:"button",className:Ue("border border-primary/10 rounded-md py-2 px-4 hover:bg-primary/10",t===a.type&&"bg-primary/10"),onClick:()=>n(a.type),children:a.label},a.type))}),m.jsx("button",{onClick:o,children:"make"})]})]})}function dDe({label:e,description:t,size:n,...r}){return m.jsxs(It.Wrapper,{className:"relative",children:[e&&m.jsxs("div",{className:"flex flex-col",children:[m.jsx(It.Label,{size:n,children:e}),t&&m.jsx(It.Description,{size:n,children:t})]}),m.jsx(md,{...r,size:n})]})}const Ij={key:"",value:""};function fDe(e){return!e||Array.isArray(e)?[Ij]:Object.entries(e).map(([t,n])=>({key:t,value:n}))}const Nv=({label:e,initialValue:t,onChange:n,error:r,classNames:s,mode:i="object"})=>{const[o,a]=w.useState(t?fDe(t):[Ij]);w.useEffect(()=>{if(n)if(i==="object"){const h=o.reduce((p,y)=>(y.key&&typeof y.value<"u"&&(p[y.key]=y.value),p),{});n(h)}else n(o)},[o]);function c(){a(h=>[...h,Ij])}function u(h,p){return y=>{const v=y.currentTarget.value;a(x=>x.map((S,N)=>N===h?{...S,[p]:v}:S))}}function f(h){return()=>{a(p=>p.filter((y,v)=>v!==h))}}return m.jsxs(It.Wrapper,{className:"w-full",children:[m.jsxs("div",{className:"flex flex-row w-full justify-between",children:[e?m.jsx(It.Label,{className:s==null?void 0:s.label,children:e}):m.jsx("div",{}),m.jsx(Nt,{Icon:f$,size:"xs",onClick:c})]}),m.jsxs("div",{className:Ue("flex flex-col gap-2",s==null?void 0:s.itemWrapper),children:[o.map(({key:h,value:p},y)=>m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[o.length>1&&m.jsx(Nt,{Icon:bU,size:"xs",onClick:f(y)}),m.jsx(On,{className:"w-36",placeholder:"key",value:h,classNames:{wrapper:"font-mono pt-px"},onChange:u(y,"key")}),m.jsx(On,{className:"w-full",placeholder:"value",value:p,classNames:{wrapper:"font-mono pt-px"},onChange:u(y,"value")})]},y)),r&&m.jsx(It.Error,{children:r})]})]})};function H3({children:e,className:t,tabs:n,Icon:r,isInvalid:s,...i}){const{data:o}=i;function a(c){i.onChangeName&&i.onChangeName(c.target.value)}return m.jsxs(bc,{className:Ue("w-96",s&&"ring-8 ring-red-500/15",t),children:[m.jsx(mDe,{Icon:r??wxe,initialValue:o.label,onChange:a}),m.jsx(bc.Content,{className:"gap-3",children:e}),m.jsx(hDe,{tabs:n})]})}const hDe=({tabs:e})=>{var s;const[t,n]=w.useState();if(!e||(e==null?void 0:e.length)===0)return null;function r(i){return()=>{n(o=>o===i?void 0:i)}}return m.jsxs("div",{className:"border-t border-t-muted mt-1",children:[m.jsx("div",{className:"flex flex-row justify-start bg-primary/5 px-3 py-2.5 gap-3",children:e.map((i,o)=>m.jsx("button",{type:"button",onClick:r(o),className:Ue("text-sm leading-none",o===t?"font-bold opacity-80":"font-medium opacity-50"),children:i.label},i.id))}),typeof t<"u"?m.jsx("div",{className:"border-t border-t-muted",children:(s=e[t])==null?void 0:s.content()}):null]})},mDe=({Icon:e,iconProps:t,rightSection:n,initialValue:r,changable:s=!1,onChange:i})=>{const[o,a]=w.useState(r);function c(u){if(!s)return;const f=String(u.target.value);if(f.length>0&&!/^[a-zA-Z_][a-zA-Z0-9_ ]*$/.test(f)||f.length===25)return;const h=f.toLowerCase().replace(/ /g,"_").replace(/__+/g,"_");a(h),i==null||i({...u,target:{...u.target,value:h}})}return m.jsxs(bc.Header,{className:"justify-between gap-10",children:[m.jsxs("div",{className:"flex flex-row flex-grow gap-1 items-center",children:[m.jsx(e,{width:16,height:16,...t??{}}),s?m.jsx("input",{type:"text",value:o,disabled:!s,onChange:c,className:Ue("font-mono font-semibold bg-transparent rounded-lg outline-none pl-1.5 w-full hover:bg-lightest/30 transition-colors focus:bg-lightest/60")}):m.jsx("span",{className:"font-mono font-semibold bg-transparent  rounded-lg outline-none pl-1.5",children:o})]}),m.jsxs("div",{className:"flex flex-row gap-1",children:[m.jsx(Nt,{Icon:W1e,size:"sm"}),m.jsx(Nt,{Icon:zc,size:"sm"})]})]})},pDe=ze({query:ed(ge()).optional(),...XT.schema.properties});function gDe({onChange:e,params:t,...n}){var S;const[r,s]=Q8([!0,!1]),[i,o]=w.useState("None"),{register:a,handleSubmit:c,setValue:u,getValues:f,formState:{isValid:h,errors:p},watch:y,control:v}=nl({resolver:rl(pDe),defaultValues:t,mode:"onChange"});function x(N){console.log("submit task",N),e(N)}return m.jsx(H3,{...n,isInvalid:!h,className:"w-[400px]",Icon:vU,tabs:yDe({watch:y}),onChangeName:console.log,children:m.jsxs("form",{onBlur:c(x),className:"flex flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(ka,{className:"w-36",label:"Method",defaultValue:"GET",data:["GET","POST","PATCH","PUT","DEL"],name:"method",control:v}),m.jsx(On,{className:"w-full",label:"Mapping Path",placeholder:"/path/to-be/mapped",classNames:{wrapper:"font-mono pt-px"},...a("url")})]}),m.jsx(ot,{onClick:s,className:"justify-center",size:"small",variant:"ghost",iconSize:14,IconLeft:r?gxe:f$,children:"More options"}),r&&m.jsxs(m.Fragment,{children:[m.jsx(Nv,{label:"URL query",onChange:N=>u("query",N),error:(S=p.query)==null?void 0:S.message}),m.jsx(Nv,{label:"Headers"}),m.jsx("div",{className:"flex flex-row gap-2 items-center mt-2",children:m.jsxs(It.Wrapper,{className:"w-full",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(It.Label,{children:"Body"}),m.jsx(dDe,{data:["None","Form","JSON","Code"],size:"xs",defaultValue:i,onChange:N=>o(N)})]}),i==="Form"&&m.jsx(Nv,{label:void 0}),i==="JSON"&&m.jsx(Nv,{label:void 0})]})})]})]})})}const yDe=({watch:e})=>[{id:"json",label:"JSON",content:()=>m.jsx("div",{className:"scroll-auto",children:m.jsx(fs,{json:e(),expand:2,className:"bg-white break-all"})})},{id:"test",label:"test",content:()=>m.jsx("div",{children:"test"})}],bDe=w.lazy(()=>s0(()=>import("./CodeEditor-D9Xekm1D.js"),[]));function vDe({editable:e,...t}){return m.jsx(w.Suspense,{fallback:null,children:m.jsx(bDe,{className:Ue("flex w-full border border-muted bg-white rounded-lg",!e&&"opacity-70"),editable:e,_extensions:{html:!0},...t})})}function xDe(e){return m.jsx(H3,{...e,onChangeName:console.log,Icon:vU,className:"w-[400px]",children:m.jsx("form",{className:"flex flex-col gap-3",children:m.jsx(vDe,{value:e.params.render,onChange:console.log})})})}const v8={fetch:gDe,render:xDe},wDe=e=>{const{data:{label:t,start:n,last:r,responding:s}}=e,i=q3(u=>u.flow.tasks[t]),{actions:o}=x0(),a=i.type in v8?v8[i.type]:()=>m.jsx("div",{children:"unsupported"});function c(u){o.task.update(t,u)}return m.jsxs(m.Fragment,{children:[m.jsx(a,{...e,params:i.params,onChange:c}),m.jsx(_w,{type:"target",id:`${t}-in`}),m.jsx(_w,{type:"source",id:`${t}-out`})]})};function yy({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,label:o,size:a,description:c,error:u,...f}){const{field:{value:h,onChange:p,...y}}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsxs(It.Wrapper,{className:"relative",children:[o&&m.jsxs("div",{className:"flex flex-col",children:[m.jsx(It.Label,{size:a,children:o}),c&&m.jsx(It.Description,{size:a,children:c})]}),m.jsx(md,{value:h,onChange:v=>{p(v),i==null||i(v)},size:a,...y,...f})]})}const SDe=ze({trigger:nn(Object.values(en(ZT,(e,t)=>He({type:si(t),config:e.cls.schema},{title:String(t)}))))}),EDe=e=>{const{data:{label:t,...n}}=e,r=q3(S=>S.flow.trigger),{actions:s}=x0(),{register:i,handleSubmit:o,setValue:a,getValues:c,formState:{isValid:u,errors:f},watch:h,control:p}=nl({resolver:rl(SDe),defaultValues:{trigger:r},mode:"onChange"}),y=h("trigger");async function v(S){console.log("submit",S.trigger),await s.trigger.update(S.trigger)}async function x(S){console.log("change name",S),await s.flow.setName(S)}return m.jsxs(H3,{...e,tabs:CDe({data:y}),onChangeName:x,children:[m.jsxs("form",{onBlur:o(v),className:"flex flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-row justify-between items-center",children:[m.jsx(yy,{label:"Trigger Type",defaultValue:"manual",data:[{label:"Manual",value:"manual"},{label:"HTTP",value:"http"},{label:"Event",value:"event",disabled:!0}],name:"trigger.type",control:p}),m.jsx(yy,{label:"Execution Mode",defaultValue:"async",data:[{label:"Async",value:"async"},{label:"Sync",value:"sync"}],name:"trigger.config.mode",control:p})]}),(y==null?void 0:y.type)==="manual"&&m.jsx(NDe,{}),(y==null?void 0:y.type)==="http"&&m.jsx(_De,{form:{watch:h,register:i,setValue:a,getValues:c,control:p}})]}),m.jsx(_w,{type:"source",id:"trigger-out"})]})},NDe=()=>null,_De=({form:e})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(ka,{className:"w-36",label:"Method",data:["GET","POST","PATCH","PUT","DEL"],name:"trigger.config.method",control:e.control}),m.jsx(On,{className:"w-full",label:"Mapping Path",placeholder:"/trigger_http",classNames:{wrapper:"font-mono pt-px"},...e.register("trigger.config.path")})]}),m.jsx("div",{className:"flex flex-row gap-2 items-center",children:m.jsx(yy,{className:"w-full",label:"Response Type",defaultValue:"json",data:[{label:"JSON",value:"json"},{label:"HTML",value:"html"},{label:"Text",value:"text"}],name:"trigger.config.response_type",control:e.control})})]}),CDe=({data:e,...t})=>[{id:"json",label:"JSON",content:()=>m.jsx(fs,{json:e,expand:2,className:""})},{id:"test",label:"test",content:()=>m.jsx("div",{children:"test"})}],ODe={select:uDe,trigger:EDe,task:wDe};function jDe(e){return m.jsx(oDe,{name:e.params.flow,children:m.jsx(hJ,{children:m.jsx(ADe,{})})})}function ADe(){const e=w.useRef(null),[t,n]=w.useState(),r=x0();if(!r.data||!r.name)return"no flow";w.useEffect(()=>{var u,f;console.log("ref",(u=e.current)==null?void 0:u.getBoundingClientRect()),n((f=e.current)==null?void 0:f.getBoundingClientRect())},[]);const s=lDe(r.data,r.name),i=cDe(r.data);console.log("nodes",s),console.log("edges",i);const c={zoom:1,x:t!=null&&t.width?t.width*.1:0,y:t!=null&&t.height?t.height/2-260/2-50:0};return m.jsx("div",{className:"flex flex-col w-full h-full",ref:e,children:t&&m.jsxs(m.Fragment,{children:[m.jsx(eDe,{externalProvider:!0,backgroundStyle:"dots",nodes:s,edges:i,nodeTypes:ODe,nodeDragThreshold:0,fitView:!1,defaultViewport:c,nodesConnectable:!0,onDropNewNode:u=>({...u,type:"select",data:{label:""}}),onDropNewEdge:u=>({...u,style:{strokeWidth:2},markerEnd:{type:cd.ArrowClosed,width:10,height:10}}),children:m.jsx(TDe,{})}),m.jsx(RDe,{})]})})}function TDe(){const e=q3(r=>Cx(r,["name","dirty"])),[t]=Dn(),{goBack:n}=Mwe(()=>t(ft.flows.flows.list()));return m.jsx(rDe,{minimap:!0,zoom:!0,children:m.jsxs(Sr,{position:"top-left",className:"gap-2 pr-6",children:[m.jsx(Sr.IconButton,{Icon:E$,round:!0,onClick:n}),m.jsxs(Sr.Text,{children:[e.name," ",e.dirty?"*":""]})]})})}const $De=sTe("__dev_flow_debugger_tab",{tab:null}),RDe=()=>{var o;const[e,t]=Em($De),n=x0(),r=aDe();function s(a){t(c=>({...c,tab:c.tab===a?null:a}))}const i=((o=e.store)==null?void 0:o.expand)||3;return m.jsx("div",{className:"flex fixed left-5 bottom-5 z-20",children:m.jsxs(wn,{value:e.tab,onChange:s,children:[m.jsx("div",{className:"max-h-96 overflow-y-scroll bg-background/70",children:m.jsxs(wn.Panel,{value:"store",children:[m.jsxs("div",{className:"flex flex-row text-sm",children:[m.jsx(fs,{className:"max-w-96 break-all",title:"Context",json:{name:n.name,...n.data},expand:i}),m.jsx(fs,{className:"max-w-96 break-all",title:"State",json:{name:r.name,...r.flow},expand:i})]}),m.jsx(JA,{className:"w-36",defaultValue:i,min:0,max:fF(r.flow??{}),onChange:MT(a=>t(c=>({...c,store:{...c.store,expand:a}})),250)})]})}),m.jsx(wn.List,{children:m.jsx(wn.Tab,{value:"store",children:"Store"})})]})})};function xJ(){const{config:e,app:t,actions:n}=xt(),r={flow:{create:async(s,i)=>{const o=Un(GV,i,{skipMark:!0,forceParse:!0});await n.add("flows",`flows.${s}`,o)}}};return{flows:t.flows,config:e.flows,actions:r}}const kDe=Object.keys(qV),MDe=He({name:td,trigger:ge({enum:kDe}),mode:ge({enum:["async","sync"]})}),IDe=w.forwardRef(function(t,n){const[r,s]=w.useState([]);function i(){var o;(o=n==null?void 0:n.current)==null||o.close()}return m.jsx(bEe,{ref:n,size:"lg",children:m.jsx(Bq,{path:r,lastBack:i,children:m.jsxs(vu,{id:"select",children:[m.jsx(bu,{path:["Create New Flow"],onClose:i}),m.jsx(PDe,{})]})})})});function PDe(){var y;const e=zw(),{actions:t}=xJ(),{nextStep:n,stepBack:r,state:s,setState:i}=Cd(),{handleSubmit:o,watch:a,control:c,register:u,formState:{isValid:f,errors:h}}=nl({resolver:rl(MDe),defaultValues:{name:"",trigger:"manual",mode:"async"},mode:"onSubmit"});async function p(v){console.log(v,f),t.flow.create(v.name,{trigger:{type:v.trigger,config:{mode:v.mode}}})}return console.log("errors",h),m.jsxs("form",{ref:e,onSubmit:o(p),children:[m.jsxs(Nd,{className:"min-h-40",children:[m.jsx("div",{children:m.jsx(On,{"data-autofocus":!0,label:"Flow Name",placeholder:"Enter flow name",error:(y=h.name)==null?void 0:y.message,...u("name",{required:!0})})}),m.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[m.jsx(yy,{label:"Trigger Type",name:"trigger",data:[{label:"Manual",value:"manual"},{label:"HTTP",value:"http"},{label:"Event",value:"event"}],control:c}),m.jsx(yy,{label:"Execution mode",name:"mode",data:[{label:"Async",value:"async"},{label:"Sync",value:"sync"}],control:c})]}),m.jsx("pre",{children:JSON.stringify(a(),null,2)})]}),m.jsx(_d,{next:{type:"submit",disabled:!f},nextLabel:"Create",prev:{onClick:r},prevLabel:"Cancel"})]})}function DDe(){const e=w.useRef(null),[t]=Dn(),{flows:n}=xJ();console.log("flows",n);const r=n.map(i=>{var o;return{flow:i.name,trigger:i.trigger.type,mode:i.trigger.config.mode,tasks:Object.keys(i.tasks).length,start_task:(o=i.startTask)==null?void 0:o.name}});function s(i){t(ft.flows.flows.edit(i.flow))}return m.jsxs(m.Fragment,{children:[m.jsx(IDe,{ref:e}),m.jsx(An,{right:m.jsx(ot,{variant:"primary",onClick:()=>{var i;return(i=e.current)==null?void 0:i.open()},children:"Create new"}),children:"All Flows"}),m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(gS,{data:r,renderValue:LDe,renderHeader:Dy,onClickRow:s})})})]})}const LDe=({value:e,property:t})=>["is_default","implicit_allow"].includes(t)?e?m.jsx("span",{children:"Yes"}):m.jsx("span",{className:"opacity-50",children:"No"}):t==="permissions"?[...e||[]].map((n,r)=>m.jsx("span",{className:"inline-block px-2 py-1.5 text-sm bg-primary/5 rounded font-mono leading-none",children:n},r)):m.jsx(yS,{value:e,property:t});function FDe(){return m.jsxs(qa,{children:[m.jsx(at,{path:"/flow/:flow",component:jDe}),m.jsx(gRe,{children:m.jsx(at,{path:"/",component:DDe})})]})}function BDe({children:e}){const{app:t,config:n}=xt(),r=!n.media.enabled;return Wr(["Media"]),m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:t.getSettingsPath(["media"]),children:m.jsx(Nt,{Icon:ym})}),children:"Media"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsxs(ns,{as:In,href:"/",className:"flex flex-row justify-between",children:["Main Bucket"," ",r&&m.jsx(nS.Warning,{title:"Media not enabled.",className:"size-5"})]}),m.jsx(ns,{as:In,href:"/settings",children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}function zDe(){const{config:e}=xt(),[,t]=bi();if(Wr(["Media"]),!e.media.enabled)return m.jsx(Kn,{Icon:yU,title:"Media not enabled",description:"Please enable media in the settings to continue.",primary:{children:"Manage Settings",onClick:()=>t("/settings")}});const n=r=>{Nr.open(Nr.ids.mediaInfo,{file:r})};return m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-1 p-3",children:m.jsx(f3.Dropzone,{onClick:n,infinite:!0,query:{sort:"-id"}})})})}function VDe(e){Wr(["Media","Settings"]);const{hasSecrets:t}=xt({withSecrets:!0});return t?m.jsx(qDe,{...e}):m.jsx(Is.MissingPermission,{what:"Media Settings"})}const UDe={ignoreKeys:["entity_name","basepath"],options:{debug:qr(),keepEmpty:!0}};function qDe(){const{config:e,schema:t,actions:n}=AW(),r=JSON.parse(JSON.stringify(t));r.if={properties:{enabled:{const:!0}}},r.then={required:["adapter"]};async function s(i){console.log("submit",i),await n.config.patch(i)}return m.jsx(m.Fragment,{children:m.jsxs(ES,{schema:r,initialValues:e,onSubmit:s,...UDe,children:[m.jsx(m0,{selector:i=>({dirty:i.dirty,errors:i.errors.length>0,submitting:i.submitting}),children:({dirty:i,errors:o,submitting:a})=>m.jsx(An,{right:m.jsx(ot,{variant:"primary",type:"submit",disabled:!i||o||a,children:"Update"}),children:"Settings"})}),m.jsxs(Zn,{children:[m.jsx(HDe,{}),m.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[m.jsx(di,{name:"enabled",inputProps:{"data-testId":vG.media.switchEnabled}}),m.jsxs("div",{className:"flex flex-col gap-3 relative",children:[m.jsx(x8,{}),m.jsx(di,{name:"storage.body_max_size",label:"Storage Body Max Size"})]})]}),m.jsx(zO,{}),m.jsxs("div",{className:"flex flex-col gap-3 p-3 relative",children:[m.jsx(x8,{}),m.jsx(yg.Root,{path:"adapter",children:m.jsx(YDe,{})})]}),m.jsx(NS,{})]})]})})}const HDe=()=>{const e=h0("",{strict:!0});return e.length===0?null:m.jsx(So.Exception,{children:e.map((t,n)=>m.jsx("div",{children:t.message},n))})},WDe={s3:rxe,cloudinary:axe,local:bxe,r2:sxe},GDe=({type:e})=>{var n;const t=(n=Object.entries(WDe).find(([r])=>e.startsWith(r)))==null?void 0:n[1];return t?m.jsx(t,{}):null};function YDe(){var t;const e=yg.useContext();return m.jsxs(Qi,{children:[m.jsxs(Ro,{className:"flex flex-row items-center gap-1",children:[m.jsx("span",{className:"font-bold",children:"Media Adapter:"}),e.selected===null&&m.jsx("span",{className:"opacity-70",children:" (Choose one)"})]}),m.jsx("div",{className:"grid grid-cols-2 md:flex flex-row gap-1 mb-2 flex-wrap",children:(t=e.schemas)==null?void 0:t.map((n,r)=>m.jsxs(ot,{onClick:()=>e.select(r),id:`adapter-${n.properties.type.const}`,variant:e.selected===r?"primary":"outline",className:Ue("flex flex-row items-center justify-center gap-3 border",e.selected===r&&"border-primary"),children:[m.jsx("div",{children:m.jsx(GDe,{type:n.properties.type.const})}),m.jsxs("div",{className:"flex flex-col items-start justify-center",children:[m.jsx("span",{children:Ku(n.title)}),n.description&&m.jsx("span",{className:"text-xs opacity-70 text-left",children:n.description})]})]},r))}),e.selected!==null&&m.jsxs(Qi,{as:"fieldset",error:e.errors.length>0,children:[m.jsx(Ro,{as:"legend",className:"font-mono px-2 w-min-content",children:Ku(e.selectedSchema.title)}),m.jsxs(_3,{schema:e.selectedSchema,prefix:e.path,children:[m.jsx(di,{name:"type",hidden:!0}),m.jsx(_S,{path:"config",wrapperProps:{label:!1,wrapper:"group"}})]})]})]})}const x8=()=>m.jsx(m0,{selector:e=>({enabled:e.data.enabled}),children:({enabled:e})=>!e&&m.jsx("div",{className:"absolute w-full h-full z-50 inset-0 bg-background opacity-90"})});function JDe(){return m.jsxs(BDe,{children:[m.jsx(at,{path:"/",component:zDe}),m.jsx(at,{path:"/settings",component:VDe})]})}function XDe(e,t){const n=w.useRef(!1),r=w.useRef(t);w.useEffect(()=>{if(!n.current||!KDe(r.current,t))return n.current=!0,r.current=t,e()},[t])}function KDe(e,t){return e&&e.length===0&&t.length===0||!e&&t.length===0?!0:!e||!t||e.length!==t.length?!1:e.every((n,r)=>Object.is(n,t[r]))}const QDe=({children:e})=>{const{verify:t,user:n}=pU();return XDe(()=>{t()},[n==null?void 0:n.id]),m.jsxs($q,{children:[m.jsx(RSe,{}),m.jsx(Rq,{children:e})]})};function ZDe(){const[e]=Dn();return w.useEffect(()=>{e("/data")},[]),Wr(),m.jsx(Kn,{Icon:dxe,title:"Not implemented yet",description:'Go checkout "Data" or "Media" for some action.'})}const Gp={jwt:{basepath:{"ui:options":{label:!1}},fields:{"ui:options":{orderable:!1}}},strategies:{additionalProperties:{"ui:widget":"select",type:{"ui:widget":"hidden"}},type:{"ui:widget":"hidden"}},roles:{"ui:options":{orderable:!1},permissions:{items:{"ui:widget":"checkboxes"},"ui:widget":"checkboxes"}}},e9e=({schema:e,config:t})=>{var o,a;const n=xt(),r=F1(e),s=n.app.getAbsolutePath("settings");try{const c=t.entity_name??"users",u=n.config.data.entities??{};console.log("entities",u,c);const f=Object.entries(((o=u[c])==null?void 0:o.fields)??{}).map(([h,p])=>{var y;return(y=p.config)!=null&&y.virtual?void 0:h}).filter(Boolean);f.length>0&&(console.log("user_fields",f),r.properties.jwt.properties.fields.items.enum=f,r.properties.jwt.properties.fields.uniqueItems=!0,Gp.jwt.fields["ui:widget"]="checkboxes")}catch{}console.log("_s",n);const i=((a=r.properties.roles)==null?void 0:a.additionalProperties)??{type:"object"};return n.permissions&&(i.properties.permissions.items.enum=n.permissions,i.properties.permissions.uniqueItems=!0),m.jsx(at,{path:"/auth",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/roles/:role",component:({params:{role:c}})=>{var u;return m.jsx(rs,{schema:i,uiSchema:Gp.roles,config:(u=t.roles)==null?void 0:u[c],path:["auth","roles",c],prefix:`${s}/auth/roles/${c}`})},nest:!0}),m.jsx(at,{path:"/strategies/:strategy",component:({params:{strategy:c}})=>{var p,y;const u=(p=t.strategies)==null?void 0:p[c],f=r.properties.strategies.additionalProperties,h=f.anyOf.find(v=>v.properties.type.const===(u==null?void 0:u.type));return m.jsx(rs,{schema:h??f,config:(y=t.strategies)==null?void 0:y[c],path:["auth","strategies",c],prefix:`${s}/auth/strategies/${c}`})},nest:!0}),m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:r,uiSchema:Gp,config:t,options:{showAlert:c=>{if(!c.enabled)return"Auth is disabled. Enable it by toggling the switch below. Please also make sure set a secure secret to sign JWT tokens."},reloadOnSave:!0},properties:{strategies:{extract:!0,tableValues:c=>Object.values(en(c,(u,f)=>({key:f,type:u.type}))),new:{schema:r.properties.strategies.additionalProperties,uiSchema:Gp.strategies,generateKey:c=>{var u;return c.type==="password"?"password":((u=c.config.name)==null?void 0:u.toLowerCase())||""}}},roles:{extract:!0,new:{schema:i,uiSchema:Gp.roles}}},prefix:`${s}/auth`,path:["auth"]}),nest:!0})]})})},t9e={jwt:{basepath:{"ui:options":{label:!1}},fields:{"ui:options":{orderable:!1}}},strategies:{additionalProperties:{"ui:widget":"select",type:{"ui:widget":"hidden"}},type:{"ui:widget":"hidden"}}},n9e=({schema:e,config:t})=>{const{app:n}=xt(),r=n.getAbsolutePath("settings");function s(i,o,a){const c=Object.keys(o.tasks??{});c.length!==0&&(i.properties&&a in i.properties&&(i.properties[a].enum=c),"anyOf"in i&&i.anyOf.forEach(u=>s(u,o,a)))}return m.jsx(at,{path:"/flows",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/flows/:flow/connections/:connection",component:({params:{flow:i,connection:o}})=>{var f,h,p,y;const a=(f=t.flows)==null?void 0:f[i],c=(y=(p=(h=t.flows)==null?void 0:h[i])==null?void 0:p.connections)==null?void 0:y[o],u=e.properties.flows.additionalProperties.properties.connections.additionalProperties;return s(u,a,"source"),s(u,a,"target"),m.jsx(rs,{schema:u,config:c,path:["flows","flows",i,"connections",o],prefix:`${r}/flows/flows/${i}/connections/${o}`})},nest:!0}),m.jsx(at,{path:"/flows/:flow/tasks/:task",component:({params:{flow:i,task:o}})=>{var f,h,p;const a=(p=(h=(f=t.flows)==null?void 0:f[i])==null?void 0:h.tasks)==null?void 0:p[o],u=e.properties.flows.additionalProperties.properties.tasks.additionalProperties.anyOf.find(y=>y.properties.type.const===(a==null?void 0:a.type));return m.jsx(rs,{schema:u,config:a,path:["flows","flows",i,"tasks",o],prefix:`${r}/flows/flows/${i}/tasks/${o}`,uiSchema:{params:{render:{"ui:field":"HtmlField"}}}})},nest:!0}),m.jsx(at,{path:"/flows/:flow",component:({params:{flow:i}})=>{var f;const o=(f=t.flows)==null?void 0:f[i],a=e.properties.flows.additionalProperties,c=a.properties.tasks.additionalProperties,u=a.properties.connections.additionalProperties;return s(a,o,"start_task"),s(a,o,"responding_task"),s(u,o,"source"),s(u,o,"target"),m.jsx(rs,{schema:a,config:o,path:["flows","flows",i],prefix:`${r}/flows/flows/${i}`,properties:{tasks:{extract:!0,new:{schema:c},tableValues:h=>ti(h,(p,y,v)=>{p.push({name:v,type:y.type})},[])},connections:{extract:!0,new:{schema:u,generateKey:crypto.randomUUID()},tableValues:h=>ti(h,(p,y,v)=>{var x;p.push({id:v,source:y.source,target:y.target,condition:(x=y.config.condition)==null?void 0:x.type})},[])}}})},nest:!0}),m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:e,uiSchema:t9e,config:t,properties:{flows:{extract:!0,new:{schema:e.properties.flows.additionalProperties},tableValues:i=>ti(i,(o,a,c)=>{o.push({name:c,trigger:a.trigger.type,mode:a.trigger.config.mode,start_task:a.start_task,responding_task:a.responding_task})},[])}},prefix:`${r}/flows`,path:["flows"]}),nest:!0})]})})},r9e={cors:{allow_methods:{"ui:widget":"checkboxes"},allow_headers:{"ui:options":{orderable:!1}}}},s9e=({schema:e,config:t})=>{const{app:n}=xt(),r=F1(e),s=n.getAbsolutePath("settings"),i=r;return m.jsx(at,{path:"/server",nest:!0,children:m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:i,uiSchema:r9e,config:t,prefix:`${s}/server`,path:["server"]}),nest:!0})})};function i9e(){const{version:e,schema:t,actions:n,app:r}=xt();Wr(["Settings"]);async function s(){await n.reload()}const i=Object.keys(t).map(o=>({title:t[o].title??li(o),key:o}));return m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"font-mono leading-none",children:["v",e]}),m.jsx(Nt,{Icon:yxe,onClick:s})]}),children:"Settings"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx("nav",{className:"flex flex-col flex-1 gap-1",children:i.map((o,a)=>m.jsx(ns,{as:In,href:`/${o.key}`,children:o.title},a))})})})]})}function o9e(){return xt({withSecrets:!0}).hasSecrets?m.jsxs(m.Fragment,{children:[m.jsx(i9e,{}),m.jsx(n0,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/",component:()=>m.jsx(Kn,{Icon:Xg,title:"No Setting selected",description:"Please select a setting from the left sidebar."})}),m.jsx(l9e,{}),m.jsx(at,{path:"*",component:()=>m.jsx(Kn,{Icon:Xg,title:"Settings not found",description:"Check other options."})})]})})]}):m.jsx(Is.MissingPermission,{what:"the settings"})}const a9e={media:{adapter:{"ui:options":{label:!1}}}},l9e=()=>{const{schema:e,config:t}=xt();return console.log("flows",{schema:e.flows,config:t.flows}),m.jsxs(m.Fragment,{children:[m.jsx(s9e,{schema:e.server,config:t.server}),m.jsx(jje,{schema:e.data,config:t.data}),m.jsx(e9e,{schema:e.auth,config:t.auth}),m.jsx(c9e,{module:"media",schema:e,config:t,uiSchema:a9e.media,options:{reloadOnSave:!0}}),m.jsx(n9e,{schema:e.flows,config:t.flows})]})},c9e=({module:e,schema:t,config:n,...r})=>{const{app:s}=xt(),i=s.getAbsolutePath("settings");return m.jsx(at,{path:e,nest:!0,children:m.jsx(qa,{children:m.jsx(at,{path:"/",component:()=>m.jsx(rs,{...r,schema:t[e],config:n[e],prefix:`${i}/${e}`,path:[e]}),nest:!0})})})};function u9e(){const[e,t]=w.useState();if(w.useEffect(()=>{if(!e){const n=Yye();n&&t(n)}},[]),e){let n=So.Info;switch(e.type){case"error":n=So.Exception;break;case"success":n=So.Success;break;case"warning":n=So.Warning;break}return m.jsx(n,{message:e.message,className:"justify-center"})}return null}function d9e(){return Wr(["Register"]),m.jsx(EW.Screen,{action:"register",logo:m.jsx(In,{href:"/",className:"link",children:m.jsx(Z1,{scale:.25})})})}const ri=Q1(Zy({tools:[],feature:"tools",content:null,history:[],historyLimit:50,historyVisible:!1},e=>({setTools:t=>e({tools:t}),setFeature:t=>e({feature:t}),setContent:t=>e({content:t}),addHistory:(t,n)=>e(r=>({history:[{type:t,data:n},...r.history.slice(0,r.historyLimit-1)]})),setHistoryLimit:t=>e({historyLimit:t}),setHistoryVisible:t=>e({historyVisible:t})})));function w8(e){return!e||e===void 0||e===null?void 0:new w3(e).getTemplate(void 0,e)}function f9e(...e){return e.filter(Boolean).join(" ")}const iC=new Map;function h9e(e){return iC.has(JSON.stringify(e))||iC.set(JSON.stringify(e),new gce(e)),iC.get(JSON.stringify(e))}function wJ(){const{config:e}=xt();return h9e({url:window.location.origin+e.server.mcp.path})}function m9e({open:e,toggle:t}){const n=wJ(),r=Ra(x=>x.closeSidebar("default")),s=ri(x=>x.tools),i=ri(x=>x.setTools),o=ri(x=>x.setContent),a=ri(x=>x.content),[c,u]=w.useState(!1),[f,h]=w.useState(""),[p,y]=w.useState(null),v=w.useCallback(async()=>{u(!0),y(null);try{const x=await n.listTools();x&&i(x.tools)}catch(x){console.error(x),y(String(x))}u(!1)},[]);return w.useEffect(()=>{v()},[]),m.jsx(O$,{title:"Tools",open:e,toggle:t,renderHeaderRight:()=>m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[p&&m.jsx(nS.Err,{title:p,className:"size-5 pointer-events-auto"}),m.jsx("span",{className:"flex-inline bg-primary/10 px-2 py-1.5 rounded-xl text-sm font-mono leading-none",children:s.length}),m.jsx(Nt,{Icon:jq,disabled:!e||c,onClick:v})]}),children:m.jsxs("div",{className:"flex flex-col flex-grow p-3 gap-3",children:[m.jsx(sl,{type:"text",placeholder:"Search tools",value:f,onChange:x=>h(x.target.value),autoCapitalize:"none"}),m.jsx("nav",{className:"flex flex-col flex-1 gap-1",children:s.filter(x=>x.name.toLowerCase().includes(f.toLowerCase())).map(x=>m.jsxs(ns,{className:f9e("flex flex-col items-start h-auto py-3 gap-px",(a==null?void 0:a.name)===x.name?"active":""),onClick:()=>{o(x),r()},children:[m.jsx("span",{className:"font-mono",children:x.name}),m.jsx("span",{className:"text-sm text-primary/50",children:x.description})]},x.name))})]})})}function p9e(){var x;const e=ri(S=>S.content),t=ri(S=>S.addHistory),[n,r]=w.useState(w8(e==null?void 0:e.inputSchema)),[s,i]=w.useState(null),o=ri(S=>S.historyVisible),a=ri(S=>S.setHistoryVisible),c=wJ(),u=w.useRef(null),f=(e==null?void 0:e.inputSchema)&&Object.keys(e.inputSchema.properties??{}).length>0,[h,p]=w.useTransition();w.useEffect(()=>{r(w8(e==null?void 0:e.inputSchema)),i(null)},[e]);const y=w.useCallback(async()=>{if(!(e!=null&&e.name))return;const S={name:e.name,arguments:n};p(async()=>{var _;t("request",S);const N=await c.callTool(S);N&&(i(N),t("response",N),(_=u.current)==null||_.setSelected("Result"))})},[n]);if(!e)return null;let v=s;try{v=s?(x=s.content)!=null&&x[0].text?JSON.parse(s.content[0].text):s:null}catch{}return m.jsxs(ES,{className:"flex flex-grow flex-col min-w-0 max-w-screen",schema:{title:"InputSchema",...e==null?void 0:e.inputSchema},validateOn:"submit",initialValues:n,hiddenSubmit:!1,onChange:S=>{r(S)},onSubmit:y,children:[m.jsx(An,{className:"max-w-full min-w-0",right:m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(Nt,{Icon:o?bSe:ySe,onClick:()=>a(!o)}),m.jsx(ot,{type:"submit",disabled:!(e!=null&&e.name)||h,variant:"primary",className:"whitespace-nowrap",children:"Call Tool"})]}),children:m.jsxs(r0,{className:"leading-tight",children:[m.jsxs("span",{className:"opacity-50",children:["Tools ",m.jsx("span",{className:"opacity-70",children:"/"})]})," ",m.jsx("span",{className:"truncate",children:e==null?void 0:e.name})]})}),m.jsxs("div",{className:"flex flex-grow flex-row w-vw",children:[m.jsx("div",{className:"flex flex-grow flex-col max-w-full",style:{width:"calc(100% - var(--sidebar-width-right) - 1px)"},children:m.jsx(Zn,{children:m.jsxs("div",{className:"flex flex-col py-4 px-5  gap-4",children:[m.jsx("p",{className:"text-primary/80",children:e==null?void 0:e.description}),f&&m.jsx(di,{name:""}),m.jsx(yEe,{ref:u,expand:9,showCopy:!0,showSize:!0,tabs:{Arguments:{json:n,title:"Payload",enabled:f},Result:{json:v,title:"Result"},Configuration:{json:e??null,title:"Configuration"}}})]},JSON.stringify(e))})}),o&&m.jsx(Ed,{name:"right",handle:"left",maxWidth:window.innerWidth*.4,children:m.jsx(g9e,{})})]})]},e.name)}const g9e=()=>{const e=ri(t=>t.history.slice(0,50));return m.jsxs(m.Fragment,{children:[m.jsx(An,{children:"History"}),m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-1",children:e.map((t,n)=>m.jsx(fs,{json:t.data,title:t.type.substring(0,3),expand:2,showCopy:!0},`${t.type}-${n}`))})})]})};function y9e(){Wr(["MCP UI"]);const{config:e,options:t}=xt(),n=ri(a=>a.feature),r=ri(a=>a.setFeature),s=ri(a=>a.content),i=Ra(a=>a.toggleSidebar("default")),o=e.server.mcp.path;return e.server.mcp.enabled?m.jsxs("div",{className:"flex flex-col flex-grow max-w-screen",children:[m.jsx(An,{children:m.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[m.jsx(Tq,{}),m.jsx(r0,{className:"whitespace-nowrap truncate",children:"MCP UI"}),m.jsxs("div",{className:"hidden md:flex flex-row gap-2 items-center bg-primary/5 rounded-full px-3 pr-3.5 py-2",children:[m.jsx(ASe,{}),m.jsx("div",{className:"min-w-0 flex-1",children:m.jsx("span",{className:"block truncate text-sm font-mono leading-none",children:window.location.origin+o})})]})]})}),m.jsxs("div",{className:"flex h-full",children:[m.jsxs(Ed,{children:[m.jsx(m9e,{open:n==="tools",toggle:()=>r("tools")}),m.jsx(O$,{title:"Resources",open:n==="resources",toggle:()=>r("resources"),children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3 justify-center items-center opacity-40",children:m.jsx("i",{children:"Resources"})})})]}),n==="tools"&&m.jsx(p9e,{}),!s&&m.jsx(Kn,{title:"No tool selected",description:"Please select a tool to continue.",children:m.jsx(ot,{variant:"primary",onClick:()=>i(),className:"block md:hidden",children:"Open Tools"})})]})]}):m.jsx(Kn,{title:"MCP not enabled",description:"Please enable MCP in the settings to continue."})}function b9e(){return m.jsxs(m.Fragment,{children:[m.jsx(at,{path:"/",component:v9e}),m.jsx(at,{path:"/mcp",component:y9e})]})}function v9e(){return m.jsx(Kn,{title:"Tools",description:"Select a tool to continue."})}const x9e=w.lazy(()=>s0(()=>import("./index-G1GiVdkg.js"),__vite__mapDeps([2,1])));function w9e({BkndWrapper:e,basePath:t=""}){const{theme:n}=Fc(),r=W1(),s=t||r.admin_basepath;return m.jsxs("div",{id:"bknd-admin",className:n+" antialiased",children:[m.jsx(u9e,{}),m.jsx(LU,{base:s,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/auth/login",component:v4e}),m.jsx(at,{path:"/auth/register",component:d9e}),m.jsx(e,{children:m.jsx(W3e,{children:m.jsx(at,{path:"/",nest:!0,children:m.jsx(QDe,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/test*",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(x9e,{})})}),m.jsx(at,{path:"/",component:ZDe}),m.jsx(at,{path:"/data",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(pRe,{})})}),m.jsx(at,{path:"/flows",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(FDe,{})})}),m.jsx(at,{path:"/auth",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(b4e,{})})}),m.jsx(at,{path:"/media",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(JDe,{})})}),m.jsx(at,{path:"/settings",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(o9e,{})})}),m.jsx(at,{path:"/tools",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(b9e,{})})}),m.jsx(at,{path:"*",component:S9e})]})})})})})]})})]})}function S9e(){return m.jsx("div",{className:"flex w-full items-center justify-center",children:m.jsxs("p",{className:"text-2xl font-mono",children:[m.jsx("span",{className:"font-bold",children:"404"}),m.jsx("span",{className:"opacity-50",children:", Sorry :)"})]})})}function E9e({baseUrl:e,withProvider:t=!1,config:n={}}){const{theme:r}=Fc(),s=({children:a})=>t?m.jsx(dve,{baseUrl:e,...typeof t=="object"?t:{},children:a}):a,i={...n,...W1()},o=({children:a})=>m.jsx(Iwe,{options:i,fallback:m.jsx(N9e,{theme:i==null?void 0:i.theme}),children:a});return m.jsx(s,{children:m.jsxs(a7,{...PSe(r),children:[m.jsx(Po,{position:"top-right"}),m.jsx(w9e,{BkndWrapper:o,basePath:i==null?void 0:i.basepath})]})})}const N9e=({theme:e})=>{const t=Fc(),n=e&&["dark","light"].includes(e)?e:t.theme;return m.jsx("div",{id:"bknd-admin",className:n+" antialiased",children:m.jsxs($q,{children:[m.jsxs("header",{"data-shell":"header",className:"flex flex-row w-full h-16 gap-2.5 border-muted border-b justify-start bg-muted/10",children:[m.jsx("div",{className:"max-h-full flex hover:bg-primary/5 link p-2.5 w-[134px] outline-none",children:m.jsx(Z1,{theme:n})}),m.jsx("nav",{className:"hidden md:flex flex-row gap-2.5 pl-0 p-2.5 items-center",children:[...new Array(4)].map((r,s)=>m.jsx(fg,{as:"span",className:"active h-full opacity-50",children:m.jsx("div",{className:"w-18 h-3"})},s))}),m.jsx("nav",{className:"flex md:hidden flex-row gap-2.5 pl-0 p-2.5 items-center",children:m.jsx(fg,{as:"span",className:"active h-full opacity-50",children:m.jsx("div",{className:"w-20 h-3"})})}),m.jsx("div",{className:"flex flex-grow"}),m.jsx("div",{className:"hidden lg:flex flex-row items-center px-4 gap-2 opacity-50",children:m.jsx("div",{className:"size-11 rounded-full bg-primary/10"})})]}),m.jsx(Rq,{children:m.jsx("div",{className:"flex flex-col w-full h-full justify-center items-center"})})]})})};function S8(){PK.createRoot(document.getElementById("root")).render(m.jsx(w.StrictMode,{children:m.jsx(E9e,{withProvider:!0})}))}"startViewTransition"in document?document.startViewTransition(S8):S8();export{ES as $,Vbe as A,OS as B,wxe as C,Ur as D,dDe as E,XT as F,Qi as G,h1 as H,Nt as I,fs as J,On as K,Ro as L,n7 as M,tAe as N,od as O,tT as P,It as Q,O4e as R,An as S,zc as T,Q8 as U,vU as V,gxe as W,f$ as X,Nv as Y,W1e as Z,xt as _,qj as a,iz as a$,ze as a0,nn as a1,ge as a2,jt as a3,gW as a4,vDe as a5,Xu as a6,wc as a7,Ka as a8,Ls as a9,eDe as aA,rDe as aB,jz as aC,ds as aD,GB as aE,XB as aF,T1 as aG,Bhe as aH,zhe as aI,hm as aJ,PN as aK,Bg as aL,Gb as aM,F1 as aN,lz as aO,Noe as aP,$h as aQ,Oq as aR,Aq as aS,X1e as aT,Y1e as aU,Dy as aV,xa as aW,I6 as aX,k1 as aY,mge as aZ,ET as a_,hd as aa,nl as ab,rl as ac,OPe as ad,qOe as ae,cxe as af,_Oe as ag,dje as ah,So as ai,U9e as aj,at as ak,Kn as al,Ed as am,ns as an,In as ao,n0 as ap,bm as aq,g$ as ar,Zi as as,gy as at,st as au,z9e as av,B9e as aw,Fc as ax,cd as ay,hJ as az,u$ as b,$o as b0,vd as b1,Ah as b2,M1 as b3,Dg as b4,Pi as b5,OT as b6,she as b7,B1 as b8,bfe as b9,Cz as ba,fge as bb,xfe as bc,tO as bd,Rpe as be,_x as bf,jpe as bg,pfe as bh,vge as bi,C9e as bj,ti as bk,Or as bl,IA as bm,_h as bn,ot as c,Xg as d,d$ as e,exe as f,oxe as g,ixe as h,Eje as i,m as j,sl as k,Zn as l,G1 as m,cC as n,Gve as o,Y1 as p,Jve as q,w as r,Un as s,Ue as t,IQ as u,vm as v,Qh as w,yW as x,f3 as y,bc as z};
